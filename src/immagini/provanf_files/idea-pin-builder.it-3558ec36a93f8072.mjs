(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[25800,55378,28543,7701,58789,28689,5782,39395,33312,72621,68743,70943,81165,41692,89998,60200,2171,23463,79523,60843,9822,70492,15071,54996,27021,48994,741,29062],{873796:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"BoardCollabInviterFormButtonQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],concreteType:null,kind:"LinkedField",name:"v3GetUserBoardInviteQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null}],type:"V3GetUserBoardInvite",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"BoardCollabInviterFormButtonQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetUserBoardInviteQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetUserBoardInvite",abstractKey:null}],storageKey:null}]},params:{id:"b4cc711b6f7528264247b354116c11866640e7b0e10f2aaeb2c7f1bf468197bc",metadata:{},name:"BoardCollabInviterFormButtonQuery",operationKind:"query",text:null}};s.hash="d83a81c7712d5d973b3cb4fea3c8f258",e.exports=s},611534:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"emails"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"BoardCollabInviterForm_emails_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"emails",variableName:"emails"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"BoardCollabInviterForm_emails_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"88646fd167b035c47b7f2195ee6eaeb70c770276911a5fb25afd980c8376cd48",metadata:{},name:"BoardCollabInviterForm_emails_Mutation",operationKind:"mutation",text:null}};s.hash="d26533862c09ada00dbb435a2b8d52d4",e.exports=s},830075:e=>{var t,i,n,o,s,r,a={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"boardId"},i={defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"},n={defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"BoardCollabInviterForm_users_Mutation",selections:[{alias:null,args:o=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,t,n],kind:"Operation",name:"BoardCollabInviterForm_users_Mutation",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[s,{kind:"InlineFragment",selections:[r],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"0c4d68cd6db5c3065630f04e7d46e0a603920b4c156a20acae1f3c8c2fad9bb2",metadata:{},name:"BoardCollabInviterForm_users_Mutation",operationKind:"mutation",text:null}};a.hash="cabd1f8fb250abc5c66fa2f4d3028495",e.exports=a},758395:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"}],kind:"Fragment",metadata:null,name:"collab_AcceptInvite_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_AcceptInvite_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"781c41132fefa007ebde7bcd8c49840ce1768ed6f6781fd72e3904bd35fb576f",metadata:{},name:"collab_AcceptInvite_Mutation",operationKind:"mutation",text:null}};s.hash="e0cd549ce31635291bd74113393edc53",e.exports=s},847902:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_ApproveInvite_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_ApproveInvite_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"472a584df4a467181ed32ec33d235ef2f2e6d53fdb4c7a43d11156b6d51dcd50",metadata:{},name:"collab_ApproveInvite_Mutation",operationKind:"mutation",text:null}};s.hash="7c32abc79b81b52b7c0d6582f9278b22",e.exports=s},266970:e=>{var t,i,n,o,s,r,a={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"ban"},i={defaultValue:null,kind:"LocalArgument",name:"boardId"},n={defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:[{alias:null,args:o=[{fields:[{kind:"Variable",name:"ban",variableName:"ban"},{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,n,t],kind:"Operation",name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[s,{kind:"InlineFragment",selections:[r],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"ff3059743c1d13d4f1c2ef07e10d2b29925c7b330db4103e55e9e65c380c0ce5",metadata:{},name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",operationKind:"mutation",text:null}};a.hash="a3cb87deead5a06468a3b46652f22daa",e.exports=a},767656:e=>{var t,i,n,o,s,r,a,l,d={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"}],kind:"Fragment",metadata:null,name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[{kind:"InlineFragment",selections:[n,{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null}],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},{kind:"InlineFragment",selections:[n,a={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s,r,l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},l],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},{kind:"InlineFragment",selections:[a],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"83dd1206102cffdd460f8c072df0ca515d27c8fcf3798423f1657afabdf467ac",metadata:{},name:"collab_RemoveBoardCollaborators_Mutation",operationKind:"mutation",text:null}};d.hash="f70efc59a3f6a73e0af36081d8552b3a",e.exports=d},526075:e=>{var t,i,n,o,s,r,a,l,d,c,u={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:s=[o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:s,storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},{kind:"InlineFragment",selections:[n,d={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:c=[o,l],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:c,storageKey:null},r,a,l,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:c,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},{kind:"InlineFragment",selections:[d],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"ff45f353c3246c417487b54a02f0669dbc6c45761df9567395537bf1f7875a9f",metadata:{},name:"collab_RequestToJoin_Mutation",operationKind:"mutation",text:null}};u.hash="38716861de712c68561883b0d58d8bc6",e.exports=u},240684:(e,t,i)=>{i.d(t,{TA:()=>C,ZP:()=>j});var n=i(667294),o=i(263366),s=i(487462),r=i(497326),a=i(875068),l=i(659864),d=i(108679),c=i.n(d);function u(e,t){if(!e){var i=new Error("loadable: "+t);throw i.framesToPop=1,i.name="Invariant Violation",i}}function h(e){console.warn("loadable: "+e)}var p=n.createContext();function _(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var g={initialChunks:{}},m="PENDING",f="REJECTED";var x=function(e){return e};function b(e){var t=e.defaultResolveComponent,i=void 0===t?x:t,d=e.render,h=e.onLoad;function _(e,t){void 0===t&&(t={});var _=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),x={};function b(e){return t.cacheKey?t.cacheKey(e):_.resolve?_.resolve(e):"static"}function y(e,n,o){var s=t.resolveComponent?t.resolveComponent(e,n):i(e);if(t.resolveComponent&&!(0,l.isValidElementType)(s))throw new Error("resolveComponent returned something that is not a React component!");return c()(o,s,{preload:!0}),s}var v,P=function(e){function i(i){var n;return(n=e.call(this,i)||this).state={result:null,error:null,loading:!0,cacheKey:b(i)},u(!i.__chunkExtractor||_.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),i.__chunkExtractor?(!1===t.ssr||(_.requireAsync(i).catch((function(){return null})),n.loadSync(),i.__chunkExtractor.addChunk(_.chunkName(i))),(0,r.Z)(n)):(!1!==t.ssr&&(_.isReady&&_.isReady(i)||_.chunkName&&g.initialChunks[_.chunkName(i)])&&n.loadSync(),n)}(0,a.Z)(i,e),i.getDerivedStateFromProps=function(e,t){var i=b(e);return(0,s.Z)({},t,{cacheKey:i,loading:t.loading||t.cacheKey!==i})};var n=i.prototype;return n.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===f&&this.setCache(),this.state.loading&&this.loadAsync()},n.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},n.componentWillUnmount=function(){this.mounted=!1},n.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},n.getCacheKey=function(){return b(this.props)},n.getCache=function(){return x[this.getCacheKey()]},n.setCache=function(e){void 0===e&&(e=void 0),x[this.getCacheKey()]=e},n.triggerOnLoad=function(){var e=this;h&&setTimeout((function(){h(e.state.result,e.props)}))},n.loadSync=function(){if(this.state.loading)try{var e=y(_.requireSync(this.props),this.props,I);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:_.resolve(this.props),chunkName:_.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},n.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var i=y(t,e.props,{Loadable:I});e.safeSetState({result:i,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},n.resolveAsync=function(){var e=this,t=this.props,i=(t.__chunkExtractor,t.forwardedRef,(0,o.Z)(t,["__chunkExtractor","forwardedRef"])),n=this.getCache();return n||((n=_.requireAsync(i)).status=m,this.setCache(n),n.then((function(){n.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:_.resolve(e.props),chunkName:_.chunkName(e.props),error:t?t.message:t}),n.status=f}))),n},n.render=function(){var e=this.props,i=e.forwardedRef,n=e.fallback,r=(e.__chunkExtractor,(0,o.Z)(e,["forwardedRef","fallback","__chunkExtractor"])),a=this.state,l=a.error,c=a.loading,u=a.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===m)throw this.loadAsync();if(l)throw l;var h=n||t.fallback||null;return c?h:d({fallback:h,result:u,options:t,props:(0,s.Z)({},r,{ref:i})})},i}(n.Component),w=(v=P,function(e){return n.createElement(p.Consumer,null,(function(t){return n.createElement(v,Object.assign({__chunkExtractor:t},e))}))}),I=n.forwardRef((function(e,t){return n.createElement(w,Object.assign({forwardedRef:t},e))}));return I.preload=function(e){_.requireAsync(e)},I.load=function(e){return _.requireAsync(e)},I}return{loadable:_,lazy:function(e,t){return _(e,(0,s.Z)({},t,{suspense:!0}))}}}var y=b({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,i=e.props;return n.createElement(t,i)}}),v=y.loadable,P=y.lazy,w=b({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,i=e.props;return i.children?i.children(t):null}}),I=w.loadable,A=w.lazy,E="undefined"!=typeof window;function C(e,t){void 0===e&&(e=function(){});var i=(void 0===t?{}:t).namespace,n=void 0===i?"":i;if(!E)return h("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(E){var s=_(n),r=document.getElementById(s);if(r){o=JSON.parse(r.textContent);var a=document.getElementById(s+"_ext");if(!a)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(a.textContent).namedChunks.forEach((function(e){g.initialChunks[e]=!0}))}}if(!o)return h("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var l=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,i=t.push.bind(t);function n(){o.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(l||(l=!0,e()))}t.push=function(){i.apply(void 0,arguments),n()},n()})).then(e)}var S=v;S.lib=I,P.lib=A;const j=S},169272:(e,t,i)=>{var n=i(310723),o=[],s=[],r=n.makeRequestCallFromTimer((function(){if(s.length)throw s.shift()}));function a(e){var t;(t=o.length?o.pop():new l).task=e,n(t)}function l(){this.task=null}e.exports=a,l.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(s.push(e),r())}finally{this.task=null,o[o.length]=this}}},310723:(e,t,i)=>{function n(e){s.length||(o(),!0),s[s.length]=e}e.exports=n;var o,s=[],r=0;function a(){for(;r<s.length;){var e=r;if(r+=1,s[e].call(),r>1024){for(var t=0,i=s.length-r;t<i;t++)s[t]=s[t+r];s.length-=r,r=0}}s.length=0,r=0,!1}var l,d,c,u=void 0!==i.g?i.g:self,h=u.MutationObserver||u.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(n,0),i=setInterval(n,50);function n(){clearTimeout(t),clearInterval(i),e()}}}"function"==typeof h?(l=1,d=new h(a),c=document.createTextNode(""),d.observe(c,{characterData:!0}),o=function(){l=-l,c.data=l}):o=p(a),n.requestFlush=o,n.makeRequestCallFromTimer=p},294184:(e,t)=>{var i;!function(){var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var s=typeof i;if("string"===s||"number"===s)e.push(i);else if(Array.isArray(i)&&i.length){var r=o.apply(null,i);r&&e.push(r)}else if("object"===s)for(var a in i)n.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}()},58545:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(983946),o=i(51820),s=i(13882);function r(e,t){(0,s.Z)(2,arguments);var i=(0,n.Z)(t);return(0,o.Z)(e,6e4*i)}},959910:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(619013),o=i(13882);function s(e,t){(0,o.Z)(2,arguments);var i=(0,n.Z)(e),s=(0,n.Z)(t);return i.getTime()-s.getTime()}},969690:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(959910),o=i(13882);function s(e,t){(0,o.Z)(2,arguments);var i=(0,n.Z)(e,t)/6e4;return i>0?Math.floor(i):Math.ceil(i)}},383894:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(619013),o=i(13882);function s(e){(0,o.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(23,59,59,999),t}},69119:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(619013),o=i(13882);function s(e){(0,o.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(0,0,0,0),t}},538334:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(120975),o=i(649610),s=i(116434),r=i(325921),a=i(284125);var l=function(){function e(e,t,i){var s=this;void 0===t&&(t={}),void 0===i&&(i=!1),this.context=t,this.isSetUp=!1,this.handleRefCountChange=function(){var e=s.store.getState().refCount>0;e&&!s.isSetUp?(s.backend.setup(),s.isSetUp=!0):!e&&s.isSetUp&&(s.backend.teardown(),s.isSetUp=!1)};var l=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return n.createStore(o.default,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(i);this.store=l,this.monitor=new r.default(l,new a.default(l)),this.backend=e(this),l.subscribe(this.handleRefCountChange)}return e.prototype.getContext=function(){return this.context},e.prototype.getMonitor=function(){return this.monitor},e.prototype.getBackend=function(){return this.backend},e.prototype.getRegistry=function(){return this.monitor.registry},e.prototype.getActions=function(){var e=this,t=this.store.dispatch;var i=s.default(this);return Object.keys(i).reduce((function(n,o){var s,r=i[o];return n[o]=(s=r,function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o=s.apply(e,i);void 0!==o&&t(o)}),n}),{})},e.prototype.dispatch=function(e){this.store.dispatch(e)},e}();t.default=l},325921:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(640809),o=i(952705),s=i(442520),r=i(441143),a=function(){function e(e,t){this.store=e,this.registry=t}return e.prototype.subscribeToStateChange=function(e,t){var i=this;void 0===t&&(t={handlerIds:void 0});var n=t.handlerIds;r("function"==typeof e,"listener must be a function."),r(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId;return this.store.subscribe((function(){var t=i.store.getState(),r=t.stateId;try{r===o||r===o+1&&!s.areDirty(t.dirtyHandlerIds,n)||e()}finally{o=r}}))},e.prototype.subscribeToOffsetChange=function(e){var t=this;r("function"==typeof e,"listener must be a function.");var i=this.store.getState().dragOffset;return this.store.subscribe((function(){var n=t.store.getState().dragOffset;n!==i&&(i=n,e())}))},e.prototype.canDragSource=function(e){if(!e)return!1;var t=this.registry.getSource(e);return r(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)},e.prototype.canDropOnTarget=function(e){if(!e)return!1;var t=this.registry.getTarget(e);if(r(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var i=this.registry.getTargetType(e),o=this.getItemType();return n.default(i,o)&&t.canDrop(this,e)},e.prototype.isDragging=function(){return Boolean(this.getItemType())},e.prototype.isDraggingSource=function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return r(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))},e.prototype.isOverTarget=function(e,t){if(void 0===t&&(t={shallow:!1}),!e)return!1;var i=t.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(e),s=this.getItemType();if(s&&!n.default(o,s))return!1;var r=this.getTargetIds();if(!r.length)return!1;var a=r.indexOf(e);return i?a===r.length-1:a>-1},e.prototype.getItemType=function(){return this.store.getState().dragOperation.itemType},e.prototype.getItem=function(){return this.store.getState().dragOperation.item},e.prototype.getSourceId=function(){return this.store.getState().dragOperation.sourceId},e.prototype.getTargetIds=function(){return this.store.getState().dragOperation.targetIds},e.prototype.getDropResult=function(){return this.store.getState().dragOperation.dropResult},e.prototype.didDrop=function(){return this.store.getState().dragOperation.didDrop},e.prototype.isSourcePublic=function(){return this.store.getState().dragOperation.isSourcePublic},e.prototype.getInitialClientOffset=function(){return this.store.getState().dragOffset.initialClientOffset},e.prototype.getInitialSourceClientOffset=function(){return this.store.getState().dragOffset.initialSourceClientOffset},e.prototype.getClientOffset=function(){return this.store.getState().dragOffset.clientOffset},e.prototype.getSourceClientOffset=function(){return o.getSourceClientOffset(this.store.getState().dragOffset)},e.prototype.getDifferenceFromInitialOffset=function(){return o.getDifferenceFromInitialOffset(this.store.getState().dragOffset)},e}();t.default=a},284125:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(4963),o=i(547227),s=i(556141),r=i(834314),a=i(441143),l=i(169272);function d(e){switch(e[0]){case"S":return s.HandlerRole.SOURCE;case"T":return s.HandlerRole.TARGET;default:a(!1,"Cannot parse handler ID: "+e)}}function c(e,t){var i=e.entries(),n=!1;do{var o=i.next(),s=o.done;if(o.value[1]===t)return!0;n=s}while(!n);return!1}var u=function(){function e(e){this.store=e,this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null}return e.prototype.addSource=function(e,t){r.validateType(e),r.validateSourceContract(t);var i=this.addHandler(s.HandlerRole.SOURCE,e,t);return this.store.dispatch(n.addSource(i)),i},e.prototype.addTarget=function(e,t){r.validateType(e,!0),r.validateTargetContract(t);var i=this.addHandler(s.HandlerRole.TARGET,e,t);return this.store.dispatch(n.addTarget(i)),i},e.prototype.containsHandler=function(e){return c(this.dragSources,e)||c(this.dropTargets,e)},e.prototype.getSource=function(e,t){return void 0===t&&(t=!1),a(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)},e.prototype.getTarget=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)},e.prototype.getSourceType=function(e){return a(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)},e.prototype.getTargetType=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)},e.prototype.isSourceId=function(e){return d(e)===s.HandlerRole.SOURCE},e.prototype.isTargetId=function(e){return d(e)===s.HandlerRole.TARGET},e.prototype.removeSource=function(e){var t=this;a(this.getSource(e),"Expected an existing source."),this.store.dispatch(n.removeSource(e)),l((function(){t.dragSources.delete(e),t.types.delete(e)}))},e.prototype.removeTarget=function(e){a(this.getTarget(e),"Expected an existing target."),this.store.dispatch(n.removeTarget(e)),this.dropTargets.delete(e),this.types.delete(e)},e.prototype.pinSource=function(e){var t=this.getSource(e);a(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t},e.prototype.unpinSource=function(){a(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null},e.prototype.addHandler=function(e,t,i){var n=function(e){var t=o.default().toString();switch(e){case s.HandlerRole.SOURCE:return"S"+t;case s.HandlerRole.TARGET:return"T"+t;default:throw new Error("Unknown Handler Role: "+e)}}(e);return this.types.set(n,t),e===s.HandlerRole.SOURCE?this.dragSources.set(n,i):e===s.HandlerRole.TARGET&&this.dropTargets.set(n,i),n},e}();t.default=u},84554:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(446714),o=i(315033),s=i(441143),r=i(59980),a={type:r.INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};t.default=function(e){return function(t,i){void 0===t&&(t=[]),void 0===i&&(i={publishSource:!0});var l=i.publishSource,d=void 0===l||l,c=i.clientOffset,u=i.getSourceClientOffset,h=e.getMonitor(),p=e.getRegistry();e.dispatch(n.setClientOffset(c)),function(e,t,i){s(!t.isDragging(),"Cannot call beginDrag while dragging.");for(var n=0,o=e;n<o.length;n++){var r=o[n];s(i.getSource(r),"Expected sourceIds to be registered.")}}(t,h,p);var _=function(e,t){for(var i=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){i=e[n];break}return i}(t,h);if(null!==_){var g=null;c&&(!function(e){s("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(u),g=u(_)),e.dispatch(n.setClientOffset(c,g));var m=p.getSource(_).beginDrag(h,_);!function(e){s(o.isObject(e),"Item must be an object.")}(m),p.pinSource(_);var f=p.getSourceType(_);return{type:r.BEGIN_DRAG,payload:{itemType:f,item:m,sourceId:_,clientOffset:c||null,sourceClientOffset:g||null,isSourcePublic:!!d}}}e.dispatch(a)}}},676402:function(e,t,i){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(59980),s=i(315033),r=i(441143);t.default=function(e){return function(t){void 0===t&&(t={});var i=e.getMonitor(),a=e.getRegistry();!function(e){r(e.isDragging(),"Cannot call drop while not dragging."),r(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(i),function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(i).forEach((function(l,d){var c=function(e,t,i,n){var o=i.getTarget(e),a=o?o.drop(n,e):void 0;(function(e){r(void 0===e||s.isObject(e),"Drop result must either be an object or undefined.")})(a),void 0===a&&(a=0===t?{}:n.getDropResult());return a}(l,d,a,i),u={type:o.DROP,payload:{dropResult:n({},t,c)}};e.dispatch(u)}))}}},852126:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(59980),o=i(441143);t.default=function(e){return function(){var t=e.getMonitor(),i=e.getRegistry();!function(e){o(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var s=t.getSourceId();return i.getSource(s,!0).endDrag(t,s),i.unpinSource(),{type:n.END_DRAG}}}},645140:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(640809),o=i(59980),s=i(441143);t.default=function(e){return function(t,i){var r=(void 0===i?{}:i).clientOffset;!function(e){s(Array.isArray(e),"Expected targetIds to be an array.")}(t);var a=t.slice(0),l=e.getMonitor(),d=e.getRegistry();return function(e,t,i){s(t.isDragging(),"Cannot call hover while not dragging."),s(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var o=e[n];s(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var r=i.getTarget(o);s(r,"Expected targetIds to be registered.")}}(a,l,d),function(e,t,i){for(var o=e.length-1;o>=0;o--){var s=e[o],r=t.getTargetType(s);n.default(r,i)||e.splice(o,1)}}(a,d,l.getItemType()),function(e,t,i){for(var n=0,o=e;n<o.length;n++){var s=o[n];i.getTarget(s).hover(t,s)}}(a,l,d),{type:o.HOVER,payload:{targetIds:a,clientOffset:r||null}}}}},116434:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(84554),o=i(86045),s=i(645140),r=i(676402),a=i(852126);!function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(59980)),t.default=function(e){return{beginDrag:n.default(e),publishDragSource:o.default(e),hover:s.default(e),drop:r.default(e),endDrag:a.default(e)}}},446714:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(59980);t.setClientOffset=function(e,t){return{type:n.INIT_COORDS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}},86045:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(59980);t.default=function(e){return function(){if(e.getMonitor().isDragging())return{type:n.PUBLISH_DRAG_SOURCE}}}},59980:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_COORDS="dnd-core/INIT_COORDS",t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",t.HOVER="dnd-core/HOVER",t.DROP="dnd-core/DROP",t.END_DRAG="dnd-core/END_DRAG"},4963:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_SOURCE="dnd-core/ADD_SOURCE",t.ADD_TARGET="dnd-core/ADD_TARGET",t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",t.REMOVE_TARGET="dnd-core/REMOVE_TARGET",t.addSource=function(e){return{type:t.ADD_SOURCE,payload:{sourceId:e}}},t.addTarget=function(e){return{type:t.ADD_TARGET,payload:{targetId:e}}},t.removeSource=function(e){return{type:t.REMOVE_SOURCE,payload:{sourceId:e}}},t.removeTarget=function(e){return{type:t.REMOVE_TARGET,payload:{targetId:e}}}},834314:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(441143);t.validateSourceContract=function(e){n("function"==typeof e.canDrag,"Expected canDrag to be a function."),n("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),n("function"==typeof e.endDrag,"Expected endDrag to be a function.")},t.validateTargetContract=function(e){n("function"==typeof e.canDrop,"Expected canDrop to be a function."),n("function"==typeof e.hover,"Expected hover to be a function."),n("function"==typeof e.drop,"Expected beginDrag to be a function.")},t.validateType=function e(t,i){i&&Array.isArray(t)?t.forEach((function(t){return e(t,!1)})):n("string"==typeof t||"symbol"==typeof t,i?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}},294662:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(538334);t.createDragDropManager=function(e,t,i){return new n.default(e,t,i)}},720369:(e,t,i)=>{function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(556141)),n(i(294662))},556141:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(t.HandlerRole||(t.HandlerRole={}))},354014:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(116434),o=i(4963),s=i(171939),r=i(442520),a=i(315033);t.default=function(e,t){switch(void 0===e&&(e=r.NONE),t.type){case n.HOVER:break;case o.ADD_SOURCE:case o.ADD_TARGET:case o.REMOVE_TARGET:case o.REMOVE_SOURCE:return r.NONE;case n.BEGIN_DRAG:case n.PUBLISH_DRAG_SOURCE:case n.END_DRAG:case n.DROP:default:return r.ALL}var i=t.payload,l=i.targetIds,d=void 0===l?[]:l,c=i.prevTargetIds,u=void 0===c?[]:c,h=a.xor(d,u);if(!(h.length>0||!s.areArraysEqual(d,u)))return r.NONE;var p=u[u.length-1],_=d[d.length-1];return p!==_&&(p&&h.push(p),_&&h.push(_)),h}},14095:function(e,t,i){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(116434),s=i(171939),r={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};t.default=function(e,t){void 0===e&&(e=r);var i=t.payload;switch(t.type){case o.INIT_COORDS:case o.BEGIN_DRAG:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case o.HOVER:return s.areCoordsEqual(e.clientOffset,i.clientOffset)?e:n({},e,{clientOffset:i.clientOffset});case o.END_DRAG:case o.DROP:return r;default:return e}}},345596:function(e,t,i){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(116434),s=i(4963),r=i(315033),a={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};t.default=function(e,t){void 0===e&&(e=a);var i=t.payload;switch(t.type){case o.BEGIN_DRAG:return n({},e,{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case o.PUBLISH_DRAG_SOURCE:return n({},e,{isSourcePublic:!0});case o.HOVER:return n({},e,{targetIds:i.targetIds});case s.REMOVE_TARGET:return-1===e.targetIds.indexOf(i.targetId)?e:n({},e,{targetIds:r.without(e.targetIds,i.targetId)});case o.DROP:return n({},e,{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case o.END_DRAG:return n({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}},649610:function(e,t,i){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(14095),s=i(345596),r=i(378508),a=i(354014),l=i(938910),d=i(315033);t.default=function(e,t){return void 0===e&&(e={}),{dirtyHandlerIds:a.default(e.dirtyHandlerIds,{type:t.type,payload:n({},t.payload,{prevTargetIds:d.get(e,"dragOperation.targetIds",[])})}),dragOffset:o.default(e.dragOffset,t),refCount:r.default(e.refCount,t),dragOperation:s.default(e.dragOperation,t),stateId:l.default(e.stateId)}}},378508:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(4963);t.default=function(e,t){switch(void 0===e&&(e=0),t.type){case n.ADD_SOURCE:case n.ADD_TARGET:return e+1;case n.REMOVE_SOURCE:case n.REMOVE_TARGET:return e-1;default:return e}}},938910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e=0),e+1}},952705:(e,t)=>{function i(e,t){return{x:e.x+t.x,y:e.y+t.y}}function n(e,t){return{x:e.x-t.x,y:e.y-t.y}}Object.defineProperty(t,"__esModule",{value:!0}),t.add=i,t.subtract=n,t.getSourceClientOffset=function(e){var t=e.clientOffset,o=e.initialClientOffset,s=e.initialSourceClientOffset;return t&&o&&s?n(i(t,s),o):null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,i=e.initialClientOffset;return t&&i?n(t,i):null}},442520:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(315033);t.NONE=[],t.ALL=[],t.NONE.__IS_NONE__=!0,t.ALL.__IS_ALL__=!0,t.areDirty=function(e,i){return e!==t.NONE&&(e===t.ALL||void 0===i||n.intersection(i,e).length>0)}},315033:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,i){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:i||null}),e)},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.isString=function(e){return"string"==typeof e},t.isObject=function(e){return"object"==typeof e},t.xor=function(e,t){var i=new Map,n=function(e){return i.set(e,i.has(e)?i.get(e)+1:1)};e.forEach(n),t.forEach(n);var o=[];return i.forEach((function(e,t){1===e&&o.push(t)})),o},t.intersection=function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))}},171939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.strictEquality=function(e,t){return e===t},t.areCoordsEqual=function(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)},t.areArraysEqual=function(e,i,n){if(void 0===n&&(n=t.strictEquality),e.length!==i.length)return!1;for(var o=0;o<e.length;++o)if(!n(e[o],i[o]))return!1;return!0}},547227:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.default=function(){return i++}},640809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}},120975:(e,t,i)=>{i.r(t),i.d(t,{__DO_NOT_USE__ActionTypes:()=>s,applyMiddleware:()=>m,bindActionCreators:()=>u,combineReducers:()=>d,compose:()=>g,createStore:()=>a});var n=i(98123),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function r(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function a(e,t,i){var o;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,d=t,c=[],u=c,h=!1;function p(){u===c&&(u=c.slice())}function _(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return d}function g(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),u.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var i=u.indexOf(e);u.splice(i,1),c=null}}}function m(e){if(!r(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,d=l(d,e)}finally{h=!1}for(var t=c=u,i=0;i<t.length;i++){(0,t[i])()}return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,m({type:s.REPLACE})}function x(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function i(){e.next&&e.next(_())}return i(),{unsubscribe:t(i)}}})[n.Z]=function(){return this},e}return m({type:s.INIT}),(o={dispatch:m,subscribe:g,getState:_,replaceReducer:f})[n.Z]=x,o}function l(e,t){var i=t&&t.type;return"Given "+(i&&'action "'+String(i)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function d(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(i[o]=e[o])}var r,a=Object.keys(i);try{!function(e){Object.keys(e).forEach((function(t){var i=e[t];if(void 0===i(void 0,{type:s.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===i(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(i)}catch(d){r=d}return function(e,t){if(void 0===e&&(e={}),r)throw r;for(var n=!1,o={},s=0;s<a.length;s++){var d=a[s],c=i[d],u=e[d],h=c(u,t);if(void 0===h){var p=l(d,t);throw new Error(p)}o[d]=h,n=n||h!==u}return(n=n||a.length!==Object.keys(e).length)?o:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var i={};for(var n in e){var o=e[n];"function"==typeof o&&(i[n]=c(o,t))}return i}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t){var i=Object.keys(e);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(e)),t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(i,!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function m(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:i.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map((function(e){return e(o)}));return _({},i,{dispatch:n=g.apply(void 0,s)(i.dispatch)})}}}},701305:e=>{var t=[],i=[];function n(e,t,i,o){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;var s=Object.prototype.toString,r=s.call(e);if(r!=s.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return!isNaN(e)&&!isNaN(t)&&e==Number(t);case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}for(var a=i.length;a--;)if(i[a]==e)return o[a]==t;i.push(e),o.push(t);var l=0;if("[object Array]"===r){if((l=e.length)!==t.length)return!1;for(;l--;)if(!n(e[l],t[l],i,o))return!1}else{if(e.constructor!==t.constructor)return!1;if(e.hasOwnProperty("valueOf")&&t.hasOwnProperty("valueOf"))return e.valueOf()==t.valueOf();var d=Object.keys(e);if(d.length!=Object.keys(t).length)return!1;for(var c=0;c<d.length;c++)if(!n(e[d[c]],t[d[c]],i,o))return!1}return i.pop(),o.pop(),!0}e.exports=function(e,o){var s=t.length?t.pop():[],r=i.length?i.pop():[],a=n(e,o,s,r);return s.length=0,r.length=0,t.push(s),i.push(r),a}},60139:e=>{function t(e){return function(){return e}}var i=function(){};i.thatReturns=t,i.thatReturnsFalse=t(!1),i.thatReturnsTrue=t(!0),i.thatReturnsNull=t(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},663620:(e,t,i)=>{var n=i(60139);e.exports=n},655340:e=>{e.exports="https://s.pinimg.com/webapp/birthday-4428bee8.png"},367139:e=>{e.exports="https://s.pinimg.com/webapp/cropper-fb5d0473.png"},844889:e=>{e.exports="https://s.pinimg.com/webapp/logo-7f5cc1ae.png"},825444:e=>{e.exports="https://s.pinimg.com/webapp/pin-a407120e.png"},121313:e=>{e.exports="https://s.pinimg.com/webapp/onboarding_multiPin-400ce8d9.png"},556213:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_01-3c400e5c.png"},530137:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_02-1b06bf7a.png"},226474:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_03-4756334c.png"},326880:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_04-c66ec495.png"},351267:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_05-f1db39d2.png"},537347:e=>{!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function o(e){var t=e.a.offsetWidth,i=t+100;return e.f.style.width=i+"px",e.c.scrollLeft=i,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function s(e,i){function n(){var e=s;o(e)&&e.a.parentNode&&i(e.g)}var s=e;t(e.b,n),t(e.c,n),o(e)}function r(e,t){var i=t||{};this.family=e,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var a=null,l=null,d=null,c=null;function u(){return null===c&&(c=!!document.fonts),c}function h(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}d=""!==e.style.font}return d}function p(e,t){return[e.style,e.weight,h()?e.stretch:"","100px",t].join(" ")}r.prototype.load=function(e,t){var o=this,r=e||"BESbswy",d=0,c=t||3e3,h=(new Date).getTime();return new Promise((function(e,t){if(u()&&!function(){if(null===l)if(u()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!e&&603>parseInt(e[1],10)}else l=!1;return l}()){var _=new Promise((function(e,t){!function i(){(new Date).getTime()-h>=c?t(Error(c+"ms timeout exceeded")):document.fonts.load(p(o,'"'+o.family+'"'),r).then((function(t){1<=t.length?e():setTimeout(i,25)}),t)}()})),g=new Promise((function(e,t){d=setTimeout((function(){t(Error(c+"ms timeout exceeded"))}),c)}));Promise.race([g,_]).then((function(){clearTimeout(d),e(o)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function l(){var t;(t=-1!=m&&-1!=f||-1!=m&&-1!=x||-1!=f&&-1!=x)&&((t=m!=f&&m!=x&&f!=x)||(null===a&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=a&&(m==b&&f==b&&x==b||m==y&&f==y&&x==y||m==v&&f==v&&x==v)),t=!t),t&&(P.parentNode&&P.parentNode.removeChild(P),clearTimeout(d),e(o))}var u=new i(r),_=new i(r),g=new i(r),m=-1,f=-1,x=-1,b=-1,y=-1,v=-1,P=document.createElement("div");P.dir="ltr",n(u,p(o,"sans-serif")),n(_,p(o,"serif")),n(g,p(o,"monospace")),P.appendChild(u.a),P.appendChild(_.a),P.appendChild(g.a),document.body.appendChild(P),b=u.a.offsetWidth,y=_.a.offsetWidth,v=g.a.offsetWidth,function e(){if((new Date).getTime()-h>=c)P.parentNode&&P.parentNode.removeChild(P),t(Error(c+"ms timeout exceeded"));else{var i=document.hidden;!0!==i&&void 0!==i||(m=u.a.offsetWidth,f=_.a.offsetWidth,x=g.a.offsetWidth,l()),d=setTimeout(e,50)}}(),s(u,(function(e){m=e,l()})),n(u,p(o,'"'+o.family+'",sans-serif')),s(_,(function(e){f=e,l()})),n(_,p(o,'"'+o.family+'",serif')),s(g,(function(e){x=e,l()})),n(g,p(o,'"'+o.family+'",monospace'))}))}))},e.exports=r}()},108679:(e,t,i)=>{var n=i(121296),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?r:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=r;var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(_){var o=p(i);o&&o!==_&&e(t,o,n)}var r=c(i);u&&(r=r.concat(u(i)));for(var a=l(t),g=l(i),m=0;m<r.length;++m){var f=r[m];if(!(s[f]||n&&n[f]||g&&g[f]||a&&a[f])){var x=h(i,f);try{d(t,f,x)}catch(b){}}}}return t}},396103:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case l:return e;default:return t}}case g:case _:case o:return t}}}function f(e){return m(e)===u}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=_,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===r||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h)},t.isAsyncMode=function(e){return f(e)||m(e)===c},t.isConcurrentMode=f,t.isContextConsumer=function(e){return m(e)===d},t.isContextProvider=function(e){return m(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return m(e)===h},t.isFragment=function(e){return m(e)===s},t.isLazy=function(e){return m(e)===g},t.isMemo=function(e){return m(e)===_},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===a},t.isStrictMode=function(e){return m(e)===r},t.isSuspense=function(e){return m(e)===p}},121296:(e,t,i)=>{e.exports=i(396103)},288709:e=>{e.exports=/[\-0-9a-z\xB7\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0135\u0137\u0138\u013A\u013C\u013E\u0142\u0144\u0146\u0148\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BB\u01BD-\u01C3\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u02AF\u02B9-\u02C1\u02C6-\u02D1\u02EC\u02EE\u0300-\u033F\u0342\u0346-\u034E\u0350-\u036F\u0371\u0373\u0375\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF\u03F3\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u0483-\u0487\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0559\u0561-\u0586\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F4\u0610-\u061A\u0620-\u063F\u0641-\u0669\u066E-\u0674\u0679-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u0800-\u082D\u0840-\u085B\u0900-\u0957\u0960-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09E0-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A35\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A5C\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E32\u0E34-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB2\u0EB4-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F00\u0F0B\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F42\u0F44-\u0F47\u0F49-\u0F4C\u0F4E-\u0F51\u0F53-\u0F56\u0F58-\u0F5B\u0F5D-\u0F68\u0F6A-\u0F6C\u0F71\u0F72\u0F74\u0F7A-\u0F80\u0F82-\u0F84\u0F86-\u0F92\u0F94-\u0F97\u0F99-\u0F9C\u0F9E-\u0FA1\u0FA3-\u0FA6\u0FA8-\u0FAB\u0FAD-\u0FB8\u0FBA-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10D0-\u10FA\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BAA\u1BAE-\u1BB9\u1BC0-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF2\u1D00-\u1D2B\u1D2F\u1D3B\u1D4E\u1D6B-\u1D77\u1D79-\u1D9A\u1DC0-\u1DE6\u1DFC-\u1DFF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E99\u1E9C\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70\u1F72\u1F74\u1F76\u1F78\u1F7A\u1F7C\u1FB0\u1FB1\u1FB6\u1FC6\u1FD0-\u1FD2\u1FD6\u1FD7\u1FE0-\u1FE2\u1FE4-\u1FE7\u1FF6\u200C\u200D\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE-\u2CF1\u2D00-\u2D25\u2D30-\u2D65\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3041-\u3096\u3099\u309A\u309D\u309E\u30A1-\u30FE\u3105-\u312D\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D-\uA66F\uA67C\uA67D\uA67F\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA6A0-\uA6E5\uA6F0\uA6F1\uA717-\uA71F\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA788\uA78C\uA78E\uA791\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29\uFB1E\uFE20-\uFE26\uFE73]|\uD800[\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD802[\uDC40-\uDC55\uDD00-\uDD15\uDD20-\uDD39\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC80-\uDCBA]|\uD808[\uDC00-\uDF6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38]|\uD82C[\uDC00\uDC01]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]/},618552:(e,t,i)=>{var n=i(610852)(i(555639),"DataView");e.exports=n},853818:(e,t,i)=>{var n=i(610852)(i(555639),"Promise");e.exports=n},458525:(e,t,i)=>{var n=i(610852)(i(555639),"Set");e.exports=n},288668:(e,t,i)=>{var n=i(883369),o=i(90619),s=i(572385);function r(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new n;++t<i;)this.add(e[t])}r.prototype.add=r.prototype.push=o,r.prototype.has=s,e.exports=r},562705:(e,t,i)=>{var n=i(555639).Symbol;e.exports=n},70577:(e,t,i)=>{var n=i(610852)(i(555639),"WeakMap");e.exports=n},896874:e=>{e.exports=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}},477412:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}},234963:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,o=0,s=[];++i<n;){var r=e[i];t(r,i,e)&&(s[o++]=r)}return s}},862488:e=>{e.exports=function(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}},282908:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}},286556:(e,t,i)=>{var n=i(789465),o=i(977813);e.exports=function(e,t,i){(void 0!==i&&!o(e[t],i)||void 0===i&&!(t in e))&&n(e,t,i)}},234865:(e,t,i)=>{var n=i(789465),o=i(977813),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){var r=e[t];s.call(e,t)&&o(r,i)&&(void 0!==i||t in e)||n(e,t,i)}},744037:(e,t,i)=>{var n=i(698363),o=i(3674);e.exports=function(e,t){return e&&n(t,o(t),e)}},163886:(e,t,i)=>{var n=i(698363),o=i(481704);e.exports=function(e,t){return e&&n(t,o(t),e)}},789465:(e,t,i)=>{var n=i(538777);e.exports=function(e,t,i){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}},285990:(e,t,i)=>{var n=i(646384),o=i(477412),s=i(234865),r=i(744037),a=i(163886),l=i(364626),d=i(200278),c=i(318805),u=i(201911),h=i(458234),p=i(946904),_=i(664160),g=i(43824),m=i(529148),f=i(738517),x=i(701469),b=i(644144),y=i(356688),v=i(513218),P=i(472928),w=i(3674),I=i(481704),A="[object Arguments]",E="[object Function]",C="[object Object]",S={};S[A]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S[C]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S[E]=S["[object WeakMap]"]=!1,e.exports=function e(t,i,j,T,D,k){var z,O=1&i,R=2&i,L=4&i;if(j&&(z=D?j(t,T,D,k):j(t)),void 0!==z)return z;if(!v(t))return t;var M=x(t);if(M){if(z=g(t),!O)return d(t,z)}else{var B=_(t),N=B==E||"[object GeneratorFunction]"==B;if(b(t))return l(t,O);if(B==C||B==A||N&&!D){if(z=R||N?{}:f(t),!O)return R?u(t,a(z,t)):c(t,r(z,t))}else{if(!S[B])return D?t:{};z=m(t,B,O)}}k||(k=new n);var F=k.get(t);if(F)return F;k.set(t,z),P(t)?t.forEach((function(n){z.add(e(n,i,j,n,t,k))})):y(t)&&t.forEach((function(n,o){z.set(o,e(n,i,j,o,t,k))}));var Z=M?void 0:(L?R?p:h:R?I:w)(t);return o(Z||t,(function(n,o){Z&&(n=t[o=n]),s(z,o,e(n,i,j,o,t,k))})),z}},603118:(e,t,i)=>{var n=i(513218),o=Object.create,s=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();e.exports=s},989881:(e,t,i)=>{var n=i(247816),o=i(899291)(n);e.exports=o},121078:(e,t,i)=>{var n=i(862488),o=i(137285);e.exports=function e(t,i,s,r,a){var l=-1,d=t.length;for(s||(s=o),a||(a=[]);++l<d;){var c=t[l];i>0&&s(c)?i>1?e(c,i-1,s,r,a):n(a,c):r||(a[a.length]=c)}return a}},228483:(e,t,i)=>{var n=i(225063)();e.exports=n},247816:(e,t,i)=>{var n=i(228483),o=i(3674);e.exports=function(e,t){return e&&n(e,t,o)}},297786:(e,t,i)=>{var n=i(671811),o=i(240327);e.exports=function(e,t){for(var i=0,s=(t=n(t,e)).length;null!=e&&i<s;)e=e[o(t[i++])];return i&&i==s?e:void 0}},868866:(e,t,i)=>{var n=i(862488),o=i(701469);e.exports=function(e,t,i){var s=t(e);return o(e)?s:n(s,i(e))}},644239:(e,t,i)=>{var n=i(562705),o=i(789607),s=i(902333),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?o(e):s(e)}},200013:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},690939:(e,t,i)=>{var n=i(902492),o=i(637005);e.exports=function e(t,i,s,r,a){return t===i||(null==t||null==i||!o(t)&&!o(i)?t!=t&&i!=i:n(t,i,s,r,e,a))}},902492:(e,t,i)=>{var n=i(646384),o=i(967114),s=i(518351),r=i(916096),a=i(664160),l=i(701469),d=i(644144),c=i(936719),u="[object Arguments]",h="[object Array]",p="[object Object]",_=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,g,m,f){var x=l(e),b=l(t),y=x?h:a(e),v=b?h:a(t),P=(y=y==u?p:y)==p,w=(v=v==u?p:v)==p,I=y==v;if(I&&d(e)){if(!d(t))return!1;x=!0,P=!1}if(I&&!P)return f||(f=new n),x||c(e)?o(e,t,i,g,m,f):s(e,t,y,i,g,m,f);if(!(1&i)){var A=P&&_.call(e,"__wrapped__"),E=w&&_.call(t,"__wrapped__");if(A||E){var C=A?e.value():e,S=E?t.value():t;return f||(f=new n),m(C,S,i,g,f)}}return!!I&&(f||(f=new n),r(e,t,i,g,m,f))}},225588:(e,t,i)=>{var n=i(664160),o=i(637005);e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},702958:(e,t,i)=>{var n=i(646384),o=i(690939);e.exports=function(e,t,i,s){var r=i.length,a=r,l=!s;if(null==e)return!a;for(e=Object(e);r--;){var d=i[r];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++r<a;){var c=(d=i[r])[0],u=e[c],h=d[1];if(l&&d[2]){if(void 0===u&&!(c in e))return!1}else{var p=new n;if(s)var _=s(u,h,c,e,t,p);if(!(void 0===_?o(h,u,3,s,p):_))return!1}}return!0}},829221:(e,t,i)=>{var n=i(664160),o=i(637005);e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},267206:(e,t,i)=>{var n=i(191573),o=i(716432),s=i(406557),r=i(701469),a=i(139601);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?r(e)?o(e[0],e[1]):n(e):a(e)}},400280:(e,t,i)=>{var n=i(225726),o=i(86916),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var i in Object(e))s.call(e,i)&&"constructor"!=i&&t.push(i);return t}},710313:(e,t,i)=>{var n=i(513218),o=i(225726),s=i(133498),r=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=o(e),i=[];for(var a in e)("constructor"!=a||!t&&r.call(e,a))&&i.push(a);return i}},269199:(e,t,i)=>{var n=i(989881),o=i(498612);e.exports=function(e,t){var i=-1,s=o(e)?Array(e.length):[];return n(e,(function(e,n,o){s[++i]=t(e,n,o)})),s}},191573:(e,t,i)=>{var n=i(702958),o=i(301499),s=i(542634);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(i){return i===e||n(i,e,t)}}},716432:(e,t,i)=>{var n=i(690939),o=i(227361),s=i(379095),r=i(115403),a=i(689162),l=i(542634),d=i(240327);e.exports=function(e,t){return r(e)&&a(t)?l(d(e),t):function(i){var r=o(i,e);return void 0===r&&r===t?s(i,e):n(t,r,3)}}},642980:(e,t,i)=>{var n=i(646384),o=i(286556),s=i(228483),r=i(559783),a=i(513218),l=i(481704),d=i(636390);e.exports=function e(t,i,c,u,h){t!==i&&s(i,(function(s,l){if(h||(h=new n),a(s))r(t,i,l,c,e,u,h);else{var p=u?u(d(t,l),s,l+"",t,i,h):void 0;void 0===p&&(p=s),o(t,l,p)}}),l)}},559783:(e,t,i)=>{var n=i(286556),o=i(364626),s=i(477133),r=i(200278),a=i(738517),l=i(135694),d=i(701469),c=i(229246),u=i(644144),h=i(623560),p=i(513218),_=i(968630),g=i(936719),m=i(636390),f=i(959881);e.exports=function(e,t,i,x,b,y,v){var P=m(e,i),w=m(t,i),I=v.get(w);if(I)n(e,i,I);else{var A=y?y(P,w,i+"",e,t,v):void 0,E=void 0===A;if(E){var C=d(w),S=!C&&u(w),j=!C&&!S&&g(w);A=w,C||S||j?d(P)?A=P:c(P)?A=r(P):S?(E=!1,A=o(w,!0)):j?(E=!1,A=s(w,!0)):A=[]:_(w)||l(w)?(A=P,l(P)?A=f(P):p(P)&&!h(P)||(A=a(w))):E=!1}E&&(v.set(w,A),b(A,w,x,y,v),v.delete(w)),n(e,i,A)}}},882689:(e,t,i)=>{var n=i(829932),o=i(297786),s=i(267206),r=i(269199),a=i(571131),l=i(307518),d=i(285022),c=i(406557),u=i(701469);e.exports=function(e,t,i){t=t.length?n(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[c];var h=-1;t=n(t,l(s));var p=r(e,(function(e,i,o){return{criteria:n(t,(function(t){return t(e)})),index:++h,value:e}}));return a(p,(function(e,t){return d(e,t,i)}))}},840371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},379152:(e,t,i)=>{var n=i(297786);e.exports=function(e){return function(t){return n(t,e)}}},105976:(e,t,i)=>{var n=i(406557),o=i(545357),s=i(430061);e.exports=function(e,t){return s(o(e,t,n),e+"")}},356560:(e,t,i)=>{var n=i(575703),o=i(538777),s=i(406557),r=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=r},571131:e=>{e.exports=function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}},727561:(e,t,i)=>{var n=i(567990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},274757:e=>{e.exports=function(e,t){return e.has(t)}},671811:(e,t,i)=>{var n=i(701469),o=i(115403),s=i(555514),r=i(479833);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:s(r(e))}},274318:(e,t,i)=>{var n=i(611149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},364626:(e,t,i)=>{e=i.nmd(e);var n=i(555639),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,r=s&&s.exports===o?n.Buffer:void 0,a=r?r.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var i=e.length,n=a?a(i):new e.constructor(i);return e.copy(n),n}},257157:(e,t,i)=>{var n=i(274318);e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}},593147:e=>{var t=/\w*$/;e.exports=function(e){var i=new e.constructor(e.source,t.exec(e));return i.lastIndex=e.lastIndex,i}},540419:(e,t,i)=>{var n=i(562705),o=n?n.prototype:void 0,s=o?o.valueOf:void 0;e.exports=function(e){return s?Object(s.call(e)):{}}},477133:(e,t,i)=>{var n=i(274318);e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}},626393:(e,t,i)=>{var n=i(733448);e.exports=function(e,t){if(e!==t){var i=void 0!==e,o=null===e,s=e==e,r=n(e),a=void 0!==t,l=null===t,d=t==t,c=n(t);if(!l&&!c&&!r&&e>t||r&&a&&d&&!l&&!c||o&&a&&d||!i&&d||!s)return 1;if(!o&&!r&&!c&&e<t||c&&i&&s&&!o&&!r||l&&i&&s||!a&&s||!d)return-1}return 0}},285022:(e,t,i)=>{var n=i(626393);e.exports=function(e,t,i){for(var o=-1,s=e.criteria,r=t.criteria,a=s.length,l=i.length;++o<a;){var d=n(s[o],r[o]);if(d)return o>=l?d:d*("desc"==i[o]?-1:1)}return e.index-t.index}},200278:e=>{e.exports=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}},698363:(e,t,i)=>{var n=i(234865),o=i(789465);e.exports=function(e,t,i,s){var r=!i;i||(i={});for(var a=-1,l=t.length;++a<l;){var d=t[a],c=s?s(i[d],e[d],d,i,e):void 0;void 0===c&&(c=e[d]),r?o(i,d,c):n(i,d,c)}return i}},318805:(e,t,i)=>{var n=i(698363),o=i(799551);e.exports=function(e,t){return n(e,o(e),t)}},201911:(e,t,i)=>{var n=i(698363),o=i(151442);e.exports=function(e,t){return n(e,o(e),t)}},321463:(e,t,i)=>{var n=i(105976),o=i(816612);e.exports=function(e){return n((function(t,i){var n=-1,s=i.length,r=s>1?i[s-1]:void 0,a=s>2?i[2]:void 0;for(r=e.length>3&&"function"==typeof r?(s--,r):void 0,a&&o(i[0],i[1],a)&&(r=s<3?void 0:r,s=1),t=Object(t);++n<s;){var l=i[n];l&&e(t,l,n,r)}return t}))}},899291:(e,t,i)=>{var n=i(498612);e.exports=function(e,t){return function(i,o){if(null==i)return i;if(!n(i))return e(i,o);for(var s=i.length,r=t?s:-1,a=Object(i);(t?r--:++r<s)&&!1!==o(a[r],r,a););return i}}},225063:e=>{e.exports=function(e){return function(t,i,n){for(var o=-1,s=Object(t),r=n(t),a=r.length;a--;){var l=r[e?a:++o];if(!1===i(s[l],l,s))break}return t}}},538777:(e,t,i)=>{var n=i(610852),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=o},967114:(e,t,i)=>{var n=i(288668),o=i(282908),s=i(274757);e.exports=function(e,t,i,r,a,l){var d=1&i,c=e.length,u=t.length;if(c!=u&&!(d&&u>c))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var _=-1,g=!0,m=2&i?new n:void 0;for(l.set(e,t),l.set(t,e);++_<c;){var f=e[_],x=t[_];if(r)var b=d?r(x,f,_,t,e,l):r(f,x,_,e,t,l);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!o(t,(function(e,t){if(!s(m,t)&&(f===e||a(f,e,i,r,l)))return m.push(t)}))){g=!1;break}}else if(f!==x&&!a(f,x,i,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},518351:(e,t,i)=>{var n=i(562705),o=i(611149),s=i(977813),r=i(967114),a=i(668776),l=i(321814),d=n?n.prototype:void 0,c=d?d.valueOf:void 0;e.exports=function(e,t,i,n,d,u,h){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var _=1&n;if(p||(p=l),e.size!=t.size&&!_)return!1;var g=h.get(e);if(g)return g==t;n|=2,h.set(e,t);var m=r(p(e),p(t),n,d,u,h);return h.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},916096:(e,t,i)=>{var n=i(458234),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,s,r,a){var l=1&i,d=n(e),c=d.length;if(c!=n(t).length&&!l)return!1;for(var u=c;u--;){var h=d[u];if(!(l?h in t:o.call(t,h)))return!1}var p=a.get(e),_=a.get(t);if(p&&_)return p==t&&_==e;var g=!0;a.set(e,t),a.set(t,e);for(var m=l;++u<c;){var f=e[h=d[u]],x=t[h];if(s)var b=l?s(x,f,h,t,e,a):s(f,x,h,e,t,a);if(!(void 0===b?f===x||r(f,x,i,s,a):b)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(g=!1)}return a.delete(e),a.delete(t),g}},431957:(e,t,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=n},458234:(e,t,i)=>{var n=i(868866),o=i(799551),s=i(3674);e.exports=function(e){return n(e,s,o)}},946904:(e,t,i)=>{var n=i(868866),o=i(151442),s=i(481704);e.exports=function(e){return n(e,s,o)}},301499:(e,t,i)=>{var n=i(689162),o=i(3674);e.exports=function(e){for(var t=o(e),i=t.length;i--;){var s=t[i],r=e[s];t[i]=[s,r,n(r)]}return t}},385924:(e,t,i)=>{var n=i(205569)(Object.getPrototypeOf,Object);e.exports=n},789607:(e,t,i)=>{var n=i(562705),o=Object.prototype,s=o.hasOwnProperty,r=o.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),i=e[a];try{e[a]=void 0;var n=!0}catch(l){}var o=r.call(e);return n&&(t?e[a]=i:delete e[a]),o}},799551:(e,t,i)=>{var n=i(234963),o=i(770479),s=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(e){return null==e?[]:(e=Object(e),n(r(e),(function(t){return s.call(e,t)})))}:o;e.exports=a},151442:(e,t,i)=>{var n=i(862488),o=i(385924),s=i(799551),r=i(770479),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,s(e)),e=o(e);return t}:r;e.exports=a},664160:(e,t,i)=>{var n=i(618552),o=i(357071),s=i(853818),r=i(458525),a=i(70577),l=i(644239),d=i(680346),c="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",_="[object DataView]",g=d(n),m=d(o),f=d(s),x=d(r),b=d(a),y=l;(n&&y(new n(new ArrayBuffer(1)))!=_||o&&y(new o)!=c||s&&y(s.resolve())!=u||r&&y(new r)!=h||a&&y(new a)!=p)&&(y=function(e){var t=l(e),i="[object Object]"==t?e.constructor:void 0,n=i?d(i):"";if(n)switch(n){case g:return _;case m:return c;case f:return u;case x:return h;case b:return p}return t}),e.exports=y},900222:(e,t,i)=>{var n=i(671811),o=i(135694),s=i(701469),r=i(565776),a=i(541780),l=i(240327);e.exports=function(e,t,i){for(var d=-1,c=(t=n(t,e)).length,u=!1;++d<c;){var h=l(t[d]);if(!(u=null!=e&&i(e,h)))break;e=e[h]}return u||++d!=c?u:!!(c=null==e?0:e.length)&&a(c)&&r(h,c)&&(s(e)||o(e))}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var i=e.length,n=new e.constructor(i);return i&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},529148:(e,t,i)=>{var n=i(274318),o=i(257157),s=i(593147),r=i(540419),a=i(477133);e.exports=function(e,t,i){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,i);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return s(e);case"[object Set]":return new l;case"[object Symbol]":return r(e)}}},738517:(e,t,i)=>{var n=i(603118),o=i(385924),s=i(225726);e.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:n(o(e))}},137285:(e,t,i)=>{var n=i(562705),o=i(135694),s=i(701469),r=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(r&&e&&e[r])}},816612:(e,t,i)=>{var n=i(977813),o=i(498612),s=i(565776),r=i(513218);e.exports=function(e,t,i){if(!r(i))return!1;var a=typeof t;return!!("number"==a?o(i)&&s(t,i.length):"string"==a&&t in i)&&n(i[t],e)}},115403:(e,t,i)=>{var n=i(701469),o=i(733448),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!o(e))||(r.test(e)||!s.test(e)||null!=t&&e in Object(t))}},689162:(e,t,i)=>{var n=i(513218);e.exports=function(e){return e==e&&!n(e)}},668776:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}},542634:e=>{e.exports=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}},624523:(e,t,i)=>{var n=i(288306);e.exports=function(e){var t=n(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}},86916:(e,t,i)=>{var n=i(205569)(Object.keys,Object);e.exports=n},133498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}},902333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},545357:(e,t,i)=>{var n=i(896874),o=Math.max;e.exports=function(e,t,i){return t=o(void 0===t?e.length-1:t,0),function(){for(var s=arguments,r=-1,a=o(s.length-t,0),l=Array(a);++r<a;)l[r]=s[t+r];r=-1;for(var d=Array(t+1);++r<t;)d[r]=s[r];return d[t]=i(l),n(e,this,d)}}},555639:(e,t,i)=>{var n=i(431957),o="object"==typeof self&&self&&self.Object===Object&&self,s=n||o||Function("return this")();e.exports=s},636390:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},572385:e=>{e.exports=function(e){return this.__data__.has(e)}},321814:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}},430061:(e,t,i)=>{var n=i(356560),o=i(521275)(n);e.exports=o},521275:e=>{var t=Date.now;e.exports=function(e){var i=0,n=0;return function(){var o=t(),s=16-(o-n);if(n=o,s>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}},555514:(e,t,i)=>{var n=i(624523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,r=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,i,n,o){t.push(n?o.replace(s,"$1"):i||e)})),t}));e.exports=r},240327:(e,t,i)=>{var n=i(733448);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},567990:e=>{var t=/\s/;e.exports=function(e){for(var i=e.length;i--&&t.test(e.charAt(i)););return i}},150361:(e,t,i)=>{var n=i(285990);e.exports=function(e){return n(e,5)}},575703:e=>{e.exports=function(e){return function(){return e}}},23279:(e,t,i)=>{var n=i(513218),o=i(707771),s=i(14841),r=Math.max,a=Math.min;e.exports=function(e,t,i){var l,d,c,u,h,p,_=0,g=!1,m=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var i=l,n=d;return l=d=void 0,_=t,u=e.apply(n,i)}function b(e){return _=e,h=setTimeout(v,t),g?x(e):u}function y(e){var i=e-p;return void 0===p||i>=t||i<0||m&&e-_>=c}function v(){var e=o();if(y(e))return P(e);h=setTimeout(v,function(e){var i=t-(e-p);return m?a(i,c-(e-_)):i}(e))}function P(e){return h=void 0,f&&l?x(e):(l=d=void 0,u)}function w(){var e=o(),i=y(e);if(l=arguments,d=this,p=e,i){if(void 0===h)return b(p);if(m)return clearTimeout(h),h=setTimeout(v,t),x(p)}return void 0===h&&(h=setTimeout(v,t)),u}return t=s(t)||0,n(i)&&(g=!!i.leading,c=(m="maxWait"in i)?r(s(i.maxWait)||0,t):c,f="trailing"in i?!!i.trailing:f),w.cancel=function(){void 0!==h&&clearTimeout(h),_=0,l=p=d=h=void 0},w.flush=function(){return void 0===h?u:P(o())},w}},227361:(e,t,i)=>{var n=i(297786);e.exports=function(e,t,i){var o=null==e?void 0:n(e,t);return void 0===o?i:o}},379095:(e,t,i)=>{var n=i(200013),o=i(900222);e.exports=function(e,t){return null!=e&&o(e,t,n)}},406557:e=>{e.exports=function(e){return e}},701469:e=>{var t=Array.isArray;e.exports=t},229246:(e,t,i)=>{var n=i(498612),o=i(637005);e.exports=function(e){return o(e)&&n(e)}},618446:(e,t,i)=>{var n=i(690939);e.exports=function(e,t){return n(e,t)}},356688:(e,t,i)=>{var n=i(225588),o=i(307518),s=i(531167),r=s&&s.isMap,a=r?o(r):n;e.exports=a},637005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},968630:(e,t,i)=>{var n=i(644239),o=i(385924),s=i(637005),r=Function.prototype,a=Object.prototype,l=r.toString,d=a.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var i=d.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==c}},472928:(e,t,i)=>{var n=i(829221),o=i(307518),s=i(531167),r=s&&s.isSet,a=r?o(r):n;e.exports=a},3674:(e,t,i)=>{var n=i(14636),o=i(400280),s=i(498612);e.exports=function(e){return s(e)?n(e):o(e)}},481704:(e,t,i)=>{var n=i(14636),o=i(710313),s=i(498612);e.exports=function(e){return s(e)?n(e,!0):o(e)}},288306:(e,t,i)=>{var n=i(883369);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],s=i.cache;if(s.has(o))return s.get(o);var r=e.apply(this,n);return i.cache=s.set(o,r)||s,r};return i.cache=new(o.Cache||n),i}o.Cache=n,e.exports=o},682492:(e,t,i)=>{var n=i(642980),o=i(321463)((function(e,t,i){n(e,t,i)}));e.exports=o},707771:(e,t,i)=>{var n=i(555639);e.exports=function(){return n.Date.now()}},139601:(e,t,i)=>{var n=i(840371),o=i(379152),s=i(115403),r=i(240327);e.exports=function(e){return s(e)?n(r(e)):o(e)}},189734:(e,t,i)=>{var n=i(121078),o=i(882689),s=i(105976),r=i(816612),a=s((function(e,t){if(null==e)return[];var i=t.length;return i>1&&r(e,t[0],t[1])?t=[]:i>2&&r(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])}));e.exports=a},770479:e=>{e.exports=function(){return[]}},14841:(e,t,i)=>{var n=i(727561),o=i(513218),s=i(733448),r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var i=a.test(e);return i||l.test(e)?d(e.slice(2),i?2:8):r.test(e)?NaN:+e}},959881:(e,t,i)=>{var n=i(698363),o=i(481704);e.exports=function(e){return n(e,o(e))}},16243:e=>{if(!t)var t={map:function(e,t){var i={};return t?e.map((function(e,n){return i.index=n,t.call(i,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var i={};return e.reduce(t?function(e,n,o){return i.index=o,e+t.call(i,n)}:function(e,t){return e+t},0)},max:function(e,i){return Math.max.apply(null,i?t.map(e,i):e)}};var i=function(){function e(e,t,i){return(e<<10)+(t<<5)+i}function i(e){var t=[],i=!1;function n(){t.sort(e),i=!0}return{push:function(e){t.push(e),i=!1},peek:function(e){return i||n(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return i||n(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return i||n(),t}}}function n(e,t,i,n,o,s,r){var a=this;a.r1=e,a.r2=t,a.g1=i,a.g2=n,a.b1=o,a.b2=s,a.histo=r}function o(){this.vboxes=new i((function(e,i){return t.naturalOrder(e.vbox.count()*e.vbox.volume(),i.vbox.count()*i.vbox.volume())}))}function s(i,n){if(n.count()){var o=n.r2-n.r1+1,s=n.g2-n.g1+1,r=n.b2-n.b1+1,a=t.max([o,s,r]);if(1==n.count())return[n.copy()];var l,d,c,u,h=0,p=[],_=[];if(a==o)for(l=n.r1;l<=n.r2;l++){for(u=0,d=n.g1;d<=n.g2;d++)for(c=n.b1;c<=n.b2;c++)u+=i[e(l,d,c)]||0;h+=u,p[l]=h}else if(a==s)for(l=n.g1;l<=n.g2;l++){for(u=0,d=n.r1;d<=n.r2;d++)for(c=n.b1;c<=n.b2;c++)u+=i[e(d,l,c)]||0;h+=u,p[l]=h}else for(l=n.b1;l<=n.b2;l++){for(u=0,d=n.r1;d<=n.r2;d++)for(c=n.g1;c<=n.g2;c++)u+=i[e(d,c,l)]||0;h+=u,p[l]=h}return p.forEach((function(e,t){_[t]=h-e})),g(a==o?"r":a==s?"g":"b")}function g(e){var t,i,o,s,r,a=e+"1",d=e+"2",c=0;for(l=n[a];l<=n[d];l++)if(p[l]>h/2){for(o=n.copy(),s=n.copy(),r=(t=l-n[a])<=(i=n[d]-l)?Math.min(n[d]-1,~~(l+i/2)):Math.max(n[a],~~(l-1-t/2));!p[r];)r++;for(c=_[r];!c&&p[r-1];)c=_[--r];return o[d]=r,s[a]=o[d]+1,[o,s]}}}return n.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var i=this,n=i.histo;if(!i._count_set||t){var o,s,r,a=0;for(o=i.r1;o<=i.r2;o++)for(s=i.g1;s<=i.g2;s++)for(r=i.b1;r<=i.b2;r++)a+=n[e(o,s,r)]||0;i._count=a,i._count_set=!0}return i._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var i=this,n=i.histo;if(!i._avg||t){var o,s,r,a,l=0,d=0,c=0,u=0;for(s=i.r1;s<=i.r2;s++)for(r=i.g1;r<=i.g2;r++)for(a=i.b1;a<=i.b2;a++)l+=o=n[e(s,r,a)]||0,d+=o*(s+.5)*8,c+=o*(r+.5)*8,u+=o*(a+.5)*8;i._avg=l?[~~(d/l),~~(c/l),~~(u/l)]:[~~(8*(i.r1+i.r2+1)/2),~~(8*(i.g1+i.g2+1)/2),~~(8*(i.b1+i.b2+1)/2)]}return i._avg},contains:function(e){var t=this,i=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,i>=t.r1&&i<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},o.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,i=0;i<t.size();i++)if(t.peek(i).vbox.contains(e))return t.peek(i).color;return this.nearest(e)},nearest:function(e){for(var t,i,n,o=this.vboxes,s=0;s<o.size();s++)((i=Math.sqrt(Math.pow(e[0]-o.peek(s).color[0],2)+Math.pow(e[1]-o.peek(s).color[1],2)+Math.pow(e[2]-o.peek(s).color[2],2)))<t||void 0===t)&&(t=i,n=o.peek(s).color);return n},forcebw:function(){var e=this.vboxes;e.sort((function(e,i){return t.naturalOrder(t.sum(e.color),t.sum(i.color))}));var i=e[0].color;i[0]<5&&i[1]<5&&i[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,o=e[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(r,a){if(!r.length||a<2||a>256)return!1;var l=function(t){var i,n,o,s,r=new Array(32768);return t.forEach((function(t){n=t[0]>>3,o=t[1]>>3,s=t[2]>>3,i=e(n,o,s),r[i]=(r[i]||0)+1})),r}(r);l.forEach((function(){0}));var d=function(e,t){var i,o,s,r=1e6,a=0,l=1e6,d=0,c=1e6,u=0;return e.forEach((function(e){i=e[0]>>3,o=e[1]>>3,s=e[2]>>3,i<r?r=i:i>a&&(a=i),o<l?l=o:o>d&&(d=o),s<c?c=s:s>u&&(u=s)})),new n(r,a,l,d,c,u,t)}(r,l),c=new i((function(e,i){return t.naturalOrder(e.count(),i.count())}));function u(e,t){for(var i,n=1,o=0;o<1e3;)if((i=e.pop()).count()){var r=s(l,i),a=r[0],d=r[1];if(!a)return;if(e.push(a),d&&(e.push(d),n++),n>=t)return;if(o++>1e3)return}else e.push(i),o++}c.push(d),u(c,.75*a);for(var h=new i((function(e,i){return t.naturalOrder(e.count()*e.volume(),i.count()*i.volume())}));c.size();)h.push(c.pop());u(h,a-h.size());for(var p=new o;h.size();)p.push(h.pop());return p}}}();e.exports=i.quantize},860682:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(946580);t.isFirefox=n.memoize((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=n.memoize((function(){return Boolean(window.safari)}))},527594:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(946580),o=function(){function e(e){this.entered=[],this.isNodeInDocument=e}return e.prototype.enter=function(e){var t=this,i=this.entered.length;return this.entered=n.union(this.entered.filter((function(i){return t.isNodeInDocument(i)&&(!i.contains||i.contains(e))})),[e]),0===i&&this.entered.length>0},e.prototype.leave=function(e){var t=this.entered.length;return this.entered=n.without(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length},e.prototype.reset=function(){this.entered=[]},e}();t.default=o},613087:function(e,t,i){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(527594),s=i(860682),r=i(796538),a=i(36076),l=i(278201),d=function(){function e(e){var t=this;this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){return r.getNodeClientOffset(t.sourceNodes.get(e))},this.endDragNativeItem=function(){t.isDraggingNativeItem()&&(t.actions.endDrag(),t.registry.removeSource(t.currentNativeHandle),t.currentNativeHandle=null,t.currentNativeSource=null)},this.isNodeInDocument=function(e){return!!document&&document.body.contains(e)||!!t.window&&t.window.document.body.contains(e)},this.endDragIfSourceWasRemovedFromDOM=function(){var e=t.currentDragSourceNode;t.isNodeInDocument(e)||t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragStartCapture=function(){t.clearCurrentDragSourceNode(),t.dragStartSourceIds=[]},this.handleTopDragStart=function(e){var i=t.dragStartSourceIds;t.dragStartSourceIds=null;var n=r.getEventClientOffset(e);t.monitor.isDragging()&&t.actions.endDrag(),t.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:t.getSourceClientOffset,clientOffset:n});var o=e.dataTransfer,s=a.matchNativeItemType(o);if(t.monitor.isDragging()){if(o&&"function"==typeof o.setDragImage){var l=t.monitor.getSourceId(),d=t.sourceNodes.get(l),c=t.sourcePreviewNodes.get(l)||d;if(c){var u=t.getCurrentSourcePreviewNodeOptions(),h={anchorX:u.anchorX,anchorY:u.anchorY},p={offsetX:u.offsetX,offsetY:u.offsetY},_=r.getDragPreviewOffset(d,c,n,h,p);o.setDragImage(c,_.x,_.y)}}try{o.setData("application/json",{})}catch(g){}t.setCurrentDragSourceNode(e.target),t.getCurrentSourcePreviewNodeOptions().captureDraggingState?t.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}),0)}else if(s)t.beginDragNativeItem(s);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=function(){t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(t.dragEnterTargetIds=[],t.enterLeaveCounter.enter(e.target)&&!t.monitor.isDragging()){var i=e.dataTransfer,n=a.matchNativeItemType(i);n&&t.beginDragNativeItem(n)}},this.handleTopDragEnter=function(e){var i=t.dragEnterTargetIds;(t.dragEnterTargetIds=[],t.monitor.isDragging())&&(t.altKeyPressed=e.altKey,s.isFirefox()||t.actions.hover(i,{clientOffset:r.getEventClientOffset(e)}),i.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){t.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var i=t.dragOverTargetIds;if(t.dragOverTargetIds=[],!t.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));t.altKeyPressed=e.altKey,t.actions.hover(i||[],{clientOffset:r.getEventClientOffset(e)}),(i||[]).some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())):t.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){t.isDraggingNativeItem()&&e.preventDefault(),t.enterLeaveCounter.leave(e.target)&&t.isDraggingNativeItem()&&t.endDragNativeItem()},this.handleTopDropCapture=function(e){t.dropTargetIds=[],e.preventDefault(),t.isDraggingNativeItem()&&t.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var i=t.dropTargetIds;t.dropTargetIds=[],t.actions.hover(i,{clientOffset:r.getEventClientOffset(e)}),t.actions.drop({dropEffect:t.getCurrentDropEffect()}),t.isDraggingNativeItem()?t.endDragNativeItem():t.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.context=e.getContext(),this.enterLeaveCounter=new o.default(this.isNodeInDocument)}return Object.defineProperty(e.prototype,"window",{get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),e.prototype.setup=function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}},e.prototype.teardown=function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))},e.prototype.connectDragPreview=function(e,t,i){var n=this;return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),function(){n.sourcePreviewNodes.delete(e),n.sourcePreviewNodeOptions.delete(e)}},e.prototype.connectDragSource=function(e,t,i){var n=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,i);var o=function(t){return n.handleDragStart(t,e)},s=function(e){return n.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",s),function(){n.sourceNodes.delete(e),n.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",s),t.setAttribute("draggable","false")}},e.prototype.connectDropTarget=function(e,t){var i=this,n=function(t){return i.handleDragEnter(t,e)},o=function(t){return i.handleDragOver(t,e)},s=function(t){return i.handleDrop(t,e)};return t.addEventListener("dragenter",n),t.addEventListener("dragover",o),t.addEventListener("drop",s),function(){t.removeEventListener("dragenter",n),t.removeEventListener("dragover",o),t.removeEventListener("drop",s)}},e.prototype.addEventListeners=function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.removeEventListeners=function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.getCurrentSourceNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return n({dropEffect:this.altKeyPressed?"copy":"move"},t||{})},e.prototype.getCurrentDropEffect=function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect},e.prototype.getCurrentSourcePreviewNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return n({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})},e.prototype.isDraggingNativeItem=function(){var e=this.monitor.getItemType();return Object.keys(l).some((function(t){return l[t]===e}))},e.prototype.beginDragNativeItem=function(e){this.clearCurrentDragSourceNode(),this.currentNativeSource=a.createNativeDragSource(e),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])},e.prototype.setCurrentDragSourceNode=function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)},e.prototype.clearCurrentDragSourceNode=function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)},e.prototype.handleDragStart=function(e,t){this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t)},e.prototype.handleDragEnter=function(e,t){this.dragEnterTargetIds.unshift(t)},e.prototype.handleDragOver=function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)},e.prototype.handleDrop=function(e,t){this.dropTargetIds.unshift(t)},e}();t.default=d},328775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=e.length,n=[],o=0;o<i;o++)n.push(o);n.sort((function(t,i){return e[t]<e[i]?-1:1}));var s,r,a=[],l=[],d=[];for(o=0;o<i-1;o++)s=e[o+1]-e[o],r=t[o+1]-t[o],l.push(s),a.push(r),d.push(r/s);var c=[d[0]];for(o=0;o<l.length-1;o++){var u=d[o],h=d[o+1];if(u*h<=0)c.push(0);else{s=l[o];var p=l[o+1],_=s+p;c.push(3*_/((_+p)/u+(_+s)/h))}}c.push(d[d.length-1]);var g,m=[],f=[];for(o=0;o<c.length-1;o++){g=d[o];var x=c[o],b=1/l[o];_=x+c[o+1]-g-g;m.push((g-x-_)*b),f.push(_*b*b)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=m,this.c3s=f}return e.prototype.interpolate=function(e){var t=this,i=t.xs,n=t.ys,o=t.c1s,s=t.c2s,r=t.c3s,a=i.length-1;if(e===i[a])return n[a];for(var l,d=0,c=r.length-1;d<=c;){var u=i[l=Math.floor(.5*(d+c))];if(u<e)d=l+1;else{if(!(u>e))return n[l];c=l-1}}var h=e-i[a=Math.max(0,c)],p=h*h;return n[a]+o[a]*h+s[a]*p+r[a]*h*p},e}();t.default=i},50013:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.config=e,this.item={},Object.keys(this.config.exposeProperties).forEach((function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \""+e+'" until the drop event.'),null}})}))}return e.prototype.mutateItemByReadingDataTransfer=function(e){var t=this,i={};e&&Object.keys(this.config.exposeProperties).forEach((function(n){i[n]={value:t.config.exposeProperties[n](e,t.config.matchesTypes)}})),Object.defineProperties(this.item,i)},e.prototype.canDrag=function(){return!0},e.prototype.beginDrag=function(){return this.item},e.prototype.isDragging=function(e,t){return t===e.getSourceId()},e.prototype.endDrag=function(){},e}();t.NativeDragSource=i},345349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromDataTransfer=function(e,t,i){var n=t.reduce((function(t,i){return t||e.getData(i)}),"");return null!=n?n:i}},36076:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(226851),o=i(50013);t.createNativeDragSource=function(e){return new o.NativeDragSource(n.nativeTypesConfig[e])},t.matchNativeItemType=function(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(n.nativeTypesConfig).filter((function(e){return n.nativeTypesConfig[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}},226851:(e,t,i)=>{var n;Object.defineProperty(t,"__esModule",{value:!0});var o=i(278201),s=i(345349);t.nativeTypesConfig=((n={})[o.FILE]={exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]},n[o.URL]={exposeProperties:{urls:function(e,t){return s.getDataFromDataTransfer(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]},n[o.TEXT]={exposeProperties:{text:function(e,t){return s.getDataFromDataTransfer(e,t,"")}},matchesTypes:["Text","text/plain"]},n)},278201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},796538:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(860682),o=i(328775);function s(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var i=t.getBoundingClientRect(),n=i.top;return{x:i.left,y:n}}t.getNodeClientOffset=s,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,i,r,a){var l,d,c="IMG"===(l=t).nodeName&&(n.isFirefox()||!document.documentElement.contains(l)),u=s(c?e:t),h={x:i.x-u.x,y:i.y-u.y},p=e.offsetWidth,_=e.offsetHeight,g=r.anchorX,m=r.anchorY,f=function(e,t,i,o){var s=e?t.width:i,r=e?t.height:o;return n.isSafari()&&e&&(r/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:r}}(c,t,p,_),x=f.dragPreviewWidth,b=f.dragPreviewHeight,y=a.offsetX,v=a.offsetY,P=0===v||v;return{x:0===y||y?y:new o.default([0,.5,1],[h.x,h.x/p*x,h.x+x-p]).interpolate(g),y:P?v:(d=new o.default([0,.5,1],[h.y,h.y/_*b,h.y+b-_]).interpolate(m),n.isSafari()&&c&&(d+=(window.devicePixelRatio-1)*b),d)}}},19402:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i||((i=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),i}},395141:(e,t,i)=>{var n=i(613087);i(19402).default;var o=i(278201);t.hm=o,t.ZP=function(e){return new n.default(e)}},946580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e){var t=null;return function(){return null==t&&(t=e()),t}},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.union=function(e,t){var i=new Set,n=function(e){return i.add(e)};e.forEach(n),t.forEach(n);var o=[];return i.forEach((function(e){return o.push(e)})),o}},925237:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0});var a=i(667294),l=i(720369),d=i(496395),c=i(489745),u=i(114774),h=i(215956);function p(e,t,i){return{dragDropManager:l.createDragDropManager(e,t,i)}}t.context=a.createContext({dragDropManager:void 0}),t.Consumer=t.context.Consumer,t.Provider=t.context.Provider,t.createChildContext=p,t.DragDropContextProvider=function(e){var i=e.children,n=r(e,["children"]),o="manager"in n?{dragDropManager:n.manager}:p(n.backend,n.context,n.debugMode);return a.createElement(t.Provider,{value:o},i)},t.DragDropContext=function(e,i,n){d.default("DragDropContext","backend",e);var r=p(e,i,n);return function(e){var i=e,n=i.displayName||i.name||"Component",l=function(l){function d(){var e=null!==l&&l.apply(this,arguments)||this;return e.ref=a.createRef(),e.getManager=function(){return r.dragDropManager},e}return o(d,l),d.prototype.getDecoratedComponentInstance=function(){return u(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},d.prototype.render=function(){return a.createElement(t.Provider,{value:r},a.createElement(i,s({},this.props,{ref:c.isRefable(i)?this.ref:null})))},d.DecoratedComponent=e,d.displayName="DragDropContext("+n+")",d}(a.Component);return h(l,e)}}},328202:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),a=i(496395),l=i(925237),d=i(489745),c=i(353924),u=i(215956),h=i(114774),p=i(596774);t.default=function(e,t){return void 0===t&&(t={}),a.default("DragLayer","collect[, options]",e,t),h("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),h(c.isPlainObject(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(i){var n=i,a=t.arePropsEqual,c=void 0===a?p:a,_=n.displayName||n.name||"Component",g=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCurrentlyMounted=!1,e.ref=r.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();p(t,e.state)||e.setState(t)}},e}return o(a,t),a.prototype.getDecoratedComponentInstance=function(){return h(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},a.prototype.shouldComponentUpdate=function(e,t){return!c(e,this.props)||!p(t,this.state)},a.prototype.componentDidMount=function(){this.isCurrentlyMounted=!0,this.handleChange()},a.prototype.componentWillUnmount=function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)},a.prototype.render=function(){var e=this;return r.createElement(l.Consumer,null,(function(t){var i=t.dragDropManager;return void 0===i?null:(e.receiveDragDropManager(i),e.isCurrentlyMounted?r.createElement(n,s({},e.props,e.state,{ref:d.isRefable(n)?e.ref:null})):null)}))},a.prototype.receiveDragDropManager=function(e){if(void 0===this.manager){this.manager=e,h("object"==typeof e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",_,_);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}},a.prototype.getCurrentState=function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)},a.displayName="DragLayer("+_+")",a.DecoratedComponent=i,a}(r.Component);return u(g,i)}}},344319:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294).memo((function(e){var t=e.connect,i=e.src;if("undefined"!=typeof Image){var n=new Image;n.src=i,n.onload=function(){return t(n)}}return null}));n.displayName="DragPreviewImage",t.default=n},450793:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(496395),o=i(42742),s=i(910513),r=i(626706),a=i(391081),l=i(147277),d=i(270942),c=i(353924),u=i(114774);t.default=function(e,t,i,h){void 0===h&&(h={}),n.default("DragSource","type, spec, collect[, options]",e,t,i,h);var p=e;"function"!=typeof e&&(u(d.default(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var _=r.default(t);return u("function"==typeof i,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',i),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',i),function(e){return o.default({containerDisplayName:"DragSource",createHandler:_,registerHandler:s.default,createConnector:function(e){return new l.default(e)},createMonitor:function(e){return new a.default(e)},DecoratedComponent:e,getType:p,collect:i,options:h})}}},391081:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(114774),o=!1,s=!1,r=function(){function e(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.sourceId=e},e.prototype.getHandlerId=function(){return this.sourceId},e.prototype.canDrag=function(){n(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}},e.prototype.isDragging=function(){if(!this.sourceId)return!1;n(!s,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return s=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{s=!1}},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.isDraggingSource=function(e){return this.internalMonitor.isDraggingSource(e)},e.prototype.isOverTarget=function(e,t){return this.internalMonitor.isOverTarget(e,t)},e.prototype.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.prototype.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.prototype.getSourceId=function(){return this.internalMonitor.getSourceId()},e.prototype.subscribeToOffsetChange=function(e){return this.internalMonitor.subscribeToOffsetChange(e)},e.prototype.canDragSource=function(e){return this.internalMonitor.canDragSource(e)},e.prototype.canDropOnTarget=function(e){return this.internalMonitor.canDropOnTarget(e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=r},206059:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(496395),o=i(42742),s=i(548537),r=i(329492),a=i(270942),l=i(596177),d=i(750986),c=i(353924),u=i(114774);t.default=function(e,t,i,h){void 0===h&&(h={}),n.default("DropTarget","type, spec, collect[, options]",e,t,i,h);var p=e;"function"!=typeof e&&(u(a.default(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var _=r.default(t);return u("function"==typeof i,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',i),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',i),function(e){return o.default({containerDisplayName:"DropTarget",createHandler:_,registerHandler:s.default,createMonitor:function(e){return new l.default(e)},createConnector:function(e){return new d.default(e)},DecoratedComponent:e,getType:p,collect:i,options:h})}}},596177:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(114774),o=!1,s=function(){function e(e){this.targetId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.targetId=e},e.prototype.getHandlerId=function(){return this.targetId},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.canDrop=function(){if(!this.targetId)return!1;n(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}},e.prototype.isOver=function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=s},147277:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(65435),o=i(965525),s=i(596774),r=function(){function e(e){var t=this;this.backend=e,this.hooks=n.default({dragSource:function(e,i){t.dragSourceOptions=i||null,o.isRef(e)?t.dragSourceRef=e:t.dragSourceNode=e,t.reconnectDragSource()},dragPreview:function(e,i){t.dragPreviewOptions=i||null,o.isRef(e)?t.dragPreviewRef=e:t.dragPreviewNode=e,t.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null}return e.prototype.receiveHandlerId=function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dragSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragSourceOptions",{get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreviewOptions",{get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){this.reconnectDragSource(),this.reconnectDragPreview()},e.prototype.reconnectDragSource=function(){var e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();e&&this.disconnectDragSource();var t=this.dragSource;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)):this.lastConnectedDragSource=t)},e.prototype.reconnectDragPreview=function(){var e=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();e&&this.disconnectDragPreview();var t=this.dragPreview;this.handlerId&&t&&e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))},e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.prototype.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.prototype.didDragSourceOptionsChange=function(){return!s(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.prototype.didDragPreviewOptionsChange=function(){return!s(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.prototype.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},e.prototype.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},Object.defineProperty(e.prototype,"dragSource",{get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreview",{get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current},enumerable:!0,configurable:!0}),e}();t.default=r},750986:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(65435),o=i(965525),s=i(596774),r=function(){function e(e){var t=this;this.backend=e,this.hooks=n.default({dropTarget:function(e,i){t.dropTargetOptions=i,o.isRef(e)?t.dropTargetRef=e:t.dropTargetNode=e,t.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null}return Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dropTarget},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)},e.prototype.receiveHandlerId=function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"dropTargetOptions",{get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.prototype.didOptionsChange=function(){return!s(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.prototype.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},Object.defineProperty(e.prototype,"dropTarget",{get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current},enumerable:!0,configurable:!0}),e}();t.default=r},626706:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(487943),o=(i(353924),i(114774)),s=["canDrag","beginDrag","isDragging","endDrag"],r=["beginDrag"],a=function(){function e(e,t,i){var n=this;this.spec=e,this.monitor=t,this.ref=i,this.props=null,this.beginDrag=function(){if(n.props)return n.spec.beginDrag(n.props,n.monitor,n.ref.current)}}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.canDrag=function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))},e.prototype.isDragging=function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())},e.prototype.endDrag=function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,n.getDecoratedComponent(this.ref))},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(s.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',s.join(", "),t),o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),r.forEach((function(t){o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,i){return new a(e,t,i)}}},329492:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(487943),o=(i(353924),i(114774)),s=["canDrop","hover","drop"],r=function(){function e(e,t,i){this.spec=e,this.monitor=t,this.ref=i,this.props=null}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.receiveMonitor=function(e){this.monitor=e},e.prototype.canDrop=function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)},e.prototype.hover=function(){this.spec.hover&&this.spec.hover(this.props,this.monitor,n.getDecoratedComponent(this.ref))},e.prototype.drop=function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(s.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',s.join(", "),t),o("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,i){return new r(e,t,i)}}},42742:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),a=i(925237),l=i(386998),d=i(489745),c=(i(353924),i(114774)),u=i(215956),h=i(596774);t.default=function(e){var t=e.DecoratedComponent,i=e.createHandler,n=e.createMonitor,p=e.createConnector,_=e.registerHandler,g=e.containerDisplayName,m=e.getType,f=e.collect,x=e.options.arePropsEqual,b=void 0===x?h:x,y=t,v=t.displayName||t.name||"Component",P=function(e){function u(t){var i=e.call(this,t)||this;return i.decoratedRef=r.createRef(),i.handleChange=function(){var e=i.getCurrentState();h(e,i.state)||i.setState(e)},i.disposable=new l.SerialDisposable,i.receiveProps(t),i.dispose(),i}return o(u,e),u.prototype.getHandlerId=function(){return this.handlerId},u.prototype.getDecoratedComponentInstance=function(){return c(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current},u.prototype.shouldComponentUpdate=function(e,t){return!b(e,this.props)||!h(t,this.state)},u.prototype.componentDidMount=function(){this.disposable=new l.SerialDisposable,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()},u.prototype.componentDidUpdate=function(e){b(this.props,e)||(this.receiveProps(this.props),this.handleChange())},u.prototype.componentWillUnmount=function(){this.dispose()},u.prototype.receiveProps=function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(m(e)))},u.prototype.receiveType=function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=_(e,this.handler,this.manager),i=t[0],n=t[1];this.handlerId=i,this.handlerMonitor.receiveHandlerId(i),this.handlerConnector.receiveHandlerId(i);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[i]});this.disposable.setDisposable(new l.CompositeDisposable(new l.Disposable(o),new l.Disposable(n)))}},u.prototype.dispose=function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)},u.prototype.getCurrentState=function(){return this.handlerConnector?f(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}},u.prototype.render=function(){var e=this;return r.createElement(a.Consumer,null,(function(t){var i=t.dragDropManager;return e.receiveDragDropManager(i),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){return e.handlerConnector.reconnect()})),r.createElement(y,s({},e.props,e.getCurrentState(),{ref:d.isRefable(y)?e.decoratedRef:null}))}))},u.prototype.receiveDragDropManager=function(e){void 0===this.manager&&(c(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",v,v),void 0!==e&&(this.manager=e,this.handlerMonitor=n(e),this.handlerConnector=p(e.getBackend()),this.handler=i(this.handlerMonitor,this.decoratedRef)))},u.DecoratedComponent=t,u.displayName=g+"("+v+")",u}(r.Component);return u(P,t)}},76108:(e,t,i)=>{function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(774399)),n(i(387559)),n(i(459296))},741365:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(910513),s=i(998008),r=i(391081),a=i(147277),l=i(114774);t.useDragSourceMonitor=function(){var e=s.useDragDropManager();return[n.useMemo((function(){return new r.default(e)}),[e]),n.useMemo((function(){return new a.default(e.getBackend())}),[e])]},t.useDragHandler=function(e,t,i){var r=s.useDragDropManager(),a=n.useMemo((function(){return{beginDrag:function(){var i=e.current,n=i.begin,o=i.item;if(n){var s=n(t);return l(null==s||"object"==typeof s,"dragSpec.begin() must either return an object, undefined, or null"),s||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(i,n){var o=e.current.isDragging;return o?o(t):n===i.getSourceId()},endDrag:function(){var n=e.current.end;n&&n(t.getItem(),t),i.reconnect()}}}),[]);n.useEffect((function(){var n=o.default(e.current.item.type,a,r),s=n[0],l=n[1];return t.receiveHandlerId(s),i.receiveHandlerId(s),l}),[])}},787458:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(548537),s=i(998008),r=i(750986),a=i(596177);t.useDropTargetMonitor=function(){var e=s.useDragDropManager();return[n.useMemo((function(){return new a.default(e)}),[e]),n.useMemo((function(){return new r.default(e.getBackend())}),[e])]},t.useDropHandler=function(e,t,i){var r=s.useDragDropManager(),a=n.useMemo((function(){return{canDrop:function(){var i=e.current.canDrop;return!i||i(t.getItem(),t)},hover:function(){var i=e.current.hover;i&&i(t.getItem(),t)},drop:function(){var i=e.current.drop;if(i)return i(t.getItem(),t)}}}),[t]);n.useEffect((function(){var n=o.default(e.current.accept,a,r),s=n[0],l=n[1];return t.receiveHandlerId(s),i.receiveHandlerId(s),l}),[t,i])}},365353:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(596774),o=i(667294);t.useCollector=function(e,t,i){var s=o.useState((function(){return t(e)})),r=s[0],a=s[1],l=o.useCallback((function(){var o=t(e);n(r,o)||(a(o),i&&i())}),[r,e,i]);return[r,l]}},998008:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(925237),s=i(114774);t.useDragDropManager=function(){var e=n.useContext(o.context).dragDropManager;return s(null!=e,"Expected drag drop context"),e}},179411:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(365353);t.useMonitorOutput=function(e,t,i){var s=o.useCollector(e,t,i),r=s[0],a=s[1];return n.useEffect((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(a,{handlerIds:[t]})}),[e,a]),r}},774399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(179411),o=i(741365),s=i(667294),r=i(114774);t.useDrag=function(e){var t=s.useRef(e);t.current=e,r(null!=e.item,"item must be defined"),r(null!=e.item.type,"item type must be defined");var i=o.useDragSourceMonitor(),a=i[0],l=i[1];o.useDragHandler(t,a,l);var d=n.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),c=s.useMemo((function(){return l.hooks.dragSource()}),[l]),u=s.useMemo((function(){return l.hooks.dragPreview()}),[l]);return s.useEffect((function(){l.dragSourceOptions=t.current.options||null,l.reconnect()}),[l]),s.useEffect((function(){l.dragPreviewOptions=t.current.previewOptions||null,l.reconnect()}),[l]),[d,c,u]}},459296:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(998008),s=i(365353);t.useDragLayer=function(e){var t=o.useDragDropManager().getMonitor(),i=s.useCollector(t,e),r=i[0],a=i[1];return n.useEffect((function(){return t.subscribeToOffsetChange(a)})),n.useEffect((function(){return t.subscribeToStateChange(a)})),r}},387559:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(179411),o=i(787458),s=i(667294),r=i(114774);t.useDrop=function(e){var t=s.useRef(e);t.current=e,r(null!=e.accept,"accept must be defined");var i=o.useDropTargetMonitor(),a=i[0],l=i[1];o.useDropHandler(t,a,l);var d=n.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),c=s.useMemo((function(){return l.hooks.dropTarget()}),[l]);return s.useEffect((function(){l.dropTargetOptions=e.options||null,l.reconnect()}),[e.options]),[d,c]}},60598:(e,t,i)=>{var n=i(925237);t.Z5=n.DragDropContext,n.DragDropContextProvider,n.Consumer,i(328202).default;var o=i(450793);t.Ej=o.default;var s=i(206059);t.GR=s.default,i(344319).default;var r=i(76108);r.useDrag,r.useDragLayer,r.useDrop},910513:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n=i.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}},548537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n=i.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}},496395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n]}},957523:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(114774);function s(e,t){"function"==typeof e?e(t):e.current=t}t.default=function(e,t){var i=e.ref;return o("string"!=typeof i,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),i?n.cloneElement(e,{ref:function(e){s(t,e),i&&s(i,e)}}):n.cloneElement(e,{ref:t})}},353924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e},t.noop=function(){},t.isPlainObject=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},590539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isDisposed=!1,this.disposables=e}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){var t=!1;if(!this.isDisposed){var i=this.disposables.indexOf(e);-1!==i&&(t=!0,this.disposables.splice(i,1),e.dispose())}return t},e.prototype.clear=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),i=0;i<e;i++)t[i]=this.disposables[i];this.disposables=[];for(i=0;i<e;i++)t[i].dispose()}},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),i=0;i<e;i++)t[i]=this.disposables[i];this.disposables=[];for(i=0;i<e;i++)t[i].dispose()}},e}();t.CompositeDisposable=i},653473:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(353924),o=function(){function e(e){this.isDisposed=!1,this.action=n.isFunction(e)?e:n.noop}return e.isDisposable=function(e){return e&&n.isFunction(e.dispose)},e._fixup=function(t){return e.isDisposable(t)?t:e.empty},e.create=function(t){return new e(t)},e.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},e.empty={dispose:n.noop},e}();t.Disposable=o},409591:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.isDisposed=!1}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var i=this.current;this.current=e,i&&i.dispose()}t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}},e}();t.SerialDisposable=i},386998:(e,t,i)=>{function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(653473)),n(i(409591)),n(i(590539))},487943:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoratedComponent=function(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}},965525:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRef=function(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}},489745:(e,t)=>{function i(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.isRefForwardingComponent=i,t.isRefable=function(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||i(e);var t}},270942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,i){return"string"==typeof t||"symbol"==typeof t||!!i&&Array.isArray(t)&&t.every((function(t){return e(t,!1)}))}},152548:()=>{String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})},65435:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(957523);function s(e){return function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),!n.isValidElement(t)){var s=t;return e(s,i),s}var r=t;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}(r);var a=i?function(t){return e(t,i)}:e;return o.default(r,a)}}i(152548),t.default=function(e){var t={};return Object.keys(e).forEach((function(i){var n=e[i];if(i.endsWith("Ref"))t[i]=e[i];else{var o=s(n);t[i]=function(){return o}}})),t}},215956:(e,t,i)=>{var n=i(876618),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?r:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(_){var o=p(i);o&&o!==_&&e(t,o,n)}var r=c(i);u&&(r=r.concat(u(i)));for(var a=l(t),g=l(i),m=0;m<r.length;++m){var f=r[m];if(!(s[f]||n&&n[f]||g&&g[f]||a&&a[f])){var x=h(i,f);try{d(t,f,x)}catch(b){}}}return t}return t}},114774:e=>{e.exports=function(e,t,i,n,o,s,r,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,n,o,s,r,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},121255:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case l:return e;default:return t}}case g:case _:case o:return t}}}function f(e){return m(e)===u}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=_,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===r||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h)},t.isAsyncMode=function(e){return f(e)||m(e)===c},t.isConcurrentMode=f,t.isContextConsumer=function(e){return m(e)===d},t.isContextProvider=function(e){return m(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return m(e)===h},t.isFragment=function(e){return m(e)===s},t.isLazy=function(e){return m(e)===g},t.isMemo=function(e){return m(e)===_},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===a},t.isStrictMode=function(e){return m(e)===r},t.isSuspense=function(e){return m(e)===p}},876618:(e,t,i)=>{e.exports=i(121255)},869921:(e,t)=>{var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,f=i?Symbol.for("react.block"):60121,x=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,y=i?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case m:case g:case l:return e;default:return t}}case o:return t}}}function P(e){return v(e)===u}t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isAsyncMode=function(e){return P(e)||v(e)===c},t.isConcurrentMode=P,t.isContextConsumer=function(e){return v(e)===d},t.isContextProvider=function(e){return v(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return v(e)===h},t.isFragment=function(e){return v(e)===s},t.isLazy=function(e){return v(e)===m},t.isMemo=function(e){return v(e)===g},t.isPortal=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===a},t.isStrictMode=function(e){return v(e)===r},t.isSuspense=function(e){return v(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===r||e===p||e===_||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y||e.$$typeof===f)},t.typeOf=v},659864:(e,t,i)=>{e.exports=i(869921)},615071:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(487462),o=i(263366),s=i(875068);i(45697);function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var a=i(667294),l=i(973935);const d=!1;var c=i(500220),u="unmounted",h="exited",p="entering",_="entered",g="exiting",m=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var o,s=i&&!i.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?s?(o=h,n.appearStatus=p):o=_:o=t.unmountOnExit||t.mountOnEnter?u:h,n.state={status:o},n.nextCallback=null,n}(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:h}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==p&&i!==_&&(t=p):i!==p&&i!==_||(t=g)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,n=this.props.timeout;return e=t=i=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,i=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===p?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===h&&this.setState({status:u})},i.performEnter=function(e){var t=this,i=this.props.enter,n=this.context?this.context.isMounting:e,o=this.props.nodeRef?[n]:[l.findDOMNode(this),n],s=o[0],r=o[1],a=this.getTimeouts(),c=n?a.appear:a.enter;!e&&!i||d?this.safeSetState({status:_},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,r),this.safeSetState({status:p},(function(){t.props.onEntering(s,r),t.onTransitionEnd(c,(function(){t.safeSetState({status:_},(function(){t.props.onEntered(s,r)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),n=this.props.nodeRef?void 0:l.findDOMNode(this);t&&!d?(this.props.onExit(n),this.safeSetState({status:g},(function(){e.props.onExiting(n),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:h},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:h},(function(){e.props.onExited(n)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(n){i&&(i=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:l.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(i&&!n){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],s=o[0],r=o[1];this.props.addEndListener(s,r)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,i=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(c.Z.Provider,{value:null},"function"==typeof i?i(e,n):a.cloneElement(a.Children.only(i),n))},t}(a.Component);function f(){}m.contextType=c.Z,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},m.UNMOUNTED=u,m.EXITED=h,m.ENTERING=p,m.ENTERED=_,m.EXITING=g;const x=m;var b=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((i=e).classList?i.classList.remove(n):"string"==typeof i.className?i.className=r(i.className,n):i.setAttribute("class",r(i.className&&i.className.baseVal||"",n)));var i,n}))},y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,i){var n=t.resolveArguments(e,i),o=n[0],s=n[1];t.removeClasses(o,"exit"),t.addClass(o,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,i)},t.onEntering=function(e,i){var n=t.resolveArguments(e,i),o=n[0],s=n[1]?"appear":"enter";t.addClass(o,s,"active"),t.props.onEntering&&t.props.onEntering(e,i)},t.onEntered=function(e,i){var n=t.resolveArguments(e,i),o=n[0],s=n[1]?"appear":"enter";t.removeClasses(o,s),t.addClass(o,s,"done"),t.props.onEntered&&t.props.onEntered(e,i)},t.onExit=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"appear"),t.removeClasses(i,"enter"),t.addClass(i,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var i=t.resolveArguments(e)[0];t.addClass(i,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"exit"),t.addClass(i,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,i){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,i]},t.getClassNames=function(e){var i=t.props.classNames,n="string"==typeof i,o=n?""+(n&&i?i+"-":"")+e:i[e];return{baseClassName:o,activeClassName:n?o+"-active":i[e+"Active"],doneClassName:n?o+"-done":i[e+"Done"]}},t}(0,s.Z)(t,e);var i=t.prototype;return i.addClass=function(e,t,i){var n=this.getClassNames(t)[i+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===i&&o&&(n+=" "+o),"active"===i&&e&&e.scrollTop,n&&(this.appliedClasses[t][i]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((i=e).classList?i.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(i,n)||("string"==typeof i.className?i.className=i.className+" "+n:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+n)));var i,n}))}(e,n))},i.removeClasses=function(e,t){var i=this.appliedClasses[t],n=i.base,o=i.active,s=i.done;this.appliedClasses[t]={},n&&b(e,n),o&&b(e,o),s&&b(e,s)},i.render=function(){var e=this.props,t=(e.classNames,(0,o.Z)(e,["classNames"]));return a.createElement(x,(0,n.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(a.Component);y.defaultProps={classNames:""},y.propTypes={};const v=y},500220:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(667294).createContext(null)},442279:(e,t)=>{function i(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function n(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?n:arguments[1],i=null,o=null;return function(){for(var n=arguments.length,s=Array(n),r=0;r<n;r++)s[r]=arguments[r];return null!==i&&i.length===s.length&&s.every((function(e,n){return t(e,i[n])}))||(o=e.apply(void 0,s)),i=s,o}}function s(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var i=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+i+"]")}return t}function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];var a=0,l=o.pop(),d=s(o),c=e.apply(void 0,[function(){return a++,l.apply(void 0,arguments)}].concat(n)),u=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];var r=d.map((function(i){return i.apply(void 0,[e,t].concat(o))}));return c.apply(void 0,i(r))};return u.resultFunc=l,u.recomputations=function(){return a},u.resetRecomputations=function(){return a=0},u}}var a=t.P1=r(o)},560053:(e,t)=>{function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<s(o,t)))break e;e[n]=t,e[i]=o,i=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,r=o>>>1;n<r;){var a=2*(n+1)-1,l=e[a],d=a+1,c=e[d];if(0>s(l,i))d<o&&0>s(c,l)?(e[n]=c,e[d]=i,n=d):(e[n]=l,e[a]=i,n=a);else{if(!(d<o&&0>s(c,i)))break e;e[n]=c,e[d]=i,n=d}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],u=1,h=null,p=3,_=!1,g=!1,m=!1,f="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var t=n(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,i(d,t)}t=n(c)}}function v(e){if(m=!1,y(e),!g)if(null!==n(d))g=!0,z(P);else{var t=n(c);null!==t&&O(v,t.startTime-e)}}function P(e,i){g=!1,m&&(m=!1,x(E),E=-1),_=!0;var s=p;try{for(y(i),h=n(d);null!==h&&(!(h.expirationTime>i)||e&&!j());){var r=h.callback;if("function"==typeof r){h.callback=null,p=h.priorityLevel;var a=r(h.expirationTime<=i);i=t.unstable_now(),"function"==typeof a?h.callback=a:h===n(d)&&o(d),y(i)}else o(d);h=n(d)}if(null!==h)var l=!0;else{var u=n(c);null!==u&&O(v,u.startTime-i),l=!1}return l}finally{h=null,p=s,_=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,I=!1,A=null,E=-1,C=5,S=-1;function j(){return!(t.unstable_now()-S<C)}function T(){if(null!==A){var e=t.unstable_now();S=e;var i=!0;try{i=A(!0,e)}finally{i?w():(I=!1,A=null)}}else I=!1}if("function"==typeof b)w=function(){b(T)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,k=D.port2;D.port1.onmessage=T,w=function(){k.postMessage(null)}}else w=function(){f(T,0)};function z(e){A=e,I||(I=!0,w())}function O(e,i){E=f((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||_||(g=!0,z(P))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,o,s){var r=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>r?(e.sortIndex=s,i(c,e),null===n(d)&&e===n(c)&&(m?(x(E),E=-1):m=!0,O(v,s-r))):(e.sortIndex=a,i(d,e),g||_||(g=!0,z(P))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},363840:(e,t,i)=>{e.exports=i(560053)},596774:e=>{e.exports=function(e,t,i,n){var o=i?i.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var d=s[l];if(!a(d))return!1;var c=e[d],u=t[d];if(!1===(o=i?i.call(n,c,u,d):void 0)||void 0===o&&c!==u)return!1}return!0}},98123:(e,t,i)=>{i.d(t,{Z:()=>n}),e=i.hmd(e);const n=function(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i.g?i.g:e)},645298:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});const n=function(e,t){}},367677:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/idea-pin-builder"]=function(){return i(216834).Z}},61746:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin-creation-tool"]=function(){return i(76510).Z}},302667:(e,t,i)=>{i.d(t,{As:()=>l,Ed:()=>d,X_:()=>o,h_:()=>r,vF:()=>s,x3:()=>a});var n=i(172071);const o=e=>{e&&e.utm_campaign&&n.Z.increment("client.partner.account.convert_attempt.utm_campaign.exists",1,e)},s=(e,t,i,o,s,r,a={})=>{((e,t)=>{const i=`client.partner.quick_promote_button.${e}`;n.Z.increment(i,1,{app_type:"web",location:t})})(t,i),((e,t,i,n={},o)=>{o({event_type:e,component:t,element:10148,view_type:i,aux_data:{...n}})})(o,s,r,a,e)},r=e=>{e({event_type:8217})},a=()=>{n.Z.increment("client.partner.biz_nux_v2.nux_start",1,{app_type:"web"})},l=()=>{n.Z.increment("client.partner.biz_nux_v2.nux_end",1,{app_type:"web"})},d=e=>{const t=`client.partner.biz_nux_v2.render.${e}`;n.Z.increment(t,1,{app_type:"web"})}},480542:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(700380),s=i(251183),r=i(883119),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d={gradientBackground:{left:{backgroundImage:"linear-gradient(to left, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"},right:{backgroundImage:"linear-gradient(to right, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"}},innerScrollContainer:{marginBottom:-17,overflowX:"auto",overflowY:"hidden",paddingBottom:17}};class c extends n.PureComponent{constructor(...e){super(...e),l(this,"state",{canScrollLeft:!1,canScrollRight:!1,isContainerHover:!1,isLeftHover:!1,isRightHover:!1}),l(this,"scroll",(e=>{const{scrollbar:t}=this,{extendToEdgeDistanceX:i,scrollSpeedPxPerMs:n,minScrollDuration:o,easingFunction:r}=this.props;t&&0!==e&&(this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.scrollAnimationManager=(0,s.Z)(t,e,0,{easingFunction:r,extendToEdgeDistanceX:i,scrollSpeedPxPerMs:n,minScrollDuration:o,onAnimationComplete:()=>{this.refreshScroll(),this.scrollAnimationManager=null}}),this.scrollAnimationManager.start())})),l(this,"refreshScroll",(()=>{const{canScrollLeft:e,canScrollRight:t}=this.state;if(!this.scrollbar)return;const{scrollLeft:i,scrollWidth:n,clientWidth:o}=this.scrollbar,s={};if(o<n){const r=i>0,a=i<n-o;e===r&&t===a||(s.canScrollLeft=r,s.canScrollRight=a)}else(e||t)&&(s.canScrollLeft=!1,s.canScrollRight=!1);Object.keys(s).length&&this.setState(s)})),l(this,"refreshScrollThrottled",(0,o.Z)(this.refreshScroll,50)),l(this,"handleLeftArrowClick",(()=>this.handleArrowClick("left"))),l(this,"handleRightArrowClick",(()=>this.handleArrowClick("right"))),l(this,"handleArrowClick",(e=>{if(!this.scrollbar)return;const{scrollDistanceRatio:t,scrollDistanceMin:i}=this.props,{clientWidth:n}=this.scrollbar,o="left"===e?-1:1;this.scroll(o*Math.max(Math.floor(t*n),i))})),l(this,"handleContainerMouseEnter",(()=>{this.setState({isContainerHover:!0})})),l(this,"handleContainerMouseLeave",(()=>{this.setState({isContainerHover:!1})})),l(this,"handleLeftArrowMouseEnter",(()=>this.handleArrowHover("left",!0))),l(this,"handleLeftArrowMouseLeave",(()=>this.handleArrowHover("left",!1))),l(this,"handleRightArrowMouseEnter",(()=>this.handleArrowHover("right",!0))),l(this,"handleRightArrowMouseLeave",(()=>this.handleArrowHover("right",!1))),l(this,"handleArrowHover",((e,t)=>{const i="left"===e?"isLeftHover":"isRightHover";this.setState({[i]:t})})),l(this,"saveScrollBarRef",(e=>{this.scrollbar=e})),l(this,"Style",{...d,arrowBackground:{backgroundColor:"wide"===this.props.variant?"rgba(255, 255, 255, .97)":"rgba(0, 0, 0, .1)",boxShadow:"wide"===this.props.variant?"0 1px 20px 0 rgba(0, 0, 0, .1)":void 0},arrow:{default:{position:"absolute",top:"50%",transform:"wide"===this.props.variant?"translateY(-115%)":"translateY(-50%)"},left:{left:"wide"===this.props.variant?-84:-12},right:{right:"wide"===this.props.variant?-72:-12}}}),l(this,"renderArrow",(e=>{var t;const{canScrollLeft:i,canScrollRight:n}=this.state,{variant:o}=this.props,s="wide"===o;let l=("left"===e?this.state.isLeftHover:this.state.isRightHover)?"darkGray":"gray";s&&(l="left"===e&&i||"right"===e&&n?"darkGray":"gray");const d="left"===e?"arrow-back":"arrow-forward",c="left"===e?this.Style.arrow.left:this.Style.arrow.right;return(0,a.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{...this.Style.arrow.default,...c}},children:(0,a.jsx)(r.iP,{onMouseEnter:"left"===e?this.handleLeftArrowMouseEnter:this.handleRightArrowMouseEnter,onMouseLeave:"left"===e?this.handleLeftArrowMouseLeave:this.handleRightArrowMouseLeave,onTap:"left"===e?this.handleLeftArrowClick:this.handleRightArrowClick,rounding:"circle",children:(0,a.jsx)(r.xu,{padding:1,rounding:"circle",dangerouslySetInlineStyle:{__style:this.Style.arrowBackground},children:(0,a.jsx)(r.Sj,{icon:d,iconColor:null!==(t=l)&&void 0!==t?t:"gray",bgColor:"white",size:s?"lg":"sm"})})},e)})}))}componentDidMount(){window.addEventListener("resize",this.refreshScrollThrottled),this.refreshScroll()}componentDidUpdate(){this.refreshScroll()}componentWillUnmount(){window.removeEventListener("resize",this.refreshScrollThrottled),this.scrollAnimationManager&&this.scrollAnimationManager.cancel()}render(){const{canScrollLeft:e,canScrollRight:t,isContainerHover:i}=this.state,{alwaysShowArrows:n,children:o,showArrowsOnlyOnHover:s}=this.props,l=!s||i,d=e&&l,c=t&&l;return(0,a.jsxs)(r.xu,{onMouseEnter:this.handleContainerMouseEnter,onMouseLeave:this.handleContainerMouseLeave,position:"relative",children:[(0,a.jsx)(r.xu,{overflow:"hidden",children:(0,a.jsx)(r.xu,{ref:this.saveScrollBarRef,onScroll:this.refreshScrollThrottled,dangerouslySetInlineStyle:{__style:this.Style.innerScrollContainer},children:o})}),d&&!n&&(0,a.jsx)(r.xu,{position:"absolute",top:!0,bottom:!0,left:!0,width:60,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.left}}),c&&!n&&(0,a.jsx)(r.xu,{position:"absolute",top:!0,bottom:!0,right:!0,width:60,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.right}}),(d||n)&&this.renderArrow("left"),(c||n)&&this.renderArrow("right")]})}}l(c,"defaultProps",{easingFunction:"ease-in-out",extendToEdgeDistanceX:160,minScrollDuration:200,scrollDistanceMin:200,scrollDistanceRatio:3/4,scrollSpeedPxPerMs:1.2,showArrowsOnlyOnHover:!0,variant:"default"})},261130:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(288709),o=i.n(n);const s=new RegExp(/^(https?:\/\/){0,1}/.source+"("+o().source+"){1,}"+/(\.){1,}/.source+"("+o().source+"){1,}"+/(\/){0,1}/.source,"gi")},464657:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);const o="undefined"!=typeof document?document:{},s=()=>{const e=(0,n.useRef)(),t=o.documentElement,{body:i}=o;if(!t)return[];return[()=>{if(!i||!i.style||e.current)return;const n=window.innerWidth-t.clientWidth,o=parseInt(window.getComputedStyle(i).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",i.style.position="relative",i.style.overflow="hidden",i.style.paddingRight=`${o+n}px`,e.current=!0},()=>{i&&i.style&&e.current&&(t.style.position="",t.style.overflow="",i.style.position="",i.style.overflow="",i.style.paddingRight="",e.current=!1)}]}},915206:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(667294),o=i(702664),s=i(333206),r=i(214494),a=i(505132),l=i(717615),d=i(19121),c=i(898781),u=i(846760),h=i(780280),p=i(883119),_=i(785893);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const m={alignItems:"center",backgroundColor:"#efefef",border:"none",cursor:"pointer",display:"flex",flexGrow:1,height:40,justifyContent:"space-between",minWidth:0,outline:0,padding:"0 14px",position:"relative"},f={backgroundColor:"#e60023",border:"none",cursor:"pointer",flex:"none",height:40,outline:0,padding:"0 14px"},x=(e,t)=>({dropdown:{alignItems:"center",backgroundColor:""+(t?"#efefef":"#ffffff"),border:"2px solid "+(e?"var(--color-border-error)":"var(--color-border-container)"),cursor:"pointer",display:"flex",flexGrow:1,height:48,justifyContent:"space-between",minWidth:0,outline:0,position:"relative",borderRadius:16}}),b=e=>({color:e?"#111":"#6c6c6c"});class y extends n.Component{constructor(...e){super(...e),g(this,"state",{selectedBoard:null,showBoardCreate:!1,showFlyout:!1,suggestedBoardName:""}),g(this,"_setDefaultBoard",(()=>{r.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0}).callGet({showError:!1}).then((e=>{const t=(((e||{}).resource_response||{}).data||{}).all_boards;if(t&&t.length>0){const{id:e,image_cover_url:i,owner:n,privacy:o,name:s,url:r}=t[0];this.handleItemChosen({boardId:e,imageCoverUrl:i,ownerUsername:null==n?void 0:n.username,privacy:o,title:s||"",url:r},!1)}}))})),g(this,"setButtonRef",(e=>{this.buttonRef=e})),g(this,"handleBoardDropdownClick",(()=>{this.setState((e=>({showFlyout:!e.showFlyout})))})),g(this,"handleSaveButtonClick",(()=>{const{onSaveClick:e,selectedItem:t}=this.props;t&&e?e():this.setState({showFlyout:!0})})),g(this,"handleFlyoutClose",(()=>{this.setState({showFlyout:!1})})),g(this,"handleItemChosen",((e,t=!0)=>{const{onItemChosen:i}=this.props;i(e),t&&this.handleFlyoutClose()})),g(this,"handleCreateSection",(e=>{const{selectedBoard:t}=this.state;if(t){const{id:i,privacy:n}=t,{id:o,title:s}=e;this.handleItemChosen({boardId:i,privacy:n,sectionId:o,title:s||""})}this.handleBoardCreateClose()})),g(this,"handleBoardCreateShow",(({title:e})=>{this.setState({showBoardCreate:!0,showFlyout:!1,suggestedBoardName:e})})),g(this,"handleBoardCreateClose",(()=>{this.setState({showBoardCreate:!1,selectedBoard:null})})),g(this,"handleBoardCreate",(e=>{this.props.invalidateBoardPickerBoardsResource();const{id:t,name:i,privacy:n,url:o}=e;this.handleItemChosen({boardId:t,privacy:n,title:i||"",url:o}),this.handleBoardCreateClose()})),g(this,"handleSetBoardWithSection",(e=>{this.setState({selectedBoard:e})}))}componentDidMount(){const{selectedItem:e,useDefaultBoard:t=!1,disableDefaultBoard:i=!1}=this.props;i||(t?this._setDefaultBoard():e||this._setDefaultBoard())}render(){const{accessibilityLabelText:e,buttonText:t,customItem:i,disabled:o,flyoutSize:r,flyoutZIndex:l,hasError:d,idealDirection:c,onSaveClick:h,placeholder:g,requestContext:y,selectedItem:v,showBoardCover:P,showButton:w,showCreateBoardButton:I,showFlyoutSaveButton:A,showSections:E,showSectionSaveButton:C,useLayer:S,useStoryboardStyle:j,useCreateModalWithNoLayer:T}=this.props,{selectedBoard:D,showBoardCreate:k,showFlyout:z,suggestedBoardName:O}=this.state,R={__style:{borderRadius:8,boxShadow:d&&!j?"0 0 0 1px #e60023":void 0,zIndex:z?l:void 0}},{isRTL:L}=y,M=j?16:8,B=`${M}px 0 0 ${M}px`,N=`0 ${M}px ${M}px 0`,{title:F}=v||{},Z=L?N:B,U=P&&!!v&&F,V={...j?x(d,o).dropdown:m,borderRadius:z||!w?M:Z,padding:U?"0 14px 0 7px":"0 14px",cursor:o?"default":"pointer",pointerEvents:o?"none":"auto"},H={...f,borderRadius:L?B:N,...o?{backgroundColor:"#efefef",cursor:"default"}:{},pointerEvents:o?"none":"auto"};return(0,_.jsxs)(p.xu,{column:12,position:"relative",dangerouslySetInlineStyle:R,children:[(0,_.jsxs)(p.kC,{alignItems:"center",justifyContent:"start",width:"100%",children:[(0,_.jsxs)("button",{style:V,onClick:this.handleBoardDropdownClick,ref:this.setButtonRef,"data-test-id":"board-dropdown-select-button",disabled:o,"aria-disabled":o,children:[(0,_.jsxs)(p.xu,{marginEnd:2,minWidth:0,overflow:"hidden",display:"flex",alignItems:"center",children:[U&&(0,_.jsx)(p.xu,{marginEnd:2,children:(0,_.jsx)(p.zd,{height:32,width:32,rounding:2,children:(0,_.jsx)(p.Ee,{alt:this.props.i18n.bt("Copertina della bacheca", "Board cover", "boardDropdown.button.selectedBoard.boardCover", undefined, true),color:"lightGray",naturalHeight:1,naturalWidth:1,src:(null==v?void 0:v.imageCoverUrl)||"",fit:"cover"})})}),(0,_.jsx)(p.xv,{lineClamp:1,children:(0,_.jsx)("span",{style:b(!!v),children:v&&F?F:g})})]}),(0,_.jsx)(p.xu,{flex:"none",marginEnd:-1,children:(0,_.jsx)(p.JO,{accessibilityLabel:this.props.i18n.bt("Scegli una bacheca", "Choose a board", "Instructions to open board picker", undefined, true),color:o?"subtle":"default",icon:"arrow-down",size:12})})]}),!z&&w&&(0,_.jsx)("button",{style:H,onClick:this.handleSaveButtonClick,"data-test-id":"board-dropdown-save-button",disabled:o,"aria-disabled":o,children:(0,_.jsx)(p.xv,{color:o?"subtle":"inverse",weight:"bold",children:t||this.props.i18n.bt("Salva", "Save", "Button to create new Pin", undefined, true)})})]}),z&&(0,_.jsx)(p.J2,{anchor:this.buttonRef,idealDirection:c||"down",onDismiss:this.handleFlyoutClose,size:r,children:(0,_.jsx)(u.sR,{accessibilityLabelText:e,buttonText:t,customItem:i&&(0,n.cloneElement)(i,{onItemChosen:this.handleFlyoutClose}),onBoardCreate:this.handleBoardCreateShow,onButtonClick:h,onItemChosen:this.handleItemChosen,paneWidth:"number"==typeof r?r:void 0,setBoardWithSection:this.handleSetBoardWithSection,showCreateBoardButton:I,showFlyoutSaveButton:A,showSections:E,showSectionSaveButton:C,useStoryboardStyle:j,useLegoLayout:!1,showSaveToProfile:!1})}),k&&!D&&(0,_.jsx)(s.Z,{onBoardCreate:this.handleBoardCreate,onClose:this.handleBoardCreateClose,suggestedBoardName:O,useModalWithNoLayer:T}),k&&!!D&&(0,_.jsx)(a.Z,{selectedBoard:D,onClose:this.handleBoardCreateClose,onSectionCreate:this.handleCreateSection,useLayer:S})]})}}function v(e){const t=(0,c.ZP)(),i=(0,o.useDispatch)(),n=(0,d.Z)(),s=(0,l.Z)();return(0,_.jsx)(y,{...e,invalidateBoardPickerBoardsResource:()=>i((0,u.DR)(n,s)),requestContext:(0,h.B)(),i18n:t})}g(y,"defaultProps",{flyoutSize:"lg",flyoutZIndex:1,showButton:!0,disabled:!1})},790904:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(941646),s=i(883119),r=i(785893);function a({accessibilityLabel:e,handleClick:t,icon:i,iconColor:a,iconOnly:l,testId:d,buttonText:c,tabIndex:u}){const[h,p]=(0,n.useState)(!1),_=(0,n.useRef)(),g=l?"md":"lg",m=a||"darkGray",f=()=>{p((e=>!e)),t()},x=e=>{var t;_&&e.target instanceof Element&&(null===(t=_.current)||void 0===t||!t.contains(e.target))&&p(!1)};return(0,n.useEffect)((()=>(window.addEventListener("mousedown",x),()=>{window.removeEventListener("mousedown",x)})),[]),(0,r.jsx)(o.Z,{id:d||"closeup-action-bar-button",children:(0,r.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,r.jsx)(s.hU,{accessibilityLabel:e,iconColor:m,onClick:f,selected:h,icon:i,size:g,ref:_,tabIndex:u}),c&&(0,r.jsx)(s.iP,{onTap:f,rounding:2,children:(0,r.jsx)(s.X6,{color:"light",overflow:"normal",size:"400",children:c})})]})})}},668627:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>({id:e,field_set_key:"auth_web_main_pin",add_fields:i?i.join(","):void 0,client_tracking_params:void 0,noCache:!0,fetch_visual_search_objects:!0,...t?{orbac_subject_id:t}:Object.freeze({})})},237056:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(773285),o=i(50286);const s=Object.freeze({dweb:{organic:"web_sce_organic_pinbuilder_dep",monetized:"web_sce_monetized_pinbuilder_dep"},mweb:{organic:"mweb_sce_organic_pinbuilder_dep",monetized:"mweb_sce_monetized_pinbuilder_dep"}});function r(e){const t=(0,o.HG)(),{checkExperiment:i}=(0,n.F)(),r=s[t?"dweb":"mweb"];return e&&(i("sce_lightswitch_organic"),i("sce_lightswitch_monetized")),i(r.organic).anyEnabled||i(r.monetized).anyEnabled}},382891:(e,t,i)=>{i.d(t,{Z:()=>r,m:()=>s});var n=i(719286),o=i(709622);const s=["female","male","unknown"],r=e=>{const{interests:t,ages:i,genders:r,country:a}=e;return{AGE_BUCKET:i||[],APPTYPE:n.jz,GENDER:r||s,INTEREST:(t||[]).map((e=>e.topic_id)),LOCATION:[...new Set((a||o.UF).split("+"))]}}},460985:(e,t,i)=>{i.d(t,{xT:()=>x,cX:()=>b,ZP:()=>y});var n=i(667294),o=i(116303);const s=(e,t=3,i=500)=>n=>{const o=n.target;t>0&&(setTimeout((()=>{o.src=`${e}?${Date.now()}${t}`}),i),t-=1,i*=2)};var r=i(898781),a=i(152028),l=i(444445),d=i(883119),c=i(785893);const u=e=>{const t=(0,r.ZP)(),{skipImageReloadOnError:i=!1,pin:o,video:u,rounding:h}=e,p=(0,n.createRef)();(0,n.useEffect)((()=>{p.current&&u&&(p.current.currentTime=u.thumbnail)}),[u,p]);const _=void 0===e.containerWidth?l.yF:e.containerWidth,g=e.imgHeight||void 0;if(!o&&!u)return null;return Boolean(u)?(()=>{if(!u)return null;const e=u.customCoverImg;return(0,c.jsxs)(d.xu,{position:"relative",overflow:"hidden",display:"flex",direction:"column",justifyContent:"center",width:_,children:[(0,c.jsx)(d.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:e?(0,c.jsx)(d.Ee,{alt:e.name,naturalHeight:e.height,naturalWidth:e.width,src:e.src}):(0,c.jsx)(d.nk,{autoplay:!0,accessibilityMaximizeLabel:t.bt("Ingrandisci", "Maximize", "Maximize button on video", undefined, true),accessibilityMinimizeLabel:t.bt("Riduci", "Minimize", "Minimize button on video", undefined, true),accessibilityMuteLabel:t.bt("Disattiva audio", "Mute", "Mute button on video", undefined, true),accessibilityPauseLabel:t.bt("Pausa", "Pause", "Pause button on video", undefined, true),accessibilityPlayLabel:t.bt("Riproduci", "Play", "Play button on video", undefined, true),accessibilityProgressBarLabel:t.bt("Barra di avanzamento", "Progress bar", "displayPinImage.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:t.bt("Attiva audio", "Unmute", "Unmute button on video", undefined, true),aspectRatio:u.width/u.height,captions:"",onPlay:()=>{},onPlayError:()=>{},src:u.src})}),(0,c.jsx)(d.xu,{bottom:!0,left:!0,right:!0,top:!0,alignItems:"end",display:"flex",justifyContent:"start",padding:2,position:"absolute",children:(0,c.jsx)(a.Z,{duration:1e3*u.duration})})]})})():(()=>{var e,t,n,r;const{images:a={}}=o,l=a["236x"]||void 0,u=a["474x"]||void 0,p=a["736x"]||void 0,m=a.orig||void 0||l||u||p||void 0;return m?(0,c.jsx)(d.xu,{rounding:null!=h?h:2,overflow:"hidden",display:"flex",direction:"column",justifyContent:"center",width:_,height:g,children:(0,c.jsx)(d.Ee,{alt:null!==(e=o.alt_text)&&void 0!==e?e:"",color:o.dominant_color||"#efefef",naturalWidth:null!==(t=m.width)&&void 0!==t?t:1,naturalHeight:null!==(n=m.height)&&void 0!==n?n:1,onError:i?()=>{}:()=>{var e;s(null!==(e=m.url)&&void 0!==e?e:"",5)},src:null!==(r=m.url)&&void 0!==r?r:"",fit:g?"cover":"none"})}):null})()};var h=i(883561),p=i(327476);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const g={base:({rounding:e,height:t})=>({borderRadius:e?4*e:4,display:"flex",flexDirection:"column",height:t,outline:"none",padding:8,transition:"background-color 0.25s cubic-bezier(0.31, 1, 0.34, 1)"}),focused:()=>({padding:4,border:"4px solid rgba(0, 132, 255, 0.5)"}),hovered:()=>({backgroundColor:"rgba(0, 0, 0, 0.05)",cursor:"pointer"}),selected:()=>({padding:6,border:"2px solid #e60023"})},m=(e,t)=>{const i=((e.rich_summary||{}).displayName||"").trim(),n=(e.description||"").trim(),o=(e.title||"").trim();return(0,h.ZP)(o||i||n,t)};class f extends n.Component{constructor(...e){super(...e),_(this,"state",{isHovered:!1,isFocused:!1}),_(this,"getIsActionable",(()=>!!this.props.onSelect)),_(this,"getStyle",(()=>{const{isFocused:e,isHovered:t}=this.state,{selected:i}=this.props,n=this.getIsActionable(),o={base:!0,focused:n&&e,hovered:n&&t,selected:i};return Object.entries(o).reduce(((e,[t,i])=>({...e,...i?g[t](this.props):{}})),{})})),_(this,"handleMouseEnter",(()=>{this.setState({isHovered:!0})})),_(this,"handleMouseLeave",(()=>{this.setState({isHovered:!1})})),_(this,"handleClick",(()=>{const{onSelect:e,pin:t}=this.props;e&&e(t)})),_(this,"handleKeyPress",(e=>{"Enter"===e.key&&this.handleClick()})),_(this,"handleFocus",(()=>{this.setState({isFocused:!0})})),_(this,"handleBlur",(()=>{this.setState({isFocused:!1})}))}render(){const{pin:e,imageHeight:t,hideAuthorAttribution:i,maxDescriptionLength:n,promoted:o,showDescription:s,skipImageReloadOnError:r,width:a,video:h,rounding:p,isMobile:_=!1}=this.props,g=m(e,n),f=this.props.i18n.bt("Nessuna descrizione disponibile", "No description available", "[m10n]quickPromote.pin.noDescription", undefined, true),y=this.getIsActionable()?{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleClick,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,role:"button",tabIndex:0}:{};return(0,c.jsxs)("div",{style:this.getStyle(),...y,"aria-label":g||f,children:[(0,c.jsx)(u,{pin:e,video:h,imgHeight:t,containerWidth:a,rounding:p,skipImageReloadOnError:r}),!o&&e.video_signature&&(0,c.jsx)(d.xu,{marginTop:1,children:(0,c.jsx)(d.JO,{icon:"play",accessibilityLabel:this.props.i18n.bt("Pulsante di riproduzione video", "Video play button", "[m10n] Accessibility label for a video play icon", undefined, true),color:"default",size:12,inline:!0})}),o&&!i&&!_&&(0,c.jsx)(x,{name:o.businessName}),s&&g.length>0&&(0,c.jsx)(d.xu,{padding:o?1:void 0,paddingX:o?void 0:1,paddingY:o?void 0:4,maxWidth:a||l.yF,children:(0,c.jsx)(d.xv,{size:_?"100":"200",weight:"bold",children:g})}),o&&(0,c.jsx)(b,{isMobile:_,avatarUrl:o.avatarImageSmallUrl,businessName:o.businessName})]})}}_(f,"defaultProps",{showDescription:!0});const x=({name:e})=>{const t=(0,r.ZP)();return(0,c.jsxs)(d.xu,{display:"flex",padding:1,children:[(0,c.jsx)(d.xu,{marginEnd:1,children:(0,c.jsx)(d.JO,{accessibilityLabel:t.bt("Freccia link al Pin", "Pin link arrow", "Accessibility label for pin preview link icon", undefined, true),icon:"arrow-up-right",color:"default",inline:!0,size:10})}),(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.xv,{inline:!0,size:"200",children:e})})]})},b=({avatarUrl:e,businessName:t,isMobile:i=!1})=>{const n=(0,r.ZP)(),s=(0,p.Z)();return(0,c.jsxs)(d.xu,{display:"flex",justifyContent:i?"evenly":"start",alignItems:"center",paddingY:1,children:[(0,c.jsx)(d.xu,{children:(0,c.jsx)(o.Z,{name:t,src:e,size:i?"xs":"sm"})}),(0,c.jsxs)(d.xu,{marginStart:i?0:1,children:[(0,c.jsx)(d.xv,{size:i?"100":"200",weight:"bold",children:s(n.bt("Sponsorizzato da", "Promoted by", "Label for who promoted the pin", undefined, true))}),(0,c.jsx)(d.xv,{size:i?"100":"200",children:t})]})]})},y=function(e){const t=(0,r.ZP)(),{badgeMessage:i}=e;return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(f,{...e,i18n:t}),i&&(0,c.jsx)(d.xu,{"data-test-id":"recommended-pins",display:"inlineBlock",padding:4,position:"absolute",left:!0,top:!0,children:(0,c.jsx)(d.Ct,{text:i})})]})}},28956:(e,t,i)=>{i.d(t,{Z:()=>Qe});var n=i(667294),o=i(898781),s=i(883119),r=i(785893);function a({color:e,duration:t,type:i}){const a=(0,o.ZP)();return(0,r.jsx)(s.xu,{color:e,display:"flex",rounding:"pill",paddingX:2,paddingY:1,children:"localVideo"===i||"dropboxVideo"===i?(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(s.JO,{accessibilityLabel:a.bt("Icona video", "Video icon", "Icon label to tell if media type is a video", undefined, true),color:"inverse",icon:"video-camera"}),!!t&&(0,r.jsx)(s.xu,{marginStart:1,children:(0,r.jsx)(s.xv,{color:"inverse",size:"200",children:t})})]}):(0,r.jsx)(s.xv,{color:"inverse",size:"200",children:a.bt("GIF", "GIF", "Text to represent media is a GIF image", undefined, true)})})}var l=i(281139),d=i(454074),c=i(531245);function u({addAssets:e}){const t=(0,o.ZP)(),i=(0,n.useCallback)((t=>e?e(t):()=>{}),[e]);return(0,r.jsx)(s.xu,{height:160,marginBottom:4,rounding:2,width:160,children:(0,r.jsx)(l.Z,{accept:[...c.xl,...c.ss].join(","),allowMultipleFiles:!0,id:"asset-empty-view-upload",onChange:e=>{const t=Array.from(e.target.files);i(t)},onDrop:e=>{const t=(0,d.Z)(e.dataTransfer);i(t)},children:()=>(0,r.jsx)(s.xu,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,r.jsx)(s.JO,{accessibilityLabel:t.bt("Aggiungi risorse", "Add assets", "Accessibility label for adding images and videos", undefined, true),icon:"add-circle",size:32})})})})}function h(e){return-1===e.indexOf(".")?"":e.trim().split(".").pop().toLowerCase()}function p(e){const t=h(e.name);return"dropboxFolder"===e.type||!!t&&c.P7.includes(t)||!!t&&c.sc.includes(t)}function _({item:e}){const{name:t,type:i}=e,n=e.thumbnail?"data:image/jpeg;base64,".concat(e.thumbnail):"",o=p(e);return(0,r.jsx)(s.zd,{rounding:2,height:"100%",width:"100%",children:(0,r.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:o&&n?(0,r.jsx)(s.Ee,{alt:t||"",fit:"cover",src:n,naturalHeight:1,naturalWidth:1}):(0,r.jsx)(s.JO,{icon:"dropboxFolder"===i?"folder":"file-unknown",accessibilityLabel:"dropboxFolder"===i?"Folder icon":"Unknown file icon",size:"60%"})})})}var g=i(783879);function m({height:e,image:t,width:i}){const{height:n,src:o,width:a}=t;return(0,r.jsxs)(s.zd,{rounding:2,height:"100%",width:"100%",children:[(0,r.jsx)(s.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,r.jsx)(g.Z,{fillColor:"rgba(0, 0, 0, 0.12)"})}),(0,r.jsx)(s.Ee,{alt:t.name||"",fit:e||i?"cover":void 0,naturalHeight:e||n||1,src:o,naturalWidth:i||a||1})]})}function f({height:e,pin:t,width:i}){const{description:n,images:o,title:a}=t,{height:l,width:d,url:c}=(null==o?void 0:o["474x"])||(null==o?void 0:o["236x"])||{};return(0,r.jsx)(s.zd,{rounding:2,height:e||"100%",width:i||"100%",children:(0,r.jsx)(s.Ee,{alt:a||n||"",fit:e||i?"cover":void 0,naturalHeight:null!=l?l:1,naturalWidth:null!=d?d:1,src:null!=c?c:""})})}function x({height:e,width:t,video:i}){const{customCoverImg:n}=i;return(0,r.jsx)(s.zd,{height:e,rounding:2,width:t,children:(0,r.jsx)(s.Ee,{alt:n&&n.name||"",fit:e||t?"cover":void 0,naturalHeight:e||n&&n.height||0,src:n&&n.src||"",naturalWidth:t||n&&n.width||0})})}function b({asset:e,height:t,width:i}){return"localImage"===e.type||"webImage"===e.type?(0,r.jsx)(m,{image:e,height:t,width:i}):"pin"===e.type?(0,r.jsx)(f,{pin:e,height:t,width:i}):"localVideo"===e.type?(0,r.jsx)(x,{height:t,width:i,video:e}):"dropboxFile"===e.type||"dropboxFolder"===e.type?(0,r.jsx)(_,{item:e}):null}var y=i(795067),v=i(925797),P=i(81226);function w({number:e}){return(0,r.jsx)(s.xu,{alignItems:"center",color:"primary",display:"flex",height:24,justifyContent:"center",margin:3,right:!0,position:"absolute",rounding:"circle",top:!0,width:24,"data-test-id":"number-overlay",children:(0,r.jsx)(s.xv,{color:"inverse",size:"200",weight:"bold",children:e})})}var I=i(938999),A=i(665866);function E(e,t){const i=e.lastIndexOf(".")-3,n=e.substr(i);return e.length>t&&i-3>=1?`${e.substr(0,t-(n.length+3))}...${n}`:e}var C=i(299295),S=i(984268);function j({addAssets:e,asset:t,onSelect:i,selected:o,selectedIndex:l}){const d=(0,n.useCallback)((()=>i(t)),[t]);if("blank"===t.type)return(0,r.jsx)(u,{addAssets:e});const c="localVideo"===t.type?1e3*t.duration:void 0,{video_list:h}="pin"===t.type&&t.videos?t.videos:{},{duration:p}=h&&h.V_720P||{},_=(0,y.Z)(t),g=c||p?(0,P.Z)(c||p||0):void 0,m=A.Z.enabled("shop_the_pin")&&"pin"===t.type,f=m?(0,S.mt)(t):"",x=m?(0,S.BE)(t):"";return(0,r.jsxs)(s.xu,{"data-group-id":"asset-picker-view-grid-group-item",column:12,children:[(0,r.jsxs)(I.Z,{onClick:d,rounded:!0,selected:o,children:[(0,r.jsxs)(s.xu,{position:"relative","data-test-id":"asset-picker-view-item",children:[(0,r.jsx)(b,{asset:t}),!!_&&(0,r.jsx)(s.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,r.jsx)(a,{color:"transparentDarkGray",duration:g,type:_})})]}),l>=0&&(0,r.jsx)(w,{number:l+1})]}),m&&(0,r.jsxs)(s.xu,{children:[!!f&&(0,r.jsx)(s.xu,{children:(0,r.jsx)(s.xu,{paddingY:1,display:"flex",children:(0,r.jsx)(v.Z,{text:f,icon:"tag"})})}),!!x&&(0,r.jsx)(s.xu,{width:C.MN,children:(0,r.jsx)(s.xv,{overflow:"breakWord",size:"200",weight:"bold",children:x})})]}),!!t.name&&(0,r.jsx)(s.xu,{paddingY:1,title:t.name,children:(0,r.jsx)(s.xv,{size:"200",children:E(String(t.name),20)})})]})}function T(e){const{assets:t,loadItems:i,scrollContainer:n}=e;return(0,r.jsx)(s.Rk,{renderItem:({data:t,itemIdx:i})=>{const{addAssets:n,onSelect:o,selectedAssets:s,showAddAssetButton:a=!0}=e,l=a&&0===i;return(0,r.jsx)(j,{addAssets:n,asset:l?{id:"pinbuilder_asset_picker_blank",type:"blank"}:t,onSelect:l?()=>{}:o,selected:!l&&(!!s.includes(t)||!!s.find((e=>t.id===e.id))),selectedIndex:l?-1:(()=>{const e=s.indexOf(t);return e>-1?e:s.findIndex((e=>e.id===t.id))})()})},columnWidth:158,gutterWidth:16,items:t,loadItems:i,scrollContainer:n,minCols:5})}function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const k={border:"none",bottom:0,borderRadius:"0px 16px 16px 0px",height:"100%",width:"40px"};class z extends n.Component{constructor(...e){super(...e),D(this,"state",{value:this.props.initialValue||""}),D(this,"handleOnChange",(({value:e})=>{this.setState({value:e})})),D(this,"handleOnSubmit",(e=>{const{onSubmit:t}=this.props,{value:i}=this.state;e.preventDefault(),t({event:e,value:i})}))}render(){const{id:e,placeholder:t,type:i}=this.props,{value:n}=this.state;return(0,r.jsx)(s.xu,{color:"secondary",rounding:4,children:(0,r.jsx)("form",{onSubmit:this.handleOnSubmit,noValidate:!0,children:(0,r.jsxs)(s.xu,{marginStart:-1,marginEnd:-1,display:"flex",children:[(0,r.jsx)(s.xu,{position:"relative",width:"100%",paddingX:1,flex:"grow",children:(0,r.jsx)(s.nv,{id:e,onChange:this.handleOnChange,placeholder:t,size:"lg",type:i,value:n})}),(0,r.jsx)(s.kC,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)("button",{style:k,type:"submit",right:"",children:(0,r.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Invia", "Submit", "Icon Button for submitting a text field value", undefined, true),icon:"arrow-forward",inline:!0})})})]})})})}}function O(e){const t=(0,o.ZP)();return(0,r.jsx)(z,{...e,i18n:t})}var R=i(717615),L=i(784590),M=i(19121),B=i(566101),N=i(780280),F=i(231947);function Z({itemId:e,onSelect:t,onSubmit:i,selectedAssets:n}){const a=(0,o.ZP)(),l=(0,N.B)(),d=(0,R.Z)(),c=(0,M.Z)(),u=(0,F.lJ)(c,d)||c.isAuth&&c.id,{data:h,isLoaded:p}=(0,L.Z)({name:"ProductGroupItemIdPinResource",options:{merchantId:(0,F._P)(l,c,d),...u!==c.id?{orbacSubjectId:u}:{},itemId:e,filters:{1:[e]}}});if(!p)return(0,r.jsx)(s.$j,{accessibilityLabel:a.bt("Caricamento in corso...", "Loading...", "Loading", undefined, true),show:!0});const _=(null!=h?h:[]).reduce(((e,t)=>{if(t){if(t.type="pin",t.rich_metadata){const e=t.rich_metadata.url||t.rich_metadata.id;(0,B.Z)({url:e||""})&&(t.link=e)}e.push(t)}return e}),[]);return(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.xu,{paddingX:3,marginBottom:4,children:(0,r.jsx)(O,{id:"asset-picker-itemid",initialValue:e,onSubmit:i,placeholder:a.bt("Inserisci ID articolo del prodotto", "Enter product item ID", "Placeholder for entering an item ID for a product from a catalog", undefined, true)})}),_.length>0?(0,r.jsx)(T,{assets:_,onSelect:t,selectedAssets:n,showAddAssetButton:!1}):(0,r.jsx)(s.xu,{padding:5,maxWidth:468,children:(0,r.jsx)(s.xv,{align:"center",color:"error",size:"200",children:a.bt("Mmm, non esiste alcun Pin correlato. Correggi gli errori di formattazione dell'ID articolo e riprova.", "Hmm, theres no Pin for that. Correct any item ID formatting errors and try again.", "Error message when no pins are returned after searching via catalogs item ID", undefined, true)})})]})}var U=i(407043);function V(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class H extends n.Component{constructor(...e){super(...e),V(this,"state",{itemId:"",validationError:null}),V(this,"handleOnSubmit",(({value:e})=>{const t=e.trim().toLowerCase();t?(this.props.logContextEvent({event_type:7472,component:13392,element:11451}),this.setState({itemId:t,validationError:""})):this.setState({validationError:this.props.i18n.bt("Mmm, non esiste alcun Pin correlato. Correggi gli errori di formattazione dell'ID articolo e riprova.", "Hmm, theres no Pin for that. Correct any item ID formatting errors and try again.", "AssetPickerCatalogTab.NoPinError", undefined, true)})}))}render(){const{onSelect:e,selectedAssets:t,visible:i}=this.props,{itemId:n,validationError:o}=this.state;return(0,r.jsx)(s.xu,{column:12,height:"100%",display:i?"block":"none",padding:3,children:n.length>0?(0,r.jsx)(Z,{itemId:n,onSubmit:this.handleOnSubmit,onSelect:e,selectedAssets:t}):(0,r.jsxs)(s.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,r.jsxs)(s.xu,{marginBottom:3,children:[(0,r.jsx)(s.xv,{align:"center",weight:"bold",children:this.props.i18n.bt("Aggiungi un prodotto con il rispettivo ID articolo", "Add a product with its item ID", "Prompt for adding a product from a catalog using an item ID", undefined, true)}),(0,r.jsx)(s.xv,{align:"center",children:this.props.i18n.bt("Sono presenti ID prodotto dell'articolo nella fonte dati", "Product item IDs can be found in your data source", "Helper text for where to find a product's item ID in a catalog", undefined, true)})]}),(0,r.jsx)(s.xu,{width:486,children:(0,r.jsx)(O,{id:"asset-picker-itemid",onSubmit:this.handleOnSubmit,placeholder:this.props.i18n.bt("Inserisci ID articolo del prodotto", "Enter product item ID", "Placeholder for entering an item ID for a product from a catalog", undefined, true)})}),o&&(0,r.jsx)(s.xu,{padding:5,maxWidth:468,children:(0,r.jsx)(s.xv,{align:"center",color:"error",size:"200",children:o})})]})})}}function G(e){const{logContextEvent:t}=(0,U.v)(),i=(0,o.ZP)();return(0,r.jsx)(H,{...e,i18n:i,logContextEvent:t})}var W=i(702664),$=i(116303);const q={paddingInlineStyle:{__style:{padding:6}},disabledOverlayInlineStyle:{__style:{padding:2,opacity:.5}},marginInlineStyle:{margin:2},thumbnailInlineStyle:{padding:2,cursor:"pointer"}};function Y({item:e,onClick:t,selected:i,selectedIndex:o}){const[l,d]=(0,n.useState)(!1),c=(0,n.useCallback)((()=>t(e)),[e,t]),u=(0,n.useCallback)((()=>d(!0)),[d]),h=(0,n.useCallback)((()=>d(!1)),[d]),g=p(e),m=(0,y.Z)(e),f=(0,r.jsxs)(s.xu,{rounding:2,height:153,width:153,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",color:l?"lightWash":"secondary",children:[(0,r.jsx)(_,{item:e}),o>=0&&(0,r.jsx)(w,{number:o+1}),!!m&&(0,r.jsx)(s.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,r.jsx)(a,{color:"transparentDarkGray",type:m})})]}),x=(0,r.jsxs)(s.xu,{paddingY:2,children:[(0,r.jsx)(s.xv,{size:"200",lineClamp:1,children:E(e.name,20)}),(0,r.jsxs)(s.xu,{paddingY:1,children:[!!e.items&&(0,r.jsx)(s.xv,{size:"100",lineClamp:1,children:`${e.items} items`}),!!e.size&&(0,r.jsx)(s.xv,{size:"100",lineClamp:1,children:e.size})]})]});return(0,r.jsx)(I.Z,{onClick:g?c:void 0,rounded:!0,style:q.marginInlineStyle,children:(0,r.jsx)(s.xu,{rounding:2,width:168,dangerouslySetInlineStyle:g?q.paddingInlineStyle:q.disabledOverlayInlineStyle,children:g?(0,r.jsxs)(s.st,{onMouseEnter:u,onMouseLeave:h,children:[(0,r.jsx)(I.Z,{selected:i,rounded:!0,style:q.thumbnailInlineStyle,children:f}),x]}):(0,r.jsxs)(n.Fragment,{children:[f,x]})})})}function X({items:e,selected:t,onClick:i}){return(0,r.jsx)(s.Rk,{renderItem:({data:e})=>{const n=t.map((e=>e.id));return(0,r.jsx)(Y,{item:e,onClick:i,selected:n.includes(e.id),selectedIndex:n.indexOf(e.id)},e.id)},columnWidth:168,layout:"uniformRow",gutterWidth:4,items:e,minCols:5})}function K({path:e="",rootName:t="Home",onChangeDirectory:i}){let n=e;e&&"/"!==e.charAt(0)&&(n="/".concat(n)),e&&"/"===e.charAt(e.length-1)&&(n=n.substring(0,e.length-1));const o=n.split("/");return(0,r.jsx)(s.kC,{alignItems:"start",justifyContent:"start",children:o.map(((e,n)=>{const a=o.slice(0,n+1).join("/");return(0,r.jsxs)(s.xu,{display:"flex",children:[n>0&&(0,r.jsx)(s.xu,{paddingX:1,children:(0,r.jsx)(s.xv,{color:"subtle",children:">"})}),(0,r.jsx)(s.xu,{paddingX:1,children:(0,r.jsx)(s.iP,{onTap:()=>i(a),children:(0,r.jsx)(s.xv,{color:n===o.length-1?"default":"subtle",children:0===n?t:e})})})]},a)}))})}const J=(e,t,i)=>{const n=e.name.toLocaleLowerCase(),o=t.name.toLocaleLowerCase();return n<o?i?-1:1:n>o?i?1:-1:0},Q=(e,t,i)=>e.lastModified||t.lastModified?e.lastModified?t.lastModified?e.lastModified<t.lastModified?i?-1:1:e.lastModified>t.lastModified?i?1:-1:J(e,t,!0):1:-1:J(e,t,!0);function ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const te=["grid","list"],ie={grid:0,list:1},ne={__style:{zIndex:1e3}};class oe extends n.Component{constructor(...e){super(...e),ee(this,"state",{view:this.props.initialView,sort:"newest",query:"",isFlyoutOpen:!1}),ee(this,"handleSearch",(({value:e})=>this.setState({query:e}))),ee(this,"handleChangeView",(({activeIndex:e})=>{this.setState({view:te[e]})})),ee(this,"handleSort",(({value:e})=>this.setState({sort:e}))),ee(this,"handleSetRef",(e=>{this._ref=e})),ee(this,"handleAvatarClick",(()=>{const{onFlyoutChange:e}=this.props,{isFlyoutOpen:t}=this.state;this.setState({isFlyoutOpen:!t}),e&&e(!t)})),ee(this,"handleFlyoutDismiss",(()=>{const{onFlyoutChange:e}=this.props;this.setState({isFlyoutOpen:!1}),e&&e(!1)})),ee(this,"options",[{label:this.props.i18n.bt("Pi recenti", "Newest", "Dropdown option to sort by newest", undefined, true),value:"newest"},{label:this.props.i18n.bt("Meno recenti", "Oldest", "Dropdown option to sort by oldest", undefined, true),value:"oldest"},{label:this.props.i18n.bt("Dalla A alla Z", "A to Z", "Dropdown option to sort by descending alphabetical order", undefined, true),value:"a-z"},{label:this.props.i18n.bt("Dalla Z alla A", "Z to A", "Dropdown option to sort by ascending alphabetical order", undefined, true),value:"z-a"}]),ee(this,"getSort",(e=>{switch(e){case"oldest":return(e,t)=>Q(e,t,!0);case"a-z":return(e,t)=>J(e,t,!0);case"z-a":return(e,t)=>J(e,t,!1);default:return(e,t)=>Q(e,t,!1)}}))}render(){const{path:e,items:t,selected:i,name:n,avatarUrl:o,onChangeDirectory:a,onFileClick:l,onLogout:d}=this.props,{view:c,sort:u,query:h,isFlyoutOpen:p}=this.state,_=[...t].sort(this.getSort(u)),g=h.length>0?_.filter((e=>e.name.toLocaleLowerCase().includes(h.toLocaleLowerCase()))):_;return(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[(0,r.jsxs)(s.xu,{direction:"row",display:"flex",paddingY:2,marginStart:-1,marginEnd:-1,children:[(0,r.jsx)(s.xu,{paddingX:2,ref:this.handleSetRef,children:(0,r.jsx)(s.iP,{onTap:this.handleAvatarClick,rounding:"circle",children:(0,r.jsx)($.Z,{size:"sm",name:n,src:o})})}),(0,r.jsx)(s.xu,{flex:"grow",paddingX:2,children:(0,r.jsx)(s.Um,{accessibilityLabel:this.props.i18n.bt("Cerca", "Search", "Accessibility label for the searching through dropbox items and folders", undefined, true),id:"dropbox-search-field",onChange:this.handleSearch,placeholder:this.props.i18n.bt("Cerca", "Search", "Placeholder for search field", undefined, true),size:"lg",value:h})}),(0,r.jsx)(s.xu,{paddingX:2,children:(0,r.jsx)(s.sY,{items:[(0,r.jsx)(s.JO,{icon:"view-type-default",accessibilityLabel:"Switch to Grid View"}),(0,r.jsx)(s.JO,{icon:"view-type-list",accessibilityLabel:"Switch to List View"})],selectedItemIndex:ie[c],onChange:this.handleChangeView})}),(0,r.jsx)(s.xu,{paddingX:2,width:174,children:(0,r.jsx)(s.EI,{id:"asset-picker-dropbox-sort-select-list",onChange:this.handleSort,value:u,children:this.options.map((({label:e,value:t})=>(0,r.jsx)(s.EI.Option,{label:e,value:t},e)))})})]}),(0,r.jsx)(s.xu,{paddingY:2,children:(0,r.jsx)(K,{path:e,rootName:"Dropbox",onChangeDirectory:a})}),(0,r.jsx)(s.xu,{marginStart:-2,marginEnd:-2,width:0,children:(0,r.jsx)(X,{items:g,selected:i,onClick:l})}),p&&(0,r.jsx)(s.mh,{children:(0,r.jsx)(s.xu,{position:"absolute",top:!0,dangerouslySetInlineStyle:ne,children:(0,r.jsx)(s.J2,{anchor:this._ref,onDismiss:this.handleFlyoutDismiss,idealDirection:"down",positionRelativeToAnchor:!1,children:(0,r.jsx)(s.xu,{width:"100%",padding:4,children:(0,r.jsxs)(s.xu,{width:"100%",display:"flex",direction:"column",justifyContent:"center",marginTop:-2,marginBottom:-2,children:[(0,r.jsxs)(s.xu,{display:"flex",paddingY:2,alignItems:"center",children:[(0,r.jsx)($.Z,{size:"sm",name:n,src:o}),(0,r.jsx)(s.xu,{paddingX:2,children:(0,r.jsx)(s.xv,{children:n})})]}),(0,r.jsx)(s.iz,{}),(0,r.jsxs)(s.xu,{paddingY:2,children:[(0,r.jsx)(s.xu,{paddingY:2,children:(0,r.jsx)(s.rU,{href:"https://www.dropbox.com",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,r.jsx)(s.xv,{weight:"bold",children:this.props.i18n.bt("Vai a Dropbox", "Go to Dropbox", "Link to redirect to Dropbox index page", undefined, true)}),(0,r.jsx)(s.JO,{icon:"visit",color:"default",accessibilityLabel:this.props.i18n.bt("Vai a Dropbox", "Go to Dropbox", "Link to redirect to Dropbox index page", undefined, true)})]})})}),(0,r.jsx)(s.xu,{paddingY:2,children:(0,r.jsx)(s.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>{e(),d()},children:(0,r.jsx)(s.xv,{weight:"bold",children:this.props.i18n.bt("Disconnetti", "Sign out", "Button to unlink user from their Dropbox account", undefined, true)})})})]})]})})})})})]})}}function se(e){const t=(0,o.ZP)();return(0,r.jsx)(oe,{...e,i18n:t})}function re({onClick:e}){return(0,r.jsx)(s.xu,{height:"100%",children:(0,r.jsxs)(s.xu,{height:"100%",alignItems:"center",direction:"column",display:"flex",justifyContent:"center",padding:3,children:[(0,r.jsx)("svg",{width:100,height:100,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M6 1.75l6 3.844-6 3.844 6 3.844-6 3.844-6-3.844 6-3.844-6-3.844L6 1.75zm12 0l6 3.844-6 3.844-6-3.844 6-3.844zm-6 11.532l6-3.844 6 3.844-6 3.844-6-3.844zm-6 5.124l6-3.843 6 3.843-6 3.844-6-3.844z",fill:"#0061FF"})}),(0,r.jsx)(s.xu,{paddingY:5,children:(0,r.jsx)(s.xv,{weight:"bold",children:"Connect to your Dropbox account"})}),(0,r.jsx)(s.zx,{text:"Sign in",color:"gray",onClick:e})]})})}ee(oe,"defaultProps",{items:[],selected:[],initialView:"grid",path:"",name:"Dropbox User",avatarUrl:""});var ae=i(689070);function le(e,t){const i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";const n=["KB","MB","GB","TB","PB","EB","ZB","YB"];let o=-1;do{e/=i,o+=1}while(Math.abs(e)>=i&&o<n.length-1);let s=e.toFixed(1);return s.endsWith(".0")&&(s=s.substring(0,s.length-2)),s+" "+n[o]}var de=i(205992),ce=i(177471);function ue(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class he extends n.Component{constructor(...e){super(...e),ue(this,"state",{path:"",userName:"",userAvatarURL:"",items:[],isLoading:!1}),ue(this,"_isMounted",!1),ue(this,"startDropboxAuthorization",(()=>{const{socialManager:e,updateSocialNetwork:t,setError:i}=this.props;e.handleConnect("dropbox",!0,{success:()=>{this._isMounted&&(t("dropbox",!0),this.setState({isLoading:!0},this.getUserAccountInfo))},error:()=>{this._isMounted&&i(this.props.i18n.bt("Accesso a Dropbox non riuscito. Riprova.", "Hmm... your Dropbox sign in didn't work. Give it another try.", "Error message to indicate that there was error happened while signing into Dropbox", undefined, true))}},this.props.i18n)})),ue(this,"listPathContent",(()=>{const{setError:e}=this.props,{path:t}=this.state;(0,ae.Z)({url:"/v3/dropbox/folder/",data:{path:t}}).then((e=>{const t=e.resource_response.data.entries,i=t.map((e=>e.id)),n=t.reduce(((e,t)=>("file"===t[".tag"]?e[t.id]={id:t.id,type:"dropboxFile",name:t.name,size:le(t.size,!1),lastModified:new Date(t.client_modified),isDownloadable:t.is_downloadable}:e[t.id]={id:t.id,type:"dropboxFolder",name:t.name},e)),{});(0,ae.Z)({url:"/v3/dropbox/files/",data:{paths:i,add_fields:["dropboxfile.thumbnail"]}}).then((e=>{e.resource_response.data.forEach((e=>{"success"===e.thumbnail[".tag"]&&(n[e.id]={...n[e.id],thumbnail:e.thumbnail.thumbnail})}));const t=Object.values(n).filter((e=>"dropboxFolder"===e.type)).map((e=>(0,ae.Z)({url:"/v3/dropbox/folder/",data:{path:e.id}})));return Promise.all(t)})).then((e=>{e.forEach((e=>{const t=e.resource_response.data;n[t.path].items=t.size}))})).then((()=>{if(this._isMounted){const e=Object.values(n);this.setState({items:e},(()=>this.setState({isLoading:!1})))}}))})).catch((t=>{this._isMounted&&this.setState({isLoading:!1},(()=>e(this.props.i18n.bt("I file da Dropbox non sono stati caricati. Riprova.", "Hmm... your files from Dropbox didn't upload. Try again.", "Error message to indicate that there was error happened while retrieving files in users Dropbox", undefined, true))))}))})),ue(this,"handleClick",(e=>{const{onSelect:t}=this.props,{path:i}=this.state;"dropboxFolder"===e.type?this.handleChangeDirectory(`${i}/${e.name}`):t(e)})),ue(this,"handleChangeDirectory",(e=>{this.setState({path:e,isLoading:!0},this.listPathContent)})),ue(this,"getUserAccountInfo",(()=>{(0,ae.Z)({url:"/v3/dropbox/users/me/"}).then((e=>{if(this._isMounted){const t=e.resource_response.data;this.setState({userName:t.name.display_name,userAvatarURL:t.profile_photo_url},this.listPathContent)}})).catch((e=>{const{setError:t}=this.props;t("Hmm... We didn't get your Dropbox account information. Try again.")}))})),ue(this,"handleLogout",(()=>{const{updateSocialNetwork:e}=this.props;e("dropbox",!1),(0,ae.Z)({url:"/v3/connect/dropbox/",method:"DELETE"})}))}componentDidMount(){const{viewer:e}=this.props;this._isMounted=!0,e.isAuth&&e.socialNetwork.dropbox.connected&&this.setState({isLoading:!0},this.getUserAccountInfo)}componentWillUnmount(){this._isMounted=!1}render(){const{viewer:e,visible:t,selectedAssets:i,onFlyoutChange:n}=this.props,{items:o,path:a,userName:l,userAvatarURL:d,isLoading:c}=this.state,u=e.isAuth&&e.socialNetwork.dropbox.connected;return(0,r.jsxs)(s.xu,{column:12,height:"100%",display:t?"block":"none",padding:3,children:[(0,r.jsx)(s.xu,{height:"100%",paddingX:3,paddingY:1,children:u?(0,r.jsx)(se,{initialView:"grid",items:o,selected:i,name:l,avatarUrl:d,path:a,onChangeDirectory:this.handleChangeDirectory,onFileClick:this.handleClick,onFlyoutChange:n,onLogout:this.handleLogout}):(0,r.jsx)(re,{onClick:this.startDropboxAuthorization})}),c&&(0,r.jsx)(s.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center",children:(0,r.jsx)(s.$j,{show:!0,accessibilityLabel:this.props.i18n.bt("Casella di selezione caricamento di Dropbox", "Dropbox Loading Spinner", "description for loading spinner inside AssetPicker Dropbox tab", undefined, true)})})]})}}function pe(e){const t=(0,W.useDispatch)(),i=(0,o.ZP)(),n=(0,ce.k)();return(0,r.jsx)(he,{...e,i18n:i,socialManager:n,updateSocialNetwork:(e,i)=>t((0,de.V6)(e,i)),viewer:(0,M.Z)(),requestContext:(0,N.B)()})}function _e({onSelect:e,pins:t,selectedAssets:i,shouldShowProductsOnly:a,searchFilterText:l,addAssets:d}){const c=(0,o.ZP)(),[u,h]=(0,n.useState)(!1);(0,n.useEffect)((()=>h(t&&!t.isLoaded)));const p=a?S.VX:S.Bc,_=t&&t.data&&t.data.reduce(((e,t)=>(t&&"pin"===t.type&&p(t)&&(0,S.ir)(t,l)&&e.push(t),e)),[])||[];return(0,r.jsxs)(s.xu,{alignItems:"center",display:"flex","data-test-id":"asset-picker-pins-pane",height:u?"100%":void 0,justifyContent:"center",children:[(0,r.jsx)(s.$j,{accessibilityLabel:c.bt("Caricamento in corso...", "Loading...", "Loading", undefined, true),show:u}),t&&t.data&&t.data.length>0&&(0,r.jsx)(T,{addAssets:d,assets:_,onSelect:e,loadItems:t.fetchMore,scrollContainer:()=>window,selectedAssets:i,showAddAssetButton:!1})]})}function ge({addAssets:e,onSelect:t,searchFilterText:i,selectedAssets:n,shouldShowProductsOnly:o,username:s}){const a=(0,L.Z)({name:"UserPinsResource",options:{field_set_key:"detailed",username:s,prepend:!1,include_protected_pins:!0,limit:1e3,page_size:150}});return(0,r.jsx)(_e,{addAssets:e,onSelect:t,pins:a,searchFilterText:i,selectedAssets:n,shouldShowProductsOnly:o})}var me=i(596505);function fe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const xe={PRODUCTS:"PRODUCTS",ALL_PINS:"ALL_PINS"};class be extends n.PureComponent{constructor(...e){super(...e),fe(this,"state",{shouldShowProductsOnly:!0,searchText:"",showDropdownFlyout:!1,currentSelection:xe.PRODUCTS}),fe(this,"setContainerRef",(e=>{this.containerRef=e})),fe(this,"handleHideDropdownFlyout",(e=>{e.target instanceof HTMLElement&&this.setState((t=>({showDropdownFlyout:!!(this.containerRef&&e.target instanceof HTMLElement&&this.containerRef.contains(e.target))&&!t.showDropdownFlyout})))})),fe(this,"dropdownOnChange",(e=>{e&&this.setState({shouldShowProductsOnly:e.value===xe.PRODUCTS,showDropdownFlyout:!1,currentSelection:e.value})})),fe(this,"handleSearchQueryUpdates",(e=>{this.setState({searchText:e.value})})),fe(this,"handleAssetSelect",(e=>{const{onSelect:t}=this.props;t(e)}))}componentDidMount(){document.addEventListener("click",this.handleHideDropdownFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideDropdownFlyout,{capture:!0})}render(){const{selectedAssets:e,visible:t,viewer:i,user:{data:n}}=this.props,{shouldShowProductsOnly:o,searchText:a,showDropdownFlyout:l,currentSelection:d}=this.state,c=(u=this.props.i18n,new Map([[xe.PRODUCTS,u.bt("Pin prodotto", "Product Pins", "Dropdown filter to show products only", undefined, true)],[xe.ALL_PINS,u.bt("Tutti i Pin", "All Pins", "Dropdown filter to show all pins", undefined, true)]]));var u;let h=(n?n.username:i&&i.isAuth&&i.username)||"";return this.props.orbacActingAs&&this.props.orbacActingAs.user&&this.props.orbacActingAs.user.username&&(h=this.props.orbacActingAs.user.username),(0,r.jsxs)(s.xu,{column:12,height:"100%",display:t?"block":"none",padding:3,"data-test-id":"asset-picker-tagging-pane",children:[(0,r.jsx)(s.xu,{marginStart:4,children:(0,r.jsx)(s.X6,{size:"500",children:this.props.i18n.bt("Usa i tuoi Pin", "Use your Pins", "Select products to the collection/STL selected in Pin Builder.", undefined, true)})}),(0,r.jsx)(s.xu,{marginStart:4,marginTop:3,children:(0,r.jsx)(s.xv,{children:this.props.i18n.bt("Rendi tutto pi semplice: usa i tuoi Pin esistenti per aggiungere prodotti alla tua immagine. Aggiungi i prodotti nell'ordine in cui desideri vengano visti dagli utenti.", "Keep it simpleuse your existing Pins to add products to your image. Add products in the order you want people to see them.", "Description of the functionalities in the pins picker tab", undefined, true)})}),(0,r.jsxs)(s.xu,{margin:4,alignItems:"center",direction:"row",display:"flex",children:[(0,r.jsx)(s.xu,{rounding:2,column:10,children:(0,r.jsx)(s.nv,{id:"search",onChange:this.handleSearchQueryUpdates,placeholder:this.props.i18n.bt("Cerca titolo o descrizione del Pin", "Search Pin title or description", "Placeholder search bar text to search the pins", undefined, true),size:"lg",type:"text",value:a})}),(0,r.jsx)(s.xu,{ref:this.setContainerRef,children:(0,r.jsx)(s.xu,{column:3,rounding:2,marginStart:4,"data-test-id":"pins-filter-dropdown",children:(0,r.jsx)(me.Z,{onOpen:this.dropdownOnChange,onClose:this.dropdownOnChange,isOpen:l,onChange:this.dropdownOnChange,options:Object.keys(xe).map((e=>xe[e])).map((e=>({label:c.get(e),value:e}))),value:{label:c.get(d),value:{currentSelection:d}}})})})]}),(0,r.jsx)(s.xu,{children:t&&(0,r.jsx)(ge,{addAssets:void 0,onSelect:this.handleAssetSelect,selectedAssets:e,username:h,shouldShowProductsOnly:o,searchFilterText:a})})]})}}function ye(e){const t=(0,W.useSelector)((({advertiser:e})=>e)),i=(0,o.ZP)(),n=(0,M.Z)(),s=(0,R.Z)(),a=(0,L.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:!!t&&t.owner_user_id||n.isAuth&&n.id||""}});return(0,r.jsx)(be,{...e,advertiser:t,i18n:i,user:a,viewer:n,orbacActingAs:s})}function ve({onSubmit:e,title:t,description:i,validationError:n}){const a=(0,o.ZP)();return(0,r.jsxs)(s.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,r.jsxs)(s.xu,{marginBottom:3,children:[(0,r.jsx)(s.xv,{align:"center",weight:"bold",children:t||a.bt("Carica un'immagine dal tuo sito web", "Upload an image from your website", "Prompt for scraping media from site", undefined, true)}),i&&(0,r.jsx)(s.xv,{children:i})]}),(0,r.jsx)(s.xu,{width:486,children:(0,r.jsx)(O,{id:"asset-picker-url",onSubmit:e,placeholder:a.bt("Inserisci l'URL del tuo sito web", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),n&&(0,r.jsx)(s.xu,{padding:5,maxWidth:468,children:(0,r.jsx)(s.xv,{align:"center",color:"error",size:"200",children:n})})]})}var Pe=i(954931),we=i(131555),Ie=i(122097);function Ae({allowPinFetch:e,onSelect:t,onSubmit:i,selectedAssets:n,url:a,validationError:l}){const d=(0,o.ZP)(),c=(0,Pe.Z)(a)?/\/pin\/([\w-]+)\/?$/.exec(a):null;return(0,r.jsx)(s.xu,{height:"100%","data-test-id":"asset-picker-scraping-pane",children:c&&e?(0,r.jsx)(we.Z,{pinId:c[1],fieldSetKey:"images_only_item",children:({pin:e,error:o,loading:l})=>l&&!o?(0,r.jsxs)(s.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,r.jsx)(s.$j,{accessibilityLabel:d.bt("Caricamento", "Loading", "Accessibility label for spinner loading", undefined, true),show:!0}),(0,r.jsx)(s.xu,{padding:2,children:(0,r.jsx)(s.xv,{children:d.bt("Caricamento immagine", "Loading image", "Loading message for image loading", undefined, true)})})]}):(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.xu,{paddingX:3,marginBottom:4,children:(0,r.jsx)(O,{id:"asset-picker-url",initialValue:a,onSubmit:i,placeholder:d.bt("Inserisci l'URL del tuo sito web", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),o?(0,r.jsx)(s.xu,{padding:5,maxWidth:468,children:(0,r.jsx)(s.xv,{align:"center",color:"error",size:"200",children:d.bt("Mmm, questo link non funziona. Prova a inserirlo di nuovo o usa un link diverso.", "Hmm, that link didnt work. Try entering it again or use a different link.", "Error message when scraping a link does not work.", undefined, true)})}):(0,r.jsx)(T,{assets:e?[e]:[],onSelect:t,selectedAssets:n,showAddAssetButton:!1})]})}):(0,r.jsx)(Ie.Z,{source:"pin_create",url:a,children:({images:e,loading:o,error:c})=>!o||l||c?(e.forEach((e=>Object.assign(e,{id:e.url,src:e.url,type:"webImage",sourceURL:a}))),(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.xu,{paddingX:3,marginBottom:4,children:(0,r.jsx)(O,{id:"asset-picker-url",initialValue:a,onSubmit:i,placeholder:d.bt("Inserisci l'URL del tuo sito web", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),l||c?(0,r.jsx)(s.xu,{padding:5,maxWidth:468,"data-test-id":"scrape-validation-error",children:(0,r.jsx)(s.xv,{align:"center",color:"error",size:"200",children:l||c})}):(0,r.jsx)(T,{assets:e,onSelect:t,selectedAssets:n,showAddAssetButton:!1})]})):(0,r.jsxs)(s.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,r.jsx)(s.$j,{accessibilityLabel:d.bt("Caricamento", "Loading", "Accessibility label for spinner loading", undefined, true),show:!0}),(0,r.jsx)(s.xu,{padding:2,children:(0,r.jsx)(s.xv,{children:d.bt("Caricamento immagini", "Loading images", "Loading message for image loading", undefined, true)})})]})})})}var Ee=i(134906);function Ce(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Se extends n.Component{constructor(...e){super(...e),Ce(this,"state",{url:"",validationError:null}),Ce(this,"validateUrl",(e=>{const{usedUrls:t}=this.props;return this.validateWebsiteUrl(e)||(t.includes(e)?this.props.i18n.bt("Non puoi taggare la pagina due volte.", "You can't tag from the same page twice.", "AssetPickerScrapeTab.repeatedURL", undefined, true):null)})),Ce(this,"validateWebsiteUrl",(e=>{const t=this.props.i18n.bt("Inserisci un URL valido", "Please enter a valid URL", "AssetPickerScrapeTab.invalidURL", undefined, true);if(!e)return t;const i=(0,Ee.Jx)({message:t});return(0,Ee.a3)(e,[i])})),Ce(this,"handleOnSubmit",(({value:e})=>{this.props.logContextEvent({event_type:7472,component:13392,element:11267,aux_data:{url:e}});const t=e.trim(),i=this.validateUrl(t);this.setState({url:t,validationError:i})})),Ce(this,"handleOnSelect",(e=>{const{resetOnSelect:t=!1,onSelect:i}=this.props;t&&this.setState({url:""}),i(e)}))}render(){const{selectedAssets:e,visible:t,title:i,description:n}=this.props,{url:o,validationError:a}=this.state;return(0,r.jsx)(s.xu,{column:12,height:"100%",display:t?"block":"none",padding:3,children:o.length>0?(0,r.jsx)(Ae,{onSelect:this.handleOnSelect,allowPinFetch:!0,onSubmit:this.handleOnSubmit,selectedAssets:e,url:o,validationError:a}):(0,r.jsx)(ve,{onSubmit:this.handleOnSubmit,title:i,description:n,validationError:a})})}}function je(e){const{logContextEvent:t}=(0,U.v)(),i=(0,o.ZP)();return(0,r.jsx)(Se,{...e,i18n:i,logContextEvent:t})}var Te=i(916655),De=i(623320),ke=i(69183),ze=i(172045);var Oe=i(66699);function Re(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Le={__style:{zIndex:C.v9}};class Me extends n.Component{constructor(...e){super(...e),Re(this,"state",{sort:"newest",query:""}),Re(this,"handleSearch",(e=>{this.props.logContextEvent({event_type:7472,component:13392,element:11270}),this.setState({query:e.value})})),Re(this,"getSort",(e=>{switch(e){case"oldest":return()=>-1;case"a-z":return(e,t)=>{const i=e.name.toLocaleLowerCase(),n=t.name.toLocaleLowerCase();return i<n?-1:i>n?1:0};case"z-a":return(e,t)=>{const i=e.name.toLocaleLowerCase(),n=t.name.toLocaleLowerCase();return i>n?-1:i<n?1:0};default:return()=>0}})),Re(this,"handleSort",(({value:e})=>{this.props.logContextEvent({event_type:3828,component:13392,element:11273}),this.setState({sort:e})})),Re(this,"options",[{label:this.props.i18n.bt("Pi recenti", "Newest", "Dropdown option to sort by newest", undefined, true),value:"newest"},{label:this.props.i18n.bt("Meno recenti", "Oldest", "Dropdown option to sort by oldest", undefined, true),value:"oldest"},{label:this.props.i18n.bt("Dalla A alla Z", "A to Z", "Dropdown option to sort by descending alphabetical order", undefined, true),value:"a-z"},{label:this.props.i18n.bt("Dalla Z alla A", "Z to A", "Dropdown option to sort by ascending alphabetical order", undefined, true),value:"z-a"}]),Re(this,"handleDrop",(e=>{const{addAssets:t,logContextEvent:i}=this.props,n=(0,d.Z)(e.dataTransfer);i({event_type:3502,component:13392,element:11275}),t(n)})),Re(this,"handleSearchFieldFocus",(()=>{this.props.logContextEvent({event_type:101,component:13392,element:11270})}))}render(){const{addAssets:e,assets:t,onSelect:i,selectedAssets:n}=this.props,{sort:o,query:a}=this.state,d=[...t].sort(this.getSort(o)),u=a.length>0?d.filter((e=>e.name.toLocaleLowerCase().includes(a.toLocaleLowerCase()))):d;return(0,r.jsxs)(s.xu,{"data-test-id":"asset-picker-uploaded-pane",direction:"column",display:"flex",height:"100%",children:[(0,r.jsxs)(s.xu,{"data-test-id":"uploaded-pane-filter-box",display:"flex",padding:2,children:[(0,r.jsx)(s.xu,{flex:"grow",paddingX:1,children:(0,r.jsx)(s.Um,{accessibilityLabel:this.props.i18n.bt("Cerca", "Search", "Accessibility label for the searching through uploaded images and videos", undefined, true),id:"asset-search-field",onChange:this.handleSearch,onFocus:this.handleSearchFieldFocus,placeholder:this.props.i18n.bt("Cerca", "Search", "Placeholder for search field", undefined, true),size:"lg",value:a})}),(0,r.jsx)(s.xu,{paddingX:1,width:168,children:(0,r.jsx)(s.EI,{id:"asset-picker-sort-select-list",onChange:this.handleSort,value:o,children:this.options.map((({label:e,value:t})=>(0,r.jsx)(s.EI.Option,{label:e,value:t},e)))})})]}),(0,r.jsx)(s.xu,{height:"100%",position:"relative",width:"100%",children:(0,r.jsx)(l.Z,{accept:[...c.xl,...c.ss].join(","),allowMultipleFiles:!0,color:"white",id:"asset-picker-upload-pane",onDrop:this.handleDrop,children:t=>(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:t?void 0:Le,paddingY:2,position:"relative",children:(0,r.jsx)(T,{addAssets:e,assets:[{id:"pinbuilder_asset_picker_blank",type:"blank"},...u],onSelect:i,selectedAssets:n})})})})]})}}function Be(e){const{logContextEvent:t}=(0,U.v)(),i=(0,o.ZP)();return(0,r.jsx)(Me,{...e,i18n:i,logContextEvent:t})}var Ne=i(237056),Fe=i(77891),Ze=i(474394),Ue=i(966113);function Ve({onSelect:e,setLoading:t,setError:i,selectedAssets:a,visible:l}){const d=(0,o.ZP)(),c=(0,Ne.Z)(),[u,h]=(0,n.useState)(""),p=(0,W.useDispatch)(),_=(0,W.useSelector)((({pinbuilder:e})=>e.assets)),g=t=>(i(""),h(""),(0,Fe.Z)({i18n:d,ideaPinRenamingEnabled:c,files:t,options:{allowVideo:!0}}).then((t=>{const n=t.reduce(((e,t)=>{var i;return"localVideo"===t.type?e.push((i=t,(0,ke.v)(i,0).then((e=>({...i,customCoverImg:{id:(0,ze.Z)(),fileSrc:i.fileSrc,name:i.name,size:(0,De.Mi)(e).size,src:e,width:i.width,height:i.height,type:"localImage"}}))))):"localImage"!==t.type&&"error"!==t.type||e.push(t),e}),[]);return Promise.all(n).then((t=>{const n=t.reduce(((e,t)=>("error"===t.type&&e.push(t),e)),[]),o=t.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);n.length>0&&((_.length>0||o.length>0)&&i((0,Oe.Z)(d.nbt(["Spiacenti, impossibile caricare {{numOfErrors}} file.", "Spiacenti, impossibile caricare {{numOfErrors}} file."], n.length, "Error message saying how many files could not be uploaded", true),{numOfErrors:n.length}),null,(0,r.jsx)(s.rU,{target:"blank",href:Ue.Cm,onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:(0,r.jsx)(s.zx,{color:"transparent",text:d.bt("Ulteriori informazioni", "Learn more", "Learn more about error", undefined, true)})})),h(n[0].message)),o.forEach((t=>{(e=>{p((0,Ze.addPinBuilderAsset)(e))})(t),e(t)}))}))})));return(0,r.jsx)(s.xu,{column:12,height:"100%",display:l?"block":"none",children:_.length>0?(0,r.jsx)(s.xu,{height:"100%",paddingY:1,paddingX:3,children:(0,r.jsx)(Be,{addAssets:g,assets:_,onSelect:e,selectedAssets:a})}):(0,r.jsx)(s.xu,{height:"100%",padding:3,children:(0,r.jsx)(Te.Z,{addAssets:g,errorMessage:u})})})}var He=i(265696),Ge=i(725108);function We(e){switch(e){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";case"mp4":return"video/mp4";case"m4v":return"video/x-m4v";case"mov":return"video/quicktime";default:return""}}var $e=i(480542),qe=i(123463),Ye=i(121151);function Xe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ke=({condition:e,children:t})=>e?(0,r.jsx)(s.xu,{position:"absolute",zIndex:Ye.b7,children:t}):t;class Je extends n.Component{constructor(e){super(e),Xe(this,"state",{activeTabIndex:this.props.initialTab&&this.props.shownTabs?this.props.shownTabs.indexOf(this.props.initialTab):0,assets:this.props.selectedPins||[],isLoading:!1,isDropboxFlyoutOpen:!1,error:null,usedUrls:[]}),Xe(this,"downloadDropboxAssets",(()=>{const{assets:e}=this.state,{i18n:t,ideaPinRenamingEnabled:i}=this.props;return Promise.all(e.map((e=>"dropboxFile"===e.type?(0,ae.Z)({url:"/v3/dropbox/files/",data:{paths:[e.id],add_fields:["dropboxfile.file_base64"]}}).then((n=>{const o=function(e,t="",i=512){const n=atob(e),o=[];for(let s=0;s<n.length;s+=i){const e=n.slice(s,s+i),t=new Array(e.length);for(let i=0;i<e.length;i+=1)t[i]=e.charCodeAt(i);const r=new Uint8Array(t);o.push(r)}return new Blob(o,{type:t})}(n.resource_response.data[0].file_base64);return(0,qe.Z)({i18n:t,ideaPinRenamingEnabled:i,file:new File([o],e.name,{type:We(h(e.name)),lastModified:e.lastModified.getTime()}),options:{allowVideo:!0}})})).catch((()=>null)):e)))})),Xe(this,"handleChangeTab",(({activeTabIndex:e,event:t})=>{t.preventDefault(),this.setState({activeTabIndex:e})})),Xe(this,"handleAssetSelect",(e=>{this.props.logContextEvent({event_type:101,component:13392,element:11272});const{maxAssetsToSelect:t}=this.props,{assets:i,usedUrls:n}=this.state;if(e.id)if(i.some((t=>t.id===e.id)))this.setState({assets:i.filter((t=>t.id!==e.id)),usedUrls:n.filter((t=>t!==this.getUrl(e)))});else if(t<=0||i.length<t){const t=this.getUrl(e);this.setState({assets:[...i,e],usedUrls:t?[...n,t]:n})}})),Xe(this,"getUrl",(e=>{switch(e.type){case"pin":return e.link;case"webImage":return e.sourceURL;default:return null}})),Xe(this,"handleSecondaryAction",(()=>{const{onSecondaryAction:e,onDismiss:t,logContextEvent:i}=this.props,{assets:n}=this.state;e&&(i({event_type:101,component:13392,element:11271,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map((e=>e.type))})}}),this.setState({isLoading:!0},(()=>{this.downloadDropboxAssets().then((i=>{if(i){const t=i.filter((e=>!!e&&"error"!==e.type));t.length>0&&e(t)}t()}))})))})),Xe(this,"handlePrimaryAction",(()=>{const{onPrimaryAction:e,onDismiss:t,logContextEvent:i}=this.props,{assets:n}=this.state;i({event_type:101,component:13392,element:11269,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map((e=>e.type))})}}),this.setState({isLoading:!0},(()=>{this.downloadDropboxAssets().then((i=>{if(i){const t=i.filter((e=>!!e&&"error"!==e.type));t.length>0&&e(t)}t()}))}))})),Xe(this,"handleRemoveAsset",(e=>{if(this.props.logContextEvent({event_type:101,component:13392,element:11274}),e.id){const t=this.getUrl(e),i=t?[...this.state.usedUrls,t]:this.state.usedUrls;this.setState((n=>({assets:n.assets.some((t=>t.id===e.id))?n.assets.filter((t=>t.id!==e.id)):[...n.assets,e],usedUrls:n.usedUrls.some((e=>e===t))?n.usedUrls.filter((e=>e!==t)):i})))}})),Xe(this,"removeError",(()=>{this.props.logContextEvent({event_type:101,component:13392,element:11264}),this.setState({error:null})})),Xe(this,"handleSetLoading",((e,t)=>{t?this.setState({isLoading:e},t):this.setState({isLoading:e})})),Xe(this,"handleSetError",((e,t,i)=>{if(e||t||i){const n=(0,r.jsx)(s.zx,{color:"white",onClick:this.removeError,text:this.props.i18n.bt("Ok", "Got it", "Button text to indicate a user understands action", undefined, true)});this.setState({error:(0,r.jsx)(Ge.Z,{errorMessage:e,primaryAction:t||n,secondaryAction:i})})}else this.setState({error:null})})),Xe(this,"handleDismiss",(()=>{const{onDismiss:e}=this.props,{isDropboxFlyoutOpen:t}=this.state;t||e()})),Xe(this,"handleDropboxFlyoutChange",(e=>this.setState({isDropboxFlyoutOpen:e}))),Xe(this,"defaultPrimaryText",(e=>(0,Oe.Z)(this.props.i18n.nbt(["Crea {{ numPins }} Pin", "Crea {{ numPins }} Pin"], e, "Button to create Pins out of selected assets", true),{numPins:e}))),(0,He.Z)()}componentDidMount(){const e=this.props.selectedPins?this.props.selectedPins.map((e=>this.getUrl(e)||"")).filter((e=>e.length>0)):[];this.setState({usedUrls:e})}render(){const{closeOnOutsideClick:e,isSecondaryButtonDisabled:t,onSecondaryAction:i,primaryButtonText:o=this.defaultPrimaryText,pinItemId:l,resetScrapeOnSelect:d,scrapeDescription:c,scrapeTitle:u,secondaryButtonText:h,useModalWithNoLayer:p=!1}=this.props,_=this.props.shownTabs?this.props.shownTabs:["upload","scrape"],{activeTabIndex:g,assets:m,usedUrls:f,isLoading:x,error:v}=this.state,P="string"==typeof o?o:o(m.length),w=h||this.props.i18n.bt("Crea Pin carosello", "Create carousel Pin", "Button to create carousel Pin out of selected assets", undefined, true),I=[];_.includes("product_pins")&&I.push({text:this.props.i18n.bt("I tuoi Pin", "Your Pins", "Tab on asset picker to select from user's product pins.", undefined, true),href:"#"}),_.includes("upload")&&I.push({text:this.props.i18n.bt("Risorse", "Assets", "Tab on asset picker to select from uploaded assets", undefined, true),href:"#"}),_.includes("scrape")&&I.push({text:this.props.i18n.bt("URL", "URL", "Tab on asset picker to select from scraped URL", undefined, true),href:"#"}),_.includes("dropbox")&&I.push({text:this.props.i18n.bt("Dropbox", "Dropbox", "Tab on asset picker to select from Dropbox", undefined, true),href:"#"}),_.includes("catalog")&&I.push({text:this.props.i18n.bt("Catalogo", "Catalog", "Tab on asset picker to upload pin from product catalog", undefined, true),href:"#"});const A=p?s.u_:Ye.ZP;return(0,r.jsx)(Ke,{condition:!!p,children:(0,r.jsx)(A,{accessibilityModalLabel:this.props.i18n.bt("Seleziona risorse", "Select assets", "Label to describe the asset picker", undefined, true),closeOnOutsideClick:e,heading:(0,r.jsx)(s.xu,{padding:4,display:"flex",alignItems:"center",justifyContent:"center","data-test-id":"tabs-header-list",children:(0,r.jsx)(s.mQ,{tabs:I,activeTabIndex:g,onChange:this.handleChangeTab})}),onDismiss:this.handleDismiss,footer:(0,r.jsxs)(s.xu,{display:"flex",marginBottom:-4,children:[(0,r.jsx)(s.xu,{display:"flex",flex:"grow",height:"100%",marginEnd:8,children:(0,r.jsx)(s.xu,{width:"100%",marginTop:-4,children:(0,r.jsx)($e.Z,{showArrowsOnlyOnHover:!1,children:(0,r.jsx)(s.xu,{display:"flex",height:48,paddingY:1,"data-group-id":"asset-picker-thumbnails-carousel-group",children:m.map(((e,t)=>{const i=(0,y.Z)(e);return(0,r.jsxs)(s.xu,{"data-test-id":"asset-picker-thumbnail",display:"flex",flex:"none",height:44,padding:1,position:"relative",width:44,children:[(0,r.jsx)(b,{asset:e,height:40,width:40}),(0,r.jsx)(s.xu,{color:"tertiary",height:16,marginEnd:-1,marginTop:-1,padding:1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,r.jsx)(s.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>this.handleRemoveAsset(e),children:(0,r.jsx)(s.JO,{color:"inverse",icon:"cancel",size:8,accessibilityLabel:this.props.i18n.bt("Rimuovi file", "Remove Asset", "Icon button to remove selected media file", undefined, true)})})}),!!i&&(0,r.jsx)(s.xu,{bottom:!0,left:!0,position:"absolute",children:(0,r.jsx)(a,{type:i})})]},`asset-picker-thumbnail-${t}`)}))})})})}),(0,r.jsxs)(s.xu,{display:"flex",flex:"none",margin:-3,marginTop:1,children:[!!i&&(0,r.jsx)(s.xu,{"data-test-id":"asset-picker-secondary-action-button",paddingX:1,children:(0,r.jsx)(s.zx,{color:"gray",disabled:!!t&&(m.length<2||m.length>C.dS||m.some((e=>"localImage"!==e.type))),onClick:this.handleSecondaryAction,text:w})}),(0,r.jsx)(s.xu,{"data-test-id":"asset-picker-primary-action-button",paddingX:1,children:(0,r.jsx)(s.zx,{color:"red",disabled:0===m.length,onClick:this.handlePrimaryAction,text:P})})]})]}),size:912,children:(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)(s.xu,{height:460,overflow:"auto",children:[!!v&&v,_.includes("upload")&&(0,r.jsx)(Ve,{onSelect:this.handleAssetSelect,setError:this.handleSetError,setLoading:this.handleSetLoading,selectedAssets:m,visible:g===_.indexOf("upload")}),_.includes("scrape")&&(0,r.jsx)(je,{onSelect:this.handleAssetSelect,selectedAssets:m,visible:g===_.indexOf("scrape"),title:u,description:c,resetOnSelect:d,usedUrls:f}),_.includes("dropbox")&&(0,r.jsx)(pe,{onSelect:this.handleAssetSelect,setError:this.handleSetError,selectedAssets:m,visible:g===_.indexOf("dropbox"),onFlyoutChange:this.handleDropboxFlyoutChange}),_.includes("product_pins")&&(0,r.jsx)(ye,{onSelect:this.handleAssetSelect,selectedAssets:m,visible:g===_.indexOf("product_pins"),pinItemId:l}),_.includes("catalog")&&(0,r.jsx)(G,{onSelect:this.handleAssetSelect,selectedAssets:m,visible:g===_.indexOf("catalog")})]}),x&&(0,r.jsx)(s.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center",children:(0,r.jsx)(s.$j,{show:!0,accessibilityLabel:"Dropbox Loading Spinner"})})]})})})}}function Qe(e){const t=(0,o.ZP)(),i=(0,Ne.Z)(),{logContextEvent:n}=(0,U.v)();return(0,r.jsx)(Je,{...e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n})}Xe(Je,"defaultProps",{shownTabs:["upload","scrape"],maxAssetsToSelect:0})},519325:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(702664),o=i(510476),s=i(883119),r=i(785893);function a(){return[...new Array(8)].map(((e,t)=>(0,r.jsx)(s.xu,{borderStyle:"sm",height:105,marginEnd:3===t||7===t?0:2,marginTop:t>=4?4:0,rounding:3,width:105},t)))}var l=i(898781),d=i(490072),c=i(349700);function u(e){const t=(0,l.ZP)(),{pinTagId:i,taggedObjects:u}=e,h=(0,n.useSelector)((t=>(0,d.Xe)(t,e))),p=u.length>0,_=(0,c.nk)(t.bt("{{ count }}/8", "{{ count }}/8", "pinbuilder.taggedProducts.count", undefined, true),{count:u.length}).join(""),g="collectionsTag"===h;return(0,r.jsxs)(s.xu,{column:12,"data-test-id":"stl-tagged-items-grid",children:[(!i||i&&0===u.length)&&g&&(0,r.jsx)(s.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:(0,r.jsx)(a,{})}),!g&&(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,r.jsx)(s.xv,{size:"100",children:t.bt("Tagga fino a 8 prodotti nella scena", "Tag up to 8 products in the scene", "pinbuilder.taggedProducts.limit", undefined, true)}),(0,r.jsx)(s.xv,{size:"100",children:_})]}),(0,r.jsx)(s.xu,{marginTop:p?10:0,marginBottom:p?10:void 0,display:"flex",wrap:!0,width:445,children:!!i&&p&&u.map(((e,t)=>(0,r.jsx)(s.xu,{children:(0,r.jsx)(o.Z,{index:t,pinTagId:e.pinTagId,size:"md",status:e.status,taggedObjectId:e.taggedObjectId})},e.taggedObjectId)))})]})}},146173:(e,t,i)=>{i.r(t),i.d(t,{PinBuilderEditor:()=>ke,default:()=>ze});var n=i(667294),o=i(702664);var s=i(634449),r=i(699109),a=i(456463),l=i(984244),d=i(883119),c=i(785893);const u=84;function h(e){var t,i,n,o;const{isSelected:s,disabled:r,onClick:a,ratio:l,width:h=u}=e,p={width:h,backgroundColor:s?"#fff":"#efefef",border:s?"2px solid #e50c29":"2px solid #efefef",borderRadius:8,boxSizing:"border-box",cursor:r?"default":"pointer",height:h*(null!==(t=l.h)&&void 0!==t?t:1)/(null!==(i=l.w)&&void 0!==i?i:1),outline:"none",opacity:r?.5:void 0,padding:0};return(0,c.jsx)("button",{onClick:a,disabled:r,style:p,children:(0,c.jsx)(d.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,c.jsx)(d.xv,{color:"default",size:"200",weight:"bold",children:`${null!==(n=l.w)&&void 0!==n?n:1}:${null!==(o=l.h)&&void 0!==o?o:1}`})})})}var p=i(28956),_=i(281139),g=i(237056),m=i(77891),f=i(531245),x=i(299295),b=i(966113),y=i(407043),v=i(898781);function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w extends n.Component{constructor(e){super(e),P(this,"onClickAspectRatio",(e=>{const{aspectRatioIndex:t,aspectRatios:i,canDeselectAspectRatio:n,onSelectAspectRatioIndex:o,numImages:s,pinCanvas:r,logContextEvent:a}=this.props;if(r){var l,d;const c=i[e],u=e===t&&n&&1===s;u?(r.setAspectRatio(null),o(null)):(r.setAspectRatio(c),o(e));a({event_type:101,component:13780,element:12137,aux_data:{aspect_ratio:c?`${null!==(l=c.w)&&void 0!==l?l:1}:${null!==(d=c.h)&&void 0!==d?d:1}`:null,selected:!u}})}})),P(this,"onClickRotateImage",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.rotateImage("clockwise"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"rotate"}})})),P(this,"onClickFlipImageHorizontal",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.flipImage("horizontal"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"horizontal_flip"}})})),P(this,"onClickFlipImageVertical",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.flipImage("vertical"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"vertical_flip"}})})),P(this,"onClickScaleImage",(()=>{const{isScalingMode:e,pinCanvas:t,logContextEvent:i}=this.props;t&&(e?t.exitScalingMode():t.enterScalingMode()),i({event_type:101,component:13780,element:12138,aux_data:{editor_option:"scale_mode_"+(e?"exit":"enter")}})})),P(this,"onClickAddImage",(()=>{const{numImages:e,logContextEvent:t}=this.props;this.setState({isAssetPickerOpen:!0,isReplace:!1,maxAssetsToSelect:x.Xy-e}),t({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})})),P(this,"onClickReplaceImage",(()=>{this.setState({isAssetPickerOpen:!0,isReplace:!0}),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})})),P(this,"onClickDeleteImage",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.removeImage(),t({event_type:101,component:13780,element:12139,aux_data:{editor_option:"delete_image"}})})),P(this,"onAddImageInputChange",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props,n=Array.from(e.target.files);(0,m.Z)({i18n:t,ideaPinRenamingEnabled:i,files:n,options:{allowVideo:!1}}).then((e=>{const t=e.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);this.handleAddImage(t)})),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})})),P(this,"onReplaceImageInputChange",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props,n=Array.from(e.target.files);(0,m.Z)({i18n:t,ideaPinRenamingEnabled:i,files:n,options:{allowVideo:!1}}).then((e=>{const t=e.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);this.handleReplaceImage(t)})),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})})),P(this,"handleAddImage",(e=>{const{pinCanvas:t}=this.props,i=e.reduce(((e,t)=>t.src?[...e,t.src]:e),[]);t&&i.length>0&&i.forEach((e=>{t.addImage(e)}))})),P(this,"handleReplaceImage",(e=>{const{pinCanvas:t}=this.props,i=e.reduce(((e,t)=>t.src?[...e,t.src]:e),[]);t&&i.length>0&&t.replaceImage(i[0])})),P(this,"handleDismiss",(()=>{this.setState({isAssetPickerOpen:!1})})),P(this,"onClickReset",(()=>{const{aspectRatios:e,canDeselectAspectRatio:t,pinCanvas:i,onReset:n,logContextEvent:o}=this.props;i&&(i.resetCrop(),i.setAspectRatio(t?null:e[0]),n()),o({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"crop"}})})),this.state={isAssetPickerOpen:!1,isReplace:!1,maxAssetsToSelect:0}}render(){const{aspectRatioIndex:e,aspectRatios:t,isImageSelected:i,isScalingMode:n,numImages:o,mediaType:s,videoStartText:r,videoEndText:a,validateStartTime:l,validateEndTime:u,handleEndTimeChange:g,handleStartTimeChange:m}=this.props,{isAssetPickerOpen:y,isReplace:v,maxAssetsToSelect:P}=this.state,w=!i,I=o>1&&n,A=1===o||!i,E=this.props.i18n.bt("Ruota di 90", "Rotate 90", "Rotate the angle of the image by 90 degrees", undefined, true),C=this.props.i18n.bt("Capovolgi l'immagine orizzontalmente", "Flip image horizontally", "Flip the image on the horizontal axis", undefined, true),S=this.props.i18n.bt("Capovolgi l'immagine verticalmente", "Flip image vertically", "Flip the image on the vertical axis", undefined, true),j=this.props.i18n.bt("Ridimensiona immagine", "Resize image", "Resize an image in the collage Pin", undefined, true),T=this.props.i18n.bt("Aggiungi immagine", "Add image", "Add image to the collage Pin", undefined, true),D=this.props.i18n.bt("Sostituisci immagine", "Replace image", "Replace image in the collage Pin", undefined, true),k=this.props.i18n.bt("Elimina immagine", "Delete image", "Delete image from the collage Pin", undefined, true);return(0,c.jsxs)(d.xu,{column:12,display:"flex",direction:"column",children:[(0,c.jsxs)(d.xu,{padding:8,flex:"grow",position:"relative",overflow:"auto",children:[(0,c.jsx)(d.xu,{marginBottom:3,children:(0,c.jsx)(d.X6,{size:"500",children:"video"===s?this.props.i18n.bt("Taglia", "Trim & Crop", "cropPane.heading", undefined, true):this.props.i18n.bt("Ritaglia", "Crop", "cropPane.heading", undefined, true)})}),(0,c.jsx)(d.xu,{marginBottom:8,children:(0,c.jsx)(d.xv,{children:this.props.i18n.bt("Ritaglia e regola l'immagine per inquadrare la parte pi interessante", "Crop and adjust your image to focus on the most interesting part", "Describing what this tool is about.", undefined, true)})}),(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Rapporto aspetto", "Aspect ratio", "Adjust the aspect ratio of the cropping.", undefined, true)}),(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(d.xv,{color:"subtle",size:"200",children:this.props.i18n.bt("Consigliamo proporzioni di 2:3 per la maggior parte dei Pin su Pinterest", "We recommend a 2:3 aspect ratio for most Pins on Pinterest", "Recommendation for the best aspect ratio for an image on Pinterest", undefined, true)})}),(0,c.jsx)(d.xu,{display:"flex",marginTop:2,marginStart:-2,marginEnd:-2,children:t.map(((t,i)=>(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-aspect-ratio-crop-button",flex:"none",paddingX:2,children:(0,c.jsx)(h,{disabled:I,isSelected:i===e,onClick:()=>this.onClickAspectRatio(i),ratio:t})},i)))})]}),(0,c.jsxs)(d.xu,{marginTop:8,children:[(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Regola", "Adjust", "Adjust the rotation of the image", undefined, true)}),(0,c.jsxs)(d.xu,{display:"flex",marginTop:4,marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-rotate-right-button",paddingX:1,children:(0,c.jsx)(d.u,{text:E,children:(0,c.jsx)(d.hU,{accessibilityLabel:E,bgColor:"lightGray",disabled:w,icon:"rotate",iconColor:"darkGray",onClick:this.onClickRotateImage,size:"md"})})}),"video"!==s&&(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-flip-button-horizontal",paddingX:1,children:(0,c.jsx)(d.u,{text:C,children:(0,c.jsx)(d.hU,{accessibilityLabel:C,bgColor:"lightGray",disabled:w,icon:"flipHorizontal",iconColor:"darkGray",onClick:this.onClickFlipImageHorizontal,size:"md"})})}),"video"!==s&&(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-flip-button-vertical",paddingX:1,children:(0,c.jsx)(d.u,{text:S,children:(0,c.jsx)(d.hU,{accessibilityLabel:S,bgColor:"lightGray",disabled:w,icon:"flipVertical",iconColor:"darkGray",onClick:this.onClickFlipImageVertical,size:"md"})})}),"video"!==s&&(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-move-button",paddingX:1,children:(0,c.jsx)(d.u,{text:j,children:(0,c.jsx)(d.hU,{accessibilityLabel:j,bgColor:n?"transparentDarkGray":"lightGray",disabled:A,icon:"scale",iconColor:n?"white":"darkGray",onClick:this.onClickScaleImage,size:"md"})})})]})]}),"video"!==s&&(0,c.jsxs)(d.xu,{marginTop:8,children:[(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Cambia un'immagine", "Change an image", "Heading for buttons that add, replace and remove an image", undefined, true)}),(0,c.jsxs)(d.xu,{display:"flex",marginTop:4,marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-add-image-button",paddingX:1,children:(0,c.jsx)(d.u,{text:T,children:o<x.Xy?(0,c.jsx)(_.Z,{accept:[...f.xl].join(","),allowMultipleFiles:!0,color:"white",id:"layouts-add-image-input",onChange:this.onAddImageInputChange,children:()=>(0,c.jsx)(d.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:o>=x.Xy,icon:"add-layout",iconColor:"darkGray",size:"md"})}):(0,c.jsx)(d.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:o>=x.Xy,icon:"add-layout",iconColor:"darkGray",onClick:this.onClickAddImage,size:"md"})})}),(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-replace-image-button",paddingX:1,children:(0,c.jsx)(d.u,{text:D,children:w?(0,c.jsx)(d.hU,{accessibilityLabel:D,bgColor:"lightGray",disabled:w,icon:"replace",iconColor:"darkGray",onClick:this.onClickReplaceImage,size:"md"}):(0,c.jsx)(_.Z,{accept:[...f.xl].join(","),allowMultipleFiles:!1,color:"white",id:"layouts-replace-image-input",onChange:this.onReplaceImageInputChange,children:()=>(0,c.jsx)(d.hU,{accessibilityLabel:D,bgColor:"lightGray",disabled:w,icon:"replace",iconColor:"darkGray",size:"md"})})})}),(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-editor-delete-image-button",paddingX:1,children:(0,c.jsx)(d.u,{text:k,children:(0,c.jsx)(d.hU,{accessibilityLabel:k,bgColor:"lightGray",disabled:w||1===o,icon:"trash-can",iconColor:"darkGray",onClick:this.onClickDeleteImage,size:"md"})})})]})]}),"video"===s&&(0,c.jsxs)(d.xu,{marginTop:8,children:[(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Taglia", "Trim", "Adjust the start and end time of the video", undefined, true)}),(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsxs)(d.xv,{color:"subtle",size:"200",children:[this.props.i18n.bt("I Pin video funzionano meglio con durata da 1 a 2 minuti. Gli annunci video funzionano meglio con durata da 6 a 15 secondi. ", "Video Pins 1 to 2 minutes long work best. Video ads 6 to 15 seconds long work best. ", "Recommendation for the best video length for video on Pinterest", undefined, true),(0,c.jsx)(d.rU,{display:"inlineBlock",href:b.Mo,target:"blank",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:this.props.i18n.bt("Ulteriori informazioni.", "Learn More.", "Link to Pinterest help center about creative best practices", undefined, true)})]})}),(0,c.jsxs)(d.xu,{display:"flex",marginTop:4,marginStart:-1,marginEnd:-1,children:[(0,c.jsxs)(d.xu,{paddingX:2,children:[(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.__,{htmlFor:"videoStartText",children:(0,c.jsx)(d.xv,{size:"100",children:"Start"})})}),(0,c.jsx)(d.nv,{errorMessage:r?l(r):"",id:"videoStartText",onChange:m,size:"lg",type:"text",value:r})]}),(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.__,{htmlFor:"videoEndText",children:(0,c.jsx)(d.xv,{size:"100",children:"End"})})}),(0,c.jsx)(d.nv,{errorMessage:a?u(a):"",id:"videoEndText",onChange:g,size:"lg",type:"text",value:a})]})]})]})]}),(0,c.jsxs)(d.xu,{display:"flex",direction:"column",column:12,children:[(0,c.jsx)(d.iz,{}),(0,c.jsx)(d.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,c.jsx)(d.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reimposta", "Reset", " - ", undefined, true),color:"white",text:"video"===s?this.props.i18n.bt("Annulla ritaglio", "Clear crop", "Resets cropping changes", undefined, true):this.props.i18n.bt("Reimposta", "Reset", "Resets all the changes.", undefined, true),onClick:this.onClickReset})})]}),y&&(0,c.jsx)(p.Z,{onPrimaryAction:v?this.handleReplaceImage:this.handleAddImage,onDismiss:this.handleDismiss,primaryButtonText:v?this.props.i18n.bt("Usa immagine", "Use image", "Button text for use another image to replace the selected image in the collage Pin.", undefined, true):this.props.i18n.bt("Aggiungi immagine", "Add image", "Button text for adding some other images to the collage Pin", undefined, true),maxAssetsToSelect:P})]})}}function I(e){const{logContextEvent:t}=(0,y.v)(),i=(0,v.ZP)(),n=(0,g.Z)(),s=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e.pinDraftId].type));return(0,c.jsx)(w,{...e,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,type:s})}var A=i(815542),E=i(454074);function C(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const S={__style:{tabindex:0,margin:2}};class j extends n.Component{constructor(...e){super(...e),C(this,"handleLoadFiles",(e=>{const{i18n:t,ideaPinRenamingEnabled:i,onLoadLogos:n}=this.props,o={minHeight:x.P0,minWidth:x.zr};(0,m.Z)({i18n:t,ideaPinRenamingEnabled:i,files:e,options:o}).then((e=>{const t=e.reduce(((e,t)=>("localImage"===t.type&&e.push(t),e)),[]);n(t)}))})),C(this,"handleDrop",(e=>{const t=(0,E.Z)(e.dataTransfer);this.handleLoadFiles(t)})),C(this,"handleChange",(e=>{const t=Array.from(e.target.files);this.handleLoadFiles(t)}))}render(){const{width:e,height:t}=this.props;return(0,c.jsx)(d.xu,{height:t,rounding:2,width:e,dangerouslySetInlineStyle:S,children:(0,c.jsx)(_.Z,{accept:f.xl.join(","),allowMultipleFiles:!0,id:"add-button-placeholder",onChange:this.handleChange,onDrop:this.handleDrop,children:()=>(0,c.jsx)(d.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,c.jsx)(d.JO,{accessibilityLabel:this.props.i18n.bt("Importa immagini locali", "Import local images", "Add local images to Pin builder", undefined, true),icon:"add-circle",size:24})})})})}}function T(e){const t=(0,v.ZP)(),i=(0,g.Z)();return(0,c.jsx)(j,{...e,i18n:t,ideaPinRenamingEnabled:i})}C(j,"defaultProps",{height:147,width:147});var D=i(938999);function k(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const z={__style:{padding:"2px"}};class O extends n.Component{constructor(...e){super(...e),k(this,"state",{isHovering:!1}),k(this,"handleMouseEnter",(()=>{this.setState({isHovering:!0})})),k(this,"handleMouseLeave",(()=>{this.setState({isHovering:!1})}))}render(){const{imgSrc:e,imgWidth:t,imgHeight:i,fit:n,title:o,selected:s,onClick:r,onDelete:a}=this.props,{isHovering:l}=this.state;return(0,c.jsxs)(d.xu,{"data-test-id":"pinbuilder-asset-preview",position:"relative",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,dangerouslySetInlineStyle:z,children:[(0,c.jsx)(D.Z,{selected:s,onClick:r,children:(0,c.jsxs)(d.xu,{rounding:2,color:"secondary",position:"relative",width:t,height:i,overflow:"hidden",children:[(0,c.jsx)(d.Ee,{alt:o||"",src:e,fit:n,naturalWidth:1,naturalHeight:1}),o&&(0,c.jsx)(d.xu,{marginTop:2,marginBottom:1,children:(0,c.jsx)(d.xv,{lineClamp:1,size:"100",children:o})})]})}),l&&(0,c.jsx)(d.xu,{color:"tertiary","data-test-id":"remove-asset-icon-button",height:16,padding:1,marginEnd:-1,marginTop:-1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,c.jsx)(d.iP,{fullHeight:!0,fullWidth:!0,onTap:a,children:(0,c.jsx)(d.JO,{color:"inverse",icon:"cancel",size:8,accessibilityLabel:this.props.i18n.bt("Rimuovi file", "Remove Asset", "Icon button to remove selected media file", undefined, true)})})})]})}}function R(e){const t=(0,v.ZP)();return(0,c.jsx)(O,{...e,i18n:t})}var L=i(618446),M=i.n(L);function B(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class N extends n.Component{constructor(...e){super(...e),B(this,"state",{selectedIndex:void 0}),B(this,"onSelectLogo",(e=>{const{onSelectLogo:t}=this.props;t(e),this.setState((t=>({selectedIndex:t.selectedIndex===e?null:e})))}))}shouldComponentUpdate(e,t){return!M()(this.props.logos,e.logos)||!M()(this.props.logoIndex,e.logoIndex)||!M()(this.state.selectedIndex,t.selectedIndex)}render(){const{logos:e}=this.props;return(0,c.jsx)(d.xu,{column:12,minHeight:70,maxHeight:165,paddingY:1,overflow:"scroll",children:(0,c.jsx)(d.Rk,{renderItem:({data:e,itemIdx:t})=>{const{logoIndex:i,onAddNewLogos:n,onDeleteLogo:o}=this.props,s=i!==this.state.selectedIndex?i:this.state.selectedIndex;return"placeholder"===e.type?(0,c.jsx)(T,{onLoadLogos:n,width:58,height:58}):(0,c.jsx)(R,{imgSrc:e.src,imgWidth:58,imgHeight:58,fit:"contain",onClick:()=>this.onSelectLogo(t-1),onDelete:()=>o(t-1),selected:s===t-1})},items:[{type:"placeholder"},...e],columnWidth:62,gutterWidth:9})})}}const F=18;function Z({logoPositionIndex:e,onSelectLogoPosition:t}){const i=(0,v.ZP)(),n=i.bt("Posizione in alto a sinistra", "Position top left", "Adjust the location of the logo to top left.", undefined, true),o=i.bt("Posizione in alto al centro", "Position top center", "Adjust the location of the logo to top center.", undefined, true),s=i.bt("Posizione in alto a destra", "Position top right", "Adjust the location of the logo to top right.", undefined, true),r=i.bt("Posizione in basso a sinistra", "Position bottom left", "Adjust the location of the logo to bottom left.", undefined, true),a=i.bt("Posizione in basso al centro", "Position bottom center", "Adjust the location of the logo to bottom center.", undefined, true),l=i.bt("Posizione in basso a destra", "Position bottom right", "Adjust the location of the logo to bottom right.", undefined, true),u=[(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-left-button",children:(0,c.jsx)(d.u,{text:n,children:(0,c.jsx)(d.JO,{accessibilityLabel:n,icon:"align-top-left",color:0===e?"default":"subtle",size:F})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-center-button",children:(0,c.jsx)(d.u,{text:o,children:(0,c.jsx)(d.JO,{accessibilityLabel:o,icon:"align-top-center",color:1===e?"default":"subtle",size:F})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-right-button",children:(0,c.jsx)(d.u,{text:s,children:(0,c.jsx)(d.JO,{accessibilityLabel:s,icon:"align-top-right",color:2===e?"default":"subtle",size:F})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-left-button",children:(0,c.jsx)(d.u,{text:r,children:(0,c.jsx)(d.JO,{accessibilityLabel:r,icon:"align-bottom-left",color:3===e?"default":"subtle",size:F})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-center-button",children:(0,c.jsx)(d.u,{text:a,children:(0,c.jsx)(d.JO,{accessibilityLabel:a,icon:"align-bottom-center",color:4===e?"default":"subtle",size:F})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-right-button",children:(0,c.jsx)(d.u,{text:l,children:(0,c.jsx)(d.JO,{accessibilityLabel:l,icon:"align-bottom-right",color:5===e?"default":"subtle",size:F})})})];return(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:i.bt("Posizione", "Position", "Adjust the position of the logo", undefined, true)})}),(0,c.jsx)(d.sY,{selectedItemIndex:e,onChange:t,items:u,responsive:!0})]})}function U({marginIndex:e,onSelectMargin:t}){const i=(0,v.ZP)(),n=i.bt("Applica margini stretti", "Apply narrow margins", "Adjust the margin to small.", undefined, true),o=i.bt("Applica margini medi", "Apply medium margins", "Adjust the margin to medium.", undefined, true),s=i.bt("Applica margini larghi", "Apply wide margins", "Adjust the margin to large.", undefined, true),r=[(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-small-button",children:(0,c.jsx)(d.u,{text:n,children:(0,c.jsx)(d.JO,{accessibilityLabel:n,icon:"margins-small",color:0===e?"default":"subtle",size:18})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-medium-button",children:(0,c.jsx)(d.u,{text:o,children:(0,c.jsx)(d.JO,{accessibilityLabel:o,icon:"margins-medium",color:1===e?"default":"subtle",size:18})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-large-button",children:(0,c.jsx)(d.u,{text:s,children:(0,c.jsx)(d.JO,{accessibilityLabel:s,icon:"margins-large",color:2===e?"default":"subtle",size:18})})})];return(0,c.jsx)(d.sY,{selectedItemIndex:e,onChange:t,items:r})}var V=i(415480);function H(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class G extends n.Component{constructor(...e){super(...e),H(this,"onReset",(()=>{const{pinCanvas:e,onReset:t,logContextEvent:i}=this.props;t(),e&&e.removeLogo(),i({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"logo"}})})),H(this,"onDeleteLogo",(e=>{const{pinCanvas:t,onDeleteLogo:i,logo:n,logContextEvent:o}=this.props;i(e),n.logoIndex===e&&t&&t.removeLogo(),o({event_type:101,component:13780,element:12142})})),H(this,"setLogo",(e=>{const{pinCanvas:t,logo:i,logoImages:n}=this.props;t&&(null!=e?t.setLogo({assetId:n[e].assetId,src:n[e].src,size:i.logoSize,margin:x.mt[i.logoMarginIndex],position:x.n_[i.logoPositionIndex],backgroundColor:i.logoBackgroundColor,backgroundOpacity:x.AQ[i.logoTransparencyIndex]}):t.removeLogo())})),H(this,"onSelectLogo",(e=>{const{pinCanvas:t,onSelectLogo:i,logo:n,logContextEvent:o}=this.props;i(e),n.logoIndex===e?t&&t.removeLogo():t&&this.setLogo(e),o({event_type:101,component:13780,element:12141})})),H(this,"onChangeLogoSize",(e=>{const{pinCanvas:t,onChangeLogoSize:i,logContextEvent:n}=this.props;i(e),t&&t.setLogoSize(e),n({event_type:3828,component:13780,element:12147,aux_data:{value:e}})})),H(this,"onSelectLogoMargin",(({activeIndex:e})=>{const{pinCanvas:t,onSelectLogoMargin:i,logContextEvent:n}=this.props,o=x.mt[e];i(e),t&&t.setLogoMargin(o),n({event_type:101,component:13780,element:12148,aux_data:{value:o}})})),H(this,"onSelectLogoPosition",(({activeIndex:e})=>{const{pinCanvas:t,onSelectLogoPosition:i,logContextEvent:n}=this.props,o=x.n_[e];i(e),t&&t.setLogoPosition(o),n({event_type:101,component:13780,element:12149,aux_data:{value:o}})})),H(this,"onSelectLogoBackgroundColor",(({value:e})=>{const{pinCanvas:t,onSelectLogoBackgroundColor:i,logContextEvent:n}=this.props,o=e.startsWith("#")||""===e?e.toLowerCase():`#${e}`.toLowerCase();i(o),t&&t.setLogoBackgroundColor(o),n({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"color",value:o}})})),H(this,"onSelectLogoTransparency",(({activeIndex:e})=>{const{pinCanvas:t,onSelectLogoTransparency:i,logContextEvent:n}=this.props,o=x.AQ[e];i(e),t&&t.setLogoBackgroundOpacity(o),n({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"transparency",value:o}})}))}componentDidUpdate(e){const{logo:t,logoImages:i}=e,{logo:n,logoImages:o}=this.props;t.logoIndex===n.logoIndex&&i.length===o.length||this.setLogo(n.logoIndex)}render(){const{logo:e,logoImages:t,onUploadLogos:i,pinCanvas:n}=this.props,{logoIndex:o,logoSize:s,logoMarginIndex:r,logoPositionIndex:a,logoBackgroundColor:l,logoTransparencyIndex:u}=e;return(0,c.jsxs)(d.xu,{column:12,display:"flex",direction:"column",children:[(0,c.jsxs)(d.xu,{paddingY:8,flex:"grow",overflow:"auto",children:[(0,c.jsx)(d.xu,{paddingX:8,children:(0,c.jsx)(d.X6,{size:"500",children:this.props.i18n.bt("Logo", "Logo", "Add a logo to the image selected in Pin Builder.", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:8,marginTop:3,children:(0,c.jsx)(d.xv,{children:this.props.i18n.bt("Aggiungi il tuo logo per rendere pi ufficiale questo Pin", "Add your logo to make this Pin feel official", " - ", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:8,marginTop:6,children:(0,c.jsx)(N,{logos:t,logoIndex:o,onAddNewLogos:i,onDeleteLogo:this.onDeleteLogo,onSelectLogo:this.onSelectLogo})}),(0,c.jsxs)(d.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",position:"relative",children:[(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:84,children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Dimensione", "Size", "Adjust the size of the logo", undefined, true)})}),(0,c.jsx)(V.Z,{id:"pinbuilder-editor-logo-size-text-field",minValue:20,maxValue:80,step:10,iconName:"logo-large",value:s,onChange:this.onChangeLogoSize})]}),(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Margini", "Margins", "Adjust the position of the text overlay", undefined, true)})}),(0,c.jsx)(U,{marginIndex:r,onSelectMargin:this.onSelectLogoMargin})]})]}),(0,c.jsx)(d.xu,{paddingX:8,marginTop:10,position:"relative",children:(0,c.jsx)(Z,{logoPositionIndex:a,onSelectLogoPosition:this.onSelectLogoPosition})}),(0,c.jsxs)(d.xu,{paddingX:8,marginTop:10,children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Colore sfondo", "Color fill", "Pick the background color", undefined, true)})}),(0,c.jsx)(A.ZP,{id:"pinbuilder-editor-logo-background-color-picker",imagePalette:n&&n.getColorPalette(),width:96,showNoFillControl:!0,showTransparencyControl:!0,colorSelected:l,onSelectColor:this.onSelectLogoBackgroundColor,transparencyIndex:u,onSelectTransparency:this.onSelectLogoTransparency})]})]}),(0,c.jsxs)(d.xu,{display:"flex",direction:"column",column:12,children:[(0,c.jsx)(d.iz,{}),(0,c.jsx)(d.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,c.jsx)(d.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reimposta", "Reset", " - ", undefined, true),color:"white",text:this.props.i18n.bt("Reimposta", "Reset", "Resets all the changes.", undefined, true),onClick:this.onReset})})]})]})}}function W(e){const{logContextEvent:t}=(0,y.v)(),i=(0,v.ZP)();return(0,c.jsx)(G,{...e,i18n:i,logContextEvent:t})}function $({selectedIndex:e,onSelect:t}){const i=(0,v.ZP)(),n=i.bt("Allineamento a sinistra", "Left align", "Adjust the text to left alignment.", undefined, true),o=i.bt("Centrato", "Center align", "Adjust the text to center alignment.", undefined, true),s=[(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-left-button",children:(0,c.jsx)(d.u,{text:n,children:(0,c.jsx)(d.JO,{accessibilityLabel:n,icon:"text-align-left",color:0===e?"default":"subtle",size:18})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-center-button",children:(0,c.jsx)(d.u,{text:o,children:(0,c.jsx)(d.JO,{accessibilityLabel:o,icon:"text-align-center",color:1===e?"default":"subtle",size:18})})})];return(0,c.jsx)(d.sY,{selectedItemIndex:e,onChange:t,items:s})}function q({selectedIndex:e,onSelect:t}){const i=(0,v.ZP)(),n=i.bt("Posizione del testo in alto", "Position text on top", "Adjust the location of the text to top.", undefined, true),o=i.bt("Posizione del testo al centro", "Position text in middle", "Adjust the location of the text to middle.", undefined, true),s=i.bt("Posizione del testo in basso", "Position text on bottom", "Adjust the location of the text to bottom.", undefined, true),r=[(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-top-button",children:(0,c.jsx)(d.u,{text:n,children:(0,c.jsx)(d.JO,{accessibilityLabel:n,icon:"align-top",color:0===e?"default":"subtle",size:18})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-middle-button",children:(0,c.jsx)(d.u,{text:o,children:(0,c.jsx)(d.JO,{accessibilityLabel:o,icon:"align-middle",color:1===e?"default":"subtle",size:18})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-bottom-button",children:(0,c.jsx)(d.u,{text:s,children:(0,c.jsx)(d.JO,{accessibilityLabel:s,icon:"align-bottom",color:2===e?"default":"subtle",size:18})})})];return(0,c.jsx)(d.sY,{selectedItemIndex:e,onChange:t,items:r})}function Y({selectedIndex:e,onSelect:t}){const i=(0,v.ZP)(),n=i.bt("Maiuscola a inizio frase", "Sentence case", "Transform the text to sentence case.", undefined, true),o=i.bt("Maiuscolo", "Uppercase", "Transform the text to all uppercase.", undefined, true),s=[(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-sentence-case-button",children:(0,c.jsx)(d.u,{text:n,children:(0,c.jsx)(d.JO,{accessibilityLabel:n,icon:"text-sentence-case",color:0===e?"default":"subtle",size:18})})}),(0,c.jsx)(d.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-all-caps-button",children:(0,c.jsx)(d.u,{text:o,children:(0,c.jsx)(d.JO,{accessibilityLabel:o,icon:"text-all-caps",color:1===e?"default":"subtle",size:18})})})];return(0,c.jsx)(d.sY,{selectedItemIndex:e,onChange:t,items:s})}var X=i(66743),K=i(309256);function J(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Q={__style:{maxHeight:"516px"}};class ee extends n.Component{constructor(...e){super(...e),J(this,"state",{hoveredOption:null,showFlyout:!1}),J(this,"setFlyoutAnchor",(e=>{this.anchor=e})),J(this,"handleTouch",(()=>{this.setState((e=>({showFlyout:!e.showFlyout})))})),J(this,"handleFlyoutClose",(()=>{this.setState({showFlyout:!1})})),J(this,"handleSelectOption",(e=>{const{onSelect:t}=this.props;t(e),this.handleFlyoutClose()})),J(this,"handleMouseEnter",(e=>{this.setState({hoveredOption:e})})),J(this,"handleMouseLeave",(()=>{this.setState({hoveredOption:null})}))}getFlyoutHeight(){if(window&&this.anchor){return`${Math.min(516,window.innerHeight-this.anchor.getBoundingClientRect().top-100)}px`}return"516px"}render(){const{placeholder:e,selectedOption:t,optionGroups:i}=this.props,{hoveredOption:o,showFlyout:s}=this.state,r=t?i.find((e=>e.groupName===t.groupName)):null,a=r&&t?r.options.find((e=>e.optionName===t.optionName)):null;return(0,c.jsxs)(d.xu,{column:12,"data-test-id":"styled-dropdown-list",children:[(0,c.jsx)(d.iP,{onTap:this.handleTouch,rounding:2,children:(0,c.jsxs)(d.xu,{rounding:2,overflow:"hidden",width:"100%",height:40,display:"flex",alignItems:"center",justifyContent:"between",color:"secondary",paddingX:3,ref:this.setFlyoutAnchor,children:[(0,c.jsx)(d.xu,{marginEnd:2,minWidth:0,overflow:"hidden",flex:"grow",children:(0,c.jsx)(d.xv,{children:a?(0,c.jsx)("div",{style:a.style,children:a.optionLabel}):e||this.props.i18n.bt("Seleziona", "Select", "Select an option from the dropdown list", undefined, true)})}),(0,c.jsx)(d.xu,{flex:"none",children:(0,c.jsx)(d.JO,{accessibilityLabel:this.props.i18n.bt("Apri elenco a discesa", "Open dropdown list", "Instructions to open the dropdown list", undefined, true),color:"default",icon:"arrow-down",size:12})})]})}),s&&(0,c.jsx)(d.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.handleFlyoutClose,size:"md",children:(0,c.jsx)(d.xu,{width:"100%",paddingY:4,dangerouslySetInlineStyle:{__style:{...Q.__style,maxHeight:this.getFlyoutHeight()}},children:i.map(((e,t)=>(0,c.jsxs)(n.Fragment,{children:[i.length>1&&t>0&&(0,c.jsx)(d.xu,{paddingY:2,paddingX:4,children:(0,c.jsx)(d.iz,{})}),i.length>1&&(0,c.jsx)(d.xu,{paddingY:1,paddingX:4,children:(0,c.jsx)(d.xv,{size:"100",color:"subtle",children:e.groupLabel})}),e.options.map((t=>(0,c.jsx)(d.xu,{padding:1,color:a===t||o===t?"secondary":"default",children:(0,c.jsx)(d.iP,{onMouseEnter:()=>this.handleMouseEnter(t),onMouseLeave:this.handleMouseLeave,onTap:()=>this.handleSelectOption({groupName:e.groupName,optionName:t.optionName}),children:(0,c.jsx)(d.xu,{width:"100%",paddingX:3,paddingY:1,children:(0,c.jsx)(d.xv,{children:(0,c.jsx)("div",{style:t.style,children:t.optionLabel})})})})},`${e.groupName}_${t.optionName}`))),e.groupFooter&&(0,c.jsx)(d.xu,{paddingX:4,paddingY:1,children:e.groupFooter()})]},e.groupName)))})})]})}}function te(e){const t=(0,v.ZP)();return(0,c.jsx)(ee,{...e,i18n:t})}function ie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ne={fontColor:{__style:{zIndex:x.v9}},fontFamily:{__style:{zIndex:x.v9+1}}};class oe extends n.Component{constructor(...e){super(...e),ie(this,"_getTextConfigs",(e=>{const{fontFamilyName:t,fontStyleName:i,fontWeight:n,fontSize:o,textColor:s,lineHeight:r,letterSpacing:a,transformIndex:l,alignmentIndex:d,marginIndex:c,backgroundColor:u,backgroundTransparencyIndex:h,positionIndex:p}=e,{fontGroups:_}=this.props,g=t,m=(0,K.$D)(_,t),{fontStyle:f}=m&&m.styles.find((e=>e.name===i))||{};return{fontFamily:g,fontStyle:f,fontSize:o,fontWeight:n,textColor:s,lineHeight:r,backgroundColor:u,characterSpacing:a,transform:x.np[l],alignment:x.aj[d],margin:x.mt[c],backgroundOpacity:x.AQ[h],position:x.yb[p]}})),ie(this,"onReset",(()=>{const{getDefaultTextState:e,pinCanvas:t,onReset:i,logContextEvent:n}=this.props;if(i(),t){t.removeTextLayer();const i=this._getTextConfigs(e());t.addTextLayer(i)}n({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"text"}})})),ie(this,"onSelectFontFamily",(e=>{const{fontGroups:t,pinCanvas:i,onSelectFontFamily:n,logContextEvent:o}=this.props;if(i){const n=(0,K.$D)(t,e.optionName);if(n){const{fontFamily:e,fontOverrides:t,defaultStyle:o,styles:s}=n,{fontStyle:r,fontWeight:a}=s[o];if(t){const e=t.textTransform?1:0;this.onSelectTransform({activeIndex:e}),t.lineHeight&&this.onChangeLineHeight(t.lineHeight),t.letterSpacing&&this.onChangeLetterSpacing(t.letterSpacing)}i.setFontFamily(null!=e?e:""),i.setFontStyle(r),i.setFontWeight(a)}}n(e),o({event_type:3828,component:13780,element:12151,aux_data:{value:`${e.groupName}: ${e.optionName}`}})})),ie(this,"onSelectTextColor",(({value:e})=>{const{pinCanvas:t,onSelectTextColor:i,logContextEvent:n}=this.props;t&&t.setTextColor(e),i(e),n({event_type:8721,component:13780,element:12153,aux_data:{value:e}})})),ie(this,"onChangeFontSize",(e=>{const{pinCanvas:t,onChangeFontSize:i,logContextEvent:n}=this.props;t&&t.setFontSize(e),i(e),n({event_type:3828,component:13780,element:12152,aux_data:{value:e}})})),ie(this,"onChangeLineHeight",(e=>{const{pinCanvas:t,onChangeLineHeight:i,logContextEvent:n}=this.props;t&&t.setTextLineHeight(e),i(e),n({event_type:3828,component:13780,element:12161,aux_data:{value:e}})})),ie(this,"onChangeLetterSpacing",(e=>{const{pinCanvas:t,onChangeLetterSpacing:i,logContextEvent:n}=this.props;t&&t.setTextCharacterSpacing(10*e),i(e),n({event_type:3828,component:13780,element:12162,aux_data:{value:e}})})),ie(this,"onSelectTransform",(({activeIndex:e})=>{const{pinCanvas:t,onSelectTransform:i,logContextEvent:n}=this.props,o=x.np[e];t&&t.setTextTransform(o),i(e),n({event_type:3828,component:13780,element:12163,aux_data:{value:o}})})),ie(this,"onSelectAlignment",(({activeIndex:e})=>{const{pinCanvas:t,onSelectAlignment:i,logContextEvent:n}=this.props,o=x.aj[e];t&&t.setTextAlignment(o),i(e),n({event_type:101,component:13780,element:12154,aux_data:{value:o}})})),ie(this,"onSelectMargin",(({activeIndex:e})=>{const{pinCanvas:t,onSelectMargin:i,logContextEvent:n}=this.props,o=x.mt[e];t&&t.setTextMargin(o),i(e),n({event_type:101,component:13780,element:12155,aux_data:{value:o}})})),ie(this,"onSelectBackgroundColor",(({value:e})=>{const{pinCanvas:t,onSelectBackgroundColor:i,logContextEvent:n}=this.props;t&&t.setTextBackgroundColor(e),i(e),n({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"color",value:e}})})),ie(this,"onSelectBackgroundTransparency",(({activeIndex:e})=>{const{pinCanvas:t,onSelectBackgroundTransparency:i,logContextEvent:n}=this.props,o=x.AQ[e];t&&t.setTextBackgroundOpacity(o),i(e),n({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"transparency",value:o}})})),ie(this,"onSelectPosition",(({activeIndex:e})=>{const{pinCanvas:t,onSelectPosition:i,logContextEvent:n}=this.props,o=x.yb[e];t&&t.setTextPosition(o),i(e),n({event_type:101,component:13780,element:12157,aux_data:{value:o}})})),ie(this,"getFontFamilyOptions",(()=>{const{fontGroups:e}=this.props;return e.map((e=>({groupLabel:e.groupLabel,groupName:e.groupName,groupFooter:e.groupFooter,options:e.fonts.map((e=>{var t,i;return{optionName:null!==(t=e.fontFamily)&&void 0!==t?t:"",optionLabel:null!==(i=e.fontFamily)&&void 0!==i?i:"",style:{fontFamily:e.fontFamily,fontStyle:e.styles[e.defaultStyle].fontStyle,fontWeight:e.styles[e.defaultStyle].fontWeight}}}))})))}))}componentDidMount(){const{pinCanvas:e,text:t}=this.props;if(e){const i=this._getTextConfigs(t);e.addTextLayer(i)}}render(){const{text:e,onToggleShowMoreOptions:t,pinCanvas:i}=this.props,{fontGroupName:n,fontFamilyName:o,fontSize:s,textColor:r,marginIndex:a,alignmentIndex:l,positionIndex:u,backgroundColor:h,backgroundTransparencyIndex:p,lineHeight:_,letterSpacing:g,transformIndex:m,showMoreOptions:f}=e,x=this.getFontFamilyOptions(),b=n===X.f9,y=i?i.getColorPalette():null;return(0,c.jsxs)(d.xu,{column:12,display:"flex",direction:"column",children:[(0,c.jsxs)(d.xu,{paddingY:8,flex:"grow",overflow:"auto",children:[(0,c.jsx)(d.xu,{paddingX:8,children:(0,c.jsx)(d.X6,{size:"500",children:this.props.i18n.bt("Sovrapposizione del testo", "Text Overlay", "Add text to the image selected in Pin Builder.", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:8,marginTop:4,children:(0,c.jsx)(d.xv,{children:this.props.i18n.bt("Aggiungi del testo direttamente sul Pin", "Add text directly onto your Pin", " - ", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:8,marginTop:6,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Stile", "Style", "Text font style", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:8,marginTop:4,position:"relative",dangerouslySetInlineStyle:ne.fontFamily,children:(0,c.jsx)(te,{placeholder:this.props.i18n.bt("Seleziona gruppo di caratteri", "Select font family", " - ", undefined, true),optionGroups:x,selectedOption:{groupName:n,optionName:o},onSelect:this.onSelectFontFamily})}),(0,c.jsxs)(d.xu,{paddingX:8,marginTop:4,display:"flex",children:[(0,c.jsxs)(d.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,c.jsx)(V.Z,{id:"pinbuilder-editor-font-size-text-field",minValue:18,maxValue:64,iconName:"text-size",value:s,onChange:this.onChangeFontSize}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{size:"100",children:this.props.i18n.bt("Dimensione", "Size", "Text font size", undefined, true)})})]}),(0,c.jsxs)(d.xu,{marginStart:4,display:"flex",direction:"column",alignItems:"center",width:84,position:"relative",dangerouslySetInlineStyle:ne.fontColor,children:[(0,c.jsx)(A.ZP,{colorSelected:r,id:"pinbuilder-editor-text-color-picker",imagePalette:y,onSelectColor:this.onSelectTextColor}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{size:"100",children:this.props.i18n.bt("Colore", "Color", "Text color", undefined, true)})})]})]}),b&&(0,c.jsxs)(d.xu,{paddingX:8,marginTop:4,position:"relative",children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{paddingY:4,children:[(0,c.jsx)(d.iP,{onTap:t,children:(0,c.jsx)(d.xv,{color:"subtle",size:"100",weight:"bold",children:f?"- "+(this.props.i18n.bt("Nascondi opzioni", "Hide options", "Hide text adjustment options.", undefined, true)):"+ "+(this.props.i18n.bt("Mostra altre opzioni", "Show more options", "Show more text adjustment options.", undefined, true))})}),f&&(0,c.jsxs)(d.xu,{marginTop:4,display:"flex",children:[(0,c.jsxs)(d.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,c.jsx)(V.Z,{iconName:"text-line-height",id:"pinbuilder-editor-text-line-height",minValue:.5,maxValue:2.5,step:.1,value:_,onChange:this.onChangeLineHeight}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{size:"100",children:this.props.i18n.bt("Linea", "Line", "Line height of the text", undefined, true)})})]}),(0,c.jsxs)(d.xu,{marginStart:3,display:"flex",direction:"column",alignItems:"center",width:84,children:[(0,c.jsx)(V.Z,{id:"pinbuilder-editor-text-spacing-text-field",iconName:"text-spacing",minValue:-10,maxValue:50,step:1,value:g,onChange:this.onChangeLetterSpacing}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{size:"100",children:this.props.i18n.bt("Lettera", "Letter", "Letter spaceing of the text", undefined, true)})})]}),(0,c.jsxs)(d.xu,{marginStart:3,display:"flex",direction:"column",alignItems:"center",width:84,children:[(0,c.jsx)(Y,{selectedIndex:m,onSelect:this.onSelectTransform}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{size:"100",children:this.props.i18n.bt("Trasform", "Transform", "Text transform between normal and all uppercase", undefined, true)})})]})]})]}),(0,c.jsx)(d.iz,{})]}),(0,c.jsxs)(d.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",position:"relative",children:[(0,c.jsxs)(d.kC,{direction:"column",justifyContent:"start",children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Allineamento", "Alignment", "Adjust text alignment", undefined, true)})}),(0,c.jsx)($,{selectedIndex:l,onSelect:this.onSelectAlignment})]}),(0,c.jsxs)(d.kC,{direction:"column",justifyContent:"start",children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Margini", "Margins", "Adjust the margin.", undefined, true)})}),(0,c.jsx)(U,{marginIndex:a,onSelectMargin:this.onSelectMargin})]})]}),(0,c.jsxs)(d.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",children:[(0,c.jsxs)(d.kC,{direction:"column",justifyContent:"start",children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Sfondo", "Background", "Adjust the background of the text overlay", undefined, true)})}),(0,c.jsx)(A.ZP,{id:"pinbuilder-editor-text-background-color-picker",imagePalette:y,width:96,showNoFillControl:!0,showTransparencyControl:!0,colorSelected:h,onSelectColor:this.onSelectBackgroundColor,transparencyIndex:p,onSelectTransparency:this.onSelectBackgroundTransparency})]}),(0,c.jsxs)(d.kC,{direction:"column",justifyContent:"start",children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Posizione", "Position", "Adjust the position of the text overlay", undefined, true)})}),(0,c.jsx)(q,{selectedIndex:u,onSelect:this.onSelectPosition})]})]})]}),(0,c.jsxs)(d.xu,{display:"flex",direction:"column",column:12,children:[(0,c.jsx)(d.iz,{}),(0,c.jsx)(d.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,c.jsx)(d.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reimposta", "Reset", " - ", undefined, true),color:"white",text:this.props.i18n.bt("Reimposta", "Reset", "Resets all the changes.", undefined, true),onClick:this.onReset})})]})]})}}function se(e){const{logContextEvent:t}=(0,y.v)(),i=(0,v.ZP)();return(0,c.jsx)(oe,{...e,i18n:i,logContextEvent:t})}var re=i(214494),ae=i(665866),le=i(784590),de=i(623320),ce=i(414327),ue=i(780280);function he(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class pe extends n.Component{constructor(e){super(e),he(this,"_getInitialAspectRatioIndex",(()=>{const{canDeselectAspectRatio:e,canvasJson:t,type:i}=this.props;if(t){const e=(0,l.Z)(i).findIndex((({w:e,h:i})=>t.aspectRatio&&e===t.aspectRatio.w&&i===t.aspectRatio.h));return-1===e?null:e}return e?null:0})),he(this,"_getToolPanes",(e=>{const{mediaType:t}=this.props,i=[{icon:"crop",label:this.props.i18n.bt("Ritaglia e ruota", "Crop & rotate", "Button to enter cropping tool", undefined, true),name:"crop"}];return"video"!==t&&(i.push({icon:"star",label:this.props.i18n.bt("Logo", "Logo", "Button to enter logo tool", undefined, true),name:"logo"}),e.length>0&&i.push({icon:"overlay-text",label:this.props.i18n.bt("Sovrapposizione di testo", "Text overlay", "Button to enter text overlay tool", undefined, true),name:"text"})),i})),he(this,"_getBrandFontDefaultTextState",((e,t)=>{const i=t.find((e=>e.groupName===X.f9));if(i){var n;const t=i.fonts[0];return{...e,fontFamilyName:null!==(n=t.fontFamily)&&void 0!==n?n:"",fontGroupName:t.fontGroup,fontStyleName:t.styles[0].name}}return e})),he(this,"getTextState",((e,t)=>{const{canvasJson:i}=this.props;if(i&&i.text){const{fontFamily:o,fontStyle:s,fontWeight:r}=i.text,a=(0,K.$D)(t,o);var n;if(a)return{...e,fontFamilyName:null!==(n=a.fontFamily)&&void 0!==n?n:"",fontGroupName:a.fontGroup,fontStyleName:(0,K.CP)(a,s,r)}}return this._getBrandFontDefaultTextState(e,t)})),he(this,"getDefaultTextState",(()=>{const{locale:e}=this.props.requestContext;return this._getBrandFontDefaultTextState((0,K.bs)(e),this.state.fontGroups)})),he(this,"onIconClick",(e=>{const{currentToolPane:t}=this.state,{pinCanvas:i,logContextEvent:n}=this.props;if(e!==t&&i&&("text"===t&&i.removeTextLayer(!0),["crop","logo","text"].includes(e))){i.setEditingMode(e);n({event_type:101,component:13780,element:{crop:12132,logo:12133,text:12134}[e]})}this.setState({currentToolPane:e})})),he(this,"onSelectAspectRatioIndex",(e=>{const{onAspectRatioChange:t,type:i}=this.props;this.setState({aspectRatioIndex:e}),void 0!==e&&t(null!==e?(0,l.Z)(i)[e]:null)})),he(this,"onCropReset",(()=>{this.setState({aspectRatioIndex:this._getInitialAspectRatioIndex()})})),he(this,"onDeleteLogo",(e=>{const{invalidateStickerResource:t}=this.props,{logo:i,logoImages:n}=this.state,o=n[e].assetId;if(o){re.Z.create("StickerAssetResource",{assetId:o}).callDelete().then(t);const n=(i||{}).logoIndex,s=n===e||null==n?null:n>e?n-1:n;this.setState((t=>({logo:{...t.logo,logoIndex:s},logoImages:t.logoImages.filter(((t,i)=>i!==e))})))}})),he(this,"onUploadLogos",(e=>{const{invalidateStickerResource:t,logContextEvent:i}=this.props,n=e.map((e=>(0,de.zp)(e.src).then((e=>re.Z.create("StickerAssetResource",{binary_data:e}).callCreate()))));Promise.all(n).then((i=>{if(i){const n=i.map((({resource_response:t},i)=>{const n=t.data,o=e[i];return{id:n.assetId,height:o.height,width:o.width,src:o.src,type:"assetImage",assetId:n.assetId}}));this.setState((e=>({logoImages:[...n,...e.logoImages],logo:{...e.logo,logoIndex:0}}))),t()}})),i({event_type:101,component:13780,element:12140})})),he(this,"onLogoReset",(()=>{this.setState({logo:{logoIndex:null,logoSize:50,logoMarginIndex:1,logoPositionIndex:0,logoBackgroundColor:"",logoTransparencyIndex:0}})})),he(this,"onSelectLogo",(e=>{this.setState((t=>({logo:{...t.logo,logoIndex:t.logo.logoIndex===e?null:e}})))})),he(this,"onChangeLogoSize",(e=>{this.setState((t=>({logo:{...t.logo,logoSize:e}})))})),he(this,"onSelectLogoMargin",(e=>{this.setState((t=>({logo:{...t.logo,logoMarginIndex:e}})))})),he(this,"onSelectLogoPosition",(e=>{this.setState((t=>({logo:{...t.logo,logoPositionIndex:e}})))})),he(this,"onSelectLogoBackgroundColor",(e=>{this.setState((t=>({logo:{...t.logo,logoBackgroundColor:e}})))})),he(this,"onSelectLogoTransparency",(e=>{this.setState((t=>({logo:{...t.logo,logoTransparencyIndex:e}})))})),he(this,"onSelectFontFamily",(e=>{const{fontGroups:t}=this.state,i=(0,K.$D)(t,e.optionName);if(i){const{name:t}=i.styles[i.defaultStyle],{fontOverrides:n}=i,o=n&&n.textTransform?1:0,s=n&&n.lineHeight||1.2,r=n&&n.letterSpacing||0;this.setState((i=>({text:{...i.text,fontGroupName:e.groupName,fontFamilyName:e.optionName,fontStyleName:t,letterSpacing:r,lineHeight:s,transformIndex:o}})))}})),he(this,"onSelectTextColor",(e=>{this.setState((t=>({text:{...t.text,textColor:e}})))})),he(this,"onChangeFontSize",(e=>{this.setState((t=>({text:{...t.text,fontSize:e}})))})),he(this,"onChangeLineHeight",(e=>{this.setState((t=>({text:{...t.text,lineHeight:e}})))})),he(this,"onChangeLetterSpacing",(e=>{this.setState((t=>({text:{...t.text,letterSpacing:e}})))})),he(this,"onSelectTransform",(e=>{this.setState((t=>({text:{...t.text,transformIndex:e}})))})),he(this,"onSelectAlignment",(e=>{this.setState((t=>({text:{...t.text,alignmentIndex:e}})))})),he(this,"onSelectMargin",(e=>{this.setState((t=>({text:{...t.text,marginIndex:e}})))})),he(this,"onSelectBackgroundColor",(e=>{this.setState((t=>({text:{...t.text,backgroundColor:e}})))})),he(this,"onSelectBackgroundTransparency",(e=>{this.setState((t=>({text:{...t.text,backgroundTransparencyIndex:e}})))})),he(this,"onSelectPosition",(e=>{this.setState((t=>({text:{...t.text,positionIndex:e}})))})),he(this,"onToggleShowMoreOptions",(()=>{const{logContextEvent:e}=this.props;this.setState((t=>{const i=!t.text.showMoreOptions;return e({event_type:101,component:13780,element:12158,aux_data:{value:i}}),{text:{...t.text,showMoreOptions:i}}}))})),he(this,"onTextReset",(()=>{this.setState({text:this.getDefaultTextState()})}));const{canDeselectAspectRatio:t,canvasJson:i}=e,{locale:n}=e.requestContext;if(this.state={aspectRatioIndex:t?null:0,brandFontsLoaded:!1,currentToolPane:"crop",fontGroups:[],isImageSelected:!1,isScalingMode:!1,logoImagesLoaded:!1,logo:{logoBackgroundColor:"",logoIndex:null,logoMarginIndex:1,logoPositionIndex:0,logoSize:50,logoTransparencyIndex:0},logoImages:[],numImages:0,text:(0,K.bs)(n)},i){if(this.state={...this.state,aspectRatioIndex:this._getInitialAspectRatioIndex()},i.logo){const{size:e,margin:t,position:n,backgroundColor:o,backgroundOpacity:s}=i.logo;this.state={...this.state,logo:{...this.state.logo,logoBackgroundColor:o,logoMarginIndex:x.mt.indexOf(t),logoPositionIndex:x.n_.indexOf(n),logoSize:e,logoTransparencyIndex:x.AQ.indexOf(s)}}}if(i.text){const{alignment:e,backgroundColor:t,backgroundOpacity:n,characterSpacing:o,fontSize:s,fontWeight:r,lineHeight:a,margin:l,position:d,textColor:c,transform:u}=i.text;this.state={...this.state,text:{...this.state.text,backgroundColor:t,fontSize:s,fontWeight:r,textColor:c,alignmentIndex:x.aj.indexOf(e),backgroundTransparencyIndex:x.AQ.indexOf(n),letterSpacing:o||this.state.text.letterSpacing,lineHeight:a||this.state.text.lineHeight,marginIndex:x.mt.indexOf(l),positionIndex:x.yb.indexOf(d),showMoreOptions:!1,transformIndex:x.np.indexOf(u)}}}}}componentDidMount(){if(ae.Z.enabled("systemFonts")){const{locale:e}=this.props.requestContext;(0,K.vK)().then((()=>this.setState((t=>{const i=(0,K.j1)(),n=[...t.fontGroups.filter((e=>e.groupName===X.f9)),{groupName:X.gu,groupLabel:this.props.i18n.bt("Suggerito", "Suggested", "Suggested fonts we expose to the user", undefined, true),fonts:i.filter((t=>t.fontGroup===X.gu&&!t.localeFilter||t.localeFilter===e))},{groupName:X.Rc,groupLabel:this.props.i18n.bt("Altri", "Additional", "Additional fonts we expose to the user", undefined, true),groupFooter:()=>(0,c.jsx)(d.xv,{size:"100",color:"subtle",children:(0,c.jsx)(d.rU,{href:"https://www.pinterest.com/_/_/help/business/article/build-a-pin",target:"blank",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:this.props.i18n.bt("Informazioni sulla licenza", "Licence info", "Link to legal information about system fonts", undefined, true)})}),fonts:i.filter((e=>e.fontGroup===X.Rc))}];return{fontGroups:n,text:this.getTextState(t.text,n)}}))))}}componentDidUpdate(e){const{canvasJson:t,pinCanvas:i,fontAssetResource:{data:n,isLoaded:o},stickerAssetResource:{data:s}}=this.props,{brandFontsLoaded:r,logoImagesLoaded:a}=this.state;if(i&&!e.pinCanvas&&i.on("after:render",this.onCanvasUpdate.bind(this)),o&&n&&n.length>0&&!r&&(0,K.KV)(n).then((()=>this.setState((e=>{const t=[{fonts:n,groupName:X.f9,groupLabel:this.props.i18n.bt("Font caricati", "Uploaded Fonts", "fonts uploaded by the user", undefined, true)},...e.fontGroups.filter((e=>e.groupName!==X.f9))];return{fontGroups:t,brandFontsLoaded:!0,text:this.getTextState(e.text,t)}})))),s&&s.length>0&&!a){const e=s.map((e=>({id:e.assetId,type:"assetImage",src:e.source,width:e.width,height:e.height,assetId:e.assetId}))),{logo:i}=t||{},n=i?e.findIndex((e=>e.assetId===i.assetId)):null;this.setState((t=>({logoImages:e,logoImagesLoaded:!0,logo:{...t.logo,logoIndex:n}})))}}componentWillUnmount(){const{pinCanvas:e}=this.props;e&&e.off("after:render")}onCanvasUpdate(){const{pinCanvas:e}=this.props;e&&this.setState({numImages:e.getNumOfImages(),isImageSelected:e.isImageSelected(),isScalingMode:e.isScalingMode()})}render(){const{aspectRatioIndex:e,currentToolPane:t,fontGroups:i,isImageSelected:n,isScalingMode:o,logo:s,logoImages:r,numImages:a,text:u}=this.state,{canDeselectAspectRatio:h,pinCanvas:p,pinDraftId:_,type:g,mediaType:m,videoDuration:f,videoStartText:b,videoEndText:y,validateStartTime:v,validateEndTime:P,handleStartTimeChange:w,handleEndTimeChange:A}=this.props,E=(0,l.Z)(g),C=this._getToolPanes(i);return(0,c.jsxs)(d.xu,{minWidth:x.wj,width:x.wj,height:"100%",display:"flex",direction:"row",color:"default",flex:"none",children:[(0,c.jsx)(d.xu,{width:56,height:"100%",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #efefef"}},display:"flex",direction:"column",color:"default",children:C.map(((e,i)=>(0,c.jsx)(d.xu,{"data-test-id":`pinbuilder-editor-${e.name}-pane-button`,"data-tutorial-id":`pinbuilder-editor-${e.name}-pane-button`,width:56,padding:2,dangerouslySetInlineStyle:{__style:{borderRight:t===e.name?"1px solid #fff":void 0,borderTop:0!==i&&t===e.name?"1px solid #efefef":"1px solid transparent",borderBottom:t===e.name?"1px solid #efefef":"1px solid transparent"}},children:(0,c.jsx)(d.u,{text:e.label,children:(0,c.jsx)(d.hU,{icon:e.icon,accessibilityLabel:e.label,onClick:()=>this.onIconClick(e.name),iconColor:t===e.name?"darkGray":"gray",size:"md"})})},e.name)))}),"crop"===t&&(0,c.jsx)(I,{aspectRatioIndex:e,aspectRatios:E,canDeselectAspectRatio:h,isImageSelected:n,isScalingMode:o,numImages:a,onReset:this.onCropReset,onSelectAspectRatioIndex:this.onSelectAspectRatioIndex,pinCanvas:p,pinDraftId:_,mediaType:m,videoDuration:f,videoStartText:b,videoEndText:y,validateStartTime:v,validateEndTime:P,handleStartTimeChange:w,handleEndTimeChange:A}),"logo"===t&&(0,c.jsx)(W,{pinCanvas:p,logo:s,logoImages:r,onUploadLogos:this.onUploadLogos,onDeleteLogo:this.onDeleteLogo,onReset:this.onLogoReset,onSelectLogo:this.onSelectLogo,onChangeLogoSize:this.onChangeLogoSize,onSelectLogoMargin:this.onSelectLogoMargin,onSelectLogoPosition:this.onSelectLogoPosition,onSelectLogoBackgroundColor:this.onSelectLogoBackgroundColor,onSelectLogoTransparency:this.onSelectLogoTransparency}),"text"===t&&(0,c.jsx)(se,{fontGroups:i,pinCanvas:p,text:u,getDefaultTextState:this.getDefaultTextState,onReset:this.onTextReset,onSelectFontFamily:this.onSelectFontFamily,onSelectTextColor:this.onSelectTextColor,onChangeFontSize:this.onChangeFontSize,onChangeLineHeight:this.onChangeLineHeight,onChangeLetterSpacing:this.onChangeLetterSpacing,onSelectTransform:this.onSelectTransform,onSelectAlignment:this.onSelectAlignment,onSelectMargin:this.onSelectMargin,onSelectBackgroundColor:this.onSelectBackgroundColor,onSelectBackgroundTransparency:this.onSelectBackgroundTransparency,onSelectPosition:this.onSelectPosition,onToggleShowMoreOptions:this.onToggleShowMoreOptions})]})}}function _e(e){const{logContextEvent:t}=(0,y.v)(),i=(0,v.ZP)(),n=(0,o.useDispatch)(),{pinDraftId:s,type:r}=e,{pinItemIndex:a}=(0,o.useSelector)((({pinbuilder:e})=>e.pinDrafts[s])),l=(0,le.Z)({name:"FontAssetResource"}),d=(0,le.Z)({name:"StickerAssetResource"});return(0,c.jsx)(pe,{...e,canDeselectAspectRatio:"carousel"!==r&&!("story"===r&&0===a),fontAssetResource:l,invalidateStickerResource:()=>n((0,ce.jB)("StickerAssetResource")),requestContext:(0,ue.B)(),stickerAssetResource:d,i18n:i,logContextEvent:t})}var ge=i(333312);const me=function({height:e,onClick:t,selected:i,src:o,width:s}){const r=(0,v.ZP)(),a=(0,n.useRef)(null);if(!e&&!o&&!s)return null;const l=(null!=s?s:1)/(null!=e?e:1)>.5625?40:20;return(0,c.jsxs)(d.xu,{"data-test-id":"pinbuilder-editor-thumbnail",flex:"grow",height:"100%",marginStart:1,marginEnd:1,maxWidth:l,minHeight:40,children:[i&&(0,c.jsx)(ge.default,{anchor:a.current,experienceIds:[501067],idealDirection:"up",placementId:1000135}),(0,c.jsx)(d.xu,{ref:a,children:(0,c.jsx)(D.Z,{onClick:t,rounded:!0,selected:i,children:(0,c.jsx)(d.zd,{rounding:2,children:(0,c.jsx)(d.Ee,{alt:r.bt("Miniatura carosello", "Carousel thumbnail", "Description text for carousel image thumbnail when editing", undefined, true),naturalHeight:null!=e?e:1,naturalWidth:null!=s?s:1,src:o})})})})]},`carousel-thumbnail-${o}`)};var fe=i(382964),xe=i(223815),be=i(537339),ye=i(829407),ve=i(734765),Pe=i(19121),we=i(955625),Ie=i(939853),Ae=i(977558),Ee=i(305782),Ce=i(724565),Se=i(833991);function je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Te={__style:{zIndex:Ae.fe+1e3}},De=new RegExp("\\d\\d:\\d\\d:\\d\\d");class ke extends n.Component{constructor(e){var t;super(e),t=this,je(this,"updateCachedItems",(e=>{const{selectedId:t,cachedItems:i}=this.state,{media:n}=i[t],o=this.pinCanvas?{...n,...this.pinCanvas.getCanvasOutput()}:n,s=this.pinCanvas?this.pinCanvas.toJSON():null;s&&"localImage"===o.type&&this.setState({selectedId:e,cachedItems:{...i,[t]:{...i[t],media:o,canvasJson:s}}})})),je(this,"setCarouselItem",(e=>{const{pinItemIds:t}=this.props,{selectedId:i,cachedItems:n}=this.state,o=t[e],{canvasJson:s,media:r}=n[o];o!==i&&n&&(this.updateCachedItems(o),this.pinCanvas&&s?this.pinCanvas.loadFromJSON(s):this.pinCanvas&&r&&r.src&&this.pinCanvas.setImage(r.src))})),je(this,"onResize",(()=>{if(this._canvasContainer){const{width:e,height:t}=this._canvasContainer.getBoundingClientRect();this.pinCanvas&&this.pinCanvas.resize(e,t)}})),je(this,"isVideo",(e=>!!e&&("localVideo"===e.type||"webVideo"===e.type))),je(this,"onSaveChanges",(()=>{const{onDismiss:e,pinDraftId:t,updatePinItemImages:i,logContextEvent:n}=this.props,{selectedId:o,cachedItems:s,isVideoPlaying:r,videoStartText:a,videoEndText:l}=this.state,{media:d}=s[o]||{};let c=null;var u;this.pinCanvas&&(this.pinCanvas.removeTextLayer(!0),null!==(u=this.pinCanvas)&&void 0!==u&&u.isScalingMode&&(this.pinCanvas.exitScalingMode(),c={aux_data:{editor_option:"scale_mode_exit"}}));const h=this.pinCanvas?{...d,...this.pinCanvas.getCanvasOutput({width:d&&d.width||we.IU,maxImageSize:89478485}),signature:this.isVideo(d)&&d&&d.signature?d.signature:null}:d;i(t,o,s,this.isVideo(d)&&d?{...h,src:d.src,trimmedStartTime:(0,Ce.SD)(a),trimmedEndTime:(0,Ce.SD)(l)}:h,this.pinCanvas?this.pinCanvas.toJSON():null);const{pinCanvas:p}=this;p&&this.isVideo(d)&&r&&p.playOrPauseVideo(),e(),n({event_type:101,component:13780,element:12130,...c})})),je(this,"onCancelChanges",(()=>{const{onDismiss:e,logContextEvent:t}=this.props,{selectedId:i,cachedItems:n,isVideoPlaying:o}=this.state,{media:s}=n[i]||{},{pinCanvas:r}=this;r&&this.isVideo(s)&&o&&r.playOrPauseVideo(),e(),t({event_type:101,component:13780,element:12131})})),je(this,"onAspectRatioChange",(e=>{const{pinItemIds:t,type:i}=this.props;"carousel"===i&&e&&(0,r.Z)(t,this.state.cachedItems,e).then((e=>{const i=t.reduce(((t,i,n)=>({...t,[i]:e[n]})),{});this.setState({cachedItems:i})}))})),je(this,"timeFormatError",(()=>this.props.i18n.bt("L'ora deve essere nel formato 00:00:00", "Time must be in the format 00:00:00", "Error message for incorrect time format", undefined, true))),je(this,"timeRangeError",(()=>this.props.i18n.bt("Il video deve avere una durata di almeno 4 secondi.", "Video must be at least 4 seconds long.", "Error message indicating that video is too short", undefined, true))),je(this,"validateEndTime",(e=>{if(!De.test(e))return this.timeFormatError();const{videoStartText:t}=this.state;return De.test(t)&&(0,Ce.SD)(e)-(0,Ce.SD)(t)<4?this.timeRangeError():""})),je(this,"validateStartTime",(e=>{if(!De.test(e))return this.timeFormatError();const{videoEndText:t}=this.state;return De.test(t)&&(0,Ce.SD)(t)-(0,Ce.SD)(e)<4?this.timeRangeError():""})),je(this,"handleEndTimeChange",(({value:e})=>{if(this.setState({videoEndText:e}),this.props.logContextEvent({event_type:97,component:13780,element:12144,aux_data:{value:e}}),!De.test(e))return;const{videoDuration:t}=this.state,i=(0,Ce.SD)(e),n=!!t&&i>t;n&&this.setState({videoEndText:t?(0,Ce.to)(t):""}),this.pinCanvas&&this.pinCanvas.setVideoTrimmerTimeRange({videoEndTime:n?t:i})})),je(this,"handleStartTimeChange",(({value:e})=>{this.setState({videoStartText:e}),this.props.logContextEvent({event_type:97,component:13780,element:12143,aux_data:{value:e}}),De.test(e)&&this.pinCanvas&&this.pinCanvas.setVideoTrimmerTimeRange({videoStartTime:(0,Ce.SD)(e)})})),je(this,"onVideoTrimmerUpdate",(()=>{if(this.pinCanvas){const{videoStartTime:e,videoEndTime:t}=this.pinCanvas.getVideoTrimmerTimeRange(),i=(0,Ce.to)(e),n=(0,Ce.to)(t);this.setState({videoStartText:i,videoEndText:n}),this.props.logContextEvent({event_type:104,component:13780,element:12146,aux_data:{value:`start=${i},end=${n}`}})}})),je(this,"onTogglePlayState",(()=>{this.pinCanvas&&this.pinCanvas.playOrPauseVideo(),this.props.logContextEvent({event_type:101,component:13780,element:12145})})),je(this,"setCanvasContainerRef",(e=>{this._canvasContainer=e,this.onResize()})),je(this,"handleKeyupEvents",(e=>{27===e.keyCode&&this.onCancelChanges()})),je(this,"onPinCanvasLoaderLoaded",(async function(e){if(e){const{selectedId:i,cachedItems:n}=t.state,{canvasJson:o,media:s}=n[i]||{},{src:r}=s||{},a=t.isVideo(s)?"video":"image";t.pinCanvas=e,e.on("trimmer:dragged",t.onVideoTrimmerUpdate),e.on("video:play",(()=>t.setState({isVideoPlaying:!0}))),e.on("video:pause",(()=>t.setState({isVideoPlaying:!1}))),o?await e.loadFromJSON(o):ae.Z.enabled("videoEditing")?await e.setMedia(r,a):await e.setImage(r),t.forceUpdate(),t.onResize()}}));const{pinItemId:i,pinItems:n}=e,{media:o}=n[i],s=o&&o.duration?o.duration:0;this.state={selectedId:i,cachedItems:n,videoDuration:s,videoStartText:(0,Ce.to)(0),videoEndText:s?(0,Ce.to)(s):(0,Ce.to)(0),isVideoPlaying:!0}}componentDidMount(){const{footerContext:e}=this.props,{setEducationId:t,setPaddingRight:i,setZIndex:n}=e;document.addEventListener("keyup",this.handleKeyupEvents,!1),window.addEventListener("resize",this.onResize),t(x.jh),i(400),n(1e3)}componentWillUnmount(){const{footerContext:e}=this.props,{setEducationId:t,setPaddingRight:i,setZIndex:n}=e;document.removeEventListener("keyup",this.handleKeyupEvents,!1),window.removeEventListener("resize",this.onResize),t(null),i(null),n(null)}render(){const{pinDraftId:e,pinItemIds:t,type:i}=this.props,{selectedId:n,cachedItems:o,videoDuration:r,videoStartText:l,videoEndText:u,isVideoPlaying:h}=this.state,{canvasJson:p,media:_}=o[n]||{},g=this.isVideo(_)?"video":"image";return(0,c.jsx)(d.mh,{children:(0,c.jsxs)(xe.Z,{allowClickAndDrag:!0,children:[(0,c.jsx)(d.xu,{position:"fixed",top:!0,right:!0,bottom:!0,left:!0,dangerouslySetInlineStyle:Te,children:(0,c.jsxs)(d.xu,{display:"flex",direction:"row",color:"secondary",height:"100%",children:[(0,c.jsxs)(d.xu,{ref:this.setCanvasContainerRef,display:"flex",flex:"grow",height:"100%",justifyContent:"center",alignItems:"center",overflow:"hidden",position:"relative",children:[(0,c.jsxs)(d.xu,{position:"absolute",top:!0,right:!0,marginTop:3,marginStart:4,marginEnd:4,dangerouslySetInlineStyle:{__style:{zIndex:x.v9}},children:[(0,c.jsx)(d.xu,{marginStart:2,marginEnd:2,display:"inlineBlock","data-test-id":"cancel-edit-button",children:(0,c.jsx)(d.zx,{name:"cancel",text:this.props.i18n.bt("Annulla", "Cancel", "Cancel pin edit", undefined, true),size:"md",onClick:this.onCancelChanges})}),(0,c.jsx)(d.xu,{marginStart:2,marginEnd:2,display:"inlineBlock","data-test-id":"save-edit-button","data-tutorial-id":"pin-builder-editor-save-edit-button",children:(0,c.jsx)(d.zx,{name:"saveChanges",disabled:this.isVideo(_)&&(this.validateStartTime(l).length>0||this.validateEndTime(u).length>0),text:this.props.i18n.bt("Aggiorna modifiche", "Update changes", "Update changes in pin edit", undefined, true),size:"md",color:"red",onClick:this.onSaveChanges})})]}),(0,c.jsxs)(d.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,c.jsx)(fe.Z,{onLoaded:this.onPinCanvasLoaderLoaded}),"carousel"===i&&(0,c.jsx)(d.xu,{bottom:!0,display:"flex",flex:"grow",justifyContent:"center",marginBottom:10,position:"absolute",width:196,children:t.map(((e,t)=>{const{media:i}=o&&o[e]||{},{height:s,src:r,width:a}=i||{};return(0,c.jsx)(me,{height:s,src:r,selected:n===e,onClick:()=>this.setCarouselItem(t),width:a},`carousel-thumbnail-${e}`)}))}),"video"===g&&(0,c.jsx)(d.xu,{bottom:!0,left:!0,flex:"none",rounding:"circle",marginBottom:6,marginStart:6,position:"absolute",children:(0,c.jsx)(d.hU,{icon:h?"pause":"play",accessibilityLabel:h?this.props.i18n.bt("Riproduci", "Play", "Play video", undefined, true):this.props.i18n.bt("Pausa", "Pause", "Pause video", undefined, true),iconColor:"darkGray",size:"sm",bgColor:"white",onClick:this.onTogglePlayState})})]})]}),(0,c.jsx)(_e,{pinCanvas:this.pinCanvas,pinDraftId:e,canvasJson:p,onAspectRatioChange:this.onAspectRatioChange,type:i,mediaType:g,videoDuration:r,videoStartText:l,videoEndText:u,validateStartTime:this.validateStartTime,validateEndTime:this.validateEndTime,handleStartTimeChange:this.handleStartTimeChange,handleEndTimeChange:this.handleEndTimeChange})]})}),(0,c.jsx)(s.Z,{children:([e,t])=>{return e===x.jh&&(0,c.jsx)(be.Z,{steps:(0,a.Z)((i=this.props.i18n,[{selector:'[data-tutorial-id="pinbuilder-editor-crop-pane-button"]',id:"guide-pin-builder-aspect",description:i.bt("Taglia la tua immagine: il formato 2:3 funziona meglio!", "Crop your image - a 2:3 aspect ratio works best!", "EditingTourConfig.AspectRatioGuide", undefined, true),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-logo-pane-button"]',id:"guide-pin-builder-logo",description:i.bt("Aggiungi un logo per mettere in mostra il tuo brand. Prova un file .png trasparente.", "Add a logo to showcase your brand. Try a transparent .png file.", "EditingTourConfig.Logo", undefined, true),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-text-pane-button"]',id:"guide-pin-builder-text",description:i.bt("Racconta una storia con la sovrapposizione del testo. Mantieni vivo l'interesse e prova a usare un colore di sfondo se risulta difficile da leggere.", "Tell a story with a text overlay. Keep it snappy, and try a background color if it's hard to read.", "EditingTourConfig.TextOverlay", undefined, true),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-reset-button"]',id:"guide-pin-builder-edit-reset",description:i.bt("Vuoi cambiare tutto? Cancella le modifiche apportate per ricominciare da capo.", "Want a refresh? Clear any changes you've made to start over.", "EditingTourConfig.ClearChanges", undefined, true),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-save-edit-button"]',id:"guide-pin-builder-edit-done",description:i.bt("Hai finito? Tocca Aggiorna modifiche per applicarle.", "Finished? Tap Update Changes to apply your changes.", "EditingTourConfig.UpdateChanges", undefined, true),padding:0}])),onComplete:()=>t(Ie.I),onDismiss:()=>t(Ie.I)});var i}})]})})}}function ze(e){const{logContextEvent:t}=(0,y.v)(),i=(0,ve.Z)(),n=(0,v.ZP)(),s=(0,g.Z)(),r=(0,o.useDispatch)(),a=(0,Pe.Z)(),l=a.isAuth?a.id:"",d=a.isAuth?a.country:"",{pinDraftId:u}=e,h=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[u].type)),p=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[u].pinItemIds)),_=p[(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[u].pinItemIndex))],m=(0,o.useSelector)((({pinbuilder:e})=>"story"===h?e.storyPinItems:e.pinItems)),{canvasJson:f,media:x}=m[_];(0,ye.Z)((()=>{t({event_type:120,component:13780})}));return(0,c.jsx)(ke,{...e,canvasJson:f,footerContext:(0,Se.YW)(),media:x,pinItemId:_,pinItemIds:p,pinItems:m,type:h,updatePinItemImages:(e,o,a,c,u)=>r((0,Ee.KF)({pinDraftId:e,selectedId:o,cachedItems:a,editedMedia:c,canvasJson:u,userId:l,country:d,i18n:n,logContextEvent:t,siteType:i,ideaPinRenamingEnabled:s})),i18n:n,logContextEvent:t})}},248060:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(702664),s=i(305782),r=i(407043),a=i(898781),l=i(883119),d=i(785893);class c extends n.Component{constructor(...e){var t,i,n;super(...e),n=({checked:e})=>{const{setShareable:t,logContextEvent:i}=this.props;t(e),i({event_type:101,component:13308,element:12125,aux_data:{is_checked:e}})},(i="handleChange")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{checked:e}=this.props,t="pin-draft-carousel-control";return(0,d.jsxs)(l.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,d.jsx)(l.XZ,{checked:e,id:t,onChange:this.handleChange,size:"sm"}),(0,d.jsx)(l.__,{htmlFor:t,children:(0,d.jsx)(l.xu,{paddingX:2,children:(0,d.jsx)(l.xv,{size:"200",children:this.props.i18n.bt("Usa lo stesso testo e lo stesso URL per ciascuna immagine", "Use the same text and URL for each image", "Option to select if user wants to copy text and link to all carousel items", undefined, true)})})})]})}}function u(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,o.useDispatch)(),l=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e.pinDraftId].pinItemShareable));return(0,d.jsx)(c,{...e,checked:l,i18n:i,logContextEvent:t,setShareable:t=>n((0,s.u9)(e.pinDraftId,t))})}},912820:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(702664),o=i(883119),s=i(785893);function r({taggedObjectId:e}){var t,i,r;const a=(0,n.useSelector)((({pinbuilder:t})=>t.taggedObjects[e].media));return a?(0,s.jsx)(o.xu,{paddingX:1,display:"inlineBlock",position:"relative",children:(0,s.jsx)(o.zd,{height:90,rounding:2,wash:!0,width:90,children:(0,s.jsx)(o.Ee,{alt:"",naturalHeight:null!==(t=a.height)&&void 0!==t?t:1,naturalWidth:null!==(i=a.width)&&void 0!==i?i:1,src:null!==(r=a.url)&&void 0!==r?r:"",fit:"cover"})})}):null}},84769:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(702664),s=i(969759),r=i(22182),a=i(630767),l=i(773285),d=i(898781),c=i(305782),u=i(883119),h=i(299295),p=i(785893);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(...e){super(...e),_(this,"handleScheduledDateChange",(e=>{const{scheduledTime:t,setScheduledDate:i,setScheduledDateError:n,setScheduledTime:o,setScheduledTimeError:s}=this.props,{value:r}=e||{};i(r),n(null);const a=new Date;t&&r&&r.toDateString()===a.toDateString()&&(o(null),s(null))})),_(this,"handleScheduledTimeChange",(e=>{const{setScheduledTime:t,setScheduledTimeError:i}=this.props;t(e.value),i(null)})),_(this,"handleSwitchScheduleOption",(e=>()=>{const{setScheduledDate:t,setScheduledDateError:i,setPublishOption:n,setScheduledTime:o,setScheduledTimeError:r}=this.props;if(n(e),"publish-immediately"===e)t(null),i(null),o(null),r(null);else{const e=(0,s.Z)(new Date,1);t(e);const i=new Date(e);i.setHours(12,0,0,0),o(i)}}))}render(){const{displaySwitchUi:e,isIdeaPinSchedulingEnabled:t,inStlToolingExp:i,pinDraftId:n,publishOption:o,scheduledDate:l,scheduledDateError:d,scheduledTime:c,scheduledTimeError:_}=this.props,g=new Date,m=(0,s.Z)(g,t?h.$K:h.TZ);g.getMinutes()>=30?g.setHours(g.getHours()+1,0,0,0):g.setHours(g.getHours(),30,0,0);const f=l&&l.toDateString()===g.toDateString()?g:void 0,x=`pin-draft-schedule-publish-immediately-${n}`,b=`pin-draft-schedule-publish-later-${n}`;return(0,p.jsxs)(u.xu,{children:[e?(0,p.jsxs)(u.xu,{"data-test-id":"pin-draft-switch-group",display:"flex",paddingY:6,children:[(0,p.jsx)(u.rs,{id:"pin-draft-switch-group",onChange:this.handleSwitchScheduleOption("publish-later"===o?"publish-immediately":"publish-later"),switched:"publish-later"===o}),(0,p.jsx)(u.xu,{marginStart:2,children:(0,p.jsx)(u.xv,{children:this.props.i18n.bt("Pubblica pi tardi", "Publish at a later date", "pinbuilder.switchButton.pinDraft", undefined, true)})})]}):(0,p.jsx)(u.FX,{id:"pin-draft-radio-group",legend:this.props.i18n.bt("Bozza del Pin", "Pin draft", "pinbuilder.radioButton.pin_draft", undefined, true),legendDisplay:"hidden",direction:"row",children:(0,p.jsxs)(u.xu,{display:"flex",paddingY:4,justifyContent:i?"between":void 0,children:[(0,p.jsxs)(u.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(u.FX.RadioButton,{checked:"publish-immediately"===o,id:x,onChange:this.handleSwitchScheduleOption("publish-immediately"),size:"sm",value:"publish-immediately"}),(0,p.jsx)(u.xu,{children:(0,p.jsx)(u.__,{htmlFor:x,children:(0,p.jsx)(u.xu,{paddingX:2,children:(0,p.jsx)(u.xv,{size:"200",children:i?this.props.i18n.bt("Pubblica subito", "Publish now", "pinbuilder.radioButton.publishNow", undefined, true):this.props.i18n.bt("Pubblica subito", "Publish immediately", "Radio button label for publishing the pin immediately", undefined, true)})})})})]}),(0,p.jsxs)(u.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(u.FX.RadioButton,{checked:"publish-later"===o,id:b,onChange:this.handleSwitchScheduleOption("publish-later"),size:"sm",value:"publish-later"}),(0,p.jsx)(u.xu,{children:(0,p.jsx)(u.__,{htmlFor:b,children:(0,p.jsx)(u.xu,{paddingX:2,children:(0,p.jsx)(u.xv,{size:"200",children:i?this.props.i18n.bt("Pubblica pi tardi", "Publish later", "pinbuilder.radioButton.publishLater", undefined, true):this.props.i18n.bt("Pubblica pi tardi", "Publish at a later date", "Radio button label by clicking which user will schedule a date and time to publish the pin later", undefined, true)})})})})]})]})}),"publish-later"===o&&(0,p.jsxs)(u.xu,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[(0,p.jsx)(u.xu,{column:6,paddingX:1,children:(0,p.jsx)(r.Z,{errorMessage:d&&"string"==typeof d?d:void 0,id:`pin-draft-schedule-date-field-${n}`,idealDirection:"up",maxDate:m,minDate:g,onChange:this.handleScheduledDateChange,value:l||void 0})}),(0,p.jsx)(u.xu,{column:6,paddingX:1,children:(0,p.jsx)(a.Z,{error:_,id:`pin-draft-schedule-time-field-${n}`,idealDirection:"up",minTime:f,onChange:this.handleScheduledTimeChange,placeholder:this.props.i18n.bt("Ora", "Time", "Placeholder for time field", undefined, true),value:c})})]})]})}}function m(e){const t=(0,d.ZP)(),{pinDraftId:i}=e,n=(0,o.useDispatch)(),{checkExperiment:s}=(0,l.F)(),r=s("web_sce_idea_pin_scheduling").anyEnabled,a=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].publishOption)),u=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledDate)),h=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledDateError)),_=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledTime)),m=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledTimeError));return(0,p.jsx)(g,{...e,i18n:t,isIdeaPinSchedulingEnabled:r,publishOption:a,scheduledDate:u,scheduledDateError:h,scheduledTime:_,scheduledTimeError:m,setPublishOption:e=>n((0,c.RR)(i,e)),setScheduledDate:e=>{n((0,c.WT)(i)),n((0,c.I0)(i,e))},setScheduledDateError:e=>n((0,c.Yr)(i,e)),setScheduledTime:e=>{n((0,c.WT)(i)),n((0,c.$K)(i,e))},setScheduledTimeError:e=>n((0,c.Ve)(i,e))})}},898246:(e,t,i)=>{i.d(t,{ZP:()=>D});var n,o,s,r=i(667294),a=i(702664),l=i(23279),d=i.n(l),c=i(333312),u=i(214494),h=i(755742),p=i(294184),_=i.n(p),g=i(898781),m=i(883119),f=i(785893);class x extends r.PureComponent{render(){const{value:e,onDelete:t,readOnly:i}=this.props;return(0,f.jsxs)(m.xu,{rounding:2,color:"secondary",display:"flex",justifyContent:"center",alignItems:"center",padding:2,dangerouslySetInlineStyle:{__style:{userSelect:"none"}},children:[(0,f.jsx)(m.xv,{size:"200",weight:"bold",children:e}),!i&&(0,f.jsx)(m.xu,{marginStart:2,children:(0,f.jsx)(m.iP,{fullHeight:!1,fullWidth:!1,onTap:t,rounding:"circle",children:(0,f.jsx)(m.xu,{display:"flex",justifyContent:"center",alignItems:"center",color:"default",padding:1,rounding:"circle",children:(0,f.jsx)(m.JO,{accessibilityLabel:this.props.i18n.bt("Cancella Tag", "Delete Tag", "delete this tag", undefined, true),icon:"cancel",color:"default",size:8,inline:!0})})})})]})}}function b(e){const t=(0,g.ZP)();return(0,f.jsx)(x,{...e,i18n:t})}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}s={readOnly:!1},(o="defaultProps")in(n=x)?Object.defineProperty(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s;class v extends r.Component{constructor(...e){super(...e),y(this,"handleChange",(e=>{const{onChange:t}=this.props;t({value:e.target.value})})),y(this,"handleDeleteTag",(e=>()=>{const{onRemoveTag:t}=this.props;t(e)})),y(this,"getColor",(()=>{const{errorMessage:e,focused:t,showOnBlur:i,value:n}=this.props;return e?"#e60023":t?"#0074e8":n&&!i?"transparent":"rgba(142, 142, 142, 0.5)"}))}get textField(){return this._textField}componentDidUpdate(){this._textField&&this.props.focused&&this._textField.focus()}render(){const{disabled:e,errorMessage:t,id:i,onKeyDown:n,placeholder:o,size:s,showOnBlur:a,value:l="",tags:d,focused:c}=this.props,u={__style:{boxShadow:`0 ${c||!!t?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}};return(0,f.jsxs)(m.xu,{column:12,display:"flex",direction:"column",children:[(0,f.jsxs)(m.xu,{display:"flex",alignItems:"end",marginStart:-2,marginTop:-2,wrap:!0,children:[d&&d.map(((e,t)=>{const{id:i,value:n}=e;return(0,f.jsx)(m.xu,{marginStart:2,marginTop:2,marginBottom:-1,children:(0,f.jsx)(b,{value:n,onDelete:this.handleDeleteTag(i)})},t)})),!e&&(0,f.jsx)(m.xu,{flex:"grow",marginTop:2,marginStart:2,children:(0,f.jsx)("input",{ref:e=>this._textField=e,type:"text",className:_()("TextArea__textArea",{TextArea__dark:!0,TextArea__disabled:e,TextArea__enabled:!e,TextArea__large:"lg"===s,TextArea__medium:"md"===s,TextArea__wrap:!1,TextArea__nowrap:!0}),id:i,onChange:this.handleChange,onKeyDown:n,placeholder:o,value:l,maxLength:30,style:{height:"21px"}})})]}),(c||a||t||!l)&&(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(m.xu,{column:12,dangerouslySetInlineStyle:u}),(0,f.jsx)(m.xu,{column:12,marginTop:1,minHeight:15,children:(c||a||t)&&(0,f.jsx)(m.xu,{column:12,display:"flex",justifyContent:"between",children:(0,f.jsx)(m.xu,{flex:"grow",children:(0,f.jsx)(m.xv,{size:"100",color:"error",children:t})})})})]})]})}}y(v,"defaultProps",{disabled:!1,size:"md",tags:[],focused:!1});var P=i(349700);function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const I={component:{display:"flex",position:"relative"},flyout:{backgroundColor:"#fff",border:"1px solid #efefef",borderRadius:"8px",boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.1)",boxSizing:"border-box",display:"flex",flexDirection:"column",maxHeight:220,overflow:"scroll",position:"absolute",padding:"16px 0",width:"100%"}};class A extends r.Component{constructor(...e){super(...e),w(this,"state",{value:"",hoveredValue:"",flyoutHeight:0,hoveredSuggestionIndex:null,focused:!1}),w(this,"handleKeyDown",(e=>{const{value:t}=this.state,{tags:i}=this.props;if(e.keyCode===h.Z.BACKSPACE&&""===t&&i.length>0){const{id:e}=i[i.length-1];this.handleRemoveTag(e)}})),w(this,"handleChange",(({value:e})=>{const{onChange:t}=this.props;this.setState({value:e,hoveredValue:""}),t(e)})),w(this,"handleSuggestionMouseEnter",(e=>{const{suggestions:t}=this.props,i=t[e];this.setState({hoveredSuggestionIndex:e,hoveredValue:i.tagValue||i.value})})),w(this,"handleSuggestionMouseLeave",(()=>{this.setState({hoveredSuggestionIndex:null,hoveredValue:""})})),w(this,"handleAddTag",(e=>{const{onAddTag:t}=this.props;t(e),this.setState({value:"",hoveredValue:""}),this._textFieldRef&&this._textFieldRef.textField&&this._textFieldRef.textField.focus()})),w(this,"handleRemoveTag",(e=>{const{onRemoveTag:t}=this.props;t(e)})),w(this,"handleClick",(e=>{if(this._componentRef&&e){const{onChange:t}=this.props,i=e.target instanceof Node&&this._componentRef.contains(e.target);i?this.setState({focused:i}):(this.setState({focused:i,value:"",hoveredValue:"",hoveredSuggestionIndex:null}),t(""))}})),w(this,"setTextFieldRef",(e=>{this._textFieldRef=e})),w(this,"renderFlyout",(e=>{const{flyoutHeight:t,hoveredSuggestionIndex:i}=this.state,n=-1*t-10;return(0,f.jsxs)("div",{ref:e=>{this._flyoutRef=e},style:{...I.flyout,top:n},children:[(0,f.jsx)(m.xu,{paddingX:4,marginBottom:2,children:(0,f.jsx)(m.xv,{size:"200",color:"subtle",children:(0,P.nk)(this.props.i18n.nbt(["Scegli i tag pertinenti ({{ count }} risultato)", "Scegli i tag pertinenti ({{ count }} risultati)"], e.length, "Number of matching tags to the query.", true),{count:e.length})})}),e.map(((e,t)=>{const n=t===i;return(0,f.jsx)(m.iP,{onMouseEnter:()=>this.handleSuggestionMouseEnter(t),onMouseLeave:this.handleSuggestionMouseLeave,onTap:()=>this.handleAddTag(e),children:(0,f.jsx)(m.xu,{paddingX:4,paddingY:2,color:n?"secondary":"transparent","data-test-id":`TaggableFieldFlyout-${t}`,children:(0,f.jsx)(m.xv,{size:"200",weight:"bold",children:e.value})})},t)}))]})}))}componentDidMount(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}componentWillUnmount(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}componentDidUpdate(e,t){if(this._flyoutRef){const{height:e}=this._flyoutRef.getBoundingClientRect();t.flyoutHeight!==e&&this.setState({flyoutHeight:e})}}render(){const{disabled:e,errorMessage:t,pinDraftId:i,placeholder:n,suggestions:o,tags:s}=this.props,{focused:r,hoveredValue:a,value:l}=this.state,d=s.map((e=>({value:e.tagValue?e.tagValue:e.value,id:e.id}))),c=e||!r&&s.length>0;return(0,f.jsxs)("div",{ref:e=>{this._componentRef=e},style:I.component,children:[l&&!e&&r&&o.length>0&&this.renderFlyout(o),(0,f.jsx)(v,{ref:this.setTextFieldRef,disabled:c,focused:r,id:`${i}-TaggableTextField`,errorMessage:t,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onRemoveTag:this.handleRemoveTag,placeholder:n,value:a||l,tags:d,showOnBlur:!0})]})}}w(A,"defaultProps",{suggestions:[]});const E=function(e){const t=(0,g.ZP)();return(0,f.jsx)(A,{...e,i18n:t})};var C=i(407043),S=i(305782);function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class T extends r.Component{constructor(...e){super(...e),j(this,"state",{suggestions:[],noSuggestionsFromQuery:!1,containerRef:null}),j(this,"_hasStartTypingContextLogFired",!1),j(this,"saveRef",(e=>{this.setState({containerRef:e})})),j(this,"onAddTag",(e=>{const{addInterestTag:t}=this.props;t(e),this.setState({suggestions:[],noSuggestionsFromQuery:!1})})),j(this,"onRemoveTag",(e=>{const{removeInterestTag:t}=this.props;t(e)})),j(this,"onChange",d()((e=>{if(e){const{pinDraftId:t,logContextEvent:i}=this.props,n="InterestTaggingResource",o={query:e,minLevel:1};u.Z.create(n,o).callGet().then((e=>{const{data:{suggestions:t}}=e.resource_response,i=t.map((e=>({id:e.id,value:e.name,tagValue:e.interest_name}))),n=this._getUnselectedSuggestions(i);this.setState({suggestions:i,noSuggestionsFromQuery:0===n.length})})),this._hasStartTypingContextLogFired||(this._hasStartTypingContextLogFired=!0,i({event_type:7383,component:13209,element:11449,aux_data:{pin_draft_id:t}}))}else this.setState({suggestions:[],noSuggestionsFromQuery:!1})}),250)),j(this,"_getUnselectedSuggestions",(e=>{const{interestTags:t}=this.props,i=t.map((e=>e.id));return e.reduce(((e,t)=>i.includes(t.id)?e:[...e,t]),[])})),j(this,"getErrorMessage",(()=>{const{interestTags:e}=this.props,{noSuggestionsFromQuery:t}=this.state;return 10===e.length?this.props.i18n.bt("Hai raggiunto il numero massimo di tag consentiti.", "You have reached the maximum number of tags allowed.", "The maximum number of tags user can add to a pin is reached.", undefined, true):t?this.props.i18n.bt("Non ci sono tag corrispondenti alla tua ricerca.", "There are no tags that match your query.", "No suggested results found based on the user query.", undefined, true):""}))}render(){const{interestTags:e,pinDraftId:t}=this.props,{containerRef:i,suggestions:n}=this.state,o=this._getUnselectedSuggestions(n),s=this.getErrorMessage(),r=e.length>0?"":this.props.i18n.bt("Aggiungi tag", "Add tags", "text area placeholder to prompt user to tags to the pin.", undefined, true);return(0,f.jsxs)(m.xu,{ref:this.saveRef,children:[(0,f.jsx)(E,{disabled:10===e.length,pinDraftId:t,errorMessage:s,placeholder:r,suggestions:o,tags:e,onAddTag:this.onAddTag,onRemoveTag:this.onRemoveTag,onChange:this.onChange}),(0,f.jsx)(c.default,{experienceIds:[501388],placementId:1000135,anchor:i,idealDirection:"up",flyoutSize:"lg",textOverflow:"normal"})]})}}function D(e){const{logContextEvent:t}=(0,C.v)(),i=(0,g.ZP)(),n=(0,a.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].interestTags)),o=(0,a.useDispatch)();return(0,f.jsx)(T,{...e,i18n:i,logContextEvent:t,interestTags:n,addInterestTag:t=>o((0,S.YN)(e.pinDraftId,t)),removeInterestTag:t=>o((0,S.Ug)(e.pinDraftId,t))})}},553558:(e,t,i)=>{i.d(t,{ZP:()=>yi});var n=i(667294),o=i(702664),s=i(299487),r=i(704115),a=i(248740),l=i(580189),d=i(121151),c=i(918333),u=i(172071),h=i(639410),p=i(460985),_=i(349700),g=i(302667),m=i(407043),f=i(898781),x=i(641692),b=i(883119),y=i(785893);function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class P extends n.Component{constructor(...e){super(...e),v(this,"state",{showModal:!0}),v(this,"handlePromoteButtonClick",(()=>{const{onComplete:e,logContextEvent:t}=this.props;(0,g.vF)(t,x.NH.CLICK,x.Xc.PIN_CREATE_SUCCESS,101,207),e()})),v(this,"handleDismiss",(()=>{const{onDismiss:e}=this.props;this.setState({showModal:!1}),e()})),v(this,"renderDoneButton",(()=>{const{promoteUrl:e}=this.props;return(0,y.jsx)(b.xu,{paddingX:1,children:(0,y.jsx)(b.zx,{role:"link",color:"red",href:e,onClick:this.handlePromoteButtonClick,text:this.props.i18n.bt("Sponsorizza Pin", "Promote Pin", "[m10n] button text for promote link in promote modal", undefined, true)})})}))}componentDidMount(){(0,g.vF)(this.props.logContextEvent,x.NH.RENDER,x.Xc.PIN_CREATE_SUCCESS,120,207),u.Z.increment("web.pin_create.success.promote.upsell")}renderModalContent(){const{pin:e,video:t}=this.props,i=e.pinner;return(0,y.jsxs)(b.xu,{position:"relative",maxWidth:804,overflow:"hidden",display:"flex",color:"default",rounding:2,maxHeight:"calc(100vh - 32px)",children:[(0,y.jsx)(b.xu,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #EFEFEF"}},children:(0,y.jsx)(b.xu,{display:"flex",maxHeight:"700px",paddingX:8,paddingY:10,children:(0,y.jsx)(p.ZP,{pin:e,video:t,maxDescriptionLength:60,promoted:{businessName:i.full_name,avatarImageSmallUrl:i.image_small_url}})})}),(0,y.jsx)(b.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:(0,y.jsxs)(b.xu,{paddingY:10,children:[(0,y.jsx)(b.xu,{marginStart:10,display:"flex",children:(0,y.jsx)(b.X6,{children:this.props.i18n.bt("Hai creato un Pin!", "You created a Pin!", "pin create success message for modal title", undefined, true)})}),(0,y.jsx)(b.xu,{marginStart:10,marginTop:6,children:(0,y.jsx)(b.xv,{weight:"bold",children:this.props.i18n.bt("Promuovi il tuo Pin per raggiungere pi persone", "Promote your Pin to reach more people", "[m10n] header for promote pin upsell", undefined, true)})}),(0,y.jsx)(b.xu,{marginStart:10,marginTop:3,marginBottom:8,children:(0,y.jsx)(b.xv,{children:(0,_.nk)(this.props.i18n.bt("{{ mauText }} di persone ogni mese usano Pinterest per fare nuovi acquisti, per creare e per tante altre ragioni. Promuovi il tuo Pin e trova il pubblico giusto.", "{{ mauText }} people come to Pinterest every month to find new things to buy, make and do. Promote your Pin to find your audience.", "[m10n] body copy for promote pin upsell. MAU_TEXT is a string of xxx million", undefined, true),{mauText:(0,y.jsx)(h.Z,{})})})}),this.renderButtons()]})}),(0,y.jsx)(b.xu,{paddingY:2,paddingX:2,children:(0,y.jsx)(b.hU,{accessibilityLabel:"dismiss",bgColor:"transparent",icon:"cancel",iconColor:"gray",onClick:this.handleDismiss,size:"md"})})]})}renderButtons(){const{onDismiss:e,pinUrl:t}=this.props;return(0,y.jsxs)(b.xu,{marginStart:9,display:"flex",children:[(0,y.jsx)(b.xu,{paddingX:1,"data-test-id":"seeItNow",children:(0,y.jsx)(b.zx,{role:"link",href:t,onClick:e,text:this.props.i18n.bt("Visualizza il tuo pin", "See your Pin", "[m10n] button text for pin link button in promote modal", undefined, true)})}),this.renderDoneButton()]})}render(){const{showModal:e}=this.state;return e?(0,y.jsx)(b.xu,{position:"fixed",justifyContent:"center",alignItems:"center",display:"flex",column:12,height:"100%",width:"100%",left:!0,top:!0,dangerouslySetInlineStyle:{__style:{boxSizing:"border-box"}},children:(0,y.jsx)(d.ZP,{accessibilityModalLabel:this.props.i18n.bt("Hai salvato un Pin.", "Your saved Pin.", "Label for a modal showing the pin the user just created.", undefined, true),onDismiss:this.handleDismiss,size:"md",children:this.renderModalContent()})}):null}}function w(e){const t=(0,f.ZP)(),{logContextEvent:i}=(0,m.v)();return(0,y.jsx)(P,{...e,i18n:t,logContextEvent:i})}var I=i(497529),A=i(21353),E=i(19121),C=i(784450),S=i(773285);const j=(0,C.Z)(14,(({pinId:e})=>({pin_id:e})))((function({boardName:e,color:t,description:i,eligibleForExtensionUpsell:n,experience:o,imageUrl:s,isFromPinBuilder:r,link:u,onClose:h,openNewTab:p,pin:g,pinId:m,sectionName:x,siteType:v,video:P,websiteMedia:C}){const j=(0,f.ZP)(),T=(0,E.Z)(),D=(0,I.Z)(),{checkExperiment:k}=(0,S.F)(),z=(0,A.Z)(),O=()=>o&&[501001].includes(o.experience_id),R=()=>{O()&&D.completeExperience(o.placement_id,o.experience_id),h()},L=()=>{O()&&D.dismissExperience(o.placement_id,o.experience_id),h()},M=(0,l.Z)({currentSiteType:v,destinationSiteType:0,inputPath:`/pin/${m}`}),{anyEnabled:B}=k("advertiser_growth_quick_promote_direct_redirect");let N;if(3===v)N=`${z("quick_promote")}?pinId=${g.id}`;else{const e=B?`/advertiser/quick-promote/?pinId=${m}`:`/pin/${m}/promote`;N=(0,l.Z)({currentSiteType:v,destinationSiteType:0,inputPath:e})}if(T.isPartner&&g&&g.is_quick_promotable)return(0,y.jsx)(w,{pin:g,pinUrl:M,promoteUrl:N,onDismiss:L,onComplete:R,siteType:v,video:P});const F=g&&e?g.board.url:"",Z=x?`${F}${g.section.slug}/`:"";if(r&&n){const e=(null==g?void 0:g.id)||"";return(0,y.jsx)(b.xu,{"data-test-id":`browser-extension-upsell-modal_${e}`,children:(0,y.jsx)(d.ZP,{accessibilityModalLabel:j.bt("Installa l'estensione del browser per Pinterest", "Get the Pinterest browser extension", "label.extensionUpsellModal.addPinDropdown", undefined, true),onDismiss:h,size:"sm",children:(0,y.jsx)(a.Z,{isExtensionInstalled:!1,isFromPinBuilder:!0,onHide:h,onInstall:h})})})}return(0,y.jsx)(d.ZP,{accessibilityModalLabel:j.bt("Hai salvato un Pin.", "Your saved Pin.", "Label for a modal showing the pin the user just created.", undefined, true),onDismiss:h,heading:(0,y.jsx)(b.xu,{padding:8,children:(0,y.jsx)(b.X6,{align:"center",size:"500",children:x?(0,_.nk)(j.bt("Salvato su {{ sectionName }} in {{ boardName }}", "Saved to {{ sectionName }} in {{ boardName }}", "pinCreateSuccess.Option2Modal.savedToSection", undefined, true),{boardName:(0,y.jsx)(b.rU,{href:Z,display:"inlineBlock",underline:"hover",children:x},"sectionLink"),sectionName:(0,y.jsx)(b.rU,{href:F,display:"inlineBlock",underline:"hover",children:e},"boardLink")}):(0,_.nk)(j.bt("Salvato in {{ boardName }}", "Saved to {{ boardName }}", "pinCreateSuccessModal.Option2Modal.savedToBoard", undefined, true),{boardName:(0,y.jsx)(b.rU,{href:F,display:"inlineBlock",underline:"hover",children:e},"boardLink")})})}),size:"md",children:(0,y.jsx)(c.Z,{hideHeader:!0,boardName:e,color:t,description:i,imageUrl:s,link:u,onClose:h,openNewTab:p,pin:g,pinId:m,sectionName:x,siteType:v,video:P,websiteMedia:C})})}));var T=i(333206),D=i(616672),k=i(850760),z=i(970576),O=i(798477),R=i(838548),L=i(505132),M=i(237056),B=i(717615),N=i(784590),F=i(734765),Z=i(231947),U=i(444445),V=i(350118),H=i(616550),G=i(343341),W=i(846760),$=i(299295),q=i(305782);const Y={__style:{paddingTop:$.XB}};function X({pinDraftId:e}){const{logContextEvent:t}=(0,m.v)(),i=(0,f.ZP)(),s=(0,M.Z)(),r=(0,o.useDispatch)(),a=(0,E.Z)(),l=(0,B.Z)(),d=(0,Z.lJ)(a,l),c=(0,F.Z)(),{checkExperiment:u}=(0,S.F)(),h=a.isAuth?a.id:"",p=a.isAuth?a.country:"",_=a.isAuth&&a.isPartner,[g,x]=(0,n.useState)(!1),[v,P]=(0,n.useState)(null),[w,I]=(0,n.useState)(""),A=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>{const{websiteMedia:i}=t[e];return i.length>0?i:[]})),C=(0,o.useSelector)((({pinbuilder:{pinDrafts:t,pinItems:i}})=>{const{pinItemIds:n}=t[e],{media:o}=i[n[0]];return o?(0,D.Z)(o):$.sD})),j=n=>{var o;o=n,r((0,q.Nv)(e,o)),A.length>1?r((0,q.m_)({pinDraftId:e,userId:h,country:p,isPartner:_,i18n:i,logContextEvent:t,orbacSubjectId:d,checkExperiment:u,siteType:c,ideaPinRenamingEnabled:s})):r((0,R.Z)({pinDraftId:e,storyPinPublishStopwatch:void 0,userId:h,orbacSubjectId:d,country:p,isPartner:_,i18n:i,logContextEvent:t,ideaPinRenamingEnabled:s}))},k=()=>{P(null),x(!1)};return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(b.xu,{flex:"grow",minHeight:Math.max(C,$.sD),paddingX:5,width:"100%",dangerouslySetInlineStyle:Y,children:(0,y.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,y.jsx)(b.xu,{paddingY:1,children:(0,y.jsx)(b.xv,{lineClamp:1,weight:"bold",align:"center",children:i.bt("Scegli una bacheca", "Choose a board", "pinbuilder.PinDraftBoardView.boardPickerTitle", undefined, true)})}),(0,y.jsx)(W.sR,{onBoardCreate:e=>{I(null==e?void 0:e.title),x(!0)},onItemChosen:j,paneWidth:430,displayShortlistMostRecentBoard:!0,useLegoLayout:!1,setBoardWithSection:e=>{P(e)}})]})}),g&&!v&&(0,y.jsx)(T.Z,{onBoardCreate:e=>{var t,i,n;r((0,W.DR)(a,l)),j({boardId:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"",url:null!==(i=null==e?void 0:e.url)&&void 0!==i?i:"",title:null!==(n=null==e?void 0:e.name)&&void 0!==n?n:""}),k()},onClose:k,suggestedBoardName:w}),g&&!!v&&(0,y.jsx)(L.Z,{selectedBoard:v,onClose:k,onSectionCreate:e=>{v&&j({boardId:v.id,title:e.title||"",sectionId:e.id}),k()}})]})}function K({data:e}){const t=(0,f.ZP)();return(0,y.jsx)(b.xu,{"data-test-id":"media-image-view",dangerouslySetInlineStyle:{__style:{padding:"2px"}},children:(0,y.jsx)(b.zd,{rounding:4,wash:!0,children:(0,y.jsx)(b.Ee,{alt:t.bt("Immagine salvata dal sito", "Image saved from site", "pinbuilder.PinDraftBoardView.savedImage", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src})})})}function J({pinDraftId:e}){var t;const i=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].websiteLink)),{data:s,isLoaded:r}=(0,N.Z)({name:"DomainResource",options:{domain:i,field_set_key:"owner"}}),{data:a,refresh:l}=(0,N.Z)(r?{name:"UserResource",options:{user_id:(null==s||null===(t=s.official_user)||void 0===t?void 0:t.id)||""}}:null);return(0,n.useEffect)((()=>{l()}),[r,l]),a?(0,y.jsxs)(b.xu,{padding:2,children:[(0,y.jsx)(k.Z,{user:a}),";"]}):null}function Q({pinDraftId:e}){const t=(0,f.ZP)(),i=(0,o.useDispatch)(),s=(0,n.useRef)(),r=i((0,q.By)(e)),a=$.LM,l=(e,t)=>e>=t?{width:350/e*t,height:350}:{width:a,height:a/t*e};return 1===r.length?(0,y.jsx)(b.xu,{"data-test-id":"media-image-view",width:l(r[0].height,r[0].width).width,height:l(r[0].height,r[0].width).height,marginStart:"auto",marginEnd:"auto",overflow:"hidden",rounding:4,children:(0,y.jsx)(b.Ee,{alt:t.bt("Immagine salvata dal sito", "Image saved from site", "pinbuilder.PinDraftBoardView.savedImage", undefined, true),naturalHeight:r[0].height,naturalWidth:r[0].width,src:r[0].src,fit:"contain"})}):(0,y.jsx)(b.xu,{marginTop:2,height:420,ref:s,overflow:"auto",children:s&&(0,y.jsx)(b.Rk,{renderItem:({data:e})=>(0,y.jsx)(K,{data:e}),columnWidth:$.eZ,items:r,minCols:2,gutterWidth:U.lX,scrollContainer:()=>s.current||window,virtualize:!0,layout:"flexible"})})}function ee({pinDraftId:e,pinItemId:t}){const i=(0,o.useDispatch)(),s=(0,H.useHistory)(),r=(0,G.F9)(),a=i((0,q.By)(e)),l=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].pinId)),d=(0,V.S6)()(null!=l?l:""),c=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>l&&"create"===t[e].mode?d:null)),u=.1*$.sD;(0,n.useEffect)((()=>{if(c){const e=setTimeout(window.close,1e4);return()=>{e&&clearTimeout(e)}}}),[c]);const h=()=>{if(1===a.length)l?s.push(`/pin/${l}/`):s.push("/");else if(c){const e=c.board?c.board.url:"";s.push(`${e||""}`)}else s.push("/")};return c&&(()=>{if(c&&c.board){const t=c.board.name,n=c.board.url,o=c.images?c.images["236x"]:null,a=o?o.url:"";i((0,O.Z)(e)),r.showOneToast((({hideToast:e})=>(0,y.jsx)(z.Z,{boardName:t,boardUrl:n,isFromPinBuilder:!0,onHide:e,onVisitButtonClick:h,pinImageUrl:a||""}))),s.push("/")}})(),(0,y.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[(0,y.jsxs)(b.xu,{display:"flex",direction:"column",alignItems:"center",paddingX:5,children:[(0,y.jsx)(b.xu,{height:u,children:(0,y.jsx)(J,{pinDraftId:e,pinItemId:t})}),(0,y.jsx)(b.xu,{height:450,marginTop:4,width:344,children:(0,y.jsx)(Q,{pinDraftId:e,pinItemId:t})})]}),(0,y.jsx)(b.xu,{color:"secondary",width:2,marginTop:-5}),!c&&(0,y.jsx)(X,{pinDraftId:e,pinItemId:t})]})}var te=i(653769),ie=i(402171),ne=i(373695),oe=i(746547),se=i(313580);function re({coverImageHeight:e,pinDraftId:t}){const i=(0,f.ZP)();return(0,y.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:"100%",children:[(0,y.jsx)(b.xu,{paddingY:4,children:(0,y.jsx)(b.xv,{lineClamp:1,weight:"bold",align:"center",children:i.bt("Seleziona altre immagini", "Select more images", "pinBuilder.pinDraftBodyExternalView.multiselect.subheader.text", undefined, true)})}),(0,y.jsx)(b.xu,{height:$.sD-(null!=e?e:0)-48,children:(0,y.jsx)(se.Z,{pinDraftId:t})})]})}var ae=i(665866),le=i(54574),de=i(780280),ce=i(945212);const ue={__style:{paddingTop:$.XB}};function he({pinDraftId:e,pinItemId:t}){var i;const s=(0,f.ZP)(),r=(0,M.Z)(),{logContextEvent:a}=(0,m.v)(),l=(0,o.useDispatch)(),d=(0,de.B)(),c=(0,H.useHistory)(),h=(0,E.Z)(),p=h.isAuth?h.id:"",g=h.isAuth?h.country:"",x=h.isAuth&&h.isPartner,[v,P]=(0,n.useState)(!1),[w,I]=(0,n.useState)(null),[A,C]=(0,n.useState)(""),j=(0,F.Z)(),{checkExperiment:k}=(0,S.F)(),z=(0,o.useSelector)((({pinbuilder:{pinDrafts:t,pinItems:i}})=>{const{pinItemIds:n}=t[e],{media:o}=i[n[0]];return o?(0,D.Z)(o):$.sD})),O=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].pinId)),B=(0,V.S6)()(null!=O?O:""),N=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>O&&"create"===t[e].mode?B:null)),Z=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].websiteDefaultImageUrl||"")),U=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].websiteLink)),G=(0,le.Z)({url:U}),Y=!!ae.Z.enabled("offsite_pin_creation_multi_select")&&((null===(i=G.data)||void 0===i?void 0:i.items.length)||0)>0;(0,n.useEffect)((()=>{u.Z.increment("offsite_pin_creation.view",1,{type:ae.Z.enabled("offsite_pin_creation_multi_select")?"multi_pin":"single_pin"})}),[]),(0,n.useEffect)((()=>{if(N){const e=setTimeout(window.close,1e4);return()=>{e&&clearTimeout(e)}}}),[N]);const X=t=>{var i;i=t,l((0,q.Nv)(e,i)),ae.Z.enabled("offsite_pin_creation_multi_select")?l((0,q.m_)({pinDraftId:e,userId:p,country:g,isPartner:x,i18n:s,logContextEvent:a,orbacSubjectId:void 0,checkExperiment:k,siteType:j,ideaPinRenamingEnabled:r})):l((0,R.Z)({pinDraftId:e,storyPinPublishStopwatch:void 0,userId:p,orbacSubjectId:void 0,country:g,isPartner:x,i18n:s,logContextEvent:a,ideaPinRenamingEnabled:r})),u.Z.increment("offsite_pin_creation.create_pin",1,{type:ae.Z.enabled("offsite_pin_creation_multi_select")?"multi_pin":"single_pin"})},K=({title:e})=>{C(e),P(!0)},J=()=>{I(null),P(!1)},Q=e=>{l((0,W.DR)(h)),X({boardId:e.id,url:e.url,title:e.name||""}),J()},ee=e=>{I(e)},te=e=>{w&&X({boardId:w.id,title:e.title||"",sectionId:e.id}),J()},se=()=>{const e=`${ce.r}=${ce.O}`,t=`${window.location.href}&${e}`;return encodeURIComponent(t)},he=$.LM,pe=e=>"number"!=typeof e.height||"number"!=typeof e.width?{width:e.width,height:e.height}:e.height>=e.width?{width:227/e.height*e.width,height:227}:{width:he,height:he/e.width*e.height};return(0,y.jsxs)(b.xu,{display:"flex",direction:"row","data-test-id":"pindraft-external-body",marginTop:ae.Z.enabled("offsite_pin_creation_multi_select")?8:0,children:[(0,y.jsx)(b.xu,{paddingX:5,display:"flex",direction:"column",alignItems:ae.Z.enabled("offsite_pin_creation_multi_select")?"end":"center",justifyContent:"center",children:ae.Z.enabled("offsite_pin_creation_multi_select")?(0,y.jsx)(b.xu,{width:$.LM,children:(0,y.jsx)(ne.Z,{url:Z,children:({image:t})=>{var i;return(0,y.jsx)(n.Fragment,{children:t&&t.length>0&&(0,y.jsx)(n.Fragment,{children:(0,y.jsxs)(b.xu,{width:$.LM,children:[(0,y.jsx)(b.xu,{"data-test-id":"media-image-view",width:pe(t[0]).width,height:pe(t[0]).height,marginStart:"auto",marginEnd:"auto",overflow:"hidden",rounding:2,children:(0,y.jsx)(b.Ee,{alt:s.bt("Immagine caricata", "Uploaded image", "pinbuilder.PinDraftBodyExternalView.image", undefined, true),src:null!==(i=t[0].url)&&void 0!==i?i:"",naturalHeight:t[0].height||1,naturalWidth:t[0].width||1,fit:"cover"})}),Y&&(0,y.jsx)(re,{coverImageHeight:pe(t[0]).height,pinDraftId:e})]})})})}},Z)}):(0,y.jsx)(oe.Z,{height:z,pinDraftId:e,pinItemId:t})}),(0,y.jsx)(b.xu,{color:"secondary",width:2,marginTop:-5}),d.isAuthenticated?N?(()=>{var e;const t=N?null===(e=N.board)||void 0===e?void 0:e.name:"";return(0,y.jsxs)(b.kC,{alignItems:"center",direction:"column",height:530,justifyContent:"center",width:"100%",children:[(0,y.jsx)(b.xu,{padding:6,children:(0,y.jsx)(b.xv,{lineClamp:1,weight:"bold",children:(0,_.nk)(s.bt("1 idea salvata su {{ boardName }}! ", "Saved 1 idea to {{ boardName }}! ", "Tell user number of pins that he/she saved in a board", undefined, true),{boardName:t})})}),(0,y.jsx)(b.xu,{padding:2,width:300,children:(0,y.jsx)(b.zx,{fullWidth:!0,color:"red",text:s.bt("Visualizzalo ora", "See it now", "Button label for navigating to the scheduled pins", undefined, true),size:"lg",onClick:()=>O?c.push(`/pin/${O}/`):c.push("/pins/")})}),(0,y.jsx)(b.xu,{padding:2,width:300,children:(0,y.jsx)(b.zx,{fullWidth:!0,color:"gray",text:s.bt("Condividi questo Pin", "Share this pin", "Button label for sharing this pin", undefined, true),size:"lg",onClick:()=>O?c.push(`/pin/${O}/?share=true`):c.push("/pins/")})})]})})():(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(b.xu,{flex:"grow",minHeight:Math.max(z,$.sD),paddingX:5,width:"100%",dangerouslySetInlineStyle:ue,children:(0,y.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,y.jsx)(b.xu,{paddingY:1,children:(0,y.jsx)(b.xv,{lineClamp:1,weight:"bold",children:s.bt("Scegli una bacheca", "Choose a board", "pinbuilder.PinDraftBodyExternalView.renderBoardPicker", undefined, true)})}),(0,y.jsx)(W.uC,{onBoardCreate:K,onItemChosen:X,paneWidth:430,displayShortlistMostRecentBoard:!0,useLegoLayout:!1,setBoardWithSection:ee})]})}),v&&!w&&(0,y.jsx)(T.Z,{onBoardCreate:Q,onClose:J,suggestedBoardName:A}),v&&!!w&&(0,y.jsx)(L.Z,{selectedBoard:w,onClose:J,onSectionCreate:te})]}):(0,y.jsx)(b.xu,{"data-test-id":"unauth-offsite-pin-creation-signup",children:(0,y.jsx)(ie.default,{container:"pinBookmarklet",signupSource:"pinBookmarklet",signupFlow:{type:"login"},nextUrlParam:"undefined"!=typeof window?se():""})})]})}var pe=i(245569),_e=i(323201),ge=i(854156),me=i(519325),fe=i(596284),xe=i(248060),be=i(451105),ye=i(66699),ve=i(841064),Pe=i(294184),we=i.n(Pe),Ie=i(857752);function Ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ee extends n.Component{constructor(...e){super(...e),Ae(this,"state",{focused:!1}),Ae(this,"handleBlur",(e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)})),Ae(this,"handleFocus",(()=>{this.setState({focused:!0});const{onFocus:e}=this.props;e&&e()})),Ae(this,"getColor",(()=>{const{errorMessage:e,warningMessage:t,showOnBlur:i,showWarningOnBlur:n,value:o}=this.props,{focused:s}=this.state;return e?"#e60023":s||n&&t?"#0074e8":o&&!i?"transparent":"rgba(142, 142, 142, 0.5)"})),Ae(this,"handleTextChange",(({text:e,mentions:t})=>{this.props.onChange({value:e,userMentionTags:t})}))}render(){const{bold:e,disabled:t,errorMessage:i,warningMessage:n,height:o,helperMessage:s,id:r,instanceId:a,maxLength:l,placeholder:d,requestContext:c,size:u,showOnBlur:h,showWarningOnBlur:p,value:_="",viewer:g,wrap:m,logContextEvent:f,orbacActingAs:x}=this.props,{focused:v}=this.state,P={__style:{boxShadow:`0 ${v||!!i||p&&!!n?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}},w=(0,Z.nl)(g,x)&&"ad_creation"!==ae.Z.scenario()&&c.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,y.jsxs)(b.xu,{column:12,display:"flex",direction:"column",children:[(0,y.jsx)(b.xu,{column:12,position:"relative",children:(0,y.jsx)("div",{id:r,className:we()("TextArea__"+(w?"experimentalTextArea":"textArea"),"TextArea__dark",{TextArea__bold:e,TextArea__large:"lg"===u,TextArea__medium:"md"===u,TextArea__wrap:m,TextArea__nowrap:!m,TextArea__smHeight:"sm"===o,TextArea__mdHeight:"md"===o}),children:(0,y.jsx)(Ie.Z,{onAddMention:()=>{f({event_type:8905,element:116,aux_data:{tag_type:1}})},onBlur:this.handleBlur,onChange:this.handleTextChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{f({event_type:8908,element:116,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:()=>{f({event_type:8907,element:116,aux_data:{tag_type:1}})},initialMentions:[],initialText:_,instanceId:a,placeholder:d,readOnly:t})})}),(0,y.jsxs)("div",{className:v||h||i||p&&n||!_?"":"TextArea__hidden",children:[!w&&(0,y.jsx)(b.xu,{column:12,dangerouslySetInlineStyle:P}),(0,y.jsx)(b.xu,{column:12,marginTop:w?0:1,minHeight:15,children:(v||h||!!i||p&&!!n)&&(0,y.jsxs)(b.xu,{column:12,display:"flex",justifyContent:"between",children:[!!i&&(0,y.jsx)(b.xu,{flex:"grow","data-test-id":"text-area-error",children:(0,y.jsx)(b.xv,{size:"100",color:"error",children:i})}),(p||v)&&!i&&!!n&&(0,y.jsx)(b.xu,{flex:"grow","data-test-id":"text-area-warning",children:(0,y.jsx)(b.xv,{size:"100",color:"subtle",children:n})}),(h||v)&&!i&&!n&&(0,y.jsx)(b.xu,{flex:"grow","data-test-id":"text-area-helper",children:(0,y.jsx)(b.xv,{size:"100",color:"subtle",children:s})}),v&&null!=l&&(0,y.jsx)(b.xu,{flex:"none",children:(0,y.jsx)(b.xv,{size:"100",color:i?"error":"default",children:l-_.length})})]})})]})]})}}function Ce(e){const{logContextEvent:t}=(0,m.v)();return(0,y.jsx)(Ee,{...e,requestContext:(0,de.B)(),viewer:(0,E.Z)(),logContextEvent:t,orbacActingAs:(0,B.Z)()})}Ae(Ee,"defaultProps",{bold:!1,disabled:!1,size:"md",wrap:!0,value:"",orbacActingAs:{}});var Se=i(827628),je=i(472278);function Te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class De extends n.Component{constructor(...e){super(...e),Te(this,"defaultHelperMessage",this.props.i18n.bt("Di solito, quando cliccano sul tuo Pin, le persone visualizzano i primi 50 caratteri", "People will usually see the first 50 characters when they click on your Pin", "pinbuilder.input.pinDraftDescription.helper", undefined, true)),Te(this,"defaultPlaceholder",this.props.i18n.bt("Indica l'argomento del tuo Pin", "Tell everyone what your Pin is about", "pinbuilder.input.pinDraftDescription.placeholder", undefined, true)),Te(this,"handleChange",(({value:e,userMentionTags:t=[]})=>{const{i18n:i,ideaPinRenamingEnabled:n,logContextEvent:o,setDescriptionData:s,setStoryPinDescription:r,setStoryPinDescriptionError:a,setUserMentionTags:l,type:d}=this.props;t.length<this.props.userMentionTags.length&&o({event_type:8906,element:116,aux_data:{tag_type:1}});let c=null;e.length>$.JO?c=(0,be.ZP)({errorId:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",i18n:i,ideaPinRenamingEnabled:n}).message:t&&t.length>$.iR&&(c=(0,be.ZP)({errorId:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",i18n:i,ideaPinRenamingEnabled:n}).message),"story"===d?(r(e),a(c)):(s({description:e,descriptionError:c}),t&&l({userMentionTags:t}))}))}render(){const{helperMessage:e=this.defaultHelperMessage,description:t,descriptionError:i,disabled:n,editorInstanceId:o,pinDraftId:s,placeholder:r=this.defaultPlaceholder,pinType:a,requestContext:l,validateDescription:d,viewer:c,orbacActingAs:u}=this.props,h=(0,Z.nl)(c,u)&&"ad_creation"!==ae.Z.scenario()&&l.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,p=ae.Z.enabled("pinQuality");return"carousel"!==a?(0,y.jsx)(Ce,{height:h?"md":void 0,disabled:n,id:`pin-draft-description-${s}`,instanceId:o,errorMessage:i,warningMessage:p&&t.length<$.G9?(0,ye.Z)(this.props.i18n.nbt(["Consigliamo almeno {{ length }} carattere", "Consigliamo almeno {{ length }} caratteri"], $.G9, "pinbuilder.input.pinDraftDescription.warning", true),{length:$.G9}):null,helperMessage:e||this.defaultHelperMessage,maxLength:$.JO,onBlur:d,onChange:this.handleChange,placeholder:r||this.defaultPlaceholder,value:t}):(0,y.jsx)(ve.Z,{height:h?"md":void 0,disabled:n,id:`pin-draft-description-${s}`,errorMessage:i,warningMessage:p&&t.length<$.G9?(0,ye.Z)(this.props.i18n.nbt(["Consigliamo almeno {{ length }} carattere", "Consigliamo almeno {{ length }} caratteri"], $.G9, "pinbuilder.input.pinDraftDescription.warning", true),{length:$.G9}):null,helperMessage:e||this.defaultHelperMessage,maxLength:$.JO,onChange:this.handleChange,onBlur:d,placeholder:r||this.defaultPlaceholder,value:t,viewer:c})}}function ke(e){const{logContextEvent:t}=(0,m.v)(),i=(0,f.ZP)(),n=(0,M.Z)(),{pinDraftId:s,pinItemId:r}=e,a=(0,o.useDispatch)(),{pinDrafts:l,pinItems:d,storyPinItems:c}=(0,o.useSelector)((({pinbuilder:e})=>e)),{type:u,mode:h}=l[s],p="story"===u,_=p?c[r]:d[r],{description:g,descriptionError:x}=_;let b=[],v="";p||(b=d[r].userMentionTags,v=d[r].editorInstanceId);return(0,y.jsx)(De,{...e,description:g,descriptionError:x,disabled:"create"!==h,editorInstanceId:v,pinType:u,requestContext:(0,de.B)(),setDescriptionData:e=>a((0,q.to)(s,e)),setStoryPinDescription:e=>a((0,je.kh)(r,e)),setStoryPinDescriptionError:e=>a((0,je.j8)(r,e)),setUserMentionTags:e=>a((0,q.to)(s,e)),userMentionTags:b,validateDescription:()=>a((0,Se.Z)({pinDraftId:s,validationKey:"signal",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,options:{fieldToCheck:"description"}})).catch((()=>{})),viewer:(0,E.Z)(),i18n:i,orbacActingAs:(0,B.Z)(),logContextEvent:t,ideaPinRenamingEnabled:n})}var ze=i(23279),Oe=i.n(ze),Re=i(689070),Le=i(261130),Me=i(502890);function Be(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ne extends n.Component{constructor(...e){super(...e),Be(this,"_debouncedCheckLinkIsTaggable",Oe()((e=>{const{advertiser:t,orbacActingAs:i,viewer:n}=this.props,o=(0,Z.lJ)(n,i);(0,Re.Z)({url:"/v3/visual_links/can_tag/",data:{url:e,is_native:!e,for_advertiser_id:t&&t.owner_user_id,...o?{orbac_subject_id:o}:Object.freeze({})}}).then((e=>{const{setTaggable:t}=this.props,{data:i}=e.resource_response;t(i)}))}),300)),Be(this,"handleChange",(({value:e})=>{const{setLink:t,setLinkError:i}=this.props;t(e),i(null),e&&e.match(Le.Z)&&this._debouncedCheckLinkIsTaggable(e)})),Be(this,"handleFocus",(()=>{this.props.logContextEvent({event_type:101,component:13308,element:11616})}))}render(){const{disabled:e,link:t,linkError:i,media:n,pinDraftId:o,requestContext:s,validateLink:r,viewer:a,orbacActingAs:l}=this.props,d=(0,Z.nl)(a,l)&&"ad_creation"!==ae.Z.scenario()&&s.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,c={disabled:e,id:`pin-draft-link-${o}`,errorMessage:i,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:r,placeholder:d?this.props.i18n.bt("www.sitoweb.com", "www.website.com", "pinbuilder.destinationLink.label", undefined, true):this.props.i18n.bt("Aggiungi un link di destinazione", "Add a destination link", "Placeholder text for link on Pin creation", undefined, true),spellCheck:!1,value:t,wrap:!1},u=ae.Z.enabled("pinQuality");return(0,y.jsx)(ve.Z,{...c,height:d?"sm":void 0,warningMessage:u&&n&&!t?this.props.i18n.bt("Consigliamo un link di destinazione", "We recommend a destination link", "pinbuilder.input.pinDraftLink.warning", undefined, true):null,viewer:a,showOnBlur:!0,hideScrollbars:!0})}}function Fe(e){const{logContextEvent:t}=(0,m.v)(),i=(0,f.ZP)(),n=(0,M.Z)(),{pinDraftId:s,pinItemId:r}=e,a=(0,o.useDispatch)(),l=(0,o.useSelector)((({advertiser:e})=>e)),{pinDrafts:d,pinItems:c}=(0,o.useSelector)((({pinbuilder:e})=>e)),{mode:u}=d[s],{link:h,linkError:p,media:_}=c[r],{anyEnabled:g}=(0,S.F)().checkExperiment("web_m10n_business_access_orbac_www"),x=(0,B.Z)();return(0,y.jsx)(Ne,{...e,advertiser:l,disabled:"create"!==u||!!_&&"webImage"===_.type,link:h,linkError:p,media:_,requestContext:(0,de.B)(),setLink:e=>a((0,q.to)(s,{link:e})),setLinkError:e=>a((0,Me.lZ)(r,e)),setTaggable:e=>a((0,Me.kf)(r,e)),validateLink:()=>a((0,Se.Z)({pinDraftId:s,validationKey:"link",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t})).catch((()=>{})),viewer:(0,E.Z)(),i18n:i,logContextEvent:t,orbacActingAs:g?x:{}})}var Ze=i(912820),Ue=i(480542),Ve=i(957025),He=i(562501);function Ge({taggedObjectIds:e}){const t=(0,f.ZP)();return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(b.xu,{marginBottom:3,children:(0,y.jsx)(b.xv,{color:"default",lineClamp:1,weight:"bold",children:(0,_.nk)(t.nbt(["{{ numProducts }} prodotto", "{{ numProducts }} prodotti"], e.length, "Heading for carousel of products youve tagged with count", true),{numProducts:e.length})})}),(0,y.jsx)(b.xu,{marginStart:-1,marginEnd:-1,children:(0,y.jsx)(Ue.Z,{children:(0,y.jsx)(b.kC,{alignItems:"stretch",justifyContent:"start",children:e.map((e=>(0,y.jsx)(Ze.Z,{taggedObjectId:e},e)))})})})]})}function We(e){const t=(0,He.jk)(),i=(0,Ve.A$)(),n=(0,o.useSelector)((t=>(0,He.M)(t,e))),s=(0,o.useSelector)((o=>n?i(o,{pinTagId:n}):t(o,e)));return(0,y.jsx)(Ge,{...e,taggedObjectIds:s})}var $e=i(84769);function qe({setTitleData:e,setStoryPinTitle:t,setStoryPinTitleError:i,type:n,disabled:o,helperMessage:s,pinDraftId:r,placeholder:a,title:l,titleError:d,validateTitle:c}){const u=(0,f.ZP)(),h=(0,M.Z)(),p=(0,E.Z)(),{checkExperiment:_}=(0,S.F)(),g=(0,B.Z)(),m=(0,Z.nl)(p,g)&&"ad_creation"!==ae.Z.scenario()&&_("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,x=u.bt("I primi 40 caratteri vengono normalmente mostrati nei feed", "Your first 40 characters are what usually show up in feeds", "pinbuilder.input.pinDraftTitle.helper", undefined, true),v=u.bt("Aggiungi un titolo", "Add your title", "pinbuilder.input.pinDraftTitle.placeholder", undefined, true),P=u.bt("Titolo Pin", "Pin title", "pinbuilder.input.title.placeholder", undefined, true),w=ae.Z.enabled("pinQuality");return(0,y.jsx)(b.xu,{children:(0,y.jsx)(ve.Z,{height:m?"sm":void 0,bold:!m||void 0,disabled:o,errorMessage:d,warningMessage:w&&l.length<$.bA?(0,ye.Z)(u.nbt(["Consigliamo almeno {{ length }} carattere", "Consigliamo almeno {{ length }} caratteri"], $.bA, "pinbuilder.input.pinDraftTitle.warning", true),{length:$.bA}):null,helperMessage:s||x,id:`pin-draft-title-${r}`,maxLength:$.Ke,onChange:({value:o})=>{const s=o.replace(/\n/g," "),r=s.length>$.Ke?(0,be.ZP)({errorId:"TITLE_OVER_MAX_CHARACTER_LIMIT",i18n:u,ideaPinRenamingEnabled:h}).message:null;"story"===n?(t(s),i(r)):e({title:s,titleError:r})},onBlur:c,placeholder:a||(m?P:v),size:m?"md":"lg",value:l,viewer:p})})}function Ye(e){const t=(0,f.ZP)(),i=(0,M.Z)(),{logContextEvent:n}=(0,m.v)(),{mode:s,type:r}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{title:a,titleError:l}=(0,o.useSelector)((t=>"story"===r?t.pinbuilder.storyPinItems[e.pinItemId]:t.pinbuilder.pinItems[e.pinItemId])),d="create"!==s,c=(0,o.useDispatch)();return(0,y.jsx)(qe,{...e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n,title:a,titleError:l,disabled:d,setTitleData:t=>c((0,q.to)(e.pinDraftId,t)),setStoryPinTitle:t=>c((0,je.Dt)(e.pinItemId,t)),setStoryPinTitleError:t=>c((0,je.h4)(e.pinItemId,t)),validateTitle:()=>c((0,Se.Z)({pinDraftId:e.pinDraftId,validationKey:"signal",i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n,options:{fieldToCheck:"title"}})).catch((()=>{}))})}var Xe=i(312918);function Ke(){const e=(0,B.Z)(),t=(0,o.useSelector)((({advertiser:e})=>e)),i=(0,E.Z)(),{data:n}=(0,N.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:!!e.id&&e.id||!!t&&t.owner_user_id||i.isAuth&&i.id||""}}),{full_name:s,image_medium_url:r,follower_count:a,verified_identity:l}=n||{},d=s||(t?t.name:i.isAuth&&i.fullName)||"",c=r||(t?"":i.isAuth&&i.imageMediumUrl)||"",u=a||0,h=l&&l.verified;return(0,y.jsx)(b.xu,{"data-test-id":"pin-draft-user",children:(0,y.jsx)(Xe.default,{followerCount:u,fullName:d,imageUrl:c,verified:h})})}var Je=i(898246),Qe=i(424624);function et({pinDraftId:e,pinItemId:t,pinTagId:i,pinTags:n,pinTagIds:o,showCarouselControl:s,showProductCarousel:r,showScheduleControl:a,showVideoTagging:l,unfilteredTaggedObjects:d}){const c=(0,f.ZP)(),u=(0,E.Z)(),h=(0,B.Z)(),{checkExperiment:p}=(0,S.F)(),_=(0,Z.nl)(u,h)&&"ad_creation"!==ae.Z.scenario()&&p("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,g=c.bt("Link di destinazione", "Destination link", "pinbuilder.destination.link.label", undefined, true),m=(0,Qe.Z)({pinTagIds:o,pinTags:n,taggedObjects:d});return(0,y.jsx)(b.Zf,{overflow:"visible",children:(0,y.jsxs)(b.xu,{column:12,height:"100%",display:"flex",direction:"column",overflow:"visible",children:[(0,y.jsxs)(b.xu,{"data-tutorial-id":"pin-builder-title-and-description",height:_?void 0:"100%",width:"100%",children:[(0,y.jsxs)(b.xu,{column:12,marginTop:8,children:[_&&(0,y.jsx)(b.xu,{marginStart:1,marginBottom:1,children:(0,y.jsx)(b.xv,{size:"100",color:"default",children:c.bt("Titolo", "Title", "pinbuilder.title.input.label", undefined, true)})}),(0,y.jsx)(Ye,{pinDraftId:e,pinItemId:t})]}),!_&&(0,y.jsx)(b.xu,{column:12,marginTop:4,children:(0,y.jsx)(Ke,{})}),_&&(0,y.jsx)(b.xu,{marginStart:1,marginBottom:1,marginTop:6,children:(0,y.jsx)(b.xv,{size:"100",color:"default",children:c.bt("Descrizione", "Description", "pinbuilder.descriptoin.input.label", undefined, true)})}),(0,y.jsx)(b.xu,{column:12,marginTop:_?0:6,flex:"grow",display:"flex",children:(0,y.jsx)(ke,{pinDraftId:e,pinItemId:t})}),(0,y.jsx)(fe.Z,{pinDraftId:e})]}),r&&!_&&(0,y.jsx)(b.xu,{column:12,marginTop:6,children:(0,y.jsx)(We,{pinItemId:t})}),r&&_&&(0,y.jsx)(me.Z,{pinDraftId:e,pinItemId:t,pinTagId:i,taggedObjects:m}),l&&(0,y.jsx)(b.xu,{column:12,marginTop:4,children:(0,y.jsx)(Je.ZP,{pinDraftId:e})}),(0,y.jsxs)(b.xu,{"data-test-id":"pin-draft-link","data-tutorial-id":"pin-builder-destination-link",column:12,marginTop:_?"auto":4,children:[_&&(0,y.jsx)(b.xu,{marginStart:1,marginBottom:1,children:(0,y.jsx)(b.xv,{size:"100",color:"default",children:g})}),(0,y.jsx)(Fe,{pinDraftId:e,pinItemId:t})]}),s&&(0,y.jsx)(b.xu,{column:12,marginTop:6,children:(0,y.jsx)(xe.Z,{pinDraftId:e})}),a&&(0,y.jsx)(b.xu,{column:12,marginTop:4,children:(0,y.jsx)($e.Z,{inStlToolingExp:_,pinDraftId:e})})]})})}function tt(e){const t=(0,He.jk)(),i=(0,He.vd)(),n=(0,o.useSelector)((t=>(0,He.Bg)(t,e))),s=(0,o.useSelector)((t=>i(t,e))),r=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].type)),a=ae.Z.enabled("scheduling"),l=(0,o.useSelector)((e=>e.pinbuilder.taggedObjects)),d=(0,o.useSelector)((e=>e.pinbuilder.pinTags)),c="localVideo"===(null==n?void 0:n.type)&&ae.Z.enabled("videoTagging"),u="single"===r&&a&&(!n||0===s.length&&("localImage"===n.type||"localVideo"===n.type)),h=(0,o.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId].selectedPinTagId||s.length>0?s[0]:null)),p=(0,o.useSelector)((i=>t(i,e).length>0));return(0,y.jsx)(et,{...e,pinTagId:h,pinTags:d,pinTagIds:s,showScheduleControl:u,showVideoTagging:c,showCarouselControl:"carousel"===r,showProductCarousel:p,unfilteredTaggedObjects:l})}var it=i(47615);function nt({height:e,pinDraftId:t,pinItemId:i}){return(0,y.jsx)(n.Fragment,{children:(0,y.jsxs)(b.xu,{display:"flex",dangerouslySetInlineStyle:{__style:{paddingBottom:$.uR}},children:[(0,y.jsx)(b.xu,{paddingX:5,children:(0,y.jsx)(oe.Z,{height:e,pinDraftId:t,pinItemId:i})}),(0,y.jsx)(b.xu,{flex:"grow",minHeight:Math.max(e,$.sD),paddingX:5,width:"100%",children:(0,y.jsx)(tt,{pinDraftId:t,pinItemId:i})})]})})}function ot(e){const{pinItemIds:t}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{media:i}=(0,o.useSelector)((e=>e.pinbuilder.pinItems[t[0]])),n=i?(0,D.Z)(i,$.LM,(0,it.Sl)(i)&&(0,it.PG)(i)?0:3):$.sD;return(0,y.jsx)(nt,{...e,height:n})}var st=i(134906);function rt({pinDraftId:e}){const t=(0,f.ZP)(),i=(0,o.useDispatch)(),[s,r]=(0,n.useState)(""),[a,l]=(0,n.useState)(""),d=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e].view)),c=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e].websiteLink)),u=t.bt("Inserisci il link a un sito web", "Enter a website link", "pinbuilder.searchView.placeholdertext", undefined, true);return(0,y.jsxs)(b.xu,{paddingY:2,height:"scrape"===d?$.i2:$.UU,children:[(0,y.jsx)(b.xu,{position:"relative",children:(0,y.jsx)(b.Um,{accessibilityLabel:c?t.bt("Inserisci il link a un sito web", "Enter a website link", "[m10n] pinbuilder.searchView.searchField.accessibilityLabel", undefined, true):"",accessibilityClearButtonLabel:t.bt("Cancella campo di ricerca", "Clear search field", "[m10n] pinbuilder.searchView.clearButton.accessibilityLabel", undefined, true),errorMessage:""!==a?t.bt("Nessuna immagine trovata. Controlla l'URL e riprova.", "No images found. Please check your URL and try again.", "pinbuilder.searchView.errorMessage", undefined, true):"",id:"save-from-site",onChange:({value:e})=>{r(e)},onKeyDown:n=>{var o,r;"Enter"===n.event.key&&(l(""===s||(0,st.CB)(s)?"":(0,be.q0)(t)),o=s,r=a,i((0,q.f9)(e,o,r)),""!==s&&""===a&&i((0,q.c8)(e,"scrape")))},placeholder:c||u,size:"lg",value:s})}),"search"===d&&(0,y.jsx)(b.xu,{padding:2,children:(0,y.jsx)(b.xv,{color:"subtle",size:"100",children:t.bt("Esempio: http://www.nomedelsitoweb.com", "Example: http://www.websitename.com", "pinbuilder.PinDraftSearchView.searchFieldExample", undefined, true)})})]})}var at=i(490072);function lt({pinDraftId:e,pinItemId:t,view:i}){switch(i){case"upload":return(0,y.jsx)(ot,{pinDraftId:e,pinItemId:t});case"search":return(0,y.jsx)(rt,{pinDraftId:e});case"scrape":return(0,y.jsx)(_e.Z,{pinDraftId:e});case"board":return(0,y.jsx)(ee,{pinDraftId:e,pinItemId:t});case"tag":case"selectTag":return(0,y.jsx)(ge.Z,{pinDraftId:e,pinItemId:t,view:i});case"collectionsTag":return(0,y.jsx)(te.Z,{pinDraftId:e,pinItemId:t});case"reorder":return(0,y.jsx)(pe.C,{pinDraftId:e});case"external":return(0,y.jsx)(he,{pinDraftId:e,pinItemId:t});default:return null}}function dt(e){const t=(0,at.nL)(),i=(0,o.useSelector)((t=>(0,at.Xe)(t,e))),n=(0,o.useSelector)((i=>t(i,e)));return(0,y.jsx)(lt,{...e,view:i,pinItemId:n})}var ct=i(510476),ut=i(956069),ht=i(327096);function pt({children:e,showTooltip:t}){const i=(0,f.ZP)();return t?(0,y.jsx)(b.u,{inline:!0,text:i.bt("Limite collezione prodotti raggiunto. Per aggiungere un altro articolo, rimuovi uno o pi prodotti.", "Collection product limit reached. To add another item, remove one or more products.", "PinDraftFooter.AddRelatedProductsButton.tooltipText", undefined, true),children:e}):e}function _t(e){var t,i,s;const r=(0,f.ZP)(),{pinDraftId:a}=e,{setCurrentPinDraftId:l}=(0,ht.f)(),d=(0,He.vd)(),c=(0,o.useSelector)((t=>d(t,e)))||[],u=null!==(t=(0,o.useSelector)((e=>e.pinbuilder)))&&void 0!==t?t:{},h=null!==(i=u.pinTags)&&void 0!==i?i:{},p=null!==(s=u.taggedObjects)&&void 0!==s?s:{},_=(0,Qe.n)({pinTagIds:c,pinTags:h,taggedObjects:p}),g=_.length,m=g>6,x=g>0,v=g>=ut.tN;return(0,y.jsx)(n.Fragment,{children:(0,y.jsxs)(b.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",maxWidth:606,width:606,children:[(0,y.jsx)(b.xu,{marginStart:"auto",marginEnd:"auto",marginTop:5,marginBottom:5,"data-test-id":"collections-button",children:(0,y.jsx)(pt,{showTooltip:v,children:(0,y.jsx)(b.zx,{disabled:v,onClick:()=>l(a),text:r.bt("Crea una collezione", "Make a collection", "PinDraftInputView.addCollection", undefined, true)})})}),(0,y.jsxs)(b.xu,{display:"flex",paddingX:6,justifyContent:"center",width:"100%",marginBottom:5,children:[(0,y.jsx)(b.xu,{marginStart:x?"auto":0,children:(0,y.jsx)(b.xv,{size:"100",children:r.bt("Aggiungi fino a 24 prodotti da visualizzare sotto la tua immagine", "Add up to 24 products to be displayed below your image", "pinbuilder.relatedproducts.max.tagProducts", undefined, true)})}),x&&(0,y.jsx)(b.xu,{marginStart:"auto",children:(0,y.jsx)(b.xv,{size:"100",children:`${g}/24`})})]}),x&&(0,y.jsx)(Ue.Z,{showArrowsOnlyOnHover:!1,alwaysShowArrows:m,variant:"wide",children:(0,y.jsx)(b.xu,{display:"flex",direction:"row",marginBottom:5,width:"100%",justifyContent:m?void 0:"center",children:_.map((({pinTagId:e,status:t,taggedObjectId:i},n)=>(0,y.jsx)(b.xu,{children:(0,y.jsx)(ct.Z,{index:n,isRelatedProducts:!0,pinTagId:e,size:"sm",status:t,taggedObjectId:i},i)},i)))})})]})})}var gt=i(323716),mt=i(388619);function ft({pinDraftId:e,websiteLink:t,setWebsiteLink:i}){const{logContextEvent:o}=(0,m.v)(),s=(0,f.ZP)();let r;const[a,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(t),[u,h]=(0,n.useState)("");return(0,y.jsxs)(b.xu,{position:"relative",children:[(0,y.jsx)(b.nv,{id:"scrape-view-website-link",errorMessage:u,placeholder:s.bt("Inserisci sito web", "Enter website", "pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.placeholder.text", undefined, true),ref:e=>{r=e,r&&(r.style.height="44px",r.style.borderRadius="24px",r.style.paddingRight="48px",r.style.background=a?"":"#EFEFEF")},size:"lg",type:"url",value:d,onChange:({value:e})=>{c(e)},onFocus:()=>{l(!0),r&&(r.style.background="")}}),(0,y.jsx)(b.xu,{position:"absolute",top:!0,right:!0,margin:2,children:(0,y.jsx)(b.hU,{onClick:()=>{if(a){const e=d&&!(0,st.CB)(d)?(0,be.q0)(s):"";h(e),d&&!e&&(i(d,e),l(!1),r&&(r.style.background="#EFEFEF"),o({event_type:101,component:13308,element:10969,aux_data:{url:d}}))}else c(""),r&&r.focus()},bgColor:"lightGray",icon:a?"arrow-forward":"cancel",iconColor:"darkGray",accessibilityLabel:s.bt("Invia", "Submit", "pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.submit.text", undefined, true),size:"sm"})})]})}function xt(e){const t=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink)),i=(0,o.useDispatch)();return(0,y.jsx)(ft,{...e,websiteLink:t,setWebsiteLink:(t,n)=>i((0,q.f9)(e.pinDraftId,t,n))})}var bt=i(941646),yt=i(558068);function vt({pinDraftId:e}){const{logContextEvent:t}=(0,m.v)(),i=(0,f.ZP)(),n=(0,M.Z)(),s=(0,de.B)(),r=(0,o.useDispatch)(),a=(0,H.useHistory)(),{previous:l}=(0,yt.Hv)(),d=()=>{const{tab:t}=(0,mt.Z)({url:(0,gt.Z)()});if(t===$.ro){0===l.length?a.push(n?"/pin-creation-tool":"/idea-pin-builder"):a.goBack()}else r((0,q.hb)(e)),r((0,q.f9)(e,"")),r((0,q.c8)(e,"upload"))},c=0===(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e].websiteMedia)).length,u=Boolean(s.isRTL);return ae.Z.enabled("multi_pin")||ae.Z.enabled("multi_pin_pinner")||ae.Z.enabled("offsite_pin_creation_multi_select")?(0,y.jsxs)(b.xu,{paddingX:2,display:"flex",direction:"column",alignItems:"center",children:[(0,y.jsx)(b.xu,{position:"absolute",top:!0,left:!u,right:u,marginTop:8,marginStart:8,"data-test-id":"scrape-view-cancel-button",children:(0,y.jsx)(b.hU,{onClick:d,size:"lg",icon:"directional-arrow-left",accessibilityLabel:i.bt("Annulla", "Cancel", "pinBuilder.pinDraftHeaderScrapeView.cancel.text", undefined, true),iconColor:"gray"})}),(0,y.jsx)(b.X6,{size:"400",children:i.bt("Salva idee dal sito web", "Save ideas from website", "pinBuilder.pinDraftHeaderScrapeView.multiselect.header.text", undefined, true)}),(0,y.jsx)(b.xu,{marginTop:1,children:(0,y.jsx)(b.xv,{size:"200",children:i.bt("Seleziona fino a dieci immagini", "Select up to ten images", "pinBuilder.pinDraftHeaderScrapeView.multiselect.subheader.text", undefined, true)})}),(0,y.jsx)(b.xu,{marginTop:6,paddingX:8,width:"90%",children:(0,y.jsx)(xt,{pinDraftId:e})})]}):(0,y.jsxs)(b.kC,{alignItems:"center",justifyContent:"between",children:[(0,y.jsx)(b.X6,{size:"400",children:i.bt("Carica dal web", "Upload from the web", "pinBuilder.pinDraftHeaderScrapeView.header.text", undefined, true)}),(0,y.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,y.jsx)(b.xu,{paddingX:5,"data-test-id":"scrape-view-cancel-button",children:(0,y.jsx)(b.zx,{onClick:d,text:i.bt("Annulla", "Cancel", "pinBuilder.pinDraftHeaderScrapeView.cancel.text", undefined, true)})}),(0,y.jsx)(bt.Z,{id:"scrape-view-add-button",children:(0,y.jsx)(b.zx,{color:"red",disabled:c,onClick:()=>{t({event_type:101,component:13308,element:10970}),(()=>{const{tab:t}=(0,mt.Z)({url:(0,gt.Z)()});r((0,q.q0)(e,"upload",t===$.ro?"IDEA_PIN":"PIN"))})()},text:i.bt("Aggiungi al Pin", "Add to Pin", "pinBuilder.pinDraftHeaderScrapeView.addToPin.text", undefined, true)})})]})]})}var Pt=i(344948),wt=i(915206),It=i(573545),At=i(940765),Et=i(214494);function Ct(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class St extends n.PureComponent{constructor(...e){super(...e),Ct(this,"handleSaveClick",(()=>{const{logContextEvent:e,orbacActingAs:t,savePinDraft:i,viewerId:n}=this.props;e({event_type:101,component:13308,element:10973});i(t.id&&t.id!==n?t.id:void 0)})),Ct(this,"handleItemChosen",(e=>{const{selectItem:t,isPartner:i,logContextEvent:n}=this.props;n({event_type:101,component:13308,element:10965}),u.Z.increment("pin_builder.board_picker.board_selected",1,{source:(0,It.Z)(i)}),t(e)}))}render(){const{altTextError:e,boardError:t,hasErrors:i,isPartner:n,pinDraftId:o,selectedItem:s}=this.props,r=e=>(0,y.jsx)(wt.Z,{buttonText:n?this.props.i18n.bt("Pubblica", "Publish", "pinbuilder.pindraft.upload.dropdown.button.partner", undefined, true):this.props.i18n.bt("Salva", "Save", "pinbuilder.pindraft.upload.dropdown.button.pinner", undefined, true),accessibilityLabelText:n?this.props.i18n.bt("Pubblica", "Publish", "pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.partner", undefined, true):this.props.i18n.bt("Salva", "Save", "pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.pinner", undefined, true),hasError:!!t,disabled:e,onItemChosen:this.handleItemChosen,onSaveClick:this.handleSaveClick,placeholder:this.props.i18n.bt("Seleziona", "Select", "pinbuilder.pindraft.upload.dropdown.placeholder", undefined, true),selectedItem:s}),a=ae.Z.enabled("pinQuality");return(0,y.jsxs)(b.kC,{alignItems:"center",justifyContent:"between",children:[(0,y.jsx)(b.kC,{alignItems:"center",justifyContent:"start",children:(ae.Z.enabled("multi_pin")||ae.Z.enabled("multi_pin_pinner")||ae.Z.enabled("offsite_pin_creation_multi_select"))&&(0,y.jsx)(At.Z,{pinDraftId:o})}),(0,y.jsx)(b.xu,{"data-tutorial-id":"pin-builder-publish-to-board",alignItems:"center",display:"flex",minHeight:40,children:(0,y.jsxs)(b.xu,{position:"relative",width:236,children:[a&&i||e?(0,y.jsx)(b.u,{text:this.props.i18n.bt("Devi risolvere gli errori evidenziati prima di poter pubblicare il Pin.", "You must fix the highlighted issues before publishing the pin.", "pinbuilder.pindraft.upload.dropdown.tooltip", undefined, true),children:r(!0)}):r(!1),!!t&&(0,y.jsx)(b.xu,{left:!0,marginTop:1,position:"absolute",right:!0,children:(0,y.jsx)(b.xv,{color:"error",size:"100",children:t})})]})})]})}}function jt(e){const{logContextEvent:t}=(0,m.v)(),i=(0,f.ZP)(),s=(0,M.Z)(),{pinDraftId:r,pinItemId:a}=e,l=(0,E.Z)(),d=l.isAuth?l.id:"",c=l.isAuth?l.country:"",u=l.isAuth&&l.isPartner,h=(0,o.useDispatch)(),p=(0,B.Z)(),_=p.user?p.user.username:void 0,{checkExperiment:g}=(0,S.F)(),x=(0,F.Z)(),b=(0,n.useCallback)((e=>h((0,q.Nv)(r,e))),[h,r]),v=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].altTextError)),P=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].boardError)),w=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].selectedItem)),I=null==w?void 0:w.ownerUsername,A=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:t}})=>{const{mediaError:i,scheduledDateError:n,scheduledTimeError:o}=e[r],{titleError:s,descriptionError:l,linkError:d}=t[a];return[i,n,o,s,l,d].some((e=>!!e))}));return(0,n.useEffect)((()=>{_&&I&&_!==I&&Et.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0,username:_}).callGet({showError:!1}).then((e=>{var t,i;const n=null===(t=e.resource_response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.all_boards;var o;n&&n.length>0&&b({boardId:n[0].id,url:n[0].url,title:n[0].name||"",imageCoverUrl:n[0].image_cover_url,ownerUsername:null===(o=n[0].owner)||void 0===o?void 0:o.username})}))}),[b,_,I]),(0,y.jsx)(St,{...e,altTextError:v,boardError:P,hasErrors:A,i18n:i,isPartner:l.isAuth&&l.isPartner,logContextEvent:t,orbacActingAs:p,savePinDraft:e=>h((0,R.Z)({pinDraftId:r,storyPinPublishStopwatch:void 0,userId:d,orbacSubjectId:e,country:c,isPartner:u,i18n:i,logContextEvent:t,contextLogInfo:void 0,checkExperiment:g,siteType:x,ideaPinRenamingEnabled:s})),selectItem:b,selectedItem:w,viewerId:l.isAuth?l.id:""})}function Tt({pinDraftId:e,pinItemId:t,view:i}){switch(i){case"upload":return(0,y.jsx)(b.xu,{marginBottom:5,children:(0,y.jsx)(jt,{pinDraftId:e,pinItemId:t})});case"scrape":return(0,y.jsx)(b.xu,{marginBottom:5,children:(0,y.jsx)(vt,{pinDraftId:e})});case"tag":case"selectTag":case"collectionsTag":return(0,y.jsx)(b.xu,{marginBottom:5,children:(0,y.jsx)(Pt.Z,{pinDraftId:e,pinItemId:t})});default:return null}}function Dt(e){const t=(0,at.nL)(),i=(0,o.useSelector)((t=>(0,at.Xe)(t,e))),n=(0,o.useSelector)((i=>t(i,e)));return(0,y.jsx)(Tt,{...e,view:i,pinItemId:n})}class kt extends n.Component{constructor(...e){var t,i,n;super(...e),n=e=>t=>{const{elementType:i,onClick:n}=e;i&&this.props.logContextEvent({event_type:101,component:13308,element:i}),n&&n(t)},(i="handleActionClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){var e,t;const{primary:i,secondary:n}=this.props,o=null!==(e=i.linkUrl)&&void 0!==e?e:null,s=null!==(t=null==n?void 0:n.linkUrl)&&void 0!==t?t:null;return(0,y.jsxs)(b.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[!!n&&(0,y.jsx)(b.xu,{paddingX:1,children:s?(0,y.jsx)(b.zx,{role:"link",color:"white",text:n.text,onClick:this.handleActionClick(n),href:s,target:"blank"}):(0,y.jsx)(b.zx,{color:"white",text:n.text,onClick:this.handleActionClick(n)})}),(0,y.jsx)(b.xu,{paddingX:1,children:o?(0,y.jsx)(b.zx,{role:"link",text:i.text,onClick:this.handleActionClick(i),href:o,target:"blank"}):(0,y.jsx)(b.zx,{text:i.text,onClick:this.handleActionClick(i)})})]})}}function zt(e){const{logContextEvent:t}=(0,m.v)();return(0,y.jsx)(kt,{...e,logContextEvent:t})}function Ot({onClear:e}){const t=(0,f.ZP)(),i=t.bt("Cancella", "Clear", "Tooltip shown explaining button to clear published Pin", undefined, true);return(0,y.jsx)(b.u,{text:i,children:(0,y.jsx)(b.iP,{fullWidth:!1,onTap:e,rounding:"circle",children:(0,y.jsx)(b.JO,{accessibilityLabel:i,color:"default",icon:"clear",size:20})})})}const Rt={__style:{borderRadius:2}};function Lt({subtitle:e,title:t}){const i=(0,f.ZP)();return(0,y.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,y.jsx)(b.X6,{color:t?"default":"subtle",size:"400",children:t||i.bt("Nessun titolo", "No title", "Fallback title shown if none is provided on Pin create", undefined, true)}),!!e&&(0,y.jsx)(b.xu,{marginTop:1,children:"progress"===e.type?(0,y.jsx)(b.xu,{color:"secondary",dangerouslySetInlineStyle:Rt,height:6,overflow:"hidden",position:"relative",width:316,children:(0,y.jsx)(b.xu,{bottom:!0,left:!0,top:!0,color:"primary",dangerouslySetInlineStyle:Rt,position:"absolute",width:`${e.progress}%`})}):(0,y.jsx)(b.xv,{size:"100",children:e.text})})]})}function Mt({color:e,text:t}){return(0,y.jsx)(b.xv,{color:e,italic:!0,children:t})}function Bt({status:e}){const t=(0,f.ZP)();switch(e){case"default":return(0,y.jsx)(b.xu,{width:20,height:20,color:"tertiary",rounding:"circle"});default:const i={error:{accessibilityLabel:t.bt("Errore", "Error", "Screen reader label for failed Pin create", undefined, true),color:"error",icon:"alert"},warning:{accessibilityLabel:t.bt("Avviso", "Alert", "Screen reader label for Pin create with message", undefined, true),color:"warning",icon:"check-circle"},success:{accessibilityLabel:t.bt("Operazione riuscita", "Success", "Screen reader label for success Pin create", undefined, true),color:"success",icon:"check-circle"}},{accessibilityLabel:n,color:o,icon:s}=i[e];return(0,y.jsx)(b.JO,{accessibilityLabel:n,color:o,icon:s,size:20})}}var Nt=i(82596);function Ft({pinDraftId:e}){return(0,y.jsx)(b.xu,{height:64,width:64,rounding:2,children:(0,y.jsx)(Nt.Z,{pinDraftId:e,type:"square"})})}var Zt=i(923490),Ut=i(298361);function Vt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ht extends n.Component{constructor(e){super(e),Vt(this,"_timeSuccessUpdated",new Date),Vt(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),Vt(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),Vt(this,"getSubtitleText",(()=>{const{videoErrorMsg:e,pin:t,scheduledPin:i}=this.props;if(i)return(0,_.nk)(this.props.i18n.bt("Programmato per {{ elapsedTime }}", "Scheduled {{ elapsedTime }}", "Text shown notifying user how long ago a Pin was schedule", undefined, true),{elapsedTime:this.props.getHumanizedTimeSince(i.created_at,!0)}).join("");if(t){const e=this.props.getHumanizedTimeSince(t.created_at,!0);return 3===t.video_status?(0,_.nk)(this.props.i18n.bt("Caricato il {{ elapsedTime }}", "Uploaded {{ elapsedTime }}", "Text shown notifying user how long ago a video Pin was uploaded", undefined, true),{elapsedTime:e}).join(""):(0,_.nk)(this.props.i18n.bt("Pubblicato il {{ elapsedTime }}", "Published {{ elapsedTime }}", "Text shown notifying user how long ago a Pin was created", undefined, true),{elapsedTime:e}).join("")}return e?(0,_.nk)(this.props.i18n.bt("Ultimo tentativo eseguito: {{ elapsedTime }}", "Attempted {{ elapsedTime }}", "Text shown notifying user how long ago a video Pin upload was attempted", undefined, true),{elapsedTime:this.props.getHumanizedTimeSince(this._timeSuccessUpdated.toString(),!0)}).join(""):void 0})),Vt(this,"getSubtitle",(()=>{const{videoUploadProgress:e}=this.props,{subtitleText:t}=this.state;return null!=e?{progress:e,type:"progress"}:t?{text:t,type:"text"}:void 0})),Vt(this,"getText",(()=>{const{pin:e,requestContext:t,scheduledPin:i,videoUploadProgress:n}=this.props;return null!=n?this.props.i18n.bt("Caricamento in corso", "Uploading", "Text shown notifying user video is still uploading", undefined, true):e&&3===e.video_status?this.props.i18n.bt("In fase di revisione", "In review", "Text shown notifying user video is uploaded but not live", undefined, true):i?(0,ye.Z)(this.props.i18n.bt("Questo Pin sar pubblicato il giorno {{ scheduledDate }}", "This Pin will publish on {{ scheduledDate }}", "Text shown notifying user when Pin is scheduled to create", undefined, true),{scheduledDate:new Date(1e3*i.scheduled_ts).toLocaleDateString(t.locale,{weekday:"long",month:"numeric",day:"numeric"})}):void 0})),Vt(this,"getActions",(()=>{const{pin:e,retryUpload:t,siteType:i,videoErrorMsg:n}=this.props,o={elementType:11334,text:this.props.i18n.bt("Visualizza", "See it", "Button to see created Pin", undefined, true),linkUrl:(0,l.Z)({currentSiteType:i,destinationSiteType:0,inputPath:e?`/pin/${e.id}`:""})},s=e&&e.is_quick_promotable?{elementType:11335,text:this.props.i18n.bt("Promuovi", "Promote", "Button to quick promote created Pin", undefined, true),linkUrl:(0,l.Z)({currentSiteType:i,destinationSiteType:0,inputPath:`/pin/${e.id}/promote`})}:void 0,r=n?{elementType:11333,text:this.props.i18n.bt("Riprovare?", "Try again?", "Button to try video upload again", undefined, true),onClick:t}:null;return{primary:r||s||o,secondary:!r&&s?o:void 0}})),Vt(this,"getStatus",(()=>{const{pin:e,scheduledPin:t,videoErrorMsg:i,videoUploadProgress:n}=this.props;return null!=n?"default":t||e&&3===e.video_status?"warning":i?"error":"success"})),this.state={hovered:!1,subtitleText:this.getSubtitleText()}}componentDidMount(){this.interval=setInterval((()=>this.setState({subtitleText:this.getSubtitleText()})),6e4)}componentDidUpdate(e){e.pin===this.props.pin&&e.videoErrorMsg===this.props.videoErrorMsg||(this._timeSuccessUpdated=new Date,this.setState({subtitleText:this.getSubtitleText()}))}componentWillUnmount(){clearInterval(this.interval)}render(){const{clearPinDraft:e,pinDraftId:t,title:i,videoErrorMsg:n,videoUploadProgress:o}=this.props,{hovered:s}=this.state,r=this.getText(),a=n||r;return(0,y.jsxs)(b.xu,{alignItems:"center","data-test-id":"pin-draft-success",display:"flex",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,paddingX:2,paddingY:5,children:[(0,y.jsx)(b.xu,{flex:"none",paddingX:3,children:(0,y.jsx)(Ft,{pinDraftId:t})}),(0,y.jsx)(b.xu,{flex:"grow",paddingX:3,children:(0,y.jsx)(Lt,{subtitle:this.getSubtitle(),title:i})}),(0,y.jsxs)(b.xu,{alignItems:"center",display:"flex",flex:"none",marginEnd:-3,marginStart:-3,paddingX:2,children:[!!a&&(0,y.jsx)(b.xu,{paddingX:3,children:(0,y.jsx)(Mt,{color:n?"error":"subtle",text:a})}),!r&&(0,y.jsx)(b.xu,{paddingX:3,children:(0,y.jsx)(zt,{...this.getActions()})})]}),(0,y.jsx)(b.xu,{flex:"none",paddingX:3,children:s&&null==o?(0,y.jsx)(Ot,{onClear:e}):(0,y.jsx)(Bt,{status:this.getStatus()})})]})}}function Gt(e){const{pinDraftId:t,pinItemId:i}=e,{logContextEvent:n}=(0,m.v)(),s=(0,f.ZP)(),r=(0,M.Z)(),a=(0,Ut.Z)(),l=(0,o.useDispatch)(),d=(0,E.Z)(),c=d.isAuth?d.id:"",u=d.isAuth?d.country:"",h=(0,F.Z)(),p=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].scheduledPin)),_=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].mediaError)),g=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].status)),x=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:i}})=>i[e[t].pinItemIds[e[t].pinItemIndex]].title)),b=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:i}})=>i[e[t].pinItemIds[e[t].pinItemIndex]].media)),v=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].pinId)),{checkExperiment:P}=(0,S.F)(),w=(0,V.S6)(),I=v?w(v):null,A=b&&"localVideo"===b.type?_:null,C=b&&"localVideo"===b.type&&"uploading"===g?b.uploadProgress||0:null;return(0,y.jsx)(Ht,{...e,requestContext:(0,de.B)(),clearPinDraft:()=>l((0,O.Z)(t)),retryUpload:()=>l((0,Zt.dG)({pinDraftId:t,pinItemId:i,userId:c,country:u,i18n:s,logContextEvent:n,checkExperiment:P,ideaPinRenamingEnabled:r})),getHumanizedTimeSince:a,i18n:s,siteType:h,scheduledPin:p,title:x,pin:I,videoErrorMsg:A,videoUploadProgress:C})}var Wt=i(170168),$t=i(782534);function qt({onDismiss:e,scheduledPin:t}){const i=(0,f.ZP)(),n=(0,E.Z)(),o=(0,de.B)(),s=(0,B.Z)(),r=(0,Z.Ms)(n,s),{image:a,localMedia:l,scheduled_ts:c,title:u}=t,h=new Date(1e3*c),p=a&&a["236x"];return(0,y.jsx)(d.ZP,{accessibilityModalLabel:i.bt("Il pin programmato.", "Your scheduled pin.", "Label for a modal showing the pin the user just scheduled.", undefined, true),onDismiss:e,heading:i.bt("Pin programmato", "Pin Scheduled", "Header of modal for scheduling a pin successfully", undefined, true),size:"md",footer:(0,y.jsx)(b.kC,{alignItems:"stretch",justifyContent:"end",children:(0,y.jsx)(b.xu,{paddingX:1,"data-test-id":"see-scheduled-pin-button",children:(0,y.jsx)(b.zx,{color:"red",href:`${Wt.C0}/${r}/scheduled-pins/`,role:"link",text:i.bt("Vedi i Pin programmati", "See Scheduled Pins", "pinBuilder.seeScheduledPin.buttonTitle", undefined, true)})})}),children:(0,y.jsxs)(b.xu,{padding:8,children:[(0,y.jsx)(b.xv,{children:(0,_.nk)(i.bt("Programmato per essere pubblicato il giorno {{ scheduledDate }} alle ore {{ scheduledTime }}.", "Scheduled to publish on {{ scheduledDate }} at {{ scheduledTime }}.", " - ", undefined, true),{scheduledDate:(0,y.jsx)(b.xv,{inline:!0,weight:"bold",children:(0,y.jsx)($t.Z,{value:h,dateFormatType:$t.k.SHORT_WEEKDAY_DATE,useUTC:!1})},"scheduledPinDate"),scheduledTime:(0,y.jsx)(b.xv,{inline:!0,weight:"bold",children:h.toLocaleTimeString(o.locale,{hour:"2-digit",minute:"2-digit"})},"scheduledPinTime")})}),(0,y.jsx)(b.xu,{paddingX:12,paddingY:4,children:p&&(0,y.jsx)(b.Ee,{alt:u||"",color:"lightGray",naturalHeight:p.height,naturalWidth:p.width,src:l})})]})})}var Yt=i(121093);const Xt=({url:e})=>new RegExp(/http(s?):/).test(e)?e:"http://"+e;function Kt(){const e=(0,f.ZP)();return(0,y.jsx)(b.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:12,width:"100%",children:(0,y.jsx)(b.$j,{accessibilityLabel:e.bt("Caricamento dei risultati di ricerca in corso", "Search results are loading", "StlTaggingSheet.searchLoadingSpinner.accessibilityLabel", undefined, true),show:!0})})}var Jt=i(892819);function Qt({image:e,link:t,onClick:i,productDetails:o,selected:s}){const r=(0,Jt.Z)(),{locale:a}=(0,de.B)(),{height:l,width:d,url:c}=e,{name:u,offers:h}=o||{},{price_value:p,price_currency:_}=(h||[])[0]||{};return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(b.iP,{fullWidth:!1,onTap:()=>i(function({image:e,link:t}){var i,n,o;return{...e,id:null!==(i=e.url)&&void 0!==i?i:"",link:t,sourceURL:null!==(n=e.url)&&void 0!==n?n:"",src:null!==(o=e.url)&&void 0!==o?o:"",type:"webImage"}}({image:e,link:t})),rounding:ut.i9,children:(0,y.jsx)(b.zd,{rounding:ut.i9,wash:!0,children:(0,y.jsx)(b.Ee,{alt:null!=c?c:"",naturalHeight:null!=l?l:1,naturalWidth:null!=d?d:1,src:null!=c?c:"",children:(0,y.jsx)(b.xu,{"data-test-id":"stl-scraped-item",dangerouslySetInlineStyle:{__style:s?{border:"solid red",borderRadius:4*ut.i9}:{}},height:"100%",width:"100%"})})})}),p||u?(0,y.jsxs)(b.xu,{marginTop:2,children:[!!p&&p>0&&(0,y.jsx)(b.xu,{display:"flex",marginBottom:u?1:void 0,children:(0,y.jsx)(b.xv,{size:"200",weight:"bold",children:r(a,p,{currency:_,maximumFractionDigits:0,style:"currency"})})}),u&&(0,y.jsx)(b.xu,{width:"100%",children:(0,y.jsx)(b.xv,{overflow:"breakWord",size:"200",weight:"bold",children:u})})]}):null]})}function ei({images:e,link:t,onItemClick:i,productDetails:n,selectedAssetIds:o}){return(0,y.jsx)(b.xu,{marginTop:4,children:(0,y.jsx)(b.Rk,{columnWidth:ut.Py,renderItem:({data:e})=>(0,y.jsx)(Qt,{image:e,link:t,onClick:i,productDetails:n,selected:o.includes(e.url)}),gutterWidth:ut.op,items:e})})}var ti=i(984268);function ii({onClick:e,pin:t,selected:i}){var n;const o=(0,ti.mt)(t),s=(0,ti.BE)(t),{description:r,images:a}=t,{height:l,width:d,url:c}=(null==a?void 0:a["474x"])||(null==a?void 0:a["236x"])||{};return(0,y.jsxs)(b.xu,{direction:"column",display:"flex","data-test-id":"stl-tagging-pin-rep",children:[(0,y.jsx)(b.iP,{fullWidth:!1,onTap:()=>e(t),rounding:ut.i9,children:(0,y.jsx)(b.zd,{rounding:ut.i9,wash:!0,children:(0,y.jsx)(b.Ee,{alt:null!==(n=null!=s?s:r)&&void 0!==n?n:"",naturalHeight:null!=l?l:1,naturalWidth:null!=d?d:1,src:null!=c?c:"",children:(0,y.jsx)(b.xu,{dangerouslySetInlineStyle:{__style:i?{border:"solid red",borderRadius:4*ut.i9}:{}},height:"100%",width:"100%"})})})}),o||s?(0,y.jsxs)(b.xu,{marginTop:2,children:[o&&(0,y.jsx)(b.xu,{display:"flex",marginBottom:s?1:void 0,children:(0,y.jsx)(b.xv,{size:"200",weight:"bold",children:o})}),s&&(0,y.jsx)(b.xu,{width:"100%",children:(0,y.jsx)(b.xv,{overflow:"breakWord",size:"200",weight:"bold",children:s})})]}):null]})}function ni({onItemClick:e,results:t,selectedAssetIds:i}){return(0,y.jsx)(b.xu,{marginTop:2,children:(0,y.jsx)(b.Rk,{columnWidth:ut.Py,renderItem:({data:t})=>(0,y.jsx)(ii,{onClick:e,pin:t,selected:i.includes(t.id)}),gutterWidth:ut.op,items:t})})}function oi({hasResults:e,query:t,searchFieldType:i}){const{logContextEvent:o}=(0,m.v)(),s=(0,f.ZP)();if((0,n.useEffect)((()=>{e&&o({event_type:60,component:13762,view_type:212,aux_data:{has_search_results:!!e}})}),[o,e]),!t)return(0,y.jsx)(b.xv,{color:"subtle",inline:!0,weight:"bold",size:"400",children:s.bt("Scegli un'immagine per creare un nuovo Pin", "Choose image to create a new Pin", "StlTaggingSearchResults", undefined, true)});let r=e?s.bt("Risultati per {{ searchQuery }}", "Results for {{ searchQuery }}", "StlTaggingSearchResults.query.results", undefined, true):s.bt("Nessun risultato trovato per {{ searchQuery }}", "No results found for {{ searchQuery }}", "StlTaggingSearchResults.query.noResults", undefined, true);return"catalogId"===i&&(r=e?s.bt("Corrispondenza nel catalogo per {{ searchQuery }}", "Catalog match for {{ searchQuery }}", "StlTaggingSearchResults.query.catalogId.results", undefined, true):s.bt("Nessuna corrispondenza nel catalogo per {{ searchQuery }}", "No catalog matches for {{ searchQuery }}", "StlTaggingSearchResults.query.noResults", undefined, true)),(0,y.jsx)(b.xv,{color:"subtle",inline:!0,weight:"bold",size:"400",children:(0,_.nk)(r,{searchQuery:(0,y.jsx)(b.xv,{inline:!0,weight:"bold",size:"400",children:`"${t}"`},t)})})}function si({item:e,onRemoveClick:t}){var i,n,o,s;const r=(0,f.ZP)();let a,l,d,c;if("pin"===e.type){var u,h,p,_;const t=null!==(u=null!==(h=null===(p=e.images)||void 0===p?void 0:p["474x"])&&void 0!==h?h:null===(_=e.images)||void 0===_?void 0:_["236x"])&&void 0!==u?u:{};l=t.height,d=t.width,c=t.url;const i=(0,ti.BE)(e);a=null!=i?i:e.description}else a=e.url,l=e.height,d=e.width,c=e.url;return(0,y.jsxs)(b.xu,{position:"relative",children:[(0,y.jsx)(b.zd,{rounding:2,wash:!0,children:(0,y.jsx)(b.xu,{height:48,id:a,width:48,children:(0,y.jsx)(b.Ee,{alt:null!==(i=a)&&void 0!==i?i:"",naturalHeight:null!==(n=l)&&void 0!==n?n:1,naturalWidth:null!==(o=d)&&void 0!==o?o:1,src:null!==(s=c)&&void 0!==s?s:"",fit:"cover"})})}),(0,y.jsx)(b.xu,{position:"absolute",top:!0,right:!0,marginTop:-2,marginEnd:-2,children:(0,y.jsx)(b.hU,{accessibilityLabel:r.bt("Rimuovi", "Remove", "StlTaggingCarouselRep.removeButton.accessibilityLabel", undefined, true),bgColor:"gray",icon:"cancel",onClick:()=>t(e),size:"xs"})})]})}function ri({onDismissStart:e,onRemove:t,onSubmit:i,selectedResults:n}){const o=(0,f.ZP)(),s=n.length;return(0,y.jsxs)(b.xu,{direction:"column",display:"flex",marginTop:-8,children:[s>0&&(0,y.jsx)(Ue.Z,{children:(0,y.jsx)(b.xu,{display:"flex",paddingY:4,alignItems:"end",children:n.map(((e,i)=>(0,y.jsx)(b.xu,{marginStart:0===i?void 0:2,children:(0,y.jsx)(si,{item:e,onRemoveClick:t})},e.id)))})}),(0,y.jsxs)(b.xu,{display:"flex",justifyContent:"end",marginTop:8,children:[(0,y.jsx)(b.zx,{onClick:e,text:o.bt("Annulla", "Cancel", "StlTaggingSheetFooter.cancel", undefined, true)}),(0,y.jsx)(b.xu,{marginStart:2,"data-test-id":"add-products-button",children:(0,y.jsx)(b.zx,{color:"red",disabled:0===s,onClick:()=>{i(),e()},text:0===s?o.bt("Aggiungi prodotti", "Add products", "StlTaggingSheetFooter.addProducts", undefined, true):(0,_.nk)(o.nbt(["Aggiungi {{ tagQuantity }} prodotto", "Aggiungi {{ tagQuantity }} prodotti"], s, "Button text to add product tags to a Pin", true),{tagQuantity:s}).join("")})})]})]})}var ai=i(869636),li=i(566101),di=i(977558),ci=i(172045);function ui({onClear:e,onLinkClick:t,onSubmit:i,showCatalogLink:o,type:s}){const{logContextEvent:r}=(0,m.v)(),a=(0,f.ZP)(),[l,d]=(0,n.useState)(""),c={titleUrl:{target:"catalogId",text:a.bt("Trova un prodotto per ID catalogo", "Find a product by catalog ID instead", "StlTaggingSearchField.link.titleUrl", undefined, true)},catalogId:{target:"titleUrl",text:a.bt("Trova un prodotto per titolo del Pin o URL", "Find a product by Pin title or URL instead", "StlTaggingSearchField.link.catalogId", undefined, true)}},u={titleUrl:a.bt("Cerca per titolo del prodotto o inserisci l'URL", "Search by product title or enter URL", "StlTaggingSearchField.placeholder.titleUrl", undefined, true),catalogId:a.bt("Inserisci ID catalogo", "Enter catalog ID", "StlTaggingSearchField.placeholder.catalogId", undefined, true)};return(0,y.jsxs)(b.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:"16px"}},direction:"column",display:"flex",children:[(0,y.jsx)("form",{onSubmit:e=>{e.preventDefault(),i(l)},role:"search",children:(0,y.jsx)(b.Um,{accessibilityLabel:u[s],autoComplete:"off",id:"STLTaggingSearchField",onChange:({value:t})=>{d(t),""===t&&e()},onFocus:()=>{r({event_type:101,component:13762,element:227,view_type:212})},placeholder:u[s],size:"lg",value:l})}),o&&(0,y.jsx)(b.xu,{display:"flex",justifyContent:"center",marginTop:2,children:(0,y.jsx)(b.iP,{fullWidth:!1,onTap:()=>t(c[s].target),children:(0,y.jsx)(b.xv,{align:"center",color:"shopping",inline:!0,size:"200",children:(0,y.jsx)("span",{style:{textDecoration:"underline"},children:c[s].text})})})})]})}var hi=i(277348);const pi=new b.Ry(di.fe);const _i=function(e){var t,i;const{logContextEvent:s}=(0,m.v)(),r=(0,f.ZP)(),{setCurrentPinDraftId:a,setStlTaggedCoord:l,setMostRecentTaggedObjectId:d,shopTheLook:c}=(0,ht.f)();(0,ai.Z)(1000335);const{pinItemId:u}=e,[h,p]=(0,n.useState)("titleUrl"),[_,g]=(0,n.useState)([]),[x,v]=(0,n.useState)(null),[P,w]=(0,n.useState)(!1),[I,A]=(0,n.useState)(null),[C,S]=(0,n.useState)(null),[j,T]=(0,n.useState)(),D=(0,B.Z)(),[k,z]=(0,n.useState)(null),O=(0,o.useDispatch)(),R=(0,de.B)(),L=(0,E.Z)(),M=(0,Z.lJ)(L,D)||L.isAuth&&L.id,N=(0,Z._P)(R,L,D),F=_.map((({id:e})=>e)),{stlTaggedCoords:U}=c,V=!Boolean(U),H=(0,He.vd)(),G=null!==(t=(0,o.useSelector)((t=>H(t,e))))&&void 0!==t?t:[],{closeupImageSignature:W,pinTags:$,taggedObjects:q}=null!==(i=(0,o.useSelector)((e=>e.pinbuilder)))&&void 0!==i?i:{},Y=(0,Qe.n)({pinTagIds:G,pinTags:$,taggedObjects:q}),X=ut.tN-Y.length,K=F.length>=X,J=()=>{A(null),v(null),S(null)},Q=()=>{a(null),l(null)};(0,n.useEffect)((()=>{s({event_type:13,component:13762,view_type:212,aux_data:{...W?{image_signature:W}:{}}})}),[]),(0,n.useEffect)((()=>()=>{Q()}),[]);const ee=({query:e,searchType:t})=>{s({event_type:60,component:13762,element:227,view_type:212,aux_data:{search_query:e,search_type:t}})},te=e=>{J();const t=e.trim();if("catalogId"===h)(async e=>{ee({query:e,searchType:"id"}),w(!0),A(e);const t=Et.Z.create("ProductGroupItemIdPinResource",{merchantId:N,filters:{1:[e]},itemId:e,...M!==L.id?{orbacSubjectId:M}:{}}),{resource_response:{data:i}}=await t.callGet(),n=i.reduce(((e,t)=>{if(t){if(t.type="pin",t.rich_metadata){var i;const e=null!==(i=t.rich_metadata.url)&&void 0!==i?i:t.rich_metadata.id;(0,li.Z)({url:e})&&(t.link=e)}return[...e,t]}return e}),[]);v(n),w(!1)})(t);else{(0,li.Z)({url:t})?(e=>{z(null),ee({query:e,searchType:"url"});const t=Xt({url:e});(0,Re.Z)({url:"/v3/products/find/",data:{fields:["productmetadata.name","productmetadata.offers"],url:t,source:V?"collection":"merchant",...M!==L.id?{orbac_subject_id:M}:{}}}).then((({resource_response:e})=>{const{data:i}=e||{};S(t),T(i)})).catch((e=>{z({title:e.message_detail||e.message})}))})(t):(async e=>{if(w(!0),A(e),ee({query:e,searchType:"title"}),M){const t=Et.Z.create("BaseSearchResource",{user:M,query:e,commerce_only:!0}),{resource_response:{data:i}}=await t.callGet(),n=i.results.filter((({type:e})=>"pin"===e));v(n)}w(!1)})(t)}},ie=e=>{if(z(null),F.includes(e.id)){const t=_.filter((({id:t})=>t!==e.id));g(t)}else{if(K)return void z({title:r.bt("Limite di prodotti correlati raggiunto", "Related product limit reached", "StlTaggingSheet.relatedProducts.limitErrorTitle", undefined, true),message:r.bt("Per aggiungere un altro articolo, rimuovi uno o pi prodotti correlati", "To add another item, remove one or more related products", "StlTaggingSheet.relatedProducts.limitErrorMessage", undefined, true)});g((t=>[...t,e]))}},oe=(e,t,i)=>{t&&i&&O((0,hi.uM)(e,t,i))},se=(e,t)=>{const i=null==U?void 0:U.xPercent,n=null==U?void 0:U.yPercent;if("webImage"===t.type){O((0,hi.mz)(e,t.link||t.sourceURL,null)),oe(e,i,n);const o={height:t.height,width:t.width,url:t.src};O((0,hi.Dn)(e,t.id,{media:o,type:t.type,pin:t}))}else if("pin"===t.type){var o,s;const r=t;O((0,hi.mz)(e,null!==(o=r.link)&&void 0!==o?o:"",null)),oe(e,i,n),d(t.id),O((0,hi.Dn)(e,t.id,{media:null===(s=r.images)||void 0===s?void 0:s["474x"],type:t.type,pin:r}))}O((0,Me.C_)(u,e))},re=()=>{const e=(0,ci.Z)();return(e=>{O((0,Me.oe)(u,e))})(e),e},ae=(e,t)=>{const i=re();se(i,e),t()},le=()=>{const e=re();_.forEach((t=>se(e,t)))},ce=(0,n.useMemo)((()=>new b.H3([pi])),[pi]),ue=(0,n.useMemo)((()=>new b.H3([ce])),[ce]),he=(0,n.useRef)(),pe=C&&!!j&&j.images.length>0&&j.images.find((e=>!e.toLowerCase().includes("svg")));return(0,y.jsx)(b.mh,{zIndex:ce,children:(0,y.jsx)(b.To,{accessibilityDismissButtonLabel:r.bt("Annulla l'assegnazione di tag ai prodotti", "Cancel tagging products", "StlTaggingSheet.Sheet.accessibilityDismissButtonLabel", undefined, true),accessibilityLabel:r.bt("Tagga prodotti per questo Pin", "Tag products for this Pin", "StlTaggingSheet.Sheet.accessibilitySheetLabel", undefined, true),closeOnOutsideClick:!1,footer:({onDismissStart:e})=>V?(0,y.jsx)(ri,{onDismissStart:e,onRemove:ie,onSubmit:le,selectedResults:_}):null,heading:V?r.bt("Crea una collezione", "Make a collection", "StlTaggingSheet.sheet.header.relatedProducts", undefined, true):r.bt("Tagga questo prodotto", "Tag this product", "StlTaggingSheet.sheet.header.coordinates", undefined, true),onDismiss:Q,size:"sm",subHeading:(0,y.jsx)(b.xu,{paddingX:8,children:(0,y.jsx)(ui,{onClear:J,onLinkClick:e=>{p(e),J()},onSubmit:e=>{te(e)},showCatalogLink:Boolean(N),type:h},h)}),children:({onDismissStart:e})=>{var t;return(0,y.jsxs)(b.xu,{ref:he,children:[(0,y.jsx)(Yt.Z,{placementId:1000335,eligibleIds:[502964],children:({complete:e})=>(0,y.jsx)(b.Li,{zIndex:ue,anchor:he.current,idealDirection:"down",onDismiss:e,message:r.bt("Le collezioni aiutano le persone a trovare prodotti e a trasformare una semplice idea in qualcosa di concreto. Aggiungi fino a 24 articoli da mostrare sotto la tua immagine", "Collections make it easier for people to find products and bring their inspiration to life. Add up to 24 more items for display under your image", "pinbuilder.shopTheLook.collections", undefined, true),primaryAction:{href:"https://pinterest.com/_/_/help/business/article/shop-the-look-product-tagging",target:"blank",text:r.bt("Ulteriori informazioni", "Learn more", "pinbuilder.shopTheLook.learnMoreButton", undefined, true)}})}),k&&(0,y.jsx)(b.xu,{marginTop:-4,children:(0,y.jsx)(b.UW,{dismissButton:{accessibilityLabel:r.bt("Ignora", "Dismiss", "StlTaggingSheet.Callout.dismissButton.accessibilityLabel", undefined, true),onDismiss:()=>z(null)},iconAccessibilityLabel:r.bt("Errore", "Error", "StlTaggingSheet.Callout.iconAccessibilityLabel", undefined, true),message:null!==(t=k.message)&&void 0!==t?t:"",title:k.title,type:"error"})}),I&&!P||C?(0,y.jsx)(b.xu,{marginTop:k?4:-4,children:(0,y.jsx)(oi,{hasResults:x?x.length>0:void 0,query:I,searchFieldType:h})}):null,I&&(0,y.jsxs)(n.Fragment,{children:[P&&(0,y.jsx)(Kt,{}),(0,y.jsx)(ni,{onItemClick:V?ie:t=>ae(t,e),results:null!=x?x:[],selectedAssetIds:F})]}),C&&!!j&&j.images.length>0&&pe&&(0,y.jsx)(ne.Z,{url:pe,children:({image:t})=>{var i;return(0,y.jsx)(n.Fragment,{children:t&&(0,y.jsx)(ei,{onItemClick:V?ie:t=>ae(t,e),images:t,link:C,productDetails:null==j||null===(i=j.products)||void 0===i?void 0:i[0],selectedAssetIds:F})})}},pe)]})}})})};var gi=i(339363),mi=i(844974);const fi=["succeeded","attempted","uploading"],xi=["succeeded","uploading"];function bi({currentPinItemId:e,media:t,onComplete:i,pin:o,pinDraftId:a,removePinDraft:l,scheduledPin:d,showSuccess:c,type:u,view:h,websiteMedia:p}){const _=(0,E.Z)(),{shopTheLook:{currentPinDraftId:g}}=(0,ht.f)(),{checkExperiment:m}=(0,S.F)(),f=(0,B.Z)(),x=(0,Z.nl)(_,f)&&"ad_creation"!==ae.Z.scenario()&&m("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,v=(0,H.useHistory)(),[P,w]=(0,n.useState)(!1),I=(0,H.useLocation)(),C=(0,F.Z)(),T=(0,A.Z)(),{group:D}=m("web_offsite_pin_creation_multi_select",{dangerouslySkipActivation:!0}),k=D.startsWith("enabled_redirect_to_hf"),O=ae.Z.enabled("suppressSuccessModal")||k,R=(0,G.F9)(),L=()=>{l()},{userAgent:{browserName:M}}=(0,de.B)();(0,n.useEffect)((()=>{(o||d)&&O&&L()}),[o,d,O]),(0,n.useEffect)((()=>{var e;o&&k&&v.push({pathname:"/",state:{from:I.pathname,boardName:o.board.name,imageUrl:(null===(e=o.images["236x"])||void 0===e?void 0:e.url)||""}})}),[o]),(0,n.useEffect)((()=>{const e=!(!document.body||!document.body.hasAttribute("data-pinterest-extension-installed")),t=s.Z.isBrowserExtensionSupported(M),i=!!(0,gi.qn)("seenUpsellFromAddPinDropdown"),n=!!(0,mi.qn)("seenUpsellFromPinbuilder");o&&((e,t,i,n)=>!e&&t&&!i&&!n)(e,t,i,n)&&w(!0)}),[M,o]),(0,n.useEffect)((()=>{if(o&&P){var e,t,i,n,s,r;const a=null!==(e=null===(t=o.board)||void 0===t?void 0:t.name)&&void 0!==e?e:"",l=null!==(i=null===(n=o.board)||void 0===n?void 0:n.url)&&void 0!==i?i:"",d=null!==(s=null===(r=o.images["236x"])||void 0===r?void 0:r.url)&&void 0!==s?s:"";R.showOneToast((({hideToast:e})=>(0,y.jsx)(z.Z,{boardName:a,boardUrl:l,onHide:e,pinImageUrl:d}))),(0,mi.Nh)("seenUpsellFromPinbuilder",!0)}}),[o,P]),(0,n.useEffect)((()=>{i&&c&&o&&i(o)}),[i,o,c]);const N=c&&(ae.Z.enabled("multi_pin")||ae.Z.enabled("multi_pin_pinner")),U=ae.Z.enabled("multi_pin")||ae.Z.enabled("multi_pin_pinner")?$.sG:$.XB;let V=ae.Z.enabled("multi_pin")||ae.Z.enabled("multi_pin_pinner")?$.GX:$.bo;N&&(V=0);const W=a===g,q="carousel"===u&&ae.Z.enabled("carousel");return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(b.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:N||ae.Z.enabled("offsite_pin_creation_multi_select")?void 0:U}},"data-test-id":"pin-builder-draft",display:"flex",direction:"column",paddingX:V,rounding:x?8:4,width:$.of,children:N?(0,y.jsx)(Gt,{pinDraftId:a,pinItemId:e}):(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(Dt,{pinDraftId:a}),(0,y.jsx)(b.xu,{position:x?"relative":"static",children:(0,y.jsx)(dt,{pinDraftId:a})}),x&&t&&!q&&(0,y.jsxs)(b.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,y.jsx)(b.xu,{color:"secondary",height:2,dangerouslySetInlineStyle:{__style:{marginLeft:`-${4*V}px`}},width:$.of+4*V*2}),(0,y.jsx)(_t,{pinDraftId:a,pinItemId:e})]})]})}),(()=>{const e=c&&(ae.Z.enabled("multi_pin")||ae.Z.enabled("multi_pin_pinner")),i="true"===(0,r.Z)().quick_promote_pinrep;if(o&&o.is_quick_promotable&&!e&&i)(()=>{if(o){const e=T("quick_promote_on_www");v.push(`${e}?pinId=${o.id}`)}L()})();else if(o&&!e&&"board"!==h)return(()=>{if(!o||!t||ae.Z.enabled("suppressSuccessModal"))return null;const{section:e,id:i,board:{name:n}}=o,s={...t,url:t.src};return Object.assign(o.images,{"236x":s,"474x":s,"564x":s,orig:s}),(0,y.jsx)(b.xu,{"data-test-id":"pin-draft-create-success-modal",children:(0,y.jsx)(j,{isFromPinBuilder:!0,boardName:n,eligibleForExtensionUpsell:P,imageUrl:t.src,onClose:L,pin:o,pinId:i,sectionName:e?e.title:null,siteType:C,video:"localVideo"===t.type?t:void 0,websiteMedia:p})})})();return null})(),!!d&&!N&&(0,y.jsx)(b.xu,{"data-test-id":"scheduled-pin-create-success-modal",children:(0,y.jsx)(qt,{scheduledPin:d,onDismiss:L})}),x&&W&&(0,y.jsx)(_i,{pinItemId:e})]})}function yi(e){const t=(0,at.nL)(),{mode:i,pinId:n,pinItemIds:s,scheduledPin:r,status:a,type:l,view:d,websiteMedia:c}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),u=(0,o.useSelector)((i=>t(i,e))),h=s[0],p=(0,o.useSelector)((e=>{var t;return null===(t=e.pinbuilder.pinItems[u])||void 0===t?void 0:t.media})),_=(0,o.useSelector)((e=>{var t;return null===(t=e.pinbuilder.pinItems[h])||void 0===t?void 0:t.media})),g="carousel"===l?_:p,m=(0,o.useSelector)((e=>n&&"create"===i?e.pins[n]:null)),f=(0,o.useSelector)((e=>e.pinbuilder.pinDraftIds.length>1&&(xi.includes(a)||!!p&&"localVideo"===p.type&&fi.includes(a)))),x=(0,o.useDispatch)();return(0,y.jsx)(bi,{...e,currentPinItemId:u,media:g,pin:m,scheduledPin:r&&"create"===i?r:null,showSuccess:f,type:l,view:d,websiteMedia:c,removePinDraft:()=>x((0,O.Z)(e.pinDraftId))})}},510476:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(702664),o=i(453451),s=i(883561),r=i(898781),a=i(327096),l=i(883119),d=i(277348),c=i(785893);const u={sm:{imageRepSize:147,imageSize:93},md:{imageRepSize:159,imageSize:99}};function h({index:e,isRelatedProducts:t,pinTagId:i,size:h,taggedObjectId:p}){var _,g,m,f,x;const b=(0,n.useDispatch)(),y=(0,r.ZP)(),{setStlHoveredTaggedObjectId:v}=(0,a.f)(),P=null!==(g=(null!==(_=(0,n.useSelector)((({pinbuilder:e})=>e.taggedObjects)))&&void 0!==_?_:{})[p])&&void 0!==g?g:{},{media:w,pin:I}=P,A=(0,n.useSelector)((({pinbuilder:e})=>e.pinTags)),{x:E,y:C}=A[i],{height:S,width:j,url:T}=null!=w?w:{},{grid_title:D,rich_summary:k}=null!=I?I:{},z=null!==(m=(null!==(f=(null!==(x=(null!=k?k:{}).products)&&void 0!==x?x:[])[0])&&void 0!==f?f:{}).offer_summary)&&void 0!==m?m:{},{price:O,max_price:R}=z,L=e=>{v(e)},M=!(!O&&!R),{imageSize:B}=u[h];return(0,c.jsxs)(l.xu,{"data-test-id":"stl-product-item",direction:"column",display:"flex",marginEnd:!t&&[3,7].includes(e)?0:2,marginTop:!t&&e>=4?4:0,width:B,position:"relative",overflow:"auto",onMouseEnter:()=>L(p),onMouseLeave:()=>L(null),children:[(0,c.jsx)(l.xu,{rounding:5,overflow:"hidden",minHeight:B,maxHeight:B,width:B,minWidth:B,children:(0,c.jsx)(l.zd,{wash:!0,height:B,width:B,children:(0,c.jsx)(l.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:S||1,naturalWidth:j||1,src:T||""})})}),M&&(0,c.jsx)(l.xu,{marginTop:2,children:(0,c.jsx)(o.Z,{productDetails:z,showSalesPrice:!0,type:"text"})}),D&&(0,c.jsx)(l.xu,{marginTop:1,children:(0,c.jsx)(l.xv,{size:"100",children:(0,s.ZP)(D,30)})}),(0,c.jsx)(l.xu,{position:"absolute",top:!0,right:!0,margin:2,children:(0,c.jsx)(l.hU,{accessibilityLabel:y.bt("Rimuovi prodotto taggato", "Remove tagged product", "shopTheLook.remove.taggedPin", undefined, true),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:()=>{E&&C?b((0,d.Cf)(i,"deleted")):(b((0,d.Go)(i,p)),b((0,d.Cf)(i,"edited")))},size:"sm"})})]})}},653769:(e,t,i)=>{i.d(t,{Z:()=>B});var n=i(702664),o=i(616672),s=i(667294),r=i(28956),a=i(519325),l=i(898781),d=i(299295),c=i(883119),u=i(785893);const h={width:d.MN,backgroundColor:"#efefef",borderRadius:8,borderStyle:"none",boxSizing:"border-box",height:d.MN,outline:"none",padding:0};function p(){const e=(0,l.ZP)();return(0,u.jsx)("button",{style:h,children:(0,u.jsx)(c.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,u.jsx)(c.JO,{accessibilityLabel:e.bt("Aggiungi Tag al prodotto", "Add product tag", "Accessibility label for the product tag icon", undefined, true),icon:"add-circle",color:"subtle",size:24,inline:!0})})})}var _=i(258821),g=i(562501);function m(e){const{handleClick:t,pinTagId:i,taggedObjectIds:n}=e;return(0,u.jsx)(c.xu,{column:12,"data-test-id":"tagged-items-grid",children:(0,u.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:[(0,u.jsx)(c.xu,{padding:1,marginStart:-1,marginEnd:-1,children:(0,u.jsx)(c.iP,{mouseCursor:"grab",onTap:t,rounding:2,children:(0,u.jsx)(c.xu,{"data-test-id":"add-tags-button",children:(0,u.jsx)(p,{})})})}),!!i&&n.map(((e,t)=>(0,u.jsx)(c.xu,{padding:1,children:(0,u.jsx)(_.Z,{disabled:!1,pinTagId:i,taggedObjectId:e})},e)))]})})}function f(e){const t=(0,g.jk)(),i=(0,n.useSelector)((i=>e.pinTagId&&i.pinbuilder.pinTags&&Object.keys(i.pinbuilder.pinTags).length>0?t(i,e):[]));return(0,u.jsx)(m,{...e,taggedObjectIds:i})}var x=i(665866),b=i(717615),y=i(19121),v=i(424624),P=i(349700),w=i(407043),I=i(773285),A=i(172045),E=i(231947),C=i(277348),S=i(780280),j=i(502890);function T(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class D extends s.Component{constructor(...e){super(...e),T(this,"state",{isAssetPickerOpen:!1,taggedPins:[]}),T(this,"handleClick",(()=>{this.setState({isAssetPickerOpen:!0}),this.props.logContextEvent({event_type:101,component:13308,element:12126})})),T(this,"handleDismiss",(()=>{this.setState({isAssetPickerOpen:!1})})),T(this,"handleAddTaggedPinsToPinDraft",(e=>{const{saveTaggedObject:t,removeTaggedObject:i,createPinTag:n,pinTagId:o}=this.props,{taggedPins:s}=this.state,r=o||(0,A.Z)();r!==o&&n(r),e.forEach(((e,i)=>{i<d.Pn&&(s.includes(e)||"pin"!==e.type&&"webImage"!==e.type||t(e.id,r,e))})),s.filter((t=>!e.includes(t))).forEach((e=>{i(e.id,r)})),this.setState({taggedPins:e}),this.handleDismiss()})),T(this,"primaryButtonText",(e=>this.props.i18n.nbt(["Salva prodotto", "Salva prodotti"], e, "Button text for adding/saving products to a Collections pin", true)))}componentDidMount(){const e=this.props.taggedObjects.map((e=>isNaN(e.id)?{type:"webImage",id:e.id,height:e.media.height,width:e.media.width,src:e.media.url,sourceURL:e.link}:{type:"pin",id:e.id,images:{"474x":e.media},description:"",title:"",videos:null,link:e.link}));this.setState({taggedPins:e})}componentDidUpdate(e){if(e.taggedObjectIds!==this.props.taggedObjectIds){const{taggedPins:e}=this.state,t=e.filter((e=>this.props.taggedObjectIds.includes(e.id)));t&&this.setState({taggedPins:t})}}render(){const{pinDraftId:e,pinItemId:t,pinTagId:i,pinTagIds:n,pinTags:o,requestContext:s,unfilteredTaggedObjects:l,useModalWithNoLayer:h,taggedObjectIds:p,inStlToolingExp:_,orbacActingAs:g,viewer:m}=this.props,{isAssetPickerOpen:x,taggedPins:b}=this.state,y=["product_pins","scrape"];(0,E._P)(s,m,g)&&y.push("catalog");const w=(0,v.Z)({pinTagIds:n,pinTags:o,taggedObjects:l}),I=w.length,A=p.length;return(0,u.jsxs)(c.xu,{display:"flex",direction:"column",height:"100%",column:12,children:[(0,u.jsxs)(c.xu,{flex:"none",marginBottom:6,children:[(0,u.jsx)(c.xu,{marginBottom:_?2:1,children:_?(0,u.jsx)(c.X6,{size:"400",children:this.props.i18n.bt("Aggiorna prodotti", "Update products", "pinbuilder.editProducts.header", undefined, true)}):(0,u.jsx)(c.X6,{size:"400",children:this.props.i18n.bt("Aggiungi prodotti", "Add products", "Add products to the collection/STL selected in Pin Builder.", undefined, true)})}),(0,u.jsx)(c.xu,{marginBottom:_?2:1,children:_?(0,u.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,u.jsx)(c.xv,{children:this.props.i18n.bt("Tagga fino a 8 prodotti nella scena", "Tag up to 8 products in the scene", "pinbuilder.editProducts.description", undefined, true)}),(0,u.jsx)(c.xv,{size:"200",weight:"bold",children:(0,P.nk)(this.props.i18n.bt("{{ numXyTaggedProducts }}/8", "{{ numXyTaggedProducts }}/8", "pinbuilder.editProducts.taggedProducts.count", undefined, true),{numXyTaggedProducts:I})})]}):(0,u.jsx)(c.xv,{children:this.props.i18n.bt("Aggiungi prodotti alla tua immagini per creare un Pin da cui gli utenti possono fare acquisti", "Add products to your image to build a Pin people can shop", "Description of adding pins to a collection", undefined, true)})}),!_&&(0,u.jsx)(c.xu,{"data-test-id":"num-product-count",display:"flex",children:(0,u.jsx)(c.xv,{size:"200",weight:"bold",children:(0,P.nk)(this.props.i18n.nbt(["{{ numProducts }} prodotto", "{{ numProducts }} prodotto"], A, "Text displaying the total number of products across all tags on a Pin", true),{numProducts:A})})})]}),(0,u.jsx)(c.kC,{alignItems:"stretch",direction:"column",flex:"grow",overflow:"auto",width:_?445:void 0,children:(0,u.jsxs)(c.xu,{marginBottom:5,children:[_?(0,u.jsx)(a.Z,{pinDraftId:e,pinItemId:t,pinTagId:i,taggedObjects:w}):(0,u.jsx)(f,{pinItemId:t,pinTagId:i,handleClick:this.handleClick}),x&&(0,u.jsx)(r.Z,{useModalWithNoLayer:h,closeOnOutsideClick:!1,onPrimaryAction:this.handleAddTaggedPinsToPinDraft,onSecondaryAction:this.handleDismiss,onDismiss:this.handleDismiss,shownTabs:y,pinItemId:t,primaryButtonText:this.primaryButtonText,secondaryButtonText:this.props.i18n.bt("Annulla", "Cancel", "PinBuilder.Modal.PinDraftInputCollectionTagView.buttonText", undefined, true),isSecondaryButtonDisabled:!1,selectedPins:b,maxAssetsToSelect:d.Pn,scrapeTitle:this.props.i18n.bt("Usa un link", "Use a link", "Prompt for scraping an image from site", undefined, true),scrapeDescription:this.props.i18n.bt("Scegli un prodotto da un link: verr creato un Pin prodotto per l'articolo che verr poi aggiunto alla tua immagine", "Pick one item from a product linkitll create a product Pin for the item, and add it to your image", "Detail about how to pick a product from scraping a URL for a Collections pin", undefined, true),resetScrapeOnSelect:!0})]})})]})}}function k(e){const t=(0,l.ZP)(),{logContextEvent:i}=(0,w.v)(),o=(0,S.B)(),s=(0,y.Z)(),r=(0,b.Z)(),{checkExperiment:a}=(0,I.F)(),d=(0,E.nl)(s,r)&&"ad_creation"!==x.Z.scenario()&&a("web_stl_tooling").anyEnabled,c=(0,g.jk)(),h=(0,g.CQ)(),p=(0,n.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),_=(0,n.useSelector)((e=>e.pinbuilder.pinTags)),m=(0,n.useSelector)((e=>e.pinbuilder.taggedObjects)),f=p.selectedPinTagId||p.pinTagIds.length>0?p.pinTagIds[0]:null,v=(0,n.useSelector)((t=>c(t,e))),P=(0,n.useSelector)((t=>h(t,e))),A=(0,n.useDispatch)();return(0,u.jsx)(D,{...e,inStlToolingExp:d,requestContext:o,i18n:t,logContextEvent:i,orbacActingAs:r,viewer:s,pinTagId:f,pinTagIds:p.pinTagIds,pinTags:_,taggedObjectIds:v,taggedObjects:P,unfilteredTaggedObjects:m,createPinTag:t=>A((0,j.oe)(e.pinItemId,t)),saveTaggedObject:(t,i,n)=>{const o=n.type||"",{inStlToolingExp:s,stlTaggedCoords:r}=e,{x:a,y:l}=r||{};if("webImage"===n.type&&n.sourceURL){A((0,C.mz)(i,n.sourceURL,null)),s&&A((0,C.uM)(i,a||0,l||0));const e={height:n.height,width:n.width,url:n.src};A((0,C.Dn)(i,t,{media:e,type:o,pin:n}))}else{const e=n;A((0,C.mz)(i,e.link,null)),s&&A((0,C.uM)(i,a||0,l||0)),A((0,C.Dn)(i,t,{media:e.images["474x"],type:o,pin:e}))}A((0,j.C_)(e.pinItemId,i))},removeTaggedObject:(e,t)=>A((0,C.Go)(t,e))})}var z=i(746547),O=i(490072),R=i(327096);const L={__style:{paddingBottom:d.uR}};function M({height:e,pinDraftId:t,pinItemId:i,paddingX:n=5,useModalWithNoLayer:o}){const s=(0,l.ZP)(),r=(0,y.Z)(),{shopTheLook:{stlTaggedCoords:a}}=(0,R.f)(),{checkExperiment:h}=(0,I.F)(),p=(0,b.Z)(),_=(0,E.nl)(r,p)&&"ad_creation"!==x.Z.scenario()&&h("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,{anyEnabled:g}=h("aid_exp_error_handling_pin_builder");return(0,u.jsxs)(c.xu,{display:"flex",direction:"row",dangerouslySetInlineStyle:L,children:[(0,u.jsxs)(c.xu,{paddingX:_?0:n,children:[(0,u.jsx)(z.Z,{height:e,pinDraftId:t,pinItemId:i,view:"collectionsTag"}),!_&&(0,u.jsx)(c.xu,{width:g?260:d.LM,children:(0,u.jsx)(c.xv,{align:"center",size:"200",weight:"bold",children:s.bt("Suggerimento: assicurati che i prodotti che aggiungi corrispondano agli articoli nell'immagine. Puoi aggiungerne fino a 24.", "Hint: make sure products you add match items in your image! You can add up to 24.", "Hint explaining the maximum number of products that can be added to a Collections Pin", undefined, true)})})]}),(0,u.jsx)(c.xu,{flex:"grow",height:e,minHeight:d.sD,paddingX:_?0:5,marginStart:_?5:0,width:"100%",children:(0,u.jsx)(k,{useModalWithNoLayer:o,inStlToolingExp:_,pinDraftId:t,pinItemId:i,stlTaggedCoords:a})})]})}function B(e){const t=(0,n.useSelector)((t=>(0,O.OK)(t,e.pinDraftId))),i=(0,n.useSelector)((e=>e.pinbuilder.pinItems[t.pinItemIds[0]].media)),s=e.isAidExpErrorHandlingPinBuilderEnabled?271:d.LM,r=e.isAidExpErrorHandlingPinBuilderEnabled?418:d.sD,a=i?(0,o.Z)(i,s):r;return(0,u.jsx)(M,{...e,height:a})}},746547:(e,t,i)=>{i.d(t,{Z:()=>Qt});var n=i(667294),o=i(702664),s=i(305782),r=i(407043),a=i(898781),l=i(883119),d=i(785893);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u={__style:{padding:6}};class h extends n.Component{constructor(...e){super(...e),c(this,"handleEllipsisClick",((e,t)=>()=>{const{setCarouselItem:i,logContextEvent:n}=this.props;t&&n({event_type:101,component:13308,element:11126}),i(e)})),c(this,"handleBackClick",(()=>{const{pinItemIndex:e,setCarouselItem:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:12170}),t(e-1)})),c(this,"handleForwardClick",(()=>{const{pinItemIndex:e,setCarouselItem:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:12169}),t(e+1)}))}render(){const{pinItemIds:e,pinItemIndex:t,showAdd:i}=this.props,n=e.length-1,o=t>0,s=t<n,r=this.props.i18n.bt("Indietro", "Back", "Button to advance to previous carousel image", undefined, true),a=this.props.i18n.bt("Avanti", "Forward", "Button to advance to next carousel image", undefined, true);return(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,d.jsx)(l.xu,{display:"flex",alignItems:"center",marginStart:-1,marginEnd:-1,children:e.map(((e,o)=>(0,d.jsx)(l.xu,{children:o===n&&i?(0,d.jsx)(l.xu,{"data-test-id":"add-item-to-carousel-button",children:(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n.bt("Aggiungi", "Add", "Button to add image to carousel", undefined, true),bgColor:"transparent",icon:"add",iconColor:o===t?"darkGray":"gray",onClick:this.handleEllipsisClick(o,!0),size:"xs"})}):(0,d.jsx)(l.xu,{"data-test-id":"carousel-control-button",paddingX:1,children:(0,d.jsx)(l.iP,{onTap:this.handleEllipsisClick(o),rounding:"circle",children:(0,d.jsx)(l.xu,{color:o===t?"dark":"tertiary",height:12,rounding:"circle",width:12})})})},e)))}),(0,d.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[o?(0,d.jsx)(l.hU,{accessibilityLabel:r,bgColor:"transparent",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBackClick,size:"xs"}):(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:u,children:(0,d.jsx)(l.JO,{accessibilityLabel:r,color:"subtle",icon:"arrow-back",size:12})}),s?(0,d.jsx)(l.hU,{accessibilityLabel:a,bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",onClick:this.handleForwardClick,size:"xs"}):(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:u,children:(0,d.jsx)(l.JO,{accessibilityLabel:a,color:"subtle",icon:"arrow-forward",size:12})})]})]})}}function p(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),{pinItemIds:n,pinItemIndex:l}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),c=n[n.length-1],u=(0,o.useSelector)((e=>!e.pinbuilder.pinItems[c].media)),p=(0,o.useDispatch)();return(0,d.jsx)(h,{...e,i18n:i,logContextEvent:t,pinItemIds:n,pinItemIndex:l,showAdd:u,setCarouselItem:t=>p((0,s.Cj)(e.pinDraftId,t))})}var _=i(174807),g=i(941646),m=i(172045);function f({pinDraftId:e}){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,o.useDispatch)(),s=i.bt("Crea carosello", "Create carousel", "Button Text for creating Carousel Pin", undefined, true);return(0,d.jsx)(g.Z,{id:"create-carousel-button",children:(0,d.jsx)(l.zx,{accessibilityLabel:s,onClick:()=>{t({event_type:101,component:13308,element:11123}),n((0,_.Z)(e,(0,m.Z)()))},iconEnd:"add",text:s,fullWidth:!0})})}var x=i(795067),b=i(801815),y=i(556663),v=i(448994),P=i(699109),w=i(388628),I=i(20064),A=i(299295),E=i(502890);function C({assets:e,i18n:t,isEmployee:i,pinDraftId:n}){return(o,s)=>{const r=s(),a=n||(0,m.Z)(),l=r.pinbuilder.pinDrafts[a]&&r.pinbuilder.pinDrafts[a].pinItemIds||[],d=l.length,{media:c}=r.pinbuilder.pinItems[l[0]]||{},u=r.pinbuilder.pinItems[l[d-1]],{width:h,height:p}=e.length>0&&"localImage"===e[0].type?e[0]:{},g=l[d-1],f=e.reduce((e=>(e.push((0,m.Z)()),e)),u?[g]:[]),x=(0,w.Z)(c&&c.width||h,c&&c.height||p),b=0===d?d:d-1,y=e.slice(0,A.dS-b).reduce(((e,t)=>({...e,[(0,m.Z)()]:{...I.E,media:"localImage"===t.type?t:null}})),{});(0,P.Z)(Object.keys(y),y,x).then((e=>{const s=e.map(((e,t)=>{const i=f[t]||(0,m.Z)();return o(i===g?(0,E.nh)(i,e):(0,_.Z)(a,i,e)),i}));if(e.length+b<A.dS){const e=(0,m.Z)();o((0,_.Z)(a,e,null,{saveIndex:!0})),s.push(e)}n||o((0,v.Z)({i18n:t,isEmployee:i,pinDraft:{pinItemIds:s},pinDraftId:a,storyPinPublishStopwatch:void 0}))}))}}var S=i(28956),j=i(265696),T=i(955625);function D(e,t=T.IU){return(0,j.Z)().then((i=>{const n=new i(document.createElement("div")),o=e.filter((e=>"localImage"===e.type)).map((e=>e.src));return n.setImages(o).then((()=>({media:n.getCanvasOutput({width:t}),canvasJson:n.toJSON()})))}))}var k=i(798477),z=i(474394);var O=i(537929),R=i(281139),L=i(66699),M=i(977558);const B=(e,t)=>(0,L.Z)(t.nbt(["{{ length }} pixel", "{{ length }} pixel"], 200, "PinBuilder.PinQualityDrawer.pixel", true),{length:e}),N=(e,t,i)=>(0,L.Z)(i.nbt(["{{ min }}-{{ max }} carattere", "{{ min }}-{{ max }} caratteri"], 100, "PinBuilder.PinQualityDrawer.charsLengthRange", true),{min:e,max:t}),F=(e,t)=>(0,L.Z)(t.nbt(["{{ min }}+ carattere", "{{ min }}+ caratteri"], 100, "PinBuilder.PinQualityDrawer.lengthAtLeastChars", true),{min:100});const Z=(0,n.memo)((function({onDismiss:e}){const t=(0,a.ZP)(),i=t.bt("Nessuno", "None", "PinBuilder.PinQualityDrawer.none", undefined, true);return(0,d.jsx)(l.mh,{zIndex:{index:()=>M.fe+1},children:(0,d.jsx)(l.To,{accessibilityLabel:t.bt("Suggerimenti per creare Pin di qualit", "Pin creation quality recommentations", "PinBuilder.PinQualityDrawer.SheetLabel", undefined, true),accessibilityDismissButtonLabel:t.bt("Ignora", "Dismiss", "PinBuilder.PinQualityDrawer.Dismiss", undefined, true),onDismiss:e,size:"lg",heading:t.bt("Aumenta le interazioni con Pin di alta qualit.", "Maximize engagement with high quality pins.", "PinBuilder.PinQualityDrawer.title", undefined, true),subHeading:(0,d.jsx)(l.xu,{marginStart:8,children:(0,d.jsx)(l.xv,{children:t.bt("Segui questi consigli per creare Pin di altissima qualit.", "Follow these recommendations to achieve the highest quality pins.", "PinBuilder.PinQualityDrawer.description", undefined, true)})}),footer:(0,d.jsx)(l.xu,{display:"flex",justifyContent:"end",alignItems:"end",color:"default",children:(0,d.jsx)(l.zx,{text:t.bt("Ok", "Got it", "PinBuilder.PinQualityDrawer.close", undefined, true),color:"red",accessibilityLabel:t.bt("Chiudi", "Close", "PinBuilder.PinQualityDrawer.close", undefined, true),onClick:e})}),children:(0,d.jsxs)(l.xu,{children:[(0,d.jsxs)(l.xu,{marginBottom:8,children:[(0,d.jsx)(l.xu,{marginBottom:3,children:(0,d.jsx)(l.X6,{size:"500",children:t.bt("Qualit foto", "Photo quality", "PinBuilder.PinQualityDrawer.title.photo", undefined, true)})}),(0,d.jsxs)(l.iA,{accessibilityLabel:t.bt("Elenco delle qualit dell'immagine", "List of image qualities", "PinQualityDrawer.image.accessibilityLabel", undefined, true),children:[(0,d.jsx)(l.iA.Header,{children:(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.HeaderCell,{children:(0,d.jsx)(l.xv,{size:"100",weight:"bold",children:t.bt("Attributo del contenuto", "Content Attribute", "PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute", undefined, true)})}),(0,d.jsx)(l.iA.HeaderCell,{children:(0,d.jsx)(l.xv,{size:"100",weight:"bold",children:t.bt("Requisiti minimi", "Minimum Requirement", "PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement", undefined, true)})}),(0,d.jsx)(l.iA.HeaderCell,{children:(0,d.jsx)(l.xv,{size:"100",weight:"bold",children:t.bt("Suggerimento", "Recommendation", "PinBuilder.PinQualityDrawer.table.headerCell.Recommendation", undefined, true)})})]})}),(0,d.jsxs)(l.iA.Body,{children:[(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Risoluzione", "Resolution", "PinBuilder.PinQualityDrawer.title.resolution", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ width }} di larghezza x {{ height }} di altezza", "{{ width }} wide x {{ height }} tall", "PinBuilder.PinQualityDrawer.resolution", undefined, true),{width:B(200,t),height:B(300,t)})})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ width }} di larghezza x {{ height }} di altezza (o maggiore)", "{{ width }} wide x {{ height }} tall (or larger)", "PinBuilder.PinQualityDrawer.resolution.orLarger", undefined, true),{width:B(1e3,t),height:B(1500,t)})})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Proporzioni", "Aspect Ratio", "PinBuilder.PinQualityDrawer.title.ratio", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ widthRatio }} di larghezza: {{ heightRatio }} di altezza (o pi largo, meno alto)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:3,heightRatio:2})})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ widthRatio }} di larghezza: {{ heightRatio }} di altezza (o larghezza minore, altezza maggiore)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:2,heightRatio:3})})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Lunghezza del titolo", "Title Length", "PinBuilder.PinQualityDrawer.title.titleLength", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:i})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:N(A.bA,A.Ke,t)})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Lunghezza della descrizione", "Description Length", "PinBuilder.PinQualityDrawer.title.descriptionLength", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:i})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:F(0,t)})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Link di destinazione", "Destination Link", "PinBuilder.PinQualityDrawer.title.link", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:i})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Ha un link di destinazione", "Have a destination link", "PinBuilder.PinQualityDrawer.link.recommendation", undefined, true)})})]})]})]})]}),(0,d.jsxs)(l.xu,{children:[(0,d.jsx)(l.xu,{marginBottom:3,children:(0,d.jsx)(l.X6,{size:"500",children:t.bt("Qualit video", "Video quality", "PinBuilder.PinQualityDrawer.title", undefined, true)})}),(0,d.jsxs)(l.iA,{accessibilityLabel:t.bt("Elenco delle qualit video", "List of video qualities", "PinQualityDrawer.video.accessibilityLabel", undefined, true),children:[(0,d.jsx)(l.iA.Header,{children:(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.HeaderCell,{children:(0,d.jsx)(l.xv,{size:"100",weight:"bold",children:t.bt("Attributo del contenuto", "Content Attribute", "PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute", undefined, true)})}),(0,d.jsx)(l.iA.HeaderCell,{children:(0,d.jsx)(l.xv,{size:"100",weight:"bold",children:t.bt("Requisiti minimi", "Minimum Requirement", "PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement", undefined, true)})}),(0,d.jsx)(l.iA.HeaderCell,{children:(0,d.jsx)(l.xv,{size:"100",weight:"bold",children:t.bt("Suggerimento", "Recommendation", "PinBuilder.PinQualityDrawer.table.headerCell.Recommendation", undefined, true)})})]})}),(0,d.jsxs)(l.iA.Body,{children:[(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Risoluzione", "Resolution", "PinBuilder.PinQualityDrawer.title.resolution", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ width }} di larghezza x {{ height }} di altezza", "{{ width }} wide x {{ height }} tall", "PinBuilder.PinQualityDrawer.resolution", undefined, true),{width:B(200,t),height:B(300,t)})})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ width }} di larghezza x {{ height }} di altezza (o maggiore)", "{{ width }} wide x {{ height }} tall (or larger)", "PinBuilder.PinQualityDrawer.resolution.orLarger", undefined, true),{width:B(540,t),height:B(960,t)})})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Durata", "Duration", "PinBuilder.PinQualityDrawer.title.duration", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.nbt(["{{ duration }} secondo", "{{ duration }} secondi"], 4, "PinBuilder.PinQualityDrawer.duration", true),{duration:4})})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.nbt(["Almeno {{ duration }} secondo", "Almeno {{ duration }} secondi"], 4, "PinBuilder.PinQualityDrawer.duration.atLeast", true),{duration:4})})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Proporzioni", "Aspect Ratio", "PinBuilder.PinQualityDrawer.title.ratio", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ widthRatio }} di larghezza: {{ heightRatio }} di altezza (o pi largo, meno alto)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:3,heightRatio:2})})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:(0,L.Z)(t.bt("{{ widthRatio }} di larghezza: {{ heightRatio }} di altezza (o larghezza minore, altezza maggiore)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:2,heightRatio:3})})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Lunghezza del titolo", "Title Length", "PinBuilder.PinQualityDrawer.title.titleLength", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:i})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:N(A.bA,A.Ke,t)})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Lunghezza della descrizione", "Description Length", "PinBuilder.PinQualityDrawer.title.descriptionLength", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:i})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:F(0,t)})})]}),(0,d.jsxs)(l.iA.Row,{children:[(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Link di destinazione", "Destination Link", "PinBuilder.PinQualityDrawer.title.link", undefined, true)})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:i})}),(0,d.jsx)(l.iA.Cell,{children:(0,d.jsx)(l.xv,{size:"100",children:t.bt("Ha un link di destinazione", "Have a destination link", "PinBuilder.PinQualityDrawer.link.recommendation", undefined, true)})})]})]})]})]})]})})})}));var U=i(454074),V=i(665866),H=i(237056),G=i(784590),W=i(19121),$=i(77891),q=i(966113),Y=i(151416),X=i(773285),K=i(385740),J=i(349700);function Q({currentIndex:e,numPinItems:t}){const i=(0,a.ZP)();return(0,d.jsx)(l.xu,{position:"absolute",top:!0,right:!0,margin:3,children:(0,d.jsx)(l.xu,{rounding:"pill",paddingY:2,paddingX:3,color:"transparentDarkGray",children:(0,d.jsx)(l.xv,{color:"inverse",size:"200",weight:"bold",children:(0,J.nk)(i.bt("{{ current }}/{{ total }}", "{{ current }}/{{ total }}", "Text denoting the current item number a user is viewing in a carousel", undefined, true),{current:e,total:t})})})})}function ee(e){const{pinItemIds:t,pinItemIndex:i}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),n=i+1,s=(0,o.useSelector)((e=>t.filter((t=>!!e.pinbuilder.pinItems[t].media)).length));return(0,d.jsx)(Q,{currentIndex:n,numPinItems:s})}class te extends n.Component{constructor(...e){var t,i,n;super(...e),n={media:null},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){const{assets:e}=this.props;D(e.reduce(((e,t)=>"localImage"===t.type?[...e,t]:e),[]).slice(0,5)).then((({media:e})=>{this.setState({media:e})}))}render(){const{media:e}=this.state,t=e?A.Uw/(e.width>e.height?e.width:e.height):0;return(0,d.jsxs)(l.xu,{display:"flex",direction:"column",alignItems:"center",padding:2,justifyContent:"center",height:"100%",children:[(0,d.jsx)(l.xu,{marginBottom:6,width:A.Uw,children:(0,d.jsx)(l.xv,{align:"center",children:this.props.i18n.bt("Crea un collage", "Create a collage", "Instructing the user that all the images selected will be combined into 1 image", undefined, true)})}),(0,d.jsx)(l.xu,{height:"100%",children:e&&(0,d.jsx)(l.xu,{"data-test-id":"layout-picker-collage-preview",width:e.width*t,height:e.height*t,rounding:2,overflow:"hidden",children:(0,d.jsx)(l.Ee,{alt:this.props.i18n.bt("Un'immagine collage creata da immagini selezionate", "A collage image combined from selected images", "Preview of how the collage would look.", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src})})})]})}}var ie=i(121151);function ne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const oe=[{component:function({assets:e}){const t=(0,a.ZP)(),i=e.reduce(((e,t)=>"localImage"===t.type?[...e,t]:e),[]).slice(0,5);if(i.length>0){const e=i[0],n=A.Uw/(e.width>e.height?e.width:e.height);return(0,d.jsxs)(l.xu,{display:"flex",direction:"column",alignItems:"center",padding:2,height:"100%",children:[(0,d.jsx)(l.xu,{marginBottom:6,width:A.Uw,children:(0,d.jsx)(l.xv,{align:"center",children:t.bt("Crea un carosello", "Create a carousel", "Instructing the user that all the images selected will be combined into a carousel", undefined, true)})}),(0,d.jsxs)(l.xu,{"data-test-id":"layout-picker-carousel-preview",display:"flex",direction:"column",height:"100%",justifyContent:"center",children:[(0,d.jsx)(l.xu,{width:e.width*n,height:e.height*n,rounding:2,overflow:"hidden",children:(0,d.jsx)(l.Ee,{alt:t.bt("Un'immagine carosello.", "A carousel image.", "Preview of how the carousel would look.", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src,children:(0,d.jsx)(Q,{currentIndex:1,numPinItems:i.length})})}),(0,d.jsx)(l.xu,{display:"flex",alignItems:"center",marginStart:-1,marginEnd:-1,marginTop:2,children:i.map(((e,t)=>(0,d.jsx)(l.xu,{paddingX:1,children:(0,d.jsx)(l.xu,{color:0===t?"dark":"tertiary",height:10,rounding:"circle",width:10})},e.src)))})]})]})}return null},name:"carousel"},{component:function(e){const t=(0,a.ZP)();return(0,d.jsx)(te,{...e,i18n:t})},name:"layout"}];class se extends n.Component{constructor(...e){super(...e),ne(this,"state",{selectedLayout:null,hoveredLayout:null}),ne(this,"handleSelect",(e=>()=>{this.setState({selectedLayout:e})})),ne(this,"handleOnMouseEnter",(e=>()=>{this.setState({hoveredLayout:e})})),ne(this,"handleOnMouseLeave",(()=>()=>{this.setState({hoveredLayout:null})}))}render(){const{assets:e,onDismiss:t,onPrimaryAction:i,primaryButtonText:n}=this.props,{selectedLayout:o,hoveredLayout:s}=this.state,r=n||this.props.i18n.bt("Crea Pin", "Create Pin", "Button to create either a carousel Pin or Pin with multiple images", undefined, true);return(0,d.jsx)(ie.ZP,{accessibilityModalLabel:this.props.i18n.bt("Scegli un Pin", "Pick a Pin", "Label to describe the Pin format picker", undefined, true),heading:(0,d.jsx)(l.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,d.jsx)(l.X6,{size:"500",children:this.props.i18n.bt("Scegli un Pin", "Pick a Pin", "Label to of the Pin format picker.", undefined, true)})}),onDismiss:t,footer:(0,d.jsxs)(l.xu,{display:"flex",justifyContent:"between",alignItems:"center",paddingX:4,children:[(0,d.jsx)(l.xu,{width:"50%",children:(0,d.jsx)(l.xv,{color:"subtle",size:"200",overflow:"normal",children:this.props.i18n.bt("Pss... puoi modificare e riordinare le tue immagini in seguito", "Psst...you can edit and reorder your images later", "Information for the Pin format picker model, choosing between carousel and collage.", undefined, true)})}),(0,d.jsx)(l.xu,{"data-test-id":"layout-picker-action-button",display:"flex",flex:"none",marginStart:-1,marginEnd:-1,marginTop:1,children:(0,d.jsx)(l.zx,{color:"red",disabled:!o,onClick:()=>i(this.state.selectedLayout),text:r})})]}),size:912,children:(0,d.jsx)(l.xu,{display:"flex",justifyContent:"center",paddingX:4,paddingY:8,height:460,children:oe.map(((t,i)=>{const{component:n,name:r}=t;return(0,d.jsx)(l.xu,{height:380,width:350,marginEnd:1===i?3:0,marginStart:1===i?3:0,rounding:2,color:s===r?"secondary":"default",dangerouslySetInlineStyle:{__style:{border:"2px solid",borderColor:o===r?"#e60023":"#efefef"}},onMouseEnter:this.handleOnMouseEnter(r),onMouseLeave:this.handleOnMouseLeave(),children:(0,d.jsx)(l.iP,{fullHeight:!0,onTap:this.handleSelect(r),rounding:2,children:(0,d.jsx)(l.xu,{height:"100%",paddingY:4,children:n&&(0,d.jsx)(n,{assets:e})})})},i)}))})})}}function re(e){const t=(0,a.ZP)();return(0,d.jsx)(se,{...e,i18n:t})}var ae=i(780280),le=i(531245);function de(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ce={__style:{zIndex:A.v9}},ue={__style:{border:"dashed 2px #dadada",borderRadius:6}},he={__style:{border:"dashed 2px #CC0000"}},pe={color:"#6c6c6c"};function _e(e,t,i){i({event_type:101,component:13308,element:12171,view_type:e,view_parameter:t})}class ge extends n.Component{constructor(e){super(e),de(this,"state",{isAssetPickerOpen:!1,isLayoutPickerOpen:!1,assets:[],isDrawerOpen:!1}),de(this,"handleAddMediaToPinDraft",(e=>{const{addMediaToPinDraft:t,pinDraftId:i,type:n}=this.props;t(e,"carousel"===n?i:void 0)})),de(this,"handleOpenLayoutPicker",(e=>{this.setState({isLayoutPickerOpen:!0,assets:e})})),de(this,"handleChange",(e=>{const{processFiles:t,type:i,logContextEvent:n}=this.props,o=Array.from(e.target.files);V.Z.enabled("carousel")&&V.Z.enabled("layouts")&&"carousel"!==i&&o.length>1?this.openLayoutPickerForFiles(o):t(o),n({event_type:101,component:13308,element:10967,view_type:this.props.viewType,view_parameter:this.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:o.map((e=>e.type))})}}),e.target.value=""})),de(this,"handleClick",(()=>{this.props.logContextEvent({event_type:101,component:13308,element:10966,view_type:this.props.viewType,view_parameter:this.props.viewParameter})})),de(this,"handleDismiss",(()=>{const{isAssetPickerOpen:e,isLayoutPickerOpen:t}=this.state;e?(this.setState({isAssetPickerOpen:!1}),this.props.logContextEvent({event_type:123,component:13392,view_type:this.props.viewType,view_parameter:this.props.viewParameter})):t&&this.setState({isLayoutPickerOpen:!1})})),de(this,"handleDrawerDismiss",(()=>{this.setState({isDrawerOpen:!1})})),de(this,"handleDrop",(e=>{const{processFiles:t,logContextEvent:i}=this.props,n=(0,U.Z)(e.dataTransfer);i({event_type:3502,component:13308,element:10966,view_type:this.props.viewType,view_parameter:this.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map((e=>e.type))})}}),V.Z.enabled("carousel")&&n.length>1?this.openLayoutPickerForFiles(n):t(V.Z.enabled("carousel")?n:n.slice(0,1))})),de(this,"handleLayoutSelected",(e=>{if("layout"===e){const{createLayoutPinDraft:e}=this.props;e(this.state.assets),this.setState({isLayoutPickerOpen:!1})}else if("carousel"===e){const{addMediaToPinDraft:e,pinDraftId:t}=this.props;e(this.state.assets,t)}})),de(this,"getPrimaryAction",(()=>{const{createPinDrafts:e,type:t}=this.props;return"carousel"===t?this.handleAddMediaToPinDraft:e})),de(this,"getSecondaryAction",(()=>{const{type:e}=this.props,{isAssetPickerOpen:t}=this.state;if(t&&"single"===e)return this.handleOpenLayoutPicker})),de(this,"getText",(()=>{var e;const{type:t,mediaError:i,userResource:n}=this.props,o=null===(e=n.data)||void 0===e?void 0:e.video_upload_allowed,s="carousel"===t,r=V.Z.enabled("carousel"),a=!s&&o;return i||(s?this.props.i18n.bt("Carica un'altra immagine per creare un carosello", "Upload another image to create a carousel", "pinbuilder.pindraft.media.mediaEmptyView.carouselText", undefined, true):r&&a?this.props.i18n.bt("Trascina e rilascia o fai clic per caricare immagini o video", "Drag and drop or click to upload images or a video", "Label on drag and drop area for uploading a Pin.", undefined, true):r?this.props.i18n.bt("Trascina e rilascia o fai clic per caricare le immagini", "Drag and drop or click to upload your images", "Label on drag and drop area for uploading a Pin.", undefined, true):a?this.props.i18n.bt("Trascina e rilascia o fai clic per caricare un'immagine o un video", "Drag and drop or click to upload your image or video", "Label on drag/drop area for uploading a pin", undefined, true):this.props.i18n.bt("Trascina e rilascia o fai clic per caricare", "Drag and drop or click to upload", "Label on drag/drop area for uploading a pin", undefined, true))})),V.Z.enabled("layouts")&&(0,j.Z)()}openLayoutPickerForFiles(e){const{i18n:t,ideaPinRenamingEnabled:i,processFiles:n,pinDraftId:o,setPinDraftAssetError:s}=this.props;(0,$.Z)({i18n:t,ideaPinRenamingEnabled:i,files:e,options:{allowVideo:!1}}).then((t=>{const i=t.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);i.length>1&&i.length<=5?this.setState({isLayoutPickerOpen:!0,assets:i}):i.length>5?s(o,this.props.i18n.bt("Ops, non abbiamo potuto caricare i tuoi file. Assicurati di selezionare massimo cinque file.", "Uh oh, your files could not be uploaded. Please make sure to select five files or less.", "pinbuilder.pindraft.media.mediaEmptyView.validateFiles.error", undefined, true)):n(e)}))}render(){var e;const{aspectRatio:t,isPartner:i,mediaError:n,type:o,pinDraftId:s,logContextEvent:r,checkExperiment:a,userResource:c}=this.props,{assets:u,isDrawerOpen:h,isAssetPickerOpen:p,isLayoutPickerOpen:_}=this.state,g=null===(e=c.data)||void 0===e?void 0:e.video_upload_allowed,m=V.Z.enabled("carousel"),f="carousel"!==o&&(g||["story","storyFARLandscape","storyFARPortrait"].includes(o)),x=[...le.xl,...f?le.ss:[]].join(","),b=["upload","scrape"],y=a&&a("aid_exp_error_handling_pin_builder").anyEnabled,v=a&&a("aid_exp_pin_builder_a11y_image_recommendation").anyEnabled,P=y?(0,J.nk)(this.props.i18n.bt("Ti suggeriamo di usare file .jpg di alta qualit inferiori a {{max_image_size_mb}} MB", "We recommend using high quality .jpg files less than {{max_image_size_mb}}MB", "Pinbuilder.HelpText.Image", undefined, true),{max_image_size_mb:20}):(0,J.nk)(this.props.i18n.bt("Consiglio: usa file .jpg di alta qualit inferiori a {{max_image_size_mb}} MB", "Recommendation: Use high-quality .jpg files less than {{max_image_size_mb}}MB", "Pinbuilder.HelpText.Image", undefined, true),{max_image_size_mb:20}),w=y?(0,J.nk)(this.props.i18n.bt("Ti suggeriamo di usare file .jpg di alta qualit inferiori a {{max_image_size_mb}} MB o file .mp4 inferiori a {{max_video_size_gb}} GB", "We recommend using high quality .jpg files less than {{max_image_size_mb}}MB or .mp4 files less than {{max_video_size_gb}}GB", "Pinbuilder.HelpText.Media", undefined, true),{max_image_size_mb:20,max_video_size_gb:2}):(0,J.nk)(this.props.i18n.bt("Consiglio: usa file .jpg di alta qualit inferiori a {{max_image_size_mb}} MB o file .mp4 inferiori a {{max_video_size_gb}} GB", "Recommendation: Use high-quality .jpg files less than {{max_image_size_mb}}MB or .mp4 files less than {{max_video_size_gb}}GB", "Pinbuilder.HelpText.Media", undefined, true),{max_image_size_mb:20,max_video_size_gb:2}),I=V.Z.enabled("pinQuality");return(0,d.jsx)(Y.lE,{children:({openHelpTextInNewWindow:e})=>(0,d.jsx)(l.xu,{height:"100%",width:"100%",children:(0,d.jsx)(R.Z,{accept:x,allowMultipleFiles:m,hasError:!!n,id:"media-upload-input-"+s,onChange:this.handleChange,onClick:this.handleClick,onDrop:this.handleDrop,isAriaHidden:!1,accessibilityLabel:this.props.i18n.bt("Caricamento file", "File upload", "[m10n] pinbuilder.mediaEmptyView.fileUpload.accessibilityLabel", undefined, true),experimentsClient:(0,X.F)(),children:()=>(0,d.jsxs)(l.xu,{column:12,"data-test-id":"media-empty-view",height:"100%",overflow:"hidden",padding:3,position:"relative",rounding:3,children:[y?(0,d.jsxs)(l.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:n?he:ue,direction:"column",display:"flex",width:241,height:460,justifyContent:v?"start":"center",rounding:3,margin:1,children:[(0,d.jsx)(l.xu,{padding:2,marginTop:v?4:-12,children:(0,d.jsx)(l.JO,{accessibilityLabel:n?this.props.i18n.bt("Carica errore", "Upload error", "Error alert icon shown when file upload fails", undefined, true):this.props.i18n.bt("Aggiungi un'immagine o un video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),color:n?"error":"subtle",icon:n?"workflow-status-problem":"arrow-circle-up",size:24})}),t<=1&&(0,d.jsx)(l.xu,{column:12,marginTop:4,paddingX:v?10:12,width:270,children:(0,d.jsx)(l.xv,{align:"center",color:"default",overflow:"normal",weight:"bold",size:v?"400":"200",children:this.getText()})})]}):(0,d.jsxs)(l.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:ue,direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,d.jsx)(l.xu,{padding:2,children:(0,d.jsx)(l.JO,{accessibilityLabel:n?this.props.i18n.bt("Carica errore", "Upload error", "Error alert icon shown when file upload fails", undefined, true):this.props.i18n.bt("Aggiungi un'immagine o un video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),color:n?"error":"subtle",icon:n?"alert":"arrow-circle-up",size:32})}),t<=1&&(0,d.jsx)(l.xu,{column:12,marginTop:4,paddingX:12,children:(0,d.jsx)(l.xv,{align:"center",color:n?"error":"default",overflow:"normal",size:v?"400":"300",children:this.getText()})})]}),t<=1.7777777777777777&&(0,d.jsxs)(l.xu,{bottom:!0,left:!0,margin:t<=1?8:5,paddingY:v?7:0,overflow:"hidden",position:"absolute",right:!0,children:[y?(0,d.jsx)(l.xv,{align:"center",overflow:"normal",size:v?"300":"100",children:f?w:P}):(0,d.jsx)(l.xv,{align:"center",color:n?"error":"default",overflow:"normal",size:v?"300":"200",children:(0,d.jsx)("span",{style:n?void 0:pe,children:f?w:P})}),i&&(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:ce,marginTop:v?6:2,marginBottom:v?-3:0,overflow:"hidden",position:"relative","data-test-id":"pin-help-link",children:(0,d.jsx)(l.xv,{align:"center",color:n?"error":"default",overflow:"normal",size:"200",weight:"bold",children:I?(0,d.jsx)(l.rU,{href:q.Mo,target:"blank",onClick:({event:t,dangerouslyDisableOnNavigation:i})=>{i(),_e(this.props.viewType,this.props.viewParameter,r),e||(t.preventDefault(),this.setState({isDrawerOpen:!0}))},children:y?(0,d.jsx)(l.xv,{inline:!0,size:v?"300":"100",underline:!0,children:this.props.i18n.bt("Rivedi le best practice per i Pin", "Review Pin best practices", "PinBuilder.link.showGuidelineDrawer.full", undefined, true)}):(0,d.jsx)(l.xv,{inline:!0,size:v?"300":"200",children:(0,d.jsx)("span",{style:pe,children:(0,J.nk)(this.props.i18n.bt("{{SeeGuidelineLink}} per Pin di alta qualit", "{{SeeGuidelineLink}} for high quality Pins", "PinBuilder.link.showGuidelineDrawer.full", undefined, true),{SeeGuidelineLink:(0,d.jsx)(l.xv,{inline:!0,size:v?"300":"200",weight:"bold",children:(0,d.jsx)("span",{style:pe,children:this.props.i18n.bt("Consulta le linee guida", "See guidelines", "PinBuilder.link.showGuidelineDrawer", undefined, true)})},"seeGuidelineLink")})})})}):(0,d.jsx)(l.rU,{href:q.Mo,target:"blank",onClick:({dangerouslyDisableOnNavigation:e})=>{e(),_e(this.props.viewType,this.props.viewParameter,r)},children:(0,d.jsx)("span",{style:pe,children:f?this.props.i18n.bt("Visualizza specifiche immagine e video", "View image and video specs", "Link text to Pinterest product specs", undefined, true):this.props.i18n.bt("Visualizza specifiche immagine", "View image specs", "Link text to Pinterest product specs", undefined, true)})})})})]}),I&&h&&(0,d.jsx)(Z,{onDismiss:this.handleDrawerDismiss}),p&&(0,d.jsx)(S.Z,{onDismiss:this.handleDismiss,onPrimaryAction:this.getPrimaryAction(),onSecondaryAction:this.getSecondaryAction(),primaryButtonText:"carousel"===o?this.props.i18n.bt("Aggiungi al Pin", "Add to Pin", "Button text for adding media to Pin like adding another image to a carousel Pin", undefined, true):void 0,secondaryButtonText:this.props.i18n.bt("Combina in un Pin", "Combine into 1 Pin", "Button to create either a carousel Pin or Pin with multiple images", undefined, true),shownTabs:b}),_&&(0,d.jsx)(re,{assets:u,onDismiss:this.handleDismiss,onPrimaryAction:this.handleLayoutSelected,primaryButtonText:this.props.i18n.bt("Crea Pin", "Create Pin", "Button text for create a carousel Pin or single Pin with layout image.", undefined, true)})]})})})})}}function me(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,H.Z)(),{pinDraftId:l}=e,c=(0,o.useDispatch)(),u=(0,W.Z)(),{checkExperiment:h}=(0,X.F)(),p=u.isAuth&&u.isEmployee,g=u.isAuth&&u.isPartner,f=u.isAuth?u.id:"",x=u.isAuth?u.country:"",b=(0,G.Z)({name:"UserResource",options:{username:u.isAuth&&u.username,field_set_key:"profile"}}),y=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:t}})=>{const{pinItemIds:i}=e[l],n=i[0],{media:o}=t[n];return o?o.width/o.height:0})),P=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[l].mediaError)),w=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[l].type)),{viewType:I,viewParameter:A}=(0,K.SU)();return(0,d.jsx)(ge,{...e,addMediaToPinDraft:(e,t)=>c(C({assets:e,pinDraftId:t,isEmployee:p,i18n:i})),aspectRatio:y,createPinDrafts:e=>c((0,O.Z)({assets:e,checkExperiment:h,country:x,i18n:i,ideaPinRenamingEnabled:n,isEmployee:p,logContextEvent:t,userId:f})),createLayoutPinDraft:e=>c(function({assets:e,i18n:t,isEmployee:i}){return(n,o)=>{const s=o(),{pinDraftIds:r}=s.pinbuilder;D(e).then((({media:e,canvasJson:o})=>{const s=(0,m.Z)(),r=(0,m.Z)();n((0,_.Z)(s,r,{media:{...e,id:(0,m.Z)(),name:"",type:"localImage",isLayout:!0},canvasJson:o})),n((0,v.Z)({i18n:t,isEmployee:i,pinDraft:{pinItemIds:[r]},pinDraftId:s,storyPinPublishStopwatch:void 0}))})).then((()=>{const e=r.findIndex((e=>!(0,z._isPristine)(s,e)));r.slice(0,e>=0?e:void 0).forEach((e=>n((0,k.Z)(e))))}))}}({assets:e,isEmployee:p,i18n:i})),isPartner:g,mediaError:P,requestContext:(0,ae.B)(),checkExperiment:h,type:w,i18n:i,ideaPinRenamingEnabled:n,setPinDraftAssetError:(e,t)=>c((0,s._B)(e,t)),viewType:I,viewParameter:A,logContextEvent:t,userResource:b})}var fe=i(373695),xe=i(121093),be=i(333312),ye=i(146173),ve=i(829407),Pe=i(717615),we=i(231947),Ie=i(209064),Ae=i(647117),Ee=i(424624),Ce=i(277348),Se=i(562501);function je({addCarouselItem:e,isDeletable:t,isEditable:i,isEditingEnabled:s,isReorderable:c,isTaggable:u,mediaType:h,onClickDelete:p,onClickDeleteInterestTags:_,onClickReorder:g,onClickTag:m,onClickCollectionsTag:f,pinDraftId:x,pinItemId:b,showCarouselCreateButton:y,type:v,pinTagIds:P,pinTags:w,unfilteredTaggedObjects:I,deletePinTagTaggedObject:A,setPinTagStatus:E,setTaggedObjectStatus:C,deleteText:S,editText:j,reorderText:T,tagText:D}){const{logContextEvent:k}=(0,r.v)(),O=(0,a.ZP)(),R=(0,W.Z)(),{checkExperiment:L}=(0,X.F)(),M=(0,Pe.Z)(),B=(0,we.nl)(R,M)&&"ad_creation"!==V.Z.scenario()&&L("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,N=(0,n.useRef)(),F=(0,o.useDispatch)(),[Z,U]=(0,n.useState)(!1),[H,G]=(0,n.useState)(!1),{shouldRenderPinEditorStandalone:$,campaignObjectiveType:q,conversionTagEvent:K}=(0,Y.V3)(),J=i&&V.Z.enabled("editing"),[Q,ee]=(0,n.useState)(!1);(0,ve.Z)((()=>ee(!0))),S=void 0!==S?S:O.bt("Elimina contenuto multimediale", "Delete media", "Button to delete the media from the Pin", undefined, true),j=void 0!==j?j:O.bt("Modifica pin", "Edit Pin", "Button for editing the Pin image", undefined, true),T=void 0!==T?T:O.bt("Riordina immagini", "Reorder images", "Button for reordering the images in a carousel", undefined, true),D=void 0!==D?D:O.bt("Tagga prodotti", "Tag products", "Button for tagging products in a Pin", undefined, true);const te=O.bt("Crea carosello", "Create carousel", "pinbuilder.create.carousel", undefined, true),ie=O.bt("Crea carosello (questa azione rimuove i prodotti taggati)", "Create carousel (this removes tagged products)", "pinbuilder.carousel.warning", undefined, true),ne=(0,n.useCallback)((()=>{U(!1)}),[]),oe=(0,n.useCallback)((()=>{$?F((0,z.setPinEditorPinDraft)(x)):U(!0)}),[]),se=(0,n.useCallback)((()=>{k({event_type:101,component:13308,element:11244}),oe()}),[]),re=(0,n.useCallback)((()=>{switch(h){case"gif":return O.bt("Le GIF non possono essere modificate", "GIFs can't be edited", "Button indicating gif images cannot be edited", undefined, true);case"webImage":return O.bt("Carica immagini per modificarle", "Upload images to make edits", "Button indicating scraped images cannot be edited", undefined, true);case"localVideo":return V.Z.enabled("videoEditing")?O.bt("I video possono essere modificati al termine del caricamento", "Videos can be edited after upload finishes", "Button indicating videos can be edited after uploading finishes", undefined, true):O.bt("I video non possono essere modificati", "Videos can't be edited", "Button indicating videos cannot be edited", undefined, true);default:return O.bt("Impossibile modificare", "Cannot edit", "Button indicating media cant be edited", undefined, true)}}),[]),ae=(0,Ee.Z)({pinTagIds:P,pinTags:w,taggedObjects:I}).concat((0,Ee.n)({pinTagIds:P,pinTags:w,taggedObjects:I})),le=s?j:re(),de={__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",marginLeft:B?-60:0}},ce=ae&&H?ie:te;return(0,d.jsx)(l.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,display:"flex",alignItems:"center",children:(0,d.jsxs)(l.xu,{color:"default",dangerouslySetInlineStyle:de,display:"flex",direction:"column",marginStart:-6,padding:1,rounding:"pill",children:[J&&(0,d.jsxs)(l.xu,{"data-test-id":"edit-button",children:[(0,d.jsx)(l.u,{text:le,idealDirection:B?"left":"down",children:(0,d.jsx)(l.hU,{accessibilityLabel:le,disabled:!s,iconColor:"darkGray",icon:"edit",onClick:se,size:"md"})}),Z&&(0,d.jsx)(ye.default,{onDismiss:ne,pinDraftId:x})]}),u&&V.Z.enabled("tagging")&&!B&&(0,d.jsxs)(l.xu,{"data-test-id":"tag-button",children:[(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.u,{text:D,idealDirection:B?"left":"down",children:(0,d.jsx)(l.hU,{accessibilityLabel:D,iconColor:"darkGray",icon:"tag",onClick:()=>{k({event_type:101,component:13308,element:10908});V.Z.enabled("shop_the_pin")?f():m()},size:"md",ref:N})})}),q===Ie.Ob.WEB_CONVERSION&&"CHECKOUT"===K&&L("adv_growth_product_tagging_guidance").anyEnabled&&(0,d.jsx)(xe.Z,{placementId:1000451,eligibleIds:[505392],children:({complete:e,experience:{display_data:t}})=>Q&&(0,d.jsx)(l.mh,{children:(0,d.jsx)(l.J2,{anchor:N.current,color:"blue",idealDirection:"down",showCaret:!0,onDismiss:()=>{},positionRelativeToAnchor:!1,size:"xs",children:(0,d.jsx)(l.xu,{padding:4,children:(0,d.jsxs)(l.kC,{alignItems:"center",direction:"column",gap:{column:4,row:1},children:[(0,d.jsx)(l.xv,{color:"inverse",align:"center",children:t.message}),(0,d.jsx)(l.zx,{color:"white",onClick:()=>{ee(!1),e()},size:"sm",text:t.primaryActionText})]})})})})}),(0,d.jsx)(be.default,{anchor:N.current,experienceIds:[500912],idealDirection:"down",placementId:1000135})]}),y&&B&&"image"===v&&(0,d.jsx)(l.xu,{"data-test-id":"create-carousel-button",onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),children:(0,d.jsx)(l.xu,{ref:N,children:(0,d.jsx)(l.u,{text:ce,idealDirection:B?"left":"down",children:(0,d.jsx)(l.hU,{accessibilityLabel:ce,dangerouslySetSvgPath:{__path:"M19 8C18.448 8 18 8.448 18 9V16C18 16.552 18.448 17 19 17H23C23.552 17 24 16.552 24 16V9C24 8.448 23.552 8 23 8H19ZM11 8C10.448 8 10 8.448 10 9V16C10 16.552 10.448 17 11 17H15C15.552 17 16 16.552 16 16V9C16 8.448 15.552 8 15 8H11ZM7 7H1C0.448 7 0 7.448 0 8V17C0 17.552 0.448 18 1 18H7C7.552 18 8 17.552 8 17V8C8 7.448 7.552 7 7 7Z"},iconColor:"darkGray",onClick:()=>{k({event_type:101,component:13308,element:11123}),ae.length&&ae.forEach((e=>{((e,t)=>{const i=w[e],{x:n,y:o}=i;"deleted"!==i.status&&(n&&o?E(e,"deleted"):(A(e,t),E(e,"edited")))})(e.pinTagId,e.taggedObjectId),C(e.pinTagId)})),e()},size:"md"})})})}),c&&(0,d.jsx)(l.xu,{"data-test-id":"reorder-button",children:(0,d.jsx)(l.u,{text:T,idealDirection:B?"left":"down",children:(0,d.jsx)(l.hU,{accessibilityLabel:T,iconColor:"darkGray",icon:"reorder-images",onClick:()=>{k({event_type:101,component:13308,element:11124}),g()},size:"md"})})}),t&&(0,d.jsx)(l.xu,{"data-test-id":"trash-button",children:(0,d.jsx)(l.u,{text:S,idealDirection:B?"left":"down",children:(0,d.jsx)(l.hU,{accessibilityLabel:S,iconColor:"darkGray",icon:"trash-can",onClick:()=>{k({event_type:101,component:13308,element:11125}),"localVideo"===h&&V.Z.enabled("videoTagging")&&_(),p()},size:"md"})})})]})})}function Te(e){const t=(0,Se.vd)(),{mode:i,publishOption:n,type:r,isFirstPinCreate:a,view:l}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{media:c}=(0,o.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),u=c?(0,x.Z)(c)||c.type:null,{pinTagIds:h}=(0,o.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),{pinTags:p}=(0,o.useSelector)((e=>e.pinbuilder)),g=(0,o.useSelector)((e=>e.pinbuilder.taggedObjects)),f=(0,o.useSelector)((i=>"single"===r&&!a&&((0,Se.wc)(i,e)||t(i,e).length>0)&&!!c&&("localImage"===c.type||"localVideo"===c.type)&&"publish-immediately"===n)),b="create"===i&&"external"!==l,y=!a,v=((e,t)=>"localImage"===e||"localVideo"===e&&!!t&&!!t.signature&&V.Z.enabled("videoEditing"))(u,c),P="carousel"===r&&V.Z.enabled("carousel"),w=(0,o.useDispatch)();return(0,d.jsx)(je,{...e,isTaggable:f,isDeletable:b,isEditable:y,isEditingEnabled:v,isReorderable:P,mediaType:u,pinTagIds:h,pinTags:p,unfilteredTaggedObjects:g,addCarouselItem:()=>w((0,_.Z)(e.pinDraftId,(0,m.Z)())),onClickDelete:()=>w((0,s.kp)(e.pinDraftId,e.pinItemId)),onClickDeleteInterestTags:()=>w((0,s.c_)(e.pinDraftId)),onClickReorder:()=>w((0,s.c8)(e.pinDraftId,"reorder")),onClickTag:()=>w((0,s.c8)(e.pinDraftId,"tag")),onClickCollectionsTag:()=>w((0,s.c8)(e.pinDraftId,"collectionsTag")),setPinTagStatus:(e,t)=>w((0,Ce.Cf)(e,t)),deletePinTagTaggedObject:(e,t)=>w((0,Ce.Go)(e,t)),setTaggedObjectStatus:e=>w((0,Ae.k)(e,"deleted"))})}const De={overlay:{__style:{backgroundColor:"rgba(239, 245, 252, 0.92)",pointerEvents:"none"}},border:{__style:{border:"dashed 2px #dadada",borderRadius:6}}};function ke({type:e}){const t=(0,a.ZP)();return(0,d.jsx)(l.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,padding:3,dangerouslySetInlineStyle:De.overlay,children:(0,d.jsx)(l.xu,{alignItems:"center",column:12,display:"flex",height:"100%",justifyContent:"center",dangerouslySetInlineStyle:De.border,children:(0,d.jsx)(l.xv,{align:"center",color:"shopping",overflow:"normal",children:"image"===e?t.bt("Sostituisci immagine", "Replace image", "Text that appears over image when user drags to replace", undefined, true):t.bt("Sostituisci video", "Replace video", "Text that appears over video when user drags to replace", undefined, true)})})})}var ze=i(616672),Oe=i(403368),Re=i(43898),Le=i(451105),Me=i(134906),Be=i(957025);function Ne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Fe extends n.Component{constructor(...e){super(...e),Ne(this,"setTextFieldInput",(e=>{this.textfieldInput=e})),Ne(this,"getLinkError",(()=>{const{link:e,linksUsed:t,i18n:i}=this.props;return e?t.includes(e)?i.bt("Non puoi taggare la pagina due volte.", "You can't tag from the same page twice.", "Error message for using the same product link twice on a Pin tag", undefined, true):(0,Me.CB)(e)?null:(0,Le.q0)(i):null})),Ne(this,"handleBlur",(({value:e})=>{const{setLink:t}=this.props;t(e,this.getLinkError())})),Ne(this,"handleChange",(({value:e})=>{const{setLink:t}=this.props;t(e)})),Ne(this,"handleClick",(()=>{const{link:e,mode:t,openSelectTagView:i,setLink:n}=this.props,o=this.getLinkError();n(e,o),o&&this.props.logContextEvent({event_type:7503,component:13308,element:10909,aux_data:{method:t}}),e&&!o&&(i(),this.props.logContextEvent({event_type:3811,component:13308,element:10909,aux_data:{method:t}}))})),Ne(this,"handleSubmit",(e=>{e.preventDefault(),this.handleClick()}))}componentDidMount(){window.setTimeout((()=>{this.textfieldInput&&this.textfieldInput.focus()}),0)}render(){const{link:e,linkError:t}=this.props,i="pin-draft-affiliate-link";return(0,d.jsxs)(l.xu,{paddingX:2,paddingY:3,column:12,children:[(0,d.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleSubmit,children:(0,d.jsxs)(l.xu,{display:"flex",column:12,children:[(0,d.jsx)(l.xu,{flex:"grow",paddingX:1,children:(0,d.jsx)(l.nv,{hasError:!!t,id:i,onBlur:this.handleBlur,onChange:this.handleChange,placeholder:this.props.i18n.bt("Inserisci il link al prodotto o di affiliazione", "Enter product or affiliate link", "Input field for a website link to a product", undefined, true),ref:this.setTextFieldInput,size:"lg",type:"url",value:e})}),(0,d.jsx)(l.xu,{flex:"none",paddingX:1,children:(0,d.jsx)(l.zx,{color:"red",name:"pin-draft-affiliate-link-button",onClick:this.handleClick,text:this.props.i18n.bt("Avanti", "Next", "Button to submit affiliate link to find products", undefined, true)})})]})}),!!t&&(0,d.jsx)(l.xu,{paddingX:1,column:12,children:(0,d.jsx)(Re.Z,{errorMessage:t,htmlFor:i})})]})}}function Ze(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,Be.A$)(),l=(0,o.useSelector)((t=>t.pinbuilder.pinTags[e.pinTagId].link)),c=(0,o.useSelector)((t=>t.pinbuilder.pinTags[e.pinTagId].linkError)),u=(0,o.useSelector)((t=>n(t,e).map((e=>t.pinbuilder.taggedObjects[e].link)))),h=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode)),p=(0,o.useDispatch)();return(0,d.jsx)(Fe,{...e,i18n:i,logContextEvent:t,link:l,linkError:c,linksUsed:u,mode:h,openSelectTagView:()=>p((0,s.c8)(e.pinDraftId,"selectTag")),setLink:(t,i)=>p((0,Ce.mz)(e.pinTagId,t,i))})}var Ue=i(223815);function Ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const He={cursor:"grab",transition:"opacity 0.15s ease"},Ge={...He,cursor:"grabbing",opacity:.5},We={...He,cursor:"pointer"};class $e extends n.Component{constructor(...e){super(...e),Ve(this,"state",{pinTagDotRef:null}),Ve(this,"setPinTagDotRef",(e=>{this.setState({pinTagDotRef:e})})),Ve(this,"handleMouseDown",(()=>{const{editable:e,isAtTaggedObjectLimit:t,startMoving:i,selectPinTag:n,setTagError:o}=this.props;if(n(),e){i();o(t?this.props.i18n.bt("Hai raggiunto il numero massimo di prodotti per un tag.", "You've reached the maximum number of products for a tag.", "Error message when user attempts to add more than 8 products to a tag", undefined, true):null)}})),Ve(this,"handleMouseUp",(e=>{const{editable:t,stopMoving:i}=this.props;e.stopPropagation(),t&&i()}))}render(){const{editable:e,isAtTaggedObjectLimit:t,isGrabbing:i,isSelected:o,isSelectingTag:s,pinDraftId:r,pinTagId:a,pinTagKey:c,x:u,y:h}=this.props,{pinTagDotRef:p}=this.state,_=e?i?Ge:He:We,g=o&&!t&&!i&&!s&&e&&!!p;return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(Oe.Z,{backdropDiameter:40,dotDiameter:A.yI,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.setPinTagDotRef,selected:o,style:_,text:e?c:void 0,x:u,y:h}),g&&(0,d.jsx)(l.mh,{children:(0,d.jsx)(Ue.Z,{children:(0,d.jsx)(l.J2,{anchor:p,idealDirection:"down",onDismiss:()=>{},positionRelativeToAnchor:!1,size:"xl",shouldFocus:!1,children:(0,d.jsx)(Ze,{pinDraftId:r,pinTagId:a})})})})]})}}function qe(e){const t=(0,a.ZP)(),i=(0,Be.A$)(),{pinDrafts:n,pinItems:s,pinTags:r}=(0,o.useSelector)((e=>e.pinbuilder)),l=s[e.pinItemId],{x:c,y:u}=r[e.pinTagId],h=(0,o.useSelector)((t=>i(t,e))),p=(0,o.useDispatch)();return(0,d.jsx)($e,{...e,i18n:t,x:c*A.LM,y:l.media?u*(0,ze.Z)(l.media):-1,isAtTaggedObjectLimit:h.length===A.qY,isSelected:l.selectedPinTagId===e.pinTagId,isSelectingTag:"selectTag"===n[e.pinDraftId].view,selectPinTag:()=>p((0,E.C_)(e.pinItemId,e.pinTagId)),setTagError:t=>p((0,E.OD)(e.pinItemId,t))})}function Ye(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Xe extends n.Component{constructor(...e){super(...e),Ye(this,"state",{isMovingPinTag:!1}),Ye(this,"getAnchorCoordinates",(e=>{const{pageX:t,pageY:i}=e,{height:n,top:o,left:s,width:r}=e.currentTarget.getBoundingClientRect();return{x:(t-s)/r,y:(i-o)/n}})),Ye(this,"isIntersecting",((e,t)=>{const{height:i,unselectedPinTags:n}=this.props;return n.some((n=>((e-n.x)*A.LM)**2+((t-n.y)*i)**2<A.$4))})),Ye(this,"handleMouseMove",(e=>{const{editable:t,movePinTag:i,selectedPinTagId:n}=this.props;if(!t)return;const{isMovingPinTag:o}=this.state;if(o&&n){const{x:t,y:o}=this.getAnchorCoordinates(e);this.isIntersecting(t,o)||i(n,t,o)}})),Ye(this,"handleMouseUp",(e=>{const{closeTagGrid:t,createPinTag:i,deselectPinTag:n,editable:o,mode:s,pinTagIds:r,selectedPinTagId:a,setTagError:l,logContextEvent:d}=this.props;if(a||!o)o&&t(),n();else{const t=r.length;if(t<A.YM){0===t&&d({event_type:7501,component:13308,element:10910,aux_data:{method:s}}),d({event_type:101,component:13308,element:10910,aux_data:{method:s}});const{x:n,y:o}=this.getAnchorCoordinates(e);i(n,o)}l(t>=A.YM?this.props.i18n.bt("Hai raggiunto il numero massimo di tag.", "You've reached the maximum number of tags.", "Error message when user attempts to add more than 8 tags to a Pin", undefined, true):null)}})),Ye(this,"startMovingPinTag",(()=>this.setState({isMovingPinTag:!0}))),Ye(this,"stopMovingPinTag",(()=>this.setState({isMovingPinTag:!1})))}render(){const{editable:e,forwardRef:t,pinDraftId:i,pinItemId:n,pinTagIds:o,selectedPinTagId:s}=this.props,{isMovingPinTag:r}=this.state;return(0,d.jsx)(l.xu,{bottom:!(!e&&!s)||void 0,left:!0,onMouseLeave:this.stopMovingPinTag,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,overflow:e?"hidden":void 0,position:"absolute",ref:t,right:!0,top:!0,children:o.map(((t,o)=>(0,d.jsx)(qe,{editable:e,isGrabbing:r&&t===s,pinDraftId:i,pinItemId:n,pinTagId:t,pinTagKey:o+1,startMoving:this.startMovingPinTag,stopMoving:this.stopMovingPinTag},t)))})}}function Ke(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,Se.vd)(),{pinDrafts:l,pinItems:c,pinTags:u}=(0,o.useSelector)((e=>e.pinbuilder)),h=(0,o.useSelector)((t=>(0,Se.M)(t,e))),p=(0,o.useSelector)((t=>n(t,e))),{media:_}=c[e.pinItemId],g=_?(0,ze.Z)(_):0,m=l[e.pinDraftId].mode,f=p.filter((e=>e!==h)).map((e=>u[e])),x=(0,o.useDispatch)();return(0,d.jsx)(Xe,{...e,i18n:i,logContextEvent:t,pinTagIds:p,selectedPinTagId:h,height:g,mode:m,unselectedPinTags:f,closeTagGrid:()=>x((0,s.c8)(e.pinDraftId,"tag")),createPinTag:(t,i)=>x((0,E.hL)(e.pinItemId,t,i)),deselectPinTag:()=>x((0,E.yV)(e.pinItemId)),movePinTag:(e,t,i)=>x((0,Ce.uM)(e,t,i)),setTagError:t=>x((0,E.OD)(e.pinItemId,t))})}function Je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Qe extends n.Component{constructor(...e){super(...e),Je(this,"state",{containerRef:null}),Je(this,"saveRef",(e=>{this.setState({containerRef:e})}))}render(){const{editable:e,pinDraftId:t,pinItemId:i,showStepTwoExperience:n,showStepThreeExperience:o}=this.props,{containerRef:s}=this.state;return(0,d.jsx)(l.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,d.jsxs)(l.xu,{position:"relative",height:"100%",column:12,children:[(0,d.jsx)(Ke,{pinDraftId:t,pinItemId:i,forwardRef:this.saveRef,editable:e}),e&&n&&(0,d.jsx)(be.default,{anchor:s,experienceIds:[500915],idealDirection:"right",placementId:1000135}),e&&o&&(0,d.jsx)(be.default,{anchor:s,experienceIds:[500916],idealDirection:"right",placementId:1000135})]})})}}function et(e){const t=(0,Se.vd)(),i=(0,Se.jk)(),n=(0,o.useSelector)((i=>0===t(i,e).length)),s=(0,o.useSelector)((t=>i(t,e).length>0));return(0,d.jsx)(Qe,{...e,showStepTwoExperience:n,showStepThreeExperience:s})}function tt({isHovering:e,styleOverride:t={}}){const i=(0,a.ZP)(),n=i.bt("Fai clic in un punto qualsiasi per taggare", "Click anywhere to tag", "pinbuilder.product.tagging.icon", undefined, true);return(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:t},"data-test-id":"stl-overlay-text",height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:(0,d.jsxs)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:e?void 0:"rgba(0, 0, 0, 0.4)"}},"data-test-id":"text-and-icon-wrapper",display:"flex",justifyContent:"center",rounding:"pill",paddingX:4,paddingY:4,position:"relative",children:[(0,d.jsx)(l.JO,{accessibilityLabel:n,color:"inverse",icon:"tag"}),(0,d.jsx)(l.xu,{marginStart:2,children:(0,d.jsx)(l.xv,{color:"inverse",size:"300",weight:"bold",children:n})})]})})}var it=i(875108),nt=i(325016),ot=i(353428),st=i(770065),rt=i(483205),at=i(327096);function lt(e){var t;const i=null!==(t=(0,o.useSelector)((t=>(0,Se.Bg)(t,e))))&&void 0!==t?t:{},{shopTheLook:s,setMostRecentTaggedObjectId:r}=(0,at.f)(),{mostRecentTaggedObjectId:a,stlHoveredTaggedObjectId:c}=s,{height:u,isHovering:h,taggedObject:p,width:_}=e,[g,m]=(0,n.useState)("inOut"),f=(0,n.useCallback)((()=>{"inOut"===g&&m("none"),r(null)})),x=a===p.id,b=c===p.id;(0,n.useEffect)((()=>{(h||b)&&(m("none"),r(null))}),[h,b]);const y=p.pins[0].closeup_image_signature||(0,ot.Z)(i.src),v=x||b?(0,d.jsx)(l.xu,{position:"absolute",width:_,height:u,children:(0,d.jsx)(st.Z,{closeupImageSignature:y,displayHeight:u,displayWidth:_,flyoutAnimationType:h||b?void 0:g,onAnimationComplete:f,onStlFlyoutHover:()=>{},taggedItem:p,isPinbuilder:!0,isHovering:!0})}):(0,d.jsx)(l.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:p.y_percent/100*u-rt.b9/2,left:p.x_percent/100*_-rt.b9/2}},children:(0,d.jsx)(nt.Z,{})});return(0,d.jsxs)(n.Fragment,{children:[!h&&(0,d.jsx)(l.xu,{"data-test-id":"stl-dot-or-flyout",children:v}),(0,d.jsx)(l.xu,{position:"absolute",width:_,height:u,children:(0,d.jsx)(st.Z,{closeupImageSignature:y,displayHeight:u,displayWidth:_,flyoutAnimationType:void 0,isHovering:h,isPinbuilder:!0,onAnimationComplete:f,onStlFlyoutHover:()=>{},taggedItem:p})})]})}var dt=i(956069);function ct({height:e,isHovering:t,pinDraftId:i,pinItemId:o,taggedObjects:s,width:a}){const{logContextEvent:c}=(0,r.v)(),{setCurrentPinDraftId:u,setStlCallout:h,setStlTaggedCoord:p,shopTheLook:_}=(0,at.f)(),{stlTaggedCoords:g}=_,m=(0,n.useRef)(null);(0,n.useEffect)((()=>()=>{h({showCallout:!1})}),[]);const f=e=>{if(m.current){const t=m.current.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top,width:t.width,height:t.height}}return{}},x=!!s&&s.length===dt.VX,b=e=>{if((e=>{const t=f(e);return!!t&&t.x<t.width-10&&t.x>10&&t.y>26&&t.y<t.height-26})(e)){const t=f(e);t&&(x?h({showCallout:!0,type:"error"}):(c({event_type:101,component:13308,element:12081,view_type:212}),u(i),p({x:t.x,y:t.y,xPercent:t.x/t.width,yPercent:t.y/t.height})))}else u(null),p(null)},y={height:"calc(100% - 48px)",width:"calc(100% - 16px)"},v={border:"dashed 2px #fff",borderRadius:8,cursor:x?"not-allowed":"pointer"},P=!!(s&&s.length>0);return(0,d.jsx)(l.Zf,{height:"100%",children:(0,d.jsxs)("div",{style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"center",cursor:x?"not-allowed":"pointer"},onClick:e=>b(e),onKeyDown:()=>{},role:"button",tabIndex:0,ref:m,children:[t&&(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{...v,...y,margin:"6px"}},position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:!P&&t&&(0,d.jsx)(tt,{isHovering:t})}),s&&s.length>0&&s.map((i=>["created","saved"].includes(i.status)?(0,d.jsx)(lt,{height:e,isHovering:t,pinItemId:o,taggedObject:i,width:a},i.id):null)),g&&(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{...y,top:g.y-rt.b9/2,left:g.x-rt.b9/2}},children:(0,d.jsx)(nt.Z,{})}),(0,d.jsx)(l.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{...y,top:g.y-67.5,left:g.x-67.5}},children:(0,d.jsx)(l.o3,{})})]})]})})}function ut(e){const{isHovering:t,imageDims:i,pinDraftId:s,pinItemId:r}=e,{height:a,width:c}=i||{},u=(0,Se.vd)(),h=(0,o.useSelector)((t=>u(t,e)))||[],p=(0,o.useSelector)((e=>e.pinbuilder))||{},_=p.pinTags||{},g=p.taggedObjects||{},m=h.filter((e=>(0,it.Z)(_[e]))).map((e=>{const{id:t,media:i,pin:n,status:o}=g[_[e].taggedObjectIds[0]]||{};return{id:t,pin_tag_key:_[e].pinTagKey,pins:[{...n,images:{"236x":{url:null==i?void 0:i.url,width:null==i?void 0:i.width,height:null==i?void 0:i.height}}}],status:o,x_percent:100*_[e].x,y_percent:100*_[e].y}}));return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t?"rgba(0,0,0,0.4)":void 0}},height:"100%",width:"100%",overflow:"hidden",position:"absolute",rounding:2}),!!a&&!!c&&(0,d.jsx)(ct,{isHovering:t,pinDraftId:s,height:a,pinItemId:r,taggedObjects:m,width:c})]})}var ht=i(113110),pt=i(490072);const _t=new l.Ry(1);function gt({image:e,isDragging:t,isHovering:i,pinDraftId:s,pinItemId:r,showCarouselCreateButton:c,showCarouselControlButtons:u,showMediaTagOverlay:h,showPageNumberOverlay:p,view:_}){const g=(0,a.ZP)(),m=(0,o.useDispatch)(),{checkExperiment:f}=(0,X.F)(),x=(0,n.useRef)(null),[b,y]=(0,n.useState)(),[v,P]=(0,n.useState)(),{enabled:w,disable:I}=(0,ht.Z)(),A=(0,Pe.Z)();(0,n.useEffect)((()=>{if(x.current){const{width:e,height:t}=x.current.getBoundingClientRect();y({height:t,width:e})}}),[x.current]),(0,n.useEffect)((()=>{v&&m((0,E.Sz)(r,{height:v.height,width:v.width}))}),[v]);const C=(0,W.Z)(),S=(0,we.nl)(C,A)&&"ad_creation"!==V.Z.scenario()&&f("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,j={__style:{boxShadow:t?"0 0 0 1px #0074e8":void 0}};return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsxs)(l.xu,{height:"100%",width:"100%",position:S?"absolute":void 0,children:[(0,d.jsx)(l.xu,{"data-test-id":"media-image-view",width:"100%",height:"100%",overflow:"hidden",rounding:2,dangerouslySetInlineStyle:j,ref:x,position:S?"absolute":void 0,children:V.Z.enabled("offsitePinCreation")?(0,d.jsx)(fe.Z,{url:e.src,children:({image:t})=>{var i,o;return!v&&t.length>0&&P(t[0]),(0,d.jsx)(n.Fragment,{children:t.length>0&&(0,d.jsx)(l.Ee,{alt:g.bt("Immagine caricata", "Uploaded image", "Label for a user uploaded image on Pin create", undefined, true),naturalHeight:null!==(i=t[0].height)&&void 0!==i?i:1,naturalWidth:null!==(o=t[0].width)&&void 0!==o?o:1,src:e.src,crossOrigin:w?"anonymous":void 0,onError:()=>I()})})}}):(0,d.jsxs)(l.Ee,{alt:g.bt("Immagine caricata", "Uploaded image", "Label for a user uploaded image on Pin create", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src,fit:"contain",children:[p&&(0,d.jsx)(ee,{pinDraftId:s}),h&&!V.Z.enabled("shop_the_pin")&&(0,d.jsx)(et,{pinDraftId:s,pinItemId:r,editable:"tag"===_}),t&&(0,d.jsx)(ke,{type:"image"})]})}),!V.Z.enabled("offsitePinCreation")&&"tag"!==_&&"collectionsTag"!==_&&(0,d.jsx)(l.xu,{position:"absolute",height:"100%",width:"100%",top:!0,left:!0,right:!0,bottom:!0,children:(0,d.jsx)(l.xu,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",marginStart:-2,children:(0,d.jsx)(Te,{deleteText:g.bt("Elimina immagine", "Delete image", "Button to delete the image from the Pin", undefined, true),pinDraftId:s,pinItemId:r,showCarouselCreateButton:c,type:"image"})})}),S&&!i&&!u&&(0,d.jsx)("div",{style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"center"},role:"presentation",children:(0,d.jsx)(l.xu,{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",zIndex:_t,margin:2,width:"100%",children:(0,d.jsx)(tt,{})})})]}),S&&!u&&(0,d.jsx)(ut,{imageDims:b,isHovering:i,pinDraftId:s,pinItemId:r})]})}function mt(e){const{pinDrafts:t,pinItems:i}=(0,o.useSelector)((e=>e.pinbuilder)),{type:n}=t[e.pinDraftId],{media:s}=i[e.pinItemId],r="carousel"===n&&!!s,a="single"===n,l=(0,o.useSelector)((t=>(0,pt.Xe)(t,e)));return(0,d.jsx)(gt,{...e,showPageNumberOverlay:r,showMediaTagOverlay:a,view:l})}function ft(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const xt={progressBar:{__style:{backgroundColor:"rgba(241, 53, 53, 1)",borderRadius:"2px",transition:"1s transform",transformOrigin:"left"}},overlay:{__style:{backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6))"}}};class bt extends n.Component{constructor(...e){super(...e),ft(this,"state",{visible:!!this.props.errorMessage||100!==this.props.progress}),ft(this,"handleHide",(()=>{this.setState({visible:!1})})),ft(this,"getProgressText",(()=>{const{progress:e}=this.props;return e<100?this.props.i18n.bt("Caricamento in corso...", "Uploading...", "Upload progress status for pin create", undefined, true):this.props.i18n.bt("Abbiamo quasi finito", "Finishing up", "Upload progress status for pin create", undefined, true)}))}componentDidUpdate(e){const{progress:t}=e,{errorMessage:i,progress:n}=this.props,{visible:o}=this.state;!i&&(t<100||o)&&100===n&&(this.hidingTimeout=setTimeout(this.handleHide,3e3))}componentWillUnmount(){this.hidingTimeout&&clearTimeout(this.hidingTimeout)}render(){const{errorMessage:e,onRetryUpload:t,progress:i}=this.props,{visible:n}=this.state;return n?(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:xt.overlay,"data-test-id":"pinbuilder-media-view-progress-bar",height:72,left:!0,position:"absolute",rounding:2,top:!0,width:"100%",children:(0,d.jsxs)(l.xu,{margin:3,children:[(0,d.jsx)(l.xu,{height:6,marginBottom:2,position:"relative",children:!e&&(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:xt.progressBar,height:"100%",left:!0,position:"absolute",top:!0,width:`${i}%`})}),(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[!!e&&(0,d.jsx)(l.iP,{fullWidth:!1,onTap:t,rounding:"circle",children:(0,d.jsx)(l.xu,{marginEnd:2,children:(0,d.jsx)(l.JO,{accessibilityLabel:this.props.i18n.bt("Prova a ricaricare", "Retry upload", "Button allowing a user to retry a failed video upload", undefined, true),color:"inverse",icon:"refresh",size:20})})}),(0,d.jsx)(l.xv,{color:"inverse",inline:!0,weight:"bold",children:e||this.getProgressText()})]})]})}):null}}const yt=function(e){const t=(0,a.ZP)();return(0,d.jsx)(bt,{...e,i18n:t})};var vt=i(923490);function Pt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class wt extends n.Component{constructor(...e){super(...e),Pt(this,"state",{controls:!0,playing:!1,volume:0}),Pt(this,"setVideoRef",(e=>{this.videoRef=e})),Pt(this,"handlePlay",(()=>this.setState({playing:!0}))),Pt(this,"handlePause",(()=>this.setState({playing:!1}))),Pt(this,"handleHideControls",(()=>this.setState({controls:!1}))),Pt(this,"handleVolumeChange",(({event:e,volume:t})=>{e.stopPropagation(),this.setState({volume:t})})),Pt(this,"handleMouseEnter",(()=>{this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.setState({controls:!0})})),Pt(this,"handleMouseLeave",(()=>{this.controlsTimeout=setTimeout(this.handleHideControls,A.Hy)}))}componentDidMount(){this.controlsTimeout=setTimeout(this.handleHideControls,A.Hy)}componentDidUpdate(e){const{isSelecting:t,video:i}=this.props;i.thumbnail!==e.video.thumbnail&&this.videoRef&&(this.videoRef.seek(i.thumbnail),this.setState({playing:!1})),t&&!e.isSelecting&&this.setState({playing:!1}),!t&&e.isSelecting&&this.setState({playing:!0})}componentWillUnmount(){this.controlsTimeout&&clearTimeout(this.controlsTimeout)}render(){const{isDragging:e,isEdited:t,pinDraftId:i,pinItemId:n,retryUpload:o,video:s,videoError:r,view:a}=this.props,{controls:c,playing:u,volume:h}=this.state,p=s.uploadProgress||0,_={__style:{boxShadow:e?"0 0 0 1px #0074e8":void 0}};return(0,d.jsxs)(l.xu,{dangerouslySetInlineStyle:_,"data-test-id":"media-video-view",height:"100%",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,overflow:"hidden",rounding:3,width:"100%",children:[(0,d.jsxs)(l.nk,{autoplay:!0,ref:this.setVideoRef,accessibilityMaximizeLabel:this.props.i18n.bt("Ingrandisci", "Maximize", "Maximize button on video", undefined, true),accessibilityMinimizeLabel:this.props.i18n.bt("Riduci", "Minimize", "Minimize button on video", undefined, true),accessibilityMuteLabel:this.props.i18n.bt("Disattiva audio", "Mute", "Mute button on video", undefined, true),accessibilityPauseLabel:this.props.i18n.bt("Pausa", "Pause", "Pause button on video", undefined, true),accessibilityPlayLabel:this.props.i18n.bt("Riproduci", "Play", "Play button on video", undefined, true),accessibilityProgressBarLabel:this.props.i18n.bt("Barra di avanzamento", "Progress bar", "MediaVideoView.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:this.props.i18n.bt("Attiva audio", "Unmute", "Unmute button on video", undefined, true),aspectRatio:s.width/s.height,captions:"",controls:c,loop:!0,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onPlay:this.handlePlay,onPlayError:this.handlePause,onVolumeChange:this.handleVolumeChange,playing:u,src:s.src,volume:h,children:[e&&(0,d.jsx)(ke,{type:"video"}),(0,d.jsx)(yt,{errorMessage:r,onRetryUpload:o,progress:p})]}),t&&(0,d.jsxs)(l.xu,{bottom:!0,color:"transparentDarkGray",dangerouslySetInlineStyle:_,left:!0,padding:3,paddingX:8,position:"absolute",right:!0,top:!0,children:[(0,d.jsx)(l.X6,{color:"inverse",size:"400",children:this.props.i18n.bt("Le modifiche sono state memorizzate", "Your edits are stored", "editedVideo.overlay.title", undefined, true)}),(0,d.jsx)(l.xv,{color:"inverse",children:this.props.i18n.bt("Le tue modifiche non verranno visualizzate in questa anteprima, ma non preoccuparti: sono state memorizzate e verranno visualizzate nel video pubblicato. Torna alla modalit di modifica per visualizzare le modifiche. ", "Your edits aren't showing up in this preview, but don't worry, they've been stored and will show up in your published video. Tap back to the editing mode to see your edits. ", "editedVideo.overlay.message", undefined, true)})]}),"tag"!==a&&"collectionsTag"!==a&&(0,d.jsx)(l.xu,{bottom:!0,height:"100%",left:!0,position:"absolute",top:!0,children:(0,d.jsx)(l.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginStart:-2,children:(0,d.jsx)(Te,{deleteText:this.props.i18n.bt("Elimina video", "Delete video", "Button to delete the video from the Pin", undefined, true),pinDraftId:i,pinItemId:n})})})]})}}function It(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,H.Z)(),s=(0,W.Z)(),l=s.isAuth?s.id:"",c=s.isAuth?s.country:"",u=(0,o.useDispatch)(),{pinDraftId:h,pinItemId:p}=e,_=(0,o.useSelector)((({pinbuilder:e})=>e.selectedPinDraftIds.length>0)),g=(0,o.useSelector)((({pinbuilder:e})=>e.pinDrafts[h].mediaError)),m=(0,o.useSelector)((t=>(0,pt.Xe)(t,e))),{checkExperiment:f}=(0,X.F)();return(0,d.jsx)(wt,{...e,isSelecting:_,retryUpload:()=>u((0,vt.dG)({checkExperiment:f,country:c,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,pinDraftId:h,pinItemId:p,userId:l})),videoError:g,view:m,i18n:i})}var At=i(98432),Et=i(616550);class Ct extends n.Component{constructor(...e){var t,i,n;super(...e),n=e=>{const{media:t,processFiles:i,logContextEvent:n}=this.props;e.preventDefault(),e.stopPropagation();const o=(0,U.Z)(e.dataTransfer);n({event_type:3502,component:13308,element:10966,aux_data:{pin_builder_data:JSON.stringify({media_types:o.map((e=>e.type))})}}),i(V.Z.enabled("carousel")&&!t?o:o.slice(0,1))},(i="handleDrop")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}renderMedia(e,t){const{media:i,pinDraftId:n,pinItemId:o,isEdited:s,showCarouselCreateButton:r,showCarouselControlButtons:a}=this.props;if(i){if("localImage"===i.type||"webImage"===i.type)return(0,d.jsx)(mt,{isDragging:e,isHovering:t,image:i,pinDraftId:n,pinItemId:o,showCarouselCreateButton:r,showCarouselControlButtons:a});if("localVideo"===i.type)return(0,d.jsx)(It,{isDragging:e,isHovering:t,pinDraftId:n,pinItemId:o,video:i,isEdited:s})}return null}render(){const{media:e,pinDraftId:t,pinItemId:i,processFiles:n}=this.props;return e?(0,d.jsx)(y.Z,{onDrop:this.handleDrop,children:(e,t)=>this.renderMedia(e,t)}):(0,d.jsx)(me,{pinDraftId:t,pinItemId:i,processFiles:n})}}function St(e){const{pinDraftId:t}=e,{logContextEvent:i}=(0,r.v)(),n=(0,a.ZP)(),s=(0,H.Z)(),l=(0,o.useDispatch)(),c=(0,W.Z)(),u=c.isAuth&&c.isPartner,h=c.isAuth?c.id:"",p=c.isAuth?c.country:"",_=(0,Pe.Z)(),g=(0,we.lJ)(c,_),{search:m}=(0,Et.useLocation)(),f=m.includes("maxvideo");return(0,d.jsx)(Ct,{...e,processFiles:e=>{l((0,At.Z)({pinDraftId:t,files:e,isPartner:u,userId:h,country:p,i18n:n,logContextEvent:i,orbacSubjectId:g,ideaPinRenamingEnabled:s,isMaxVideo:f}))},logContextEvent:i})}function jt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Tt={container:{__style:{borderRadius:6}},overlay:{__style:{backgroundColor:"rgba(0, 0, 0, 0.3)"}}};class Dt extends n.Component{constructor(...e){super(...e),jt(this,"state",{isHovering:!1}),jt(this,"handleMouseEnter",(()=>{this.setState({isHovering:!0})})),jt(this,"handleMouseLeave",(()=>{this.setState({isHovering:!1})}))}render(){const{clearCustomVideoThumbnail:e,coverImg:t}=this.props,{isHovering:i}=this.state;return(0,d.jsx)(l.xu,{height:A.u1,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:"relative",width:A.u1*t.width/t.height,children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:Tt.container,overflow:"hidden",children:(0,d.jsx)(l.Ee,{alt:this.props.i18n.bt("Immagine di copertina caricata", "Uploaded cover image", "Label for user uploaded cover image for video", undefined, true),naturalHeight:t.height,naturalWidth:t.width,src:t.src,children:i&&(0,d.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:Tt.overlay,display:"flex",height:"100%",justifyContent:"center",children:(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n.bt("Rimuovi l'immagine", "Remove image", "Button to remove cover image for video", undefined, true),bgColor:"white",icon:"trash-can",iconColor:"darkGray",onClick:e,size:"xs"})})})})})}}function kt(e){const t=(0,a.ZP)(),i=(0,o.useDispatch)();return(0,d.jsx)(Dt,{...e,i18n:t,clearCustomVideoThumbnail:()=>i((0,E.Sz)(e.pinItemId,{customCoverImg:null}))})}function zt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ot=92,Rt=new Map,Lt=new Map,Mt={backdrop:{__style:{opacity:.35}},video:{height:"100%",width:"100%"}};class Bt extends n.Component{constructor(...e){super(...e),zt(this,"state",{seeking:!1,thumbnails:Rt.get(this.props.video.src)||[]}),zt(this,"getVideoDuration",(()=>{const{video:e}=this.props,{trimmedEndTime:t,trimmedStartTime:i=0}=e;return void 0===t?e.duration:t-i})),zt(this,"getNumThumbnails",(()=>{const{video:e}=this.props,t=Lt.get(e.src);if(t)return t;if(this.container){const{width:t}=this.container.getBoundingClientRect(),i=Math.max(Math.ceil(t/this.getVideoWidth()),6);return Lt.set(e.src,i),i}return 6})),zt(this,"getThumbnails",(()=>{const{video:e}=this.props,t=this.getNumThumbnails();let i=0;this.videoThumbnail=document.createElement("video");const n=this.getVideoDuration(),o=()=>{this.videoThumbnail.currentTime=i/t*n},s=()=>{if(this.videoThumbnail.removeEventListener("canplaythrough",o),i===t)return void this.videoThumbnail.removeEventListener("seeked",s);const r=document.createElement("canvas");r.height=this.videoThumbnail.videoHeight,r.width=this.videoThumbnail.videoWidth;r.getContext("2d").drawImage(this.videoThumbnail,0,0,r.width,r.height);const a=r.toDataURL();this.mounted&&this.setState((e=>({thumbnails:[...e.thumbnails,a]}))),Rt.set(e.src,[...this.state.thumbnails,a]),i+=1,this.videoThumbnail.currentTime=i/t*n};this.videoThumbnail.addEventListener("canplaythrough",o),this.videoThumbnail.addEventListener("seeked",s),this.videoThumbnail.src=e.src})),zt(this,"getVideoWidth",(()=>{const{height:e=Ot,video:t}=this.props;return e*t.width/t.height})),zt(this,"setContainerRef",(e=>{this.container=e})),zt(this,"setVideoRef",(e=>{this.video=e})),zt(this,"mounted",!1),zt(this,"handleMouseDown",(e=>{const{onFocusSlider:t}=this.props;t(),this.setState({seeking:!0});const{left:i}=e.currentTarget.getBoundingClientRect();this.mouseOffsetX=e.clientX-i})),zt(this,"handleMouseMove",(e=>{const{mouseOffsetX:t}=this,{seeking:i}=this.state,{video:n}=this.props,{trimmedStartTime:o=0}=n;if(i&&t){const{setThumbnail:i,video:n}=this.props,{left:s,width:r}=e.currentTarget.getBoundingClientRect(),a=e.clientX-s-t,l=Math.max(0,Math.min(a/(r-this.getVideoWidth()),1)),d=Math.min(l,.98)*n.duration,{video:c}=this;c&&d<=this.getVideoDuration()&&(c.currentTime=o+d,i(o+d))}})),zt(this,"handleMouseUp",(()=>{this.setState({seeking:!1}),this.mouseOffsetX=null}))}componentDidMount(){this.mounted=!0;const{video:e}=this.props;this.video&&(this.video.currentTime=e.thumbnail),Rt.has(e.src)||this.getThumbnails()}componentDidUpdate(e){const{setThumbnail:t,video:i}=this.props,{trimmedEndTime:n,trimmedStartTime:o}=i;if(i.src!==e.video.src){const e=Rt.get(i.src);e?this.setState({thumbnails:e}):this.getThumbnails()}e.video.trimmedEndTime===n&&e.video.trimmedStartTime===o||(this.video&&(this.video.currentTime=o||0),t(o||0),this.setState({thumbnails:[]}),Rt.set(i.src,[]),this.getThumbnails())}componentWillUnmount(){this.mounted=!1}render(){const{height:e,showHeading:t,video:i}=this.props,{trimmedStartTime:o=0}=i,{seeking:s,thumbnails:r}=this.state,a=this.getVideoWidth(),c=this.getVideoDuration(),u=Math.max(0,Math.round(100*(i.thumbnail-o)/c)/100),h=u>=.98?1:u;return(0,d.jsxs)(n.Fragment,{children:[t&&(0,d.jsx)(l.xu,{marginBottom:3,children:(0,d.jsx)(l.xv,{color:"default",lineClamp:1,weight:"bold",children:this.props.i18n.bt("Scegli un'immagine di copertina", "Pick a cover image", "Heading for slider to select video thumbnail image", undefined, true)})}),(0,d.jsxs)(l.xu,{color:"secondary",column:12,rounding:1,height:e,overflow:"hidden",position:"relative",children:[(0,d.jsx)(l.xu,{color:"default",column:12,dangerouslySetInlineStyle:Mt.backdrop,height:"100%",position:"relative",children:r.map(((t,n)=>(0,d.jsx)(l.xu,{position:"absolute",height:e,width:a,dangerouslySetInlineStyle:{__style:{left:n*(100/this.getNumThumbnails())+"%"}},children:(0,d.jsx)(l.Ee,{alt:"",naturalHeight:i.height,naturalWidth:i.width,src:t})},n)))}),(0,d.jsx)(l.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,d.jsx)(l.xu,{column:12,height:"100%",onMouseLeave:this.handleMouseUp,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,position:"relative",ref:this.setContainerRef,children:(0,d.jsx)(l.xu,{rounding:1,dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 3px #fff",cursor:s?"grabbing":"grab",left:`calc((100% - ${a}px) * ${h})`}},"data-test-id":"pin-draft-video-thumbnail-slider",height:e,overflow:"hidden",position:"absolute",width:a,children:(0,d.jsx)("video",{muted:!0,onMouseDown:this.handleMouseDown,ref:this.setVideoRef,src:i.src,style:Mt.video,children:(0,d.jsx)("track",{kind:"captions"})})})})})]})]})}}function Nt(e){const t=(0,a.ZP)(),i=(0,o.useDispatch)();return(0,d.jsx)(Bt,{...e,i18n:t,setThumbnail:t=>i((0,E.Sz)(e.pinItemId,{thumbnail:t}))})}zt(Bt,"defaultProps",{height:Ot,showHeading:!0});var Ft=i(123463);function Zt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ut={border:{__style:{border:"dashed 0.5px rgba(51, 51, 51, 0.2)",borderRadius:.7}}},Vt={__style:{padding:3}};class Ht extends n.Component{constructor(...e){super(...e),Zt(this,"state",{coverImgError:null}),Zt(this,"logFailedAttempt",(e=>{this.props.logContextEvent({event_type:7897,component:13308,aux_data:{error_message:e}})})),Zt(this,"clearCoverImgError",(()=>{this.setState({coverImgError:null})})),Zt(this,"handleDrop",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({coverImgError:null});const n=(0,U.Z)(e.dataTransfer);n.length>0&&(0,Ft.Z)({i18n:t,ideaPinRenamingEnabled:i,file:n[0]}).then((e=>this.handleFileValidation(e)))})),Zt(this,"handleChange",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props;this.setState({coverImgError:null});const n=e.target.files&&e.target.files[0];(0,Ft.Z)({i18n:t,ideaPinRenamingEnabled:i,file:n}).then((e=>this.handleFileValidation(e))),e.target.value=""})),Zt(this,"handleFileValidation",(e=>{const{i18n:t,ideaPinRenamingEnabled:i,setCustomVideoThumbnail:n,video:o}=this.props;switch(e.type){case"error":this.logFailedAttempt(e.id),this.setState({coverImgError:e});break;case"localVideo":{const e=(0,Le.ZP)({errorId:"FILE_UNRECOGNIZED_TYPE",i18n:t,ideaPinRenamingEnabled:i});this.logFailedAttempt(e.id),this.setState({coverImgError:e});break}case"localImage":if(Math.abs(o.width/o.height-e.width/e.height)>.001){const e=(0,Le.ZP)({errorId:"VIDEO_COVER_INVALID_ASPECT_RATIO",i18n:t,ideaPinRenamingEnabled:i});this.logFailedAttempt(e.id),this.setState({coverImgError:e})}else n(e)}}))}render(){const{pinItemId:e,video:t}=this.props,{coverImgError:i}=this.state;return(0,d.jsxs)(l.xu,{display:"flex",marginStart:-2,marginEnd:-2,wrap:!0,children:[(0,d.jsx)(l.xu,{flex:"grow",paddingX:2,children:(0,d.jsx)(Nt,{height:A.u1,pinItemId:e,onFocusSlider:this.clearCoverImgError,showHeading:!1,video:t})}),(0,d.jsx)(l.xu,{display:"flex",flex:"none",justifyContent:"end",paddingX:2,children:(0,d.jsx)(R.Z,{accept:le.xl.join(","),allowMultipleFiles:!1,hasError:!!i,id:"video-cover-upload-input",onChange:this.handleChange,onDrop:this.handleDrop,children:()=>(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:Vt,height:A.u1,overflow:"hidden",position:"relative",rounding:1,width:A.u1,children:(0,d.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:Ut.border,direction:"column",display:"flex",height:"100%",justifyContent:"center",children:(0,d.jsx)(l.JO,{color:i?"error":"subtle",icon:i?"alert":"arrow-circle-up",accessibilityLabel:i?this.props.i18n.bt("Carica errore", "Upload error", "Error alert icon shown when image chosen is invalid", undefined, true):this.props.i18n.bt("Scegli un'immagine di copertina", "Choose a cover image", "Add an image for the video poster cover", undefined, true),size:18})})})})}),!!i&&(0,d.jsx)(l.xu,{column:12,paddingX:2,paddingY:3,children:(0,d.jsx)(l.xv,{color:"error",size:"100",children:i.message})})]})}}function Gt(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,H.Z)(),s=(0,o.useDispatch)();return(0,d.jsx)(Ht,{...e,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,setCustomVideoThumbnail:t=>s((0,E.Sz)(e.pinItemId,{customCoverImg:t}))})}function Wt({pinItemId:e,video:t}){const i=(0,a.ZP)();return(0,d.jsxs)(l.xu,{children:[(0,d.jsx)(l.xu,{paddingY:3,children:(0,d.jsx)(l.xv,{size:"200",children:i.bt("Immagine di copertina del video", "Video cover image", "Heading for selecting a video cover image in pin builder", undefined, true)})}),t.customCoverImg?(0,d.jsx)(kt,{coverImg:t.customCoverImg,pinItemId:e}):(0,d.jsx)(Gt,{pinItemId:e,video:t})]})}var $t=i(497529);function qt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Yt extends n.Component{constructor(...e){super(...e),qt(this,"state",{hasFocus:!1,isAssetPickerOpen:!1,websiteLinkButtonRef:null}),qt(this,"setWebsiteLinkButtonRef",(e=>{this.setState({websiteLinkButtonRef:e})})),qt(this,"setTextFieldInput",(e=>{this.textFieldInput=e})),qt(this,"handleBlur",(()=>{const{setWebsiteLink:e,websiteLink:t,i18n:i}=this.props;t?e(t,(0,Me.CB)(t)?"":(0,Le.q0)(i)):this.setState({hasFocus:!1})})),qt(this,"handleTouch",(()=>{const{logContextEvent:e,setWebsiteLink:t,submitWebsiteLink:i,websiteLink:n,i18n:o}=this.props;if(!n)return void t(n,null);const s=(0,Me.CB)(n)?"":(0,Le.q0)(o);t(n,s),s||(i(),e({event_type:101,component:13308,element:10969,aux_data:{url:n}}))})),qt(this,"handleChange",(({value:e})=>{this.props.setWebsiteLink(e)})),qt(this,"handleClick",(()=>{const{disabledPinCreation:e,experience:t,experienceClient:i,logContextEvent:n,setShowDisabledPinCreationBanner:o}=this.props;e?o():(n({event_type:101,component:13308,element:10968}),t&&501924===t.experience_id&&i.completeExperience(1000135,501924),this.setState({hasFocus:!0}))})),qt(this,"handleDismiss",(()=>{this.setState({isAssetPickerOpen:!1})}))}componentDidUpdate(e,t){this.textFieldInput&&!t.hasFocus&&this.textFieldInput.focus()}render(){const{createCarouselPinDraft:e,createPinDrafts:t,websiteLink:i,websiteLinkError:o}=this.props,{hasFocus:s,isAssetPickerOpen:r}=this.state,a="pin-draft-website-link";return s?(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.xu,{rounding:2,children:(0,d.jsx)(l.xu,{padding:1,color:"secondary",rounding:2,children:(0,d.jsxs)(l.xu,{marginStart:-1,marginEnd:-1,display:"flex",children:[(0,d.jsx)(l.xu,{paddingX:1,flex:"grow",children:(0,d.jsx)(l.nv,{hasError:!!o,id:a,onBlur:this.handleBlur,onChange:this.handleChange,placeholder:this.props.i18n.bt("Inserisci sito web", "Enter website", "Placeholder text to enter website url", undefined, true),ref:this.setTextFieldInput,size:"lg",type:"text",value:i})}),(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.iP,{onTap:this.handleTouch,fullHeight:!0,children:(0,d.jsx)(l.xu,{paddingX:1,height:"100%",children:(0,d.jsx)(l.xu,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",paddingX:2,"data-test-id":"website-link-submit-button",children:(0,d.jsx)(l.JO,{accessibilityLabel:this.props.i18n.bt("Invia", "Submit", "Submit website button to scrape images", undefined, true),size:20,icon:"arrow-forward"})})})})})]})})}),!!o&&(0,d.jsx)(Re.Z,{errorMessage:o,htmlFor:a})]}):(0,d.jsxs)(g.Z,{id:"save-from-site-button",children:[(0,d.jsxs)(l.xu,{ref:this.setWebsiteLinkButtonRef,children:[(0,d.jsx)(l.zx,{fullWidth:!0,onClick:this.handleClick,size:"lg",text:this.props.i18n.bt("Salva dal sito", "Save from site", "Save from site button", undefined, true)}),r&&(0,d.jsx)(S.Z,{onPrimaryAction:t,onSecondaryAction:V.Z.enabled("carousel")?e:void 0,onDismiss:this.handleDismiss,initialTab:"scrape"})]}),(0,d.jsx)(be.default,{experienceIds:[501924],placementId:1000135,anchor:this.state.websiteLinkButtonRef,idealDirection:"up",flyoutSize:"md"})]})}}function Xt(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,H.Z)(),{pinDraftId:l}=e,c=(0,o.useDispatch)(),u=(0,W.Z)(),h=u.isAuth&&u.isEmployee,p=u.isAuth?u.id:"",_=u.isAuth?u.country:"",g=(0,$t.Z)(),{checkExperiment:m}=(0,X.F)(),f=V.Z.enabled("disabledPinCreation");return(0,d.jsx)(Yt,{...e,createPinDrafts:e=>c((0,O.Z)({assets:e,checkExperiment:m,country:_,i18n:i,ideaPinRenamingEnabled:n,isEmployee:h,logContextEvent:t,userId:p})),createCarouselPinDraft:e=>c(C({assets:e,pinDraftId:void 0,isEmployee:h,i18n:i})),disabledPinCreation:f,experienceClient:g,i18n:i,logContextEvent:t,setShowDisabledPinCreationBanner:()=>c((0,z.setShowDisabledPinCreationBanner)(!0)),setWebsiteLink:(e,t)=>c((0,s.f9)(l,e,t)),submitWebsiteLink:()=>c((0,s.c8)(l,"scrape")),websiteLink:(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[l].websiteLink)),websiteLinkError:(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[l].websiteLinkError))})}var Kt=i(106331),Jt=i(47615);function Qt(e){const t=(0,a.ZP)(),{height:i,pinDraftId:r,pinItemId:c,view:u}=e,h=(0,W.Z)(),_=(0,Pe.Z)(),g=(0,o.useSelector)((t=>(0,Se.jk)()(t,e).length>0)),m=(0,o.useSelector)((({pinbuilder:{pinItems:e}})=>e[c].media)),y=(0,o.useSelector)((({pinbuilder:{pinItems:e}})=>e[c].canvasJson)),v=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].isAdIneligible)),P=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].publishOption)),w=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].type)),I=(0,o.useSelector)((e=>m&&"ad_creation"===V.Z.scenario()?(0,Kt.Qj)(e,r,c):null));let E;!m||"carousel"===w&&V.Z.enabled("carousel")||!["localImage","assetImage","webImage"].includes(m.type)||(m.width<A.FM||m.height<A.Mn?E=(0,L.Z)(t.bt("Ti consigliamo un'immagine di almeno {{ recommendedWidth }} px x {{ recommendedHeight }} px. Le dimensioni di questa immagine sono {{ actualWidth }} px x {{ actualHeight }} px.", "We recommend an image that is at least {{ recommendedWidth }} px x {{ recommendedHeight }} px. This image is {{ actualWidth }} px x {{ actualHeight }} px.", "pinbuilder.mediaImageView.warning", undefined, true),{recommendedWidth:A.FM,recommendedHeight:A.Mn,actualWidth:m?m.width:0,actualHeight:m?m.height:0}):m&&m.width/m.height>A.vk/A.NB&&(E=(0,L.Z)(t.bt("Consigliamo di usare un'immagine con proporzioni minime di {{ recommendedWidthRatio }} (larghezza) x {{ recommendedHeightRatio }} (altezza).", "We recommend using an aspect ratio that is at least {{ recommendedWidthRatio }} width x {{ recommendedHeightRatio }} tall.", "pinbuilder.mediaView.warning", undefined, true),{recommendedWidthRatio:A.vk,recommendedHeightRatio:A.NB})));const C=!V.Z.enabled("offsitePinCreation")&&V.Z.enabled("pinQuality"),{checkExperiment:S}=(0,X.F)(),j=(0,we.nl)(h,_)&&"ad_creation"!==V.Z.scenario()&&S("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,{campaignObjectiveType:T,allowCarouselPin:D}=(0,Y.V3)(),k=(0,o.useDispatch)(),z=(0,n.useRef)(null),O="single"===w&&"publish-immediately"===P,R=!m&&O,M=!!m&&"localImage"===m.type&&O&&V.Z.enabled("carousel")&&"collectionsTag"!==u,B="carousel"===w&&V.Z.enabled("carousel"),N="tag"!==u&&"collectionsTag"!==u,{anyEnabled:F}=S("aid_exp_error_handling_pin_builder"),Z=F?271:A.LM;return(0,n.useEffect)((()=>{"ad_creation"===V.Z.scenario()&&(I&&T&&!(0,Jt.rt)(I,T)?z.current="objectiveType":m&&"gif"===(0,x.Z)(m)&&(z.current="gif"),v!==!!z.current&&k((0,s.TD)(r,!0)))}),[T,k,I,v,m,r]),(0,d.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:Z,children:[(0,d.jsxs)(l.xu,{position:"relative",display:"flex",direction:"column",height:i+40,children:[(0,d.jsx)(l.xu,{height:"100%",flex:"grow","data-tutorial-id":"pin-builder-media-draft-view",children:(0,d.jsx)(St,{media:m,isEdited:!!m&&"localVideo"===m.type&&!!y&&!!(0,b.Z)(m,y),pinDraftId:r,pinItemId:c,showCarouselCreateButton:M,showCarouselControlButtons:B})}),R&&(0,d.jsx)(l.xu,{marginTop:2,flex:"none",children:(0,d.jsx)(Xt,{pinDraftId:r})})]}),C&&!!E&&(0,d.jsx)(l.xu,{marginTop:3,width:"100%",children:(0,d.jsx)(l.J0,{type:"warning",message:E,iconAccessibilityLabel:t.bt("Avviso", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true)})}),"objectiveType"===z.current&&(0,d.jsx)(l.xu,{marginTop:3,width:"100%","data-test-id":"ad-media-type-warning-message",children:(0,d.jsx)(l.J0,{type:"warning",message:t.bt("Questo tipo di file non  compatibile con l'obiettivo della campagna, per cui non  idoneo alla promozione in questa campagna.", "Your file type isn't compatible with your campaign objective so it's ineligible for promotion in this campaign.", "[m10n] pinbuilder.mediaView.adWarning", undefined, true),primaryAction:{accessibilityLabel:t.bt("Ulteriori informazioni", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),href:q.C5,label:t.bt("Ulteriori informazioni", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),target:"blank"},iconAccessibilityLabel:t.bt("Avviso", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true)})}),"gif"===z.current&&(0,d.jsx)(l.xu,{marginTop:3,width:"100%","data-test-id":"ad-media-type-warning-message",children:(0,d.jsx)(l.J0,{type:"warning",message:t.bt("Questo tipo di file non  idoneo alla promozione in nessuna campagna.", "Your file type isn't eligible for promotion in any campaign.", "[m10n] pinbuilder.mediaView.adWarningGeneric", undefined, true),primaryAction:{accessibilityLabel:t.bt("Ulteriori informazioni", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),href:q.C5,label:t.bt("Ulteriori informazioni", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),target:"blank"},iconAccessibilityLabel:t.bt("Avviso", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true)})}),D&&M&&!g&&!j&&(0,d.jsx)(l.xu,{marginTop:2,children:(0,d.jsx)(f,{pinDraftId:r})}),B&&(0,d.jsx)(l.xu,{marginTop:2,children:(0,d.jsx)(p,{pinDraftId:r})}),N&&!!m&&"localVideo"===m.type&&(0,d.jsx)(l.xu,{marginTop:2,children:(0,d.jsx)(Wt,{pinItemId:c,video:m})})]})}},245569:(e,t,i)=>{i.d(t,{C:()=>C});var n=i(667294),o=i(702664),s=i(616672),r=i(883119),a=i(785893);function l({children:e,text:t}){return(0,a.jsxs)(r.xu,{children:[(0,a.jsx)(r.xu,{"aria-live":"assertive",display:"visuallyHidden",id:"operation",children:t}),(0,a.jsx)(r.xu,{"aria-describedby":"operation",children:e})]})}var d=i(755742),c=i(66699),u=i(898781);function h({children:e,index:t,onCancel:i,onMove:o,onSelected:s,onConfirm:h,totalItems:p}){const _=(0,u.ZP)(),[g,m]=(0,n.useState)(_.bt("Premi la barra spaziatrice per iniziare a muoverti", "Press the spacebar to begin moving", "Assistive text description for how to begin assistive operation", undefined, true)),[f,x]=(0,n.useState)(t),[b,y]=(0,n.useState)("INIT");"INIT"===b&&t!==f&&x(t);const v=e=>{const t=f+e;("SELECTED"===b||"MOVING"===b)&&t>=0&&t<p&&(o(t),m((0,c.Z)(_.bt("La posizione attuale nell'elenco  {{currentIndex}} di {{totalItems}}", "Current position in list is {{currentIndex}} of {{totalItems}}", "Assistive text describing current position in list", undefined, true),{totalItems:p,currentIndex:t+1})),x(t),y("MOVING"))};return(0,a.jsx)(r.xu,{role:"listitem",rounding:2,onBlur:()=>{m(_.bt("Premi la barra spaziatrice per iniziare a muoverti", "Press the spacebar to begin moving", "Assistive text description for how to begin assistive operation", undefined, true)),x(t),y("INIT"),i()},onKeyUp:e=>{switch(e.keyCode){case d.Z.SPACE:case d.Z.ENTER:"SELECTED"===b||"MOVING"===b?(m((0,c.Z)(_.bt("Posizione nell'elenco aggiornata da {{index}} a {{currentIndex}}", "Position in list updated from {{index}} to {{currentIndex}}", "Assistive text describing current position in list", undefined, true),{currentIndex:f+1,index:t+1})),y("CONFIRMED"),f!==t?h():i()):(m((0,c.Z)(_.bt("Elemento dell'elenco {{index}} selezionato.", "List item {{index}} selected.", "Assitive text describing selected item.", undefined, true),{index:t+1})),y("SELECTED"),s(t),v(0));break;case d.Z.ESCAPE:break;case d.Z.LEFT:v(-1);break;case d.Z.RIGHT:v(1)}},tabIndex:0,children:(0,a.jsx)(l,{text:g,children:e})})}function p(e){const{show:t}=e;return(0,a.jsx)(r.xu,{color:t?"primary":"transparent",display:"flex",flex:"grow",width:2})}function _(e){const{description:t,media:i,title:n}=e.pinItem,{height:o,src:s,width:l}=i||{};return(0,a.jsx)(r.zd,{rounding:2,height:"100%",width:"100%",children:(0,a.jsx)(r.xu,{display:"flex",direction:"column",rounding:2,children:(0,a.jsx)(r.Ee,{alt:n||t,color:"#FEFEFE",src:s,naturalHeight:o,naturalWidth:l,children:e.showOverlay?(0,a.jsx)(r.xu,{"data-test-id":"reorder-index-overlay",display:"flex",justifyContent:"end",position:"absolute",right:!0,top:!0,children:(0,a.jsx)(r.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",justifyContent:"center",margin:2,paddingX:2,paddingY:1,rounding:"circle",children:(0,a.jsx)(r.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:e.index})})}):null})})})}var g=i(345221),m=i(583421),f=i(299295);function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const b=-1;class y extends n.Component{constructor(...e){super(...e),x(this,"state",{pinItemIds:this.props.pinItemIds,sourceIndex:b,targetIndex:b}),x(this,"handleDragCancel",(()=>{this.setState({sourceIndex:b,targetIndex:b})})),x(this,"handleDragBegin",(e=>{this.setState({sourceIndex:e})})),x(this,"handleDragHover",(e=>{const{targetIndex:t}=this.state;e!==t&&this.setState({targetIndex:e})})),x(this,"handleDragEnd",(()=>{const{updateIds:e}=this.props,{pinItemIds:t,sourceIndex:i,targetIndex:n}=this.state,o=((e,t,i)=>{const n=[...e],o=n.splice(t,1)[0];return n.splice(i,0,o),n})(t,i,n);e(o),this.setState({pinItemIds:o,sourceIndex:b,targetIndex:b})}))}render(){const{pinDraftId:e,pinItems:t}=this.props,{sourceIndex:i,targetIndex:n}=this.state;return(0,a.jsx)(r.xu,{alignItems:"center",display:"flex",direction:"row",justifyContent:"center",minHeight:f.DB,paddingY:6,width:"100%",children:t.map(((o,s)=>(0,a.jsxs)(r.xu,{display:"flex",width:154,children:[(0,a.jsx)(p,{show:i>n&&s===n}),(0,a.jsx)(r.xu,{padding:1}),(0,a.jsx)(h,{index:s,totalItems:t.length,onCancel:this.handleDragCancel,onConfirm:this.handleDragEnd,onMove:this.handleDragHover,onSelected:this.handleDragBegin,children:(0,a.jsx)(r.zd,{rounding:2,children:(0,a.jsx)(m.Z,{index:s,onDragBegin:this.handleDragBegin,onDragHover:this.handleDragHover,onDragEnd:this.handleDragEnd,type:m.y.CarouselItem,children:(0,a.jsx)(r.xu,{display:"flex",margin:0,rounding:2,width:f.mr,children:(0,a.jsx)(_,{index:`${s+1}`,pinDraftId:e,pinItem:o,showOverlay:i!==s})})})})}),(0,a.jsx)(r.xu,{padding:1}),(0,a.jsx)(p,{show:i<n&&s===n})]},`${String(o.id)}-reorder-view`)))})}}const v=(0,g.Z)(m.y.CarouselItem)(y);var P=i(941646),w=i(407043),I=i(305782);function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class E extends n.Component{constructor(...e){super(...e),A(this,"state",{pinItemIds:this.props.pinItemIds}),A(this,"commitChanges",(()=>{const{saveChanges:e,logContextEvent:t}=this.props,{pinItemIds:i}=this.state;t({event_type:101,component:13308,element:11127}),e(i)})),A(this,"handleOnCancel",(()=>{const{cancelChanges:e,logContextEvent:t}=this.props;t({event_type:101,component:13308,element:11128}),e()})),A(this,"updateIds",(e=>{this.setState({pinItemIds:e})}))}render(){const{height:e,mapPinItems:t,pinDraftId:i}=this.props,{pinItemIds:n}=this.state,o=e>f.sD?e:f.sD;return(0,a.jsxs)(r.xu,{direction:"column",display:"flex",minHeight:o,marginBottom:10,children:[(0,a.jsxs)(r.kC,{alignItems:"start",justifyContent:"end",children:[(0,a.jsx)(r.xu,{"data-test-id":"cancel-reorder-button",paddingX:3,children:(0,a.jsx)(r.zx,{onClick:this.handleOnCancel,text:this.props.i18n.bt("Annulla", "Cancel", "Button Text for cancelling an changes", undefined, true)})}),(0,a.jsx)(P.Z,{id:"save-reorder-button",children:(0,a.jsx)(r.zx,{color:"red",onClick:this.commitChanges,text:this.props.i18n.bt("Fine", "Done", "Button text for accepting changes", undefined, true)})})]}),(0,a.jsxs)(r.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginTop:10,children:[(0,a.jsxs)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,a.jsx)(r.X6,{size:"500",children:this.props.i18n.bt("Organizza le tue immagini", "Organize your images", "Heading for reordering images in carousel", undefined, true)}),(0,a.jsx)(r.xu,{paddingY:4,children:(0,a.jsx)(r.xv,{color:"subtle",children:this.props.i18n.bt("Trascina e rilascia le immagini per modificare l'ordine in cui vengono mostrate nel carosello", "Drag and drop the images to change the order in which they appear in your carousel", "Text describing how to reorder images in carousel", undefined, true)})})]}),(0,a.jsx)(v,{pinDraftId:i,pinItems:t(n),pinItemIds:n,updateIds:this.updateIds})]})]})}}function C(e){const{logContextEvent:t}=(0,w.v)(),i=(0,u.ZP)(),{pinItems:n}=(0,o.useSelector)((e=>e.pinbuilder)),{pinItemIds:r}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),l=e=>e.filter((e=>!!n[e].media)).map((e=>({...n[e],id:e}))),d=l(r)[0].media,c=d?(0,s.Z)(d,f.mr):f.sD,h=(0,o.useDispatch)();return(0,a.jsx)(E,{...e,i18n:i,logContextEvent:t,height:c,pinItemIds:r,mapPinItems:l,saveChanges:t=>{h((0,I.XB)(e.pinDraftId,t)),h((0,I.c8)(e.pinDraftId,"upload"))},cancelChanges:()=>h((0,I.c8)(e.pinDraftId,"upload"))})}},323201:(e,t,i)=>{i.d(t,{Z:()=>y});var n=i(702664),o=i(323716),s=i(388619),r=i(667294),a=i(898781),l=i(305782),d=i(883119),c=i(785893);function u({removeWebsiteMedia:e,media:{height:t,width:i,src:n}}){const o=(0,a.ZP)(),[s,l]=(0,r.useState)(!1);return(0,c.jsx)(d.iP,{onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:(0,c.jsxs)(d.xu,{marginStart:2,position:"relative",children:[(0,c.jsx)(d.zd,{rounding:2,width:64,height:t>=i?64:"100%",wash:!0,children:(0,c.jsx)(d.Ee,{alt:`Image from ${n}`,naturalHeight:t,naturalWidth:i,src:n})}),s&&(0,c.jsx)(d.xu,{position:"absolute",top:!0,right:!0,marginTop:-2,marginEnd:-2,rounding:"circle",color:"default",dangerouslySetInlineStyle:{__style:{border:"2px #FFFFFF solid"}},children:(0,c.jsx)(d.hU,{onClick:e,bgColor:"lightGray",icon:"cancel",iconColor:"darkGray",accessibilityLabel:o.bt("Deseleziona immagine", "Unselect image", "pinBuilder.pinDraftFooterScrapeView.pinDraftFooterScrapeViewItem.unselect.text", undefined, true),size:"xs"})})]})})}function h(e){const t=(0,n.useDispatch)();return(0,c.jsx)(u,{...e,removeWebsiteMedia:()=>t((0,l.YY)(e.pinDraftId,e.media.src))})}var p=i(349700),_=i(407043),g=i(299295);function m({selected:e,pinDraftId:t,onAddToPin:i,width:n,marginStart:r}){const{logContextEvent:l}=(0,_.v)(),u=(0,a.ZP)();return e.length>0?(0,c.jsxs)(d.xu,{width:n||g.of,paddingX:4,marginStart:null!=r?r:-10,height:96,display:"flex",flex:"none",alignItems:"center",justifyContent:"between",dangerouslySetInlineStyle:{__style:{boxShadow:"0px -2px 10px -8px #000000"}},children:[(0,c.jsx)(d.xu,{padding:2,overflow:"scrollX",children:(0,c.jsx)(d.kC,{alignItems:"center",justifyContent:"start",children:e.map((e=>(0,c.jsx)(h,{pinDraftId:t,media:e},e.src)))})}),(0,c.jsx)(d.xu,{marginStart:2,children:(0,c.jsx)(d.zx,{color:"red",onClick:()=>{l({event_type:101,component:13308,element:10970});const{tab:e}=(0,s.Z)({url:(0,o.Z)()});i(e===g.ro?"IDEA_PIN":"PIN")},text:(0,p.nk)(u.nbt(["Aggiungi {{ numPins }} Pin", "Aggiungi {{ numPins }} Pin"], e.length, "pinBuilder.pinDraftBodyScrapeView.pinDraftFooterScrapeView.addPinButton.text", true),{numPins:e.length}).join("")})})]}):null}function f(e){const t=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteMedia)),i=(0,n.useDispatch)();return(0,c.jsx)(m,{...e,selected:t,onAddToPin:t=>{i((0,l.q0)(e.pinDraftId,"upload",t))}})}var x=i(313580),b=i(665866);function y({pinDraftId:e,footerWidth:t,footerMarginStart:i}){const n=b.Z.enabled("multi_pin")||b.Z.enabled("multi_pin_pinner")?g.gU:g.sD+g.uR;return(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",height:n,children:[(0,c.jsx)(x.Z,{pinDraftId:e}),(b.Z.enabled("multi_pin")||b.Z.enabled("multi_pin_pinner"))&&(0,c.jsx)(f,{pinDraftId:e,width:t,marginStart:i})]})}},313580:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(702664);var o=i(122097),s=i(667294),r=i(938999),a=i(444445),l=i(305782),d=i(883119),c=i(785893);class u extends s.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{addWebsiteMedia:e,clearWebsiteMedia:t,removeWebsiteMedia:i,selected:n}=this.props;n?i():(t(),e())},(i="handleClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{selected:e,media:{height:t,width:i,src:n}}=this.props;return(0,c.jsx)(r.Z,{selected:e,onClick:this.handleClick,children:(0,c.jsx)(d.zd,{rounding:2,width:a.yF,wash:!0,children:(0,c.jsx)(d.Ee,{alt:`Image from ${n}`,naturalHeight:t,naturalWidth:i,src:n})})})}}function h(e){const{websiteMedia:t}=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),i=t.map((e=>e.src)).includes(e.media.src),o=(0,n.useDispatch)();return(0,c.jsx)(u,{...e,selected:i,addWebsiteMedia:()=>o((0,l.dj)(e.pinDraftId,e.media)),clearWebsiteMedia:()=>o((0,l.hb)(e.pinDraftId)),removeWebsiteMedia:()=>o((0,l.YY)(e.pinDraftId,e.media.src))})}var p=i(172071),_=i(66699),g=i(665866),m=i(898781),f=i(407043),x=i(773285),b=i(780280);function y({media:{src:e,height:t,width:i},pinDraftId:n,selected:o,disabled:r,addWebsiteMedia:a,removeWebsiteMedia:l}){const{logContextEvent:u}=(0,f.v)(),{checkExperiment:h}=(0,x.F)(),y=(0,m.ZP)(),{isRTL:v}=(0,b.B)(),[P,w]=(0,s.useState)(!1),{anyEnabled:I}=h("web_set_crossorigin_anonymous"),[A,E]=(0,s.useState)(I?"anonymous":void 0),C=g.Z.enabled("offsite_pin_creation_multi_select")?"transparent":"default";return(0,c.jsx)(d.iP,{onMouseEnter:()=>{w(!0)},onMouseLeave:()=>{w(!1)},onTap:()=>{o?(l(),u({event_type:8722,component:13308,element:12229,aux_data:{pin_draft_id:n,src_url:e}})):r||(a(),u({event_type:8721,component:13308,element:12229,aux_data:{pin_draft_id:n,src_url:e}}),g.Z.enabled("offsite_pin_creation_multi_select")&&p.Z.increment("offsite_pin_creation.select_image",1,{type:"multi_pin"}))},children:(0,c.jsx)(d.xu,{color:P?"secondary":"transparent",rounding:5,dangerouslySetInlineStyle:{__style:{padding:"2px"}},children:(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{padding:"2px",cursor:"pointer",boxShadow:o?"0 0 0 2px #000000":"none",borderRadius:"18px",outline:"none"}},children:(0,c.jsxs)(d.zd,{rounding:4,wash:!0,children:[(0,c.jsx)(d.Ee,{alt:(0,_.Z)(o?y.bt("Deseleziona l'immagine da {{imageSource}}", "Deselect image from {{imageSource}}", "PinDraftMultiSelectGridItem.ImageLabel.Deselect", undefined, true):y.bt("Seleziona l'immagine da {{imageSource}}", "Select image from {{imageSource}}", "PinDraftMultiSelectGridItem.ImageLabel.Select", undefined, true),{imageSource:e}),naturalHeight:t,naturalWidth:i,src:e,crossOrigin:A,onError:()=>E(void 0)}),(0,c.jsx)(d.xu,{position:"absolute",bottom:!0,right:!v,left:!!v,height:24,width:24,marginEnd:3,marginBottom:3,rounding:2,padding:1,color:o?"dark":C,children:o&&(0,c.jsx)(d.JO,{accessibilityLabel:y.bt("Selezionato", "Selected", "pinBuilder.pinDraftInputScrapeGrid.pinDraftInputScrapeGriditem.selected.text", undefined, true),color:"inverse",icon:"check"})})]})})})})}function v(e){const{websiteMedia:t}=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),i=t.map((e=>e.src)).includes(e.media.src),o=t.length>=10,s=(0,n.useDispatch)();return(0,c.jsx)(y,{...e,selected:i,disabled:o,addWebsiteMedia:()=>s((0,l.dj)(e.pinDraftId,e.media)),removeWebsiteMedia:()=>s((0,l.YY)(e.pinDraftId,e.media.src))})}var P=i(299295);function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class I extends s.Component{constructor(...e){super(...e),w(this,"saveScrollContainer",(e=>{this.scrollContainer=e})),w(this,"renderItem",(({data:e})=>{const{pinDraftId:t}=this.props;return g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")||g.Z.enabled("offsite_pin_creation_multi_select")?(0,c.jsx)(v,{pinDraftId:t,media:e}):(0,c.jsx)(h,{pinDraftId:t,media:e})}))}getColumnWidth(){return g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")?P.eZ:a.yF}getGutterWidth(){return g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")?a.lX:g.Z.enabled("offsite_pin_creation_multi_select")?a.nW:a.P2}render(){const{errorMessage:e,media:t,showSpinner:i}=this.props,{scrollContainer:n}=this;return(0,c.jsxs)(d.xu,{ref:this.saveScrollContainer,column:12,height:"100%",width:P.km,overflow:"auto",padding:g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")?0:2,children:[(0,c.jsx)(d.$j,{accessibilityLabel:this.props.i18n.bt("Caricamento delle immagini dall'URL...", "Loading images from URL...", "loading message", undefined, true),show:i}),n&&t.length>0?(0,c.jsx)(d.Rk,{layout:g.Z.enabled("offsite_pin_creation_multi_select")?"flexible":"basic",columnWidth:this.getColumnWidth(),renderItem:({data:e})=>this.renderItem({data:e}),gutterWidth:this.getGutterWidth(),items:t,minCols:g.Z.enabled("offsite_pin_creation_multi_select")?3:a.yc,scrollContainer:()=>n}):e&&(0,c.jsx)(d.xu,{"data-test-id":"pinbuilder-pin-draft-input-scrape-grid-error-message",children:(0,c.jsx)(d.xv,{color:"subtle",align:"center",children:(0,c.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]})}}function A(e){const t=(0,m.ZP)();return(0,c.jsx)(I,{...e,i18n:t})}function E({pinDraftId:e,websiteLink:t}){return(0,c.jsx)(o.Z,{url:t,source:"pin_create",children:({images:i,error:n,loading:o})=>{const s=[...i];return function(e,t){e.forEach((e=>Object.assign(e,{src:e.url,type:"webImage",sourceURL:t})))}(s,t),(0,c.jsx)(A,{errorMessage:n,media:s,pinDraftId:e,showSpinner:o})}},t)}function C(e){const t=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink)),i=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteDefaultImageUrl));return(0,c.jsx)(E,{...e,websiteLink:t,websiteDefaultImageUrl:i})}},854156:(e,t,i)=>{i.d(t,{Z:()=>F});var n=i(702664),o=i(616672),s=i(667294),r=i(122097),a=i(954931),l=i(277348),d=i(349700),c=i(299295),u=i(305782),h=i(502890),p=i(407043),_=i(172045),g=i(898781),m=i(883119),f=i(785893);class x extends s.PureComponent{constructor(...e){var t,i,n;super(...e),n=()=>{const{mode:e,saveTaggedObject:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:10911,aux_data:{method:e}}),t()},(i="handleTouch")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{image:e}=this.props,{height:t,width:i,url:n}=e;return(0,f.jsxs)(s.Fragment,{children:[(0,f.jsx)(m.iP,{onTap:this.handleTouch,rounding:2,children:(0,f.jsx)(m.zd,{rounding:2,width:c.yC,wash:!0,children:(0,f.jsx)(m.Ee,{alt:`Image from ${null!=n?n:""}`,naturalHeight:null!=t?t:1,naturalWidth:null!=i?i:1,src:null!=n?n:""})})}),(0,f.jsx)(m.xu,{marginTop:1,display:"flex",justifyContent:"center",children:(0,f.jsx)(m.xv,{align:"center",children:(0,d.nk)(this.props.i18n.bt("{{ height }}  {{ width }}", "{{ height }}  {{ width }}", "Dimensions of an image separated by multiplication sign", undefined, true),{height:t,width:i})})})]})}}function b(e){const{logContextEvent:t}=(0,p.v)(),i=(0,g.ZP)(),o=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode)),s=(0,n.useDispatch)();return(0,f.jsx)(x,{...e,i18n:i,logContextEvent:t,mode:o,saveTaggedObject:()=>{const t=e.pinId||(0,_.Z)();s((0,l.Dn)(e.pinTagId,t,{media:e.image})),s((0,h.C_)(e.pinItemId,null)),s((0,u.c8)(e.pinDraftId,"tag"))}})}class y extends s.Component{constructor(...e){var t,i,n;super(...e),n=e=>{this.scrollContainer=e},(i="saveScrollContainer")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{errorMessage:e,images:t,showSpinner:i}=this.props,{scrollContainer:n}=this;return(0,f.jsx)(m.xu,{ref:this.saveScrollContainer,column:12,height:"100%",children:(0,f.jsxs)(m.xu,{padding:2,children:[(0,f.jsx)(m.$j,{accessibilityLabel:this.props.i18n.bt("Caricamento delle immagini dall'URL...", "Loading images from URL...", "loading message", undefined, true),show:i}),e&&(0,f.jsx)(m.xv,{size:"200",color:"error",children:e}),n&&t.length>0&&(0,f.jsx)(m.xu,{"data-test-id":"pin-tag-grid",children:(0,f.jsx)(m.Rk,{columnWidth:c.yC,renderItem:({data:e})=>(0,f.jsx)(b,{image:e,pinDraftId:this.props.pinDraftId,pinItemId:this.props.pinItemId,pinId:this.props.pinId,pinTagId:this.props.pinTagId}),gutterWidth:24,items:t,minCols:2,scrollContainer:()=>n})})]})})}}function v(e){const t=(0,g.ZP)();return(0,f.jsx)(y,{...e,i18n:t})}var P=i(131555);class w extends s.PureComponent{constructor(...e){var t,i,n;super(...e),n=()=>{const{mode:e,logContextEvent:t}=this.props;t({event_type:7580,component:13308,aux_data:{method:e}})},(i="handleError")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{closeTagGrid:e,pinDraftId:t,pinItemId:i,pinTagId:n,link:o}=this.props,s=(0,a.Z)(o)?/\/pin\/([\w-]+)\/?$/.exec(o):null;return(0,f.jsxs)(m.xu,{display:"flex",direction:"column",height:"100%",column:12,children:[(0,f.jsxs)(m.xu,{flex:"none",display:"flex",alignItems:"center",marginBottom:6,children:[(0,f.jsxs)(m.xu,{flex:"grow",children:[(0,f.jsx)(m.xu,{marginBottom:1,children:(0,f.jsx)(m.X6,{size:"400",children:this.props.i18n.bt("Scegli un'immagine per questo prodotto", "Pick an image for this product", "Instructions to select an image to add as a tagged product to a Pin tag", undefined, true)})}),(0,f.jsx)(m.xv,{size:"200",lineClamp:1,children:(0,d.nk)(this.props.i18n.bt("Immagini da {{ link }}", "Images from {{ link }}", "Text displaying the website link where images were collected", undefined, true),{link:o})})]}),(0,f.jsx)(m.xu,{flex:"none",children:(0,f.jsx)(m.hU,{accessibilityLabel:this.props.i18n.bt("Annulla", "Cancel", "Button to cancel selecting products for a Pin tag", undefined, true),icon:"cancel",onClick:e,iconColor:"gray",size:"md"})})]}),(0,f.jsx)(m.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",overflow:"auto",children:s?(0,f.jsx)(P.Z,{pinId:s[1],fieldSetKey:"images_only_item",children:({pin:e,error:o,loading:r})=>(0,f.jsx)(v,{errorMessage:o,images:e?[e.images["474x"]]:[],pinDraftId:t,pinItemId:i,pinId:s[1],pinTagId:n,showSpinner:r})}):(0,f.jsx)(r.Z,{url:o,onError:this.handleError,source:"product_tags",children:({images:e,error:o,loading:s})=>(0,f.jsx)(v,{errorMessage:o,images:e,pinDraftId:t,pinItemId:i,pinTagId:n,showSpinner:s})})})]})}}function I(e){const{logContextEvent:t}=(0,p.v)(),i=(0,g.ZP)(),{selectedPinTagId:o}=(0,n.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),s=(0,n.useSelector)((e=>o?e.pinbuilder.pinTags[o].link:"")),r=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode)),a=(0,n.useDispatch)();return(0,f.jsx)(w,{...e,i18n:i,logContextEvent:t,link:s,mode:r,pinTagId:o||"",closeTagGrid:()=>a((0,u.c8)(e.pinDraftId,"tag"))})}var A=i(948618),E=i(665866);function C({disabled:e,selectPinTag:t}){const i=(0,g.ZP)(),n=E.Z.enabled("shop_the_pin"),o=(0,f.jsx)(m.xu,{alignItems:"center",color:"secondary",display:"flex",height:n?c.MN:c.Bj,justifyContent:"center",rounding:2,width:n?c.MN:c.Bj,children:(0,f.jsx)(m.JO,{accessibilityLabel:i.bt("Aggiungi prodotto", "Add product", "Accessibility label for adding a new product to a tag", undefined, true),icon:"add",color:"subtle",size:24})});return e?o:(0,f.jsx)(m.iP,{onTap:t,rounding:2,children:o})}function S(e){const t=(0,n.useDispatch)();return(0,f.jsx)(C,{...e,selectPinTag:()=>t((0,h.C_)(e.pinItemId,e.pinTagId))})}var j=i(258821),T=i(957025);const D={circle:{__style:{border:"solid 2px #efefef"}},overlay:{__style:{opacity:.4}}};function k(e){const t=(0,g.ZP)(),{isSelected:i,pinItemId:n,pinTagId:o,pinTagKey:s,taggedObjectIds:r}=e,a=r.length,l=!1===i;return(0,f.jsxs)(m.xu,{column:12,dangerouslySetInlineStyle:l?D.overlay:void 0,children:[(0,f.jsxs)(m.xu,{display:"flex",alignItems:"center",marginBottom:2,children:[(0,f.jsx)(m.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",rounding:"circle",width:24,dangerouslySetInlineStyle:D.circle,children:(0,f.jsx)(m.xv,{size:"100",weight:"bold",children:s})}),(0,f.jsx)(m.xu,{paddingX:2,children:(0,f.jsx)(m.xv,{size:"200",weight:"bold",children:(0,d.nk)(t.nbt(["{{ numProducts }} prodotto", "{{ numProducts }} prodotti"], a, "Text displaying the total number of products across a single tag on a Pin", true),{numProducts:a})})})]}),(0,f.jsxs)(m.xu,{display:"flex",marginStart:-1,marginEnd:-1,wrap:!0,children:[r.map((e=>(0,f.jsx)(m.xu,{padding:1,children:(0,f.jsx)(j.Z,{disabled:l,pinTagId:o,taggedObjectId:e})},e))),(0,f.jsx)(m.xu,{padding:1,children:(0,f.jsx)(S,{disabled:l,pinItemId:n,pinTagId:o})})]})]})}function z(e){const t=(0,T.A$)(),{selectedPinTagId:i}=(0,n.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),o=i?i===e.pinTagId:null,s=(0,n.useSelector)((i=>t(i,e)));return(0,f.jsx)(k,{...e,isSelected:o,taggedObjectIds:s})}var O=i(562501);function R({numProducts:e,pinItemId:t,pinTagIds:i}){const n=(0,g.ZP)(),o=i.length;return(0,f.jsxs)(m.xu,{display:"flex",direction:"column",height:"100%",column:12,children:[(0,f.jsxs)(m.xu,{flex:"none",marginBottom:6,children:[(0,f.jsx)(m.xu,{marginBottom:1,children:(0,f.jsx)(m.X6,{size:"400",children:n.bt("Prodotti taggati", "Products tagged", "Heading for grid of products tagged to one Pin tag", undefined, true)})}),(0,f.jsxs)(m.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,f.jsx)(m.xv,{size:"200",children:(0,d.nk)(n.nbt(["{{ numTags }} tag", "{{ numTags }} tag"], o, "Text displaying the total number of tags on a Pin", true),{numTags:o})}),(0,f.jsx)(A.Z,{}),(0,f.jsx)(m.xv,{size:"200",children:(0,d.nk)(n.nbt(["{{ numProducts }} prodotto", "{{ numProducts }} prodotto"], e, "Text displaying the total number of products across all tags on a Pin", true),{numProducts:e})})]})]}),(0,f.jsx)(m.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",overflow:"auto",children:i.map(((e,i)=>(0,f.jsx)(m.xu,{marginBottom:5,children:(0,f.jsx)(z,{pinItemId:t,pinTagId:e,pinTagKey:i+1})},e)))})]})}function L(e){const t=(0,O.vd)(),i=(0,O.jk)(),o=(0,n.useSelector)((t=>i(t,e).length)),s=(0,n.useSelector)((i=>t(i,e)));return(0,f.jsx)(R,{...e,numProducts:o,pinTagIds:s})}var M=i(746547);const B={__style:{paddingBottom:c.uR}};function N({height:e,pinDraftId:t,pinItemId:i,view:n,paddingX:o=5}){return(0,f.jsxs)(m.xu,{display:"flex",direction:"row",dangerouslySetInlineStyle:B,children:[(0,f.jsx)(m.xu,{paddingX:o,children:(0,f.jsx)(M.Z,{height:e,pinDraftId:t,pinItemId:i})}),(0,f.jsxs)(m.xu,{flex:"grow",height:e,minHeight:c.sD,paddingX:5,width:"100%",children:["tag"===n&&(0,f.jsx)(L,{pinItemId:i}),"selectTag"===n&&(0,f.jsx)(I,{pinDraftId:t,pinItemId:i})]})]})}function F(e){const{pinItemIds:t}=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{media:i}=(0,n.useSelector)((e=>e.pinbuilder.pinItems[t[0]])),s=i?(0,o.Z)(i):c.sD;return(0,f.jsx)(N,{...e,height:s})}},258821:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(702664),o=i(925797),s=i(665866),r=i(898781),a=i(407043),l=i(299295),d=i(883119),c=i(277348),u=i(984268),h=i(785893);function p({disabled:e,media:t,removeTaggedObject:i,pin:n}){const{logContextEvent:c}=(0,a.v)(),p=(0,r.ZP)(),{height:_,width:g,url:m}=t||{},f=s.Z.enabled("shop_the_pin"),x=f?(0,u.mt)(n):null,b=f?(0,u.BE)(n):null;return(0,h.jsxs)(d.xu,{position:"relative",rounding:2,"data-test-id":"tagged-item",children:[(0,h.jsx)(d.zd,{rounding:2,height:f?l.MN:l.Bj,width:f?l.MN:l.Bj,wash:!0,children:(0,h.jsx)(d.Ee,{alt:`Image from ${null!=m?m:""}`,fit:"cover",naturalHeight:null!=_?_:1,naturalWidth:null!=g?g:1,src:null!=m?m:""})}),f&&(0,h.jsxs)(d.xu,{children:[!!x&&(0,h.jsx)(d.xu,{marginTop:1,children:(0,h.jsx)(d.xu,{paddingY:1,display:"flex",children:(0,h.jsx)(o.Z,{text:x,icon:"tag"})})}),!!b&&(0,h.jsx)(d.xu,{width:f?l.MN:l.Bj,children:(0,h.jsx)(d.xv,{overflow:"breakWord",size:"200",weight:"bold",children:b})})]}),(0,h.jsx)(d.xu,{position:"absolute",top:!0,left:!0,margin:2,"data-test-id":"remove-tagged-item-button",children:(0,h.jsx)(d.hU,{accessibilityLabel:p.bt("Rimuovi prodotto taggato", "Remove tagged product", "button to remove tagged product", undefined, true),bgColor:"white",icon:"cancel",iconColor:"gray",onClick:e?void 0:()=>{i(),c({event_type:101,component:13308,element:12127})},size:"xs"})})]})}function _(e){const t=(0,n.useSelector)((t=>t.pinbuilder.taggedObjects[e.taggedObjectId].media||null)),i=(0,n.useSelector)((t=>t.pinbuilder.taggedObjects[e.taggedObjectId].pin||null)),o=(0,n.useDispatch)();return(0,h.jsx)(p,{...e,media:t,pin:i,removeTaggedObject:()=>{o((0,c.Go)(e.pinTagId,e.taggedObjectId)),o((0,c.Cf)(e.pinTagId,"edited"))}})}},344948:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(702664),o=i(838548),s=i(665866),r=i(898781),a=i(237056),l=i(717615),d=i(19121),c=i(299295),u=i(414327),h=i(305782),p=i(407043),_=i(773285),g=i(231947),m=i(502890),f=i(883119),x=i(785893);function b({pinDraftId:e,pinItemId:t}){const{logContextEvent:i}=(0,p.v)(),{checkExperiment:b}=(0,_.F)(),y=(0,r.ZP)(),v=(0,a.Z)(),P=(0,d.Z)(),w=P.isAuth?P.id:"",I=P.isAuth?P.country:"",A=P.isAuth&&P.isPartner,{anyEnabled:E}=b("web_m10n_business_access_orbac_www"),C=(0,l.Z)(),S=E?(0,g.lJ)(P,C):"",j=(0,n.useDispatch)(),T=()=>{j((0,m.C_)(t,null)),j((0,m.b0)(t)),j((0,o.Z)({pinDraftId:e,storyPinPublishStopwatch:void 0,userId:w,orbacSubjectId:S,country:I,isPartner:A,i18n:y,logContextEvent:i,ideaPinRenamingEnabled:v})),j((0,u.jB)("PinResource"))},D=(0,n.useSelector)((({pinbuilder:t})=>"selectTag"===t.pinDrafts[e].view)),k=(0,n.useSelector)((({pinbuilder:t})=>"edit"===t.pinDrafts[e].mode)),z=(0,n.useSelector)((({pinbuilder:e})=>e.pinItems[t].tagError)),O=(0,n.useSelector)((({pinbuilder:e})=>e.closeupImageSignature)),R=(0,n.useSelector)((({pinbuilder:e})=>e.entryPoint)),L=(0,g.nl)(P,E?C:{})&&"ad_creation"!==s.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled?()=>{i({event_type:101,component:13308,element:10973,aux_data:{...R||O?{entry_point_source:R,image_signature:O}:{}}}),T()}:T;return(0,x.jsxs)(f.kC,{alignItems:"stretch",justifyContent:z?"between":"end",children:[!!z&&(0,x.jsx)(f.xu,{display:"flex",alignItems:"center",paddingX:5,children:(0,x.jsx)(f.xu,{width:c.LM,children:(0,x.jsx)(f.xv,{color:"error",size:"200",children:z})})}),(0,x.jsx)(f.zx,{color:"red",disabled:D,name:"pin-draft-header-tag-view-done",onClick:k?L:()=>{i({event_type:101,component:13308,element:12128}),j((0,m.C_)(t,null)),j((0,h.c8)(e,"upload")),j((0,m.b0)(t))},text:y.bt("Fine", "Done", "Button to save changes to the tagging flow.", undefined, true)})]})}},430957:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(702664),s=i(82596),r=i(938999),a=i(490072),l=i(407043),d=i(474394),c=i(785893);class u extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{deselectPinDraft:e,inSelectMode:t,pinDraftId:i,pinDraftRefs:n,published:o,selected:s,selectPinDraft:r,logContextEvent:a}=this.props;a({event_type:101,component:13395,element:11330});const l=n.get(i);l&&l.scrollIntoView({behavior:"smooth",block:"start"}),t&&!o&&(s?e():r())},(i="handleClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{pinDraftId:e,published:t,selected:i,selectedColor:n,width:o,height:a,hasError:l,shouldHighlightErrors:d}=this.props,u=l&&d;return(0,c.jsx)(r.Z,{selected:u||i,onClick:this.handleClick,color:u?"#e60023":n,children:(0,c.jsx)(s.Z,{pinDraftId:e,type:"thumbnail",collapsed:t,width:o,height:a})})}}function h(e){const{logContextEvent:t}=(0,l.v)(),i=(0,o.useDispatch)(),n=(0,o.useSelector)((({pinbuilder:{selectedPinDraftIds:e}})=>e.length>0)),s=(0,o.useSelector)((({pinbuilder:{selectedPinDraftIds:t}})=>t.includes(e.pinDraftId))),r=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>"succeeded"===t[e.pinDraftId].status)),h=(0,o.useSelector)((({pinbuilder:t})=>(0,a.Fh)(t,e)));return(0,c.jsx)(u,{...e,hasError:h,inSelectMode:n,logContextEvent:t,published:r,selected:s,selectPinDraft:()=>i((0,d.selectPinBuilderPinDraft)(e.pinDraftId)),deselectPinDraft:()=>i((0,d.deselectPinBuilderPinDraft)(e.pinDraftId))})}},82596:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(702664),o=i(898781),s=i(883119),r=i(785893);function a({type:e,height:t,width:i}){const n=(0,o.ZP)();return(0,r.jsx)(s.xu,{alignItems:"center",color:"lightWash",display:"flex",height:t||("thumbnail"===e?60:"100%"),justifyContent:"center",rounding:2,width:i||("thumbnail"===e?40:"100%"),children:(0,r.jsx)(s.JO,{accessibilityLabel:n.bt("Pin vuoto", "Empty Pin", "Label for Pin draft with no image", undefined, true),color:"subtle",icon:"camera-roll",size:16})})}var l=i(795067),d=i(667294),c=i(616672),u=i(299295);const h=40,p={video:{height:"100%",objectFit:"cover",width:"100%"},wash:{__style:{opacity:.3}},container:{__style:{transition:`height 250ms ${u.rc}`}}};class _ extends d.Component{constructor(...e){var t,i,n;super(...e),t=this,i="videoRef",n=(0,d.createRef)(),i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){const{media:e}=this.props;"localVideo"===e.type&&this.videoRef.current&&(this.videoRef.current.currentTime=e.thumbnail)}componentDidUpdate(e){const{media:t}=e,{media:i}=this.props;"localVideo"===i.type&&t.thumbnail!==i.thumbnail&&this.videoRef.current&&(this.videoRef.current.currentTime=i.thumbnail)}render(){const{collapsed:e,media:t,text:i,type:n,width:o=h}=this.props,{customCoverImg:a}="localVideo"===t.type?t:{},l="square"===n?"100%":o,d=e?4:(0,c.Z)(a||t,o),u="square"===n?"100%":d;return(0,r.jsxs)(s.xu,{rounding:2,width:l,height:u,position:"relative",dangerouslySetInlineStyle:p.container,children:[(0,r.jsx)(s.xu,{column:12,height:"100%",dangerouslySetInlineStyle:e?p.wash:void 0,children:(0,r.jsxs)(s.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:["localVideo"===t.type&&a&&(0,r.jsx)(s.Ee,{alt:this.props.i18n.bt("Pin video", "Video Pin", "Label for Pin draft with an video", undefined, true),fit:"square"===n?"cover":void 0,naturalHeight:a.height,naturalWidth:a.width,src:a.src}),"localVideo"===t.type&&!a&&(0,r.jsx)("video",{muted:!0,ref:this.videoRef,src:t.src,style:p.video,children:(0,r.jsx)("track",{kind:"captions"})}),("localImage"===t.type||"webImage"===t.type)&&(0,r.jsx)(s.Ee,{alt:this.props.i18n.bt("Pin immagine", "Image Pin", "Label for Pin draft with an image", undefined, true),fit:"square"===n?"cover":void 0,naturalHeight:t.height,naturalWidth:t.width,src:t.src})]})}),("localVideo"===t.type||!!i)&&(0,r.jsxs)(s.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,display:"flex",alignItems:"center",justifyContent:"center",children:["localVideo"===t.type&&(0,r.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Pin video", "Video Pin", "Label for Pin draft with an video", undefined, true),color:"inverse",icon:"video-camera"}),!!i&&(0,r.jsx)(s.xv,{color:"inverse",size:"100",weight:"bold",children:i})]})]})}}function g(e){const t=(0,o.ZP)();return(0,r.jsx)(_,{...e,i18n:t})}function m({collapsed:e,media:t,text:i,type:n,height:o,width:s}){return t?"localImage"===t.type||"webImage"===t.type||"localVideo"===t.type?(0,r.jsx)(g,{media:t,text:i,type:n,collapsed:e,width:s}):null:(0,r.jsx)(a,{type:n,height:o,width:s})}function f(e){const t=(0,o.ZP)(),{pinDrafts:i,pinItems:s,storyPinItems:a}=(0,n.useSelector)((e=>e.pinbuilder)),{pinItemIds:d,pinItemIndex:c,type:u}=i[e.pinDraftId],h=d[c],{media:p}="story"===u?a[h]:s[h],_="carousel"===u?`${c+1}/${d.filter((e=>"story"===u?!!a[e].media:!!s[e].media)).length}`:p&&"gif"===(0,l.Z)(p)?t.bt("GIF", "GIF", "Overlay text for GIF images", undefined, true):void 0;return(0,r.jsx)(m,{...e,i18n:t,media:p,text:_})}},248740:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(299487),s=i(124237),r=i(843940),a=i(898781),l=i(407043),d=i(385740),c=i(780280),u=i(785893);function h({isExtensionInstalled:e=!1,isFromPinBuilder:t=!1,onInstall:i=(()=>{}),onHide:h=(()=>{}),onMounted:p=(()=>{})}){const{logContextEvent:_}=(0,l.v)(),g=(0,a.ZP)(),{userAgent:{browserName:m}}=(0,c.B)(),f=(0,d.SU)();(0,n.useEffect)((()=>(_({event_type:13,view_type:438,component:13588}),p(),()=>{_({event_type:13,view_type:f.viewType,view_parameter:f.viewParameter,view_data:f.viewData})})),[]);return(0,u.jsx)(r.Z,{installClick:()=>{e?s.Z.showError(g.bt("Ops! Hai gi il pulsante per il browser.", "Oops! You already have the browser button.", " - ", undefined, true)):o.Z.handleExtensionInstall(m,(()=>{i()})),_({event_type:101,component:7,element:456})},isExtensionInstalled:!t&&e,isFromPinBuilder:!!t,skipClick:()=>{h()}})}},918333:(e,t,i)=>{i.d(t,{Z:()=>T});var n=i(667294),o=i(580189),s=i(172071),r=i(850760),a=i(818747),l=i(883119),d=i(785893);function c(e){const{color:t,description:i,imageUrl:n,link:o}=e;return(0,d.jsx)(l.xu,{alignItems:"center",justifyContent:"center",padding:2,display:"flex",children:!n&&t&&o?(0,d.jsx)(l.xu,{width:236,children:(0,d.jsx)(a.Z,{color:t,description:i,url:o})}):(0,d.jsx)(l.zd,{rounding:2,width:236,children:(0,d.jsx)("img",{alt:i,src:n})})})}var u=i(616672),h=i(152028);const p={width:"100%"};class _ extends n.Component{constructor(...e){var t,i,o;super(...e),t=this,i="videoRef",o=(0,n.createRef)(),i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o}componentDidMount(){const{video:e}=this.props;this.videoRef.current&&(this.videoRef.current.currentTime=e.thumbnail)}render(){const{video:e}=this.props,t=(0,u.Z)(e.customCoverImg||e,236);return(0,d.jsx)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:(0,d.jsxs)(l.xu,{height:t,position:"relative",rounding:2,width:236,children:[(0,d.jsx)(l.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:e.customCoverImg?(0,d.jsx)(l.Ee,{alt:e.customCoverImg.name,naturalHeight:e.customCoverImg.height,naturalWidth:e.customCoverImg.width,src:e.customCoverImg.src}):(0,d.jsx)("video",{muted:!0,src:e.src,ref:this.videoRef,style:p,children:(0,d.jsx)("track",{kind:"captions"})})}),(0,d.jsx)(l.xu,{bottom:!0,left:!0,right:!0,top:!0,alignItems:"end",display:"flex",justifyContent:"start",padding:2,position:"absolute",children:(0,d.jsx)(h.Z,{duration:1e3*e.duration})})]})})}}var g=i(717615),m=i(784590),f=i(19121),x=i(231947),b=i(898781);class y extends n.PureComponent{renderPinCreateSuccessImage(){const{color:e,description:t,imageUrl:i,link:n,websiteMedia:o}=this.props;return o&&o.length>1?(0,d.jsx)(l.xu,{maxHeight:540,overflow:"scrollY",padding:8,children:(0,d.jsx)(l.Rk,{renderItem:({data:e})=>(0,d.jsx)(c,{description:t,imageUrl:e.src}),items:o,minCols:3,columnWidth:160})}):(0,d.jsx)(c,{color:e,description:t,imageUrl:i,link:n})}render(){const{relatedBoard:e}=this.props;if(!e.isLoaded)return(0,d.jsx)(l.xu,{minHeight:250,children:(0,d.jsx)(l.$j,{accessibilityLabel:this.props.i18n.bt("Visualizza bacheca suggerita", "See suggested board", "suggested board to follow after pinnning", undefined, true),show:!0})});if(e.data&&!e.data.length){const{video:e}=this.props;return(0,d.jsx)(l.xu,{marginTop:-8,paddingY:8,children:e?(0,d.jsx)(_,{video:e}):this.renderPinCreateSuccessImage()})}return null}}function v(e){const t=(0,b.ZP)(),i=(0,f.Z)(),n=(0,g.Z)(),o=(0,x.lJ)(i,n),s=(0,m.Z)({name:"RelatedBoardForPinRandomFeedResource",options:{page_size:1,pin:e.pinId,orbac_subject_id:o},noCache:!0});return(0,d.jsx)(y,{...e,i18n:t,relatedBoard:s})}var P=i(349700),w=i(302667),I=i(247371),A=i(407043),E=i(616550),C=i(780280),S=i(641692),j=i(306775);function T({boardName:e,color:t,description:i="",hideHeader:a,imageUrl:c,link:u,onClose:h,openNewTab:p,pin:_,pinId:y,sectionName:T,siteType:D,video:k,websiteMedia:z}){const O=(0,b.ZP)(),{logContextEvent:R}=(0,A.v)(),L=(0,E.useHistory)(),M=(0,C.B)(),B=(0,f.Z)(),N=(0,g.Z)(),F=(0,x.lJ)(B,N),Z=(0,m.Z)({name:"PinResource",options:{id:y,field_set_key:"detailed",orbac_subject_id:F}}),U=()=>_&&_.is_quick_promotable_by_pinner&&3!==D&&(0,j.su)(B);(0,n.useEffect)((()=>{U()?((0,w.vF)(R,S.NH.RENDER,S.Xc.PIN_CREATE_SUCCESS_PINNER,120,207),s.Z.increment("web.pin_create.success.promote")):s.Z.increment("web.pin_create.success.send"),s.Z.increment("web.pin_create.success.default")}),[]);const V=(0,o.Z)({currentSiteType:D,destinationSiteType:0,inputPath:`/pin/${y}`}),H=T?(0,P.nk)(O.bt("Salvato su {{ sectionName }} in {{ boardName }}", "Saved to {{ sectionName }} in {{ boardName }}", " - ", undefined, true),{boardName:e,sectionName:T}):(0,P.nk)(O.bt("Salvato in {{ boardName }}", "Saved to {{ boardName }}", " - ", undefined, true),{boardName:e}),G=Z.data&&Z.data.link_domain&&Z.data.link_domain.official_user,W=B.isAuth&&G&&G.id!==B.id&&!G.followed_by_me;return(0,d.jsx)(l.xu,{minWidth:500,"data-test-id":"saved-pin-modal",children:(0,d.jsxs)(l.xu,{color:"default",rounding:2,width:"auto",children:[a?null:(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.xu,{paddingX:6,paddingY:4,children:(0,d.jsx)(l.X6,{size:"500",children:H})}),(0,d.jsx)(l.iz,{})]}),!!G&&W&&(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.xu,{paddingX:6,paddingY:3,children:(0,d.jsx)(r.Z,{user:G})}),(0,d.jsx)(l.iz,{})]}),(0,d.jsx)(v,{color:t,description:i,imageUrl:c,link:u,pinId:y,video:k,websiteMedia:z}),(0,d.jsx)(l.iz,{}),(0,d.jsx)(l.xu,{paddingX:6,paddingY:2,children:(0,d.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"end",children:[!U()&&(0,d.jsx)(I.SendButton,{buttonType:"icon-and-text",handleSendShareFlyoutButtonClick:()=>{L.push(`/pin/${y}/?share=true`)}}),(0,d.jsx)(l.xu,{paddingX:1,"data-test-id":"seeItNow",children:(0,d.jsx)(l.zx,{role:"link",href:V,target:p?"blank":null,onClick:()=>{(0,w.vF)(R,S.NH.DISMISS,S.Xc.PIN_CREATE_SUCCESS_PINNER,123,207),h()},color:B.isAuth&&B.isPartner||_&&U()?"gray":"red",text:O.bt("Visualizza ora", "See it now", "pinCreateSuccess.seeItNow", undefined, true)})}),_&&U()&&(0,d.jsx)(l.xu,{paddingX:1,children:(0,d.jsx)(l.zx,{color:"red",text:O.bt("Promuovi il tuo Pin", "Promote your Pin", "Text for button to that takes users to promote a Pin", undefined, true),onClick:()=>{(0,w.vF)(R,S.NH.CLICK,S.Xc.PIN_CREATE_SUCCESS_PINNER,101,207),(0,j.Pw)({history:L,pinId:y,requestContext:M}),h()}})})]})})]})})}},453451:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(807592),o=i(898781),s=i(883119),r=i(785893);function a({colorOverride:e,isSoldOut:t,isStale:i,productDetails:a,showSalesPrice:l,type:d,weight:c="bold"}){const{max_price:u,min_price:h,price:p,standard_price:_}=a,g=!!p&&!!_&&p!==_;let m="100";"pdpPlusHeading"===d?m="400":"heading"===d?m="500":"pdpPlusMobileHeading"===d&&(m="300");const f=(0,o.ZP)(),x=f.bt("Visualizza prezzo sul sito", "See price on site", "product.price.stale", undefined, true),b=f.bt("Esaurito", "Sold out", "product.price.soldOut", undefined, true);return i?(0,r.jsx)(s.xv,{size:m,color:"subtle",weight:"bold",children:x}):(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[t&&(0,r.jsx)(s.xu,{marginEnd:2,children:(0,r.jsx)(s.xv,{size:m,color:"subtle",weight:"bold",children:b})}),(!!p||!!h||!!u)&&(0,r.jsx)(s.xv,{color:e||(g?"shopping":"default"),size:m,weight:c,children:(0,r.jsx)("span",{children:(0,n.Z)(a)})}),g&&!l&&(0,r.jsx)(s.xu,{marginStart:1,children:(0,r.jsx)(s.xv,{color:"subtle",size:m,weight:["pdpPlusHeading","pdpPlusMobileHeading"].includes(d)?"normal":c,children:(0,r.jsx)("span",{style:{textDecoration:"line-through"},children:_})})})]})}},200915:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B,topTaggedObjectsResourceOptions:()=>M});var n=i(669765),o=i(564194),s=i(692627),r=i(667294),a=i(841509),l=i(525199),d=i(149230),c=i(64446),u=i(925797),h=i(883119),p=i(785893);const[_,g,m,f]=[1,2,3,4],x={[_]:"In stock",[g]:"Out of stock",[m]:"Preorder",[f]:"Unavailable"};function b(e){var t,i,n,o;const{buyableProduct:s,hideAvailability:r,merchantName:a,pinDescription:l,pinTitle:d,richSummary:c,showProductIcon:m,showPrice:f,showDescription:b}=e,{is_available:y,display_active_min_price:v,display_active_max_price:P}=s||{},w=v===P?v:`${null!=v?v:""} - ${null!=P?P:""}`,I=null==c||null===(t=c.products)||void 0===t||null===(i=t[0].offer_summary)||void 0===i?void 0:i.price,A=w||I,E=y?_:g,C=null==c||null===(n=c.products)||void 0===n||null===(o=n[0].offer_summary)||void 0===o?void 0:o.availability,S=s&&null!=y?E:C,j=!r&&x[S];return(0,p.jsxs)(h.xu,{marginTop:1,children:[m&&(0,p.jsx)(h.xu,{paddingY:1,display:"flex",children:(0,p.jsx)(u.Z,{text:a,icon:"tag"})}),!!A&&f&&(0,p.jsxs)(h.xu,{display:"flex",paddingY:1,children:[(0,p.jsx)(h.xu,{marginEnd:2,children:(0,p.jsx)(h.xv,{size:"200",children:A})}),j&&S===g&&(0,p.jsx)(h.xv,{size:"200",color:"subtle",children:j})]}),b&&(0,p.jsx)(h.xu,{paddingY:1,children:(0,p.jsx)(h.xv,{size:"200",weight:"bold",children:d||l})})]})}var y=i(898781),v=i(287072),P=i(350118);function w({domain:e,maxWidth:t,onClick:i,pinId:n,sourceLinkStyle:o,sourceUrl:s}){const a=(0,y.ZP)(),[l,c]=(0,r.useState)(!1),u=(0,r.useCallback)((()=>c(!0)),[c]),_=(0,r.useCallback)((()=>c(!1)),[c]),g=(0,P.S6)()(n),m=(0,d.Z)({url:s}),f=(0,v.Z)({href:s,target:m?"blank":null,externalData:g?{pin:g}:void 0}),x=2*t/3;return x<72&&(o="icon-only"),"icon-only"===o?(0,p.jsx)(h.hU,{accessibilityLabel:a.bt("link", "link", "Website url link", undefined, true),bgColor:"white",href:s,icon:"arrow-up-right",iconColor:"darkGray",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),i(),f({event:e})},size:x>58?"sm":"xs",role:"link",rel:m?"nofollow":"none"}):(0,p.jsx)(h.iP,{href:s,fullWidth:!1,onMouseEnter:u,onMouseLeave:_,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),i(),f({event:e})},rel:m?"nofollow":"none",role:"link",children:(0,p.jsxs)(h.xu,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:{backgroundColor:l?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)",borderRadius:"18px"}},display:"flex",height:32,justifyContent:"between",maxWidth:x,position:"relative",children:[(0,p.jsx)(h.xu,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3,children:(0,p.jsx)(h.JO,{accessibilityLabel:a.bt("link", "link", "Website url link", undefined, true),color:"default",icon:"arrow-up-right",size:9})}),(0,p.jsx)(h.xu,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden",children:(0,p.jsx)(h.xv,{color:"default",size:"200",weight:"bold",lineClamp:1,children:e})})]})})}var I=i(883561);const A=80,E="";var C=i(35495),S=i(407043),j=i(53325);const T={visualOverlay:{backgroundColor:"#000",opacity:j.$O}};function D(e){var t;const{logContextEvent:i}=(0,S.v)(),[n,o]=(0,r.useState)(!1),s=(0,r.useCallback)((()=>o(!0)),[o]),u=(0,r.useCallback)((()=>o(!1)),[o]),{link:_,pin:g,onClick:m}=e,f=j._z,x=j.fM,{description:y,domain:v,title:P,id:D,link:k,rich_summary:z,images:{"474x":O}={}}=g,{height:R,width:L,url:M}=null!=O?O:{},B=P||z&&z.display_name,N=(0,C.QY)(g),F=N&&function(e,t={}){const{maxLength:i=A,suffix:n=E}=t;return e.length<=i?e:e.substring(0,i-1).replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,"")+n}(N,{maxLength:f/j.Xv}),Z=(0,d.Z)({url:_}),U=_&&Z?"nofollow":"none";return(0,p.jsxs)(h.xu,{width:f,position:"relative",onMouseEnter:s,onMouseLeave:u,children:[(0,p.jsxs)(h.xu,{position:"relative",children:[(0,p.jsx)(h.iP,{role:"link",rounding:2,href:_,onTap:({event:e})=>{e.stopPropagation(),null==m||m(e)},children:(0,p.jsxs)(h.zd,{rounding:2,height:x,width:f,wash:!0,children:[(0,p.jsx)(h.Ee,{alt:null!==(t=null!=B?B:y)&&void 0!==t?t:"",naturalHeight:null!=R?R:1,naturalWidth:null!=L?L:1,src:null!=M?M:"",fit:"cover"}),n&&(0,p.jsx)(l.Z,{visibility:"visible",children:(0,p.jsx)(a.Z,{additionalStyles:T.visualOverlay})})]})}),(0,p.jsx)(h.xu,{position:"absolute",margin:2,left:!0,right:!0,top:!0,children:(0,p.jsx)(c.Z,{pin:g,allowShoppingPriceIndicator:!0})}),n&&(0,p.jsx)(h.xu,{display:"flex",position:"absolute",margin:3,left:!0,right:!0,bottom:!0,children:k&&(0,p.jsx)(w,{pinId:D,sourceUrl:k,domain:null!=v?v:"",sourceLinkStyle:"icon-only",maxWidth:f,onClick:()=>{const{componentType:t,viewData:n,viewType:o,viewParameter:s}=e;i({event_type:12,component:t,object_id_str:D,view_type:o,view_parameter:s,view_data:n})}})})]}),(0,p.jsx)(h.iP,{rel:U,role:"link",href:_,onTap:({event:e})=>{e.stopPropagation(),null==m||m(e)},children:(0,p.jsx)(b,{pinDescription:y&&(0,I.ZP)(y.trim(),j.Z0)||"",pinTitle:B&&(0,I.ZP)(B.trim(),j.Z0)||"",richSummary:z,merchantName:F})})]})}var k=i(784590),z=i(349700),O=i(623568),R=i(92261);const L=R.Gg-2*R.g9,M=(e,t)=>({pinId:e,isSTL:t});function B(e){const{logContextEvent:t}=(0,S.v)(),i=(0,y.ZP)(),{pin:r,trafficSource:a}=e,{data:l,isLoaded:d}=(0,k.Z)({name:"VisualLinkTopTaggedObjectsResource",options:M(r.id,!(!r.aggregated_pin_data||!r.aggregated_pin_data.is_shop_the_look))}),{aggregated_pin_data:c={}}=r;if(!d)return(0,p.jsx)(h.xu,{paddingY:6,children:(0,p.jsx)(h.$j,{accessibilityLabel:i.bt("Caricamento Shop the Look", "Loading Shop the Look", "Loading message for Shop the Look on Closeup", undefined, true),show:!0})});const u=()=>{t({event_type:101,view_type:3,component:85,element:10479,aux_data:{commerce_data:JSON.stringify({pin_is_shop_the_look:null==c?void 0:c.is_shop_the_look,pin_is_stela:null==c?void 0:c.is_stela})}}),t({event_type:8948,view_type:3,component:85,element:10479,aux_data:{closeup_navigation_type:a&&(0,O.sV)(a)?"deeplink":"click",commerce_data:JSON.stringify({pin_is_shop_the_look:null==c?void 0:c.is_shop_the_look,pin_is_stela:null==c?void 0:c.is_stela})}})};if(!l||0===l.length)return null;const _=l.map((t=>{const{id:a,objects:l,title:d}=t,c=l.filter((e=>"pin"===e.type)),_=r&&r.closeup_attribution?r.closeup_attribution:d&&l.find((e=>"user"===e.type&&e.id===d.args[0].id)),g=_&&_.username||"",m=_?_.full_name:d&&d.args[0].text,f=c.map(((t,i)=>{var n,a,l,d,c,h,_,g,m;return(0,p.jsx)(o.Z,{impressionType:"Pin",impressionAuxFields:{richTypes:(0,C.GT)(t),imageURL:null!==(n=null===(a=t.images)||void 0===a||null===(l=a["236x"])||void 0===l?void 0:l.url)&&void 0!==n?n:""},loggingId:t.id,slotIndex:i,viewData:{pin_id:r.id},viewType:3,viewParameter:(0,s.Z)({hasPin:!!e.pin,hasPinRichMetadata:!!e.pin.rich_metadata,hasPinRichMetadataProducts:!(null===(d=e.pin.rich_metadata)||void 0===d||!d.products),hasPinRichMetadataArticle:!(null===(c=e.pin.rich_metadata)||void 0===c||!c.article),hasPinRichMetadataRecipe:!(null===(h=e.pin.rich_metadata)||void 0===h||!h.recipe),hasPinStoryPinData:!!e.pin.story_pin_data}),componentType:13160,children:(0,p.jsx)(D,{link:`/pin/${t.id}/`,onClick:u,pin:t,viewData:{pin_id:r.id},viewType:3,viewParameter:(0,s.Z)({hasPin:!!e.pin,hasPinRichMetadata:!!e.pin.rich_metadata,hasPinRichMetadataProducts:!(null===(_=e.pin.rich_metadata)||void 0===_||!_.products),hasPinRichMetadataArticle:!(null===(g=e.pin.rich_metadata)||void 0===g||!g.article),hasPinRichMetadataRecipe:!(null===(m=e.pin.rich_metadata)||void 0===m||!m.recipe),hasPinStoryPinData:!!e.pin.story_pin_data}),componentType:13160})},`carousel-impression-key-${i}`)}));return(0,p.jsxs)(h.xu,{"data-test-id":"shop-the-look-unit",children:[(0,p.jsxs)(h.xu,{"data-test-id":"shop-the-look",marginBottom:4,marginTop:10,children:[(0,p.jsx)(h.X6,{size:"400",children:i.bt("Acquista questo look", "Shop the look", "Shop the Look from user text on closeup", undefined, true)}),d&&d.args[0]&&(0,p.jsx)(h.xv,{children:(0,z.nk)(i.bt("da {{ pinnerName }}", "from {{ pinnerName }}", "Shows who owns the products tagged in this Pin, on closeup", undefined, true),{pinnerName:(0,p.jsx)(h.xv,{inline:!0,weight:"bold",children:(0,p.jsx)(h.rU,{href:`/${g}/`,display:"inlineBlock",underline:"hover",children:m})},"pinner")})})]}),(0,p.jsx)(n.Z,{accessibilityBackLabel:i.bt("Prodotto precedente", "Previous product", "Label for previous product in shop the look", undefined, true),accessibilityForwardLabel:i.bt("Prodotto successivo", "Next product", "Label for next product in shop the look", undefined, true),columnWidth:L,gutterWidth:j.qA,items:f})]},a)}));return(0,p.jsx)(h.xu,{children:_})}},770065:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(667294),o=i(335174),s=i(391254),r=i(453451),a=i(407043),l=i(327096),d=i(883119),c=i(785893);const u=10,h=()=>{};function p({alwaysShow:e,closeupImageSignature:t,displayHeight:i,displayWidth:p,onStlFlyoutHover:_,taggedItem:g,flyoutAnimationType:m,onAnimationComplete:f,isPinbuilder:x,isHovering:b}){var y;const{logContextEvent:v}=(0,a.v)(),[P,w]=(0,n.useState)();(0,n.useEffect)((()=>{if(g&&!x){const{pins:e}=g,i=e[0];v({event_type:120,view_type:3,element:11962,aux_data:{image_signature:t,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:g.x_percent,y:g.x_percent,product_pin_id:i.id||g.id,product_pin_image_signature:i.image_signature,pin_tag_key:g.pin_tag_key})}})}}),[g,x]);const{shopTheLook:{selectedStlItemId:I}}=(0,l.f)();let A=g.x_percent/100*p,E=g.y_percent/100*i;const{pins:C=[]}=g,S=null!==(y=C[0])&&void 0!==y?y:{},{grid_title:j,id:T,images:D,rich_summary:k}=S||{},z=(D||{})["236x"]||{},O=(((k||{}).products||[])[0]||{}).offer_summary||{},{price:R,max_price:L}=O||{},M=S.id===I;let B;"in"===m||M?B="stelaSlideIn .3s ease-in-out forwards":"out"===m?B="stelaSlideOut .3s ease-in-out forwards":"inOut"===m?B="stelaSlideInThenOut 3s ease-in-out forwards":"none"===m&&(B="none");const N=!(!O||!R&&!L),F=N?124:48;let Z="up";const U=A<F+u,V=A+(F+u)/2>p,H=E<60;return U&&!H?Z="right":V&&!H&&(Z="left"),U&&H?(A=F/2+u,E=70):V&&H?(A=p-F/2-u,E=70):!H||U&&V||(Z="down"),(0,c.jsxs)(d.xu,{"data-test-id":"stl-flyout",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),position:"relative",ref:e=>{e&&!P&&w(e)},width:1,dangerouslySetInlineStyle:{__style:{top:E,left:A}},children:[(0,c.jsx)(s.Z,{unsafeCSS:(0,o.Z)()}),(x&&b||!x)&&(0,c.jsx)(d.mh,{children:(0,c.jsx)(d.xu,{onAnimationEnd:()=>{f&&"inOut"===m&&f()},dangerouslySetInlineStyle:{__style:e?{opacity:1}:{animation:B,opacity:"none"===B?0:void 0}},children:(0,c.jsx)(d.iP,{role:"link",href:x?"":`/pin/${T}`,onTap:x?h:()=>{if(!x){const{pins:e}=g,i=e[0];v({event_type:101,view_type:3,element:11962,aux_data:{image_signature:t,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:g.x_percent,y:g.x_percent,product_pin_id:i.id||g.id,product_pin_image_signature:i.image_signature,pin_tag_key:g.pin_tag_key})}})}},children:(0,c.jsx)(d.J2,{anchor:P,idealDirection:Z,onDismiss:()=>{},positionRelativeToAnchor:!1,showCaret:!0,size:"flexible",children:(0,c.jsxs)(d.xu,{color:"default",rounding:3,height:48,width:F,justifyContent:"center",alignItems:"center",alignContent:"center",display:"flex",children:[(0,c.jsx)(d.xu,{rounding:3,height:40,width:40,minWidth:40,overflow:"hidden",display:"flex",direction:"row",marginStart:N?1:0,children:(0,c.jsx)(d.zd,{wash:!0,height:40,width:40,children:(0,c.jsx)(d.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:z.url||""})})}),N&&(0,c.jsxs)(d.xu,{display:"flex",direction:"column",flex:"grow",alignContent:"center",justifyContent:"center",marginStart:1,children:[(0,c.jsx)(r.Z,{showSalesPrice:!0,productDetails:O,type:"text"}),j&&(0,c.jsx)(d.xv,{size:"100",lineClamp:1,children:j})]})]})})})})})]})}},424624:(e,t,i)=>{i.d(t,{Z:()=>s,n:()=>r});var n=i(875108);function o({pinTagIds:e=[],pinTags:t,taggedObjects:i},o){return e.filter((function(e){const i=(0,n.Z)(t[e])&&"deleted"!==t[e].status;return o?i:!i})).map((e=>t[e].taggedObjectIds.map((t=>{var n;return{taggedObjectId:t,pinTagId:e,status:null===(n=i[t])||void 0===n?void 0:n.status}})))).reduce(((e,t)=>[...e,...t]),[])}function s(e){return o(e,!0)}function r(e){return o(e,!1).filter((e=>["saved","created"].includes(e.status)))}},807592:(e,t,i)=>{function n(e){const{max_price:t,min_price:i,price:n}=e;return t&&i?`${i}-${t}`:n}i.d(t,{Z:()=>n})},247371:(e,t,i)=>{i.r(t),i.d(t,{SendButton:()=>u,default:()=>h});var n=i(790904),o=i(215292),s=i(883119),r=i(785893);const a={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};function l({accessibilityLabel:e,buttonColor:t,buttonText:i,handleClick:n,icon:l}){return(0,r.jsx)(o.q,{children:({active:o,focused:d,hovered:c,onBlur:u,onFocus:h,onMouseDown:p,onMouseEnter:_,onMouseLeave:g,onMouseUp:m})=>{let f={borderRadius:24};if(c){const e="primary"===t?"rgb(216,0,33)":"rgb(226, 226, 226)";f={...f,backgroundColor:e}}if(o){const e="primary"===t?"rgb(207,0,31)":"rgb(218, 218, 218)";f={...f,backgroundColor:e}}return d&&(f={...f,...a}),(0,r.jsx)("button",{"aria-label":e,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"},onBlur:u,onFocus:h,onMouseDown:p,onMouseEnter:_,onMouseLeave:g,onMouseUp:m,onClick:n,children:(0,r.jsx)(s.xu,{color:t,rounding:2,dangerouslySetInlineStyle:{__style:f},children:(0,r.jsxs)(s.xu,{display:"flex",minHeight:40,dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},children:["share"===l&&(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.JO,{accessibilityLabel:"",icon:"share",color:"default",size:18}),(0,r.jsx)(s.xu,{paddingX:3})]}),(0,r.jsx)(s.xv,{align:"center",color:"primary"===t?"light":"default",weight:"bold",children:i})]})})})}})}var d=i(2396),c=i(898781);const u=({buttonType:e,iconColor:t,handleSendShareFlyoutButtonClick:i,iconOnly:o,buttonText:s,tabIndex:a=0})=>{const d=(0,c.ZP)(),u="icon"===e,h={accessibilityLabel:d.bt("Invia", "Send", "Accessible label for button to send this pin", undefined, true),handleClick:i,tabIndex:a};return u?(0,r.jsx)(n.Z,{...h,testId:"closeup-share-button",icon:"share",iconOnly:o,iconColor:t,buttonText:s}):(0,r.jsx)(l,{...h,icon:"share",buttonColor:"secondary",buttonText:d.bt("Invia", "Send", "Text for button to send this pin", undefined, true)})},h=(0,d.Z)(u)},669765:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(883119),s=i(785893);function r({accessibilityLabel:e,arrowOnly:t=!1,direction:i,isOpaque:n,marginEnd:r,marginStart:a,padding:l,onClick:d,show:c}){const u="back"===i;return(0,s.jsx)(o.xu,{position:"absolute",left:u,right:!u,top:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundImage:n?void 0:`linear-gradient(to ${u?"left":"right"}, transparent 0%, #fff 90%)`,left:null!=l?l:void 0}},marginEnd:r,marginStart:a,children:(0,s.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",children:c&&(0,s.jsx)(o.hU,{accessibilityLabel:e,bgColor:t?"transparent":"white",icon:u?"arrow-back":"arrow-forward",iconColor:"darkGray",onClick:d,size:"lg"})})})}var a=i(251183);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.Component{constructor(...e){super(...e),l(this,"state",{hasLoggedScroll:!1,showBack:!1,showForward:!1}),l(this,"saveScrollBarRef",(e=>{this.scrollbar=e})),l(this,"refreshArrows",(()=>{const{showBack:e,showForward:t}=this.state;if(this.scrollbar){const{offsetWidth:i,scrollLeft:n,scrollWidth:o}=this.scrollbar,s=n>0,r=n+i<o;s===e&&r===t||this.setState({showBack:s,showForward:r})}})),l(this,"scroll",(e=>{const{logScroll:t}=this.props;this.scrollbar&&0!==e&&(t&&!this.state.hasLoggedScroll&&(t(),this.setState({hasLoggedScroll:!0})),this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.scrollAnimationManager=(0,a.Z)(this.scrollbar,e,0,{onAnimationComplete:()=>{this.refreshArrows(),this.scrollAnimationManager=null}}),this.scrollAnimationManager.start())})),l(this,"handleResizeOrScroll",(()=>this.refreshArrows())),l(this,"handleBackArrowClick",(()=>{this.scrollbar&&this.scroll(-150)})),l(this,"handleForwardArrowClick",(()=>{this.scrollbar&&this.scroll(150)}))}componentDidMount(){this.props.hideArrows||(window.addEventListener("resize",this.handleResizeOrScroll),this.refreshArrows())}componentWillUnmount(){this.props.hideArrows||window.removeEventListener("resize",this.handleResizeOrScroll)}render(){const{accessibilityBackLabel:e,accessibilityForwardLabel:t,arrowOnly:i=!1,columnWidth:n,gutterWidth:a,hideScrollbar:l,items:d,marginEnd:c,marginStart:u,paddingY:h}=this.props,{showBack:p,showForward:_}=this.state;return(0,s.jsxs)("div",{className:"ShopCarousel-OuterScrollContainer",style:{position:"relative",width:n,background:"white"},children:[(0,s.jsx)("div",{onScroll:this.handleResizeOrScroll,id:"InnerScrollContainer",ref:this.saveScrollBarRef,className:"ShopCarousel-InnerScrollContainer",style:{__style:{overflowX:l?"hidden":"auto",cursor:"default"}},children:(0,s.jsx)(o.xu,{display:"flex",position:"relative",paddingY:h,children:d.map(((e,t)=>{const i={__style:{marginRight:t===d.length-1?0:a}};return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:i,children:e},t)}))})}),p&&(0,s.jsx)(r,{accessibilityLabel:e,arrowOnly:i,direction:"back",isOpaque:!0,marginStart:u,onClick:this.handleBackArrowClick,show:!0}),_&&(0,s.jsx)(r,{accessibilityLabel:t,arrowOnly:i,direction:"forward",isOpaque:!0,onClick:this.handleForwardArrowClick,marginEnd:c,show:!0})]})}}const c=d},630767:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(58545),s=i(969690),r=i(383894),a=i(883119),l=i(785893);const d=({children:e,description:t,error:i,id:o,label:s,required:r,onLabelTouch:d})=>(0,l.jsxs)(n.Fragment,{children:[(s||r)&&(0,l.jsx)(a.__,{htmlFor:o,children:(0,l.jsx)(a.xu,{marginBottom:1,children:(0,l.jsxs)(a.xv,{color:i?"error":"default",children:[s,r&&(0,l.jsx)(a.xv,{color:"error",inline:!0,weight:"bold",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"*"})})]})})}),e,(!!i||!!t)&&(0,l.jsx)(a.__,{htmlFor:o,children:(0,l.jsx)(a.xu,{marginTop:1,children:d?(0,l.jsx)(a.iP,{onTap:d,children:(0,l.jsx)(a.xv,{color:i?"error":"default",size:"200",children:i||t})}):(0,l.jsx)(a.xv,{color:i?"error":"default",size:"200",children:i||t})})})]});var c=i(69119);function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class h extends n.Component{constructor(...e){super(...e),u(this,"setTextFieldInputRef",(e=>{const{forwardedRef:t}=this.props;t(e||null)})),u(this,"handleBlur",(({event:e})=>{const{onBlur:t}=this.props;t&&t(e)})),u(this,"handleChange",(({event:e})=>{const{onChange:t}=this.props;t&&t(e)})),u(this,"handleFocus",(({event:e})=>{const{onFocus:t}=this.props;t&&t(e)})),u(this,"handleKeyDown",(({event:e})=>{const{onKeyDown:t}=this.props;t&&t(e)}))}render(){const{accessibilityLabelIcon:e,disabled:t,icon:i,id:n,isRTL:o=!1,onClick:s,placeholder:r,value:d}=this.props;return(0,l.jsx)(a.iP,{onTap:s,children:(0,l.jsxs)(a.xu,{alignItems:"center",column:12,flex:"grow",display:"flex",position:"relative",children:[(0,l.jsx)(a.xu,{width:"100%",children:(0,l.jsx)(a.nv,{disabled:t,id:n,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:r,ref:this.setTextFieldInputRef,size:"lg",value:d})}),(0,l.jsx)(a.xu,{position:"absolute",right:!o,left:o,children:(0,l.jsx)(a.xu,{position:"relative",marginEnd:4,children:(0,l.jsx)(a.JO,{accessibilityLabel:e,color:"default",icon:"clock"===i||"arrow-down"===i?i:"calendar",inline:!0})})})]})})}}const p=(0,n.forwardRef)(((e,t)=>(0,l.jsx)(h,{...e,forwardedRef:t})));var _=i(780280),g=i(898781);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends n.Component{constructor(...e){super(...e),m(this,"state",{showFlyout:!1}),m(this,"setTimeFieldRef",(e=>{this.timeFieldRef=e})),m(this,"handleChange",((e,t)=>{const{onChange:i}=this.props;this.handleHideFlyout(),i({event:e,value:t})})),m(this,"handleShowFlyout",(()=>{this.setState({showFlyout:!0})})),m(this,"handleHideFlyout",(()=>{this.setState({showFlyout:!1})}))}render(){const{error:e,id:t,idealDirection:i,interval:n,minTime:r,maxTime:c,placeholder:u,value:h,disabled:g=!1}=this.props,{showFlyout:m}=this.state,f=[],x=(0,s.Z)(c,r)/n;for(let s=0;s<x;s+=1){const e=(0,o.Z)(r,s*n);f.push(e)}return(0,l.jsx)(d,{error:e,id:t,children:(0,l.jsx)(_.LC,{children:e=>(0,l.jsxs)(a.xu,{position:"relative",children:[(0,l.jsx)(p,{disabled:g,accessibilityLabelIcon:this.props.i18n.bt("Seleziona un orario", "Select a time", "timeField.TextFieldWrapper.accessibilityLabel.clockIcon", undefined, true),id:t,ref:this.setTimeFieldRef,onFocus:this.handleShowFlyout,placeholder:u,isRTL:e.isRTL,value:h?h.toLocaleTimeString([e.locale],{hour:"2-digit",minute:"2-digit"}):"",icon:"clock"}),m&&(0,l.jsx)(a.Lt,{id:"time-field-dropdown",anchor:this.timeFieldRef,idealDirection:i,onDismiss:this.handleHideFlyout,zIndex:new a.Ry(1e3),isWithinFixedContainer:!0,children:f.map((t=>{const i=t.toLocaleTimeString([e.locale],{hour:"2-digit",minute:"2-digit"});return(0,l.jsx)(a.Lt.Item,{onSelect:({event:e})=>this.handleChange(e,t),option:{label:i,value:i},children:(0,l.jsx)(a.xv,{color:"default",size:"200",weight:"bold",children:i})},t.getTime())}))})]})})})}}function x(e){const t=(0,g.ZP)();return(0,l.jsx)(f,{...e,i18n:t})}m(f,"defaultProps",{interval:30,minTime:(0,c.Z)(new Date),maxTime:(0,r.Z)(new Date)})},157796:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(883119),s=i(785893);function r({color:e="red",duration:t,finalProgress:i,shape:r="pill"}){const[a,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=setTimeout((()=>{l(!0)}),0);return()=>{clearTimeout(e)}}),[]);const d="pill"===r;return(0,s.jsx)(o.xu,{color:e,height:d?8:6,rounding:d?"pill":2,width:`${i}%`,dangerouslySetInlineStyle:{__style:{transform:d?`translateX(${a?"-5px":"-100%"})`:`scaleX(${a?1:0})`,transformOrigin:"left",transitionDuration:`${t}ms`,transitionTimingFunction:"ease-in"}}})}},299487:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(56641),o=i(366284);let s;const r={},a="https://chrome.google.com/webstore/detail/gpdjojdkbbmdfjfahjcgigfpmkopogic",l="https://assets.pinterest.com/ext/Pinterest_Firefox.xpi",d="https://safari-extensions.apple.com/details/?id=com.pinterest.extension-HWZFLG9PNK",c="https://about.pinterest.com/assets/ext/Pinterest-IE-0.0.4.exe",u="https://addons.opera.com/en/extensions/details/pinterest-8/?display=en",h="https://microsoftedge.microsoft.com/addons/detail/pinterest-save-button/bkgoflemacdadndiohhdnphcmdhacabg/",p={[o.oi.CHROME]:{url:a,newWindow:!0},[o.oi.FIREFOX]:{url:l,newWindow:!1},[o.oi.SAFARI]:{url:d,newWindow:!0},[o.oi.IE]:{url:c,newWindow:!1},[o.oi.OPERA]:{url:u,newWindow:!0},[o.oi.EDGE]:{url:h,newWindow:!0}};r.handleExtensionInstall=(e,t)=>{const i=(0,o.u$)(e),s=function(e){return e?p[e].url:void 0}(i);s&&((0,n.Z)(s,function(e){return e?p[e].newWindow:void 0}(i)),t())},r.isExtensionInstalled=()=>s,r.isBrowserExtensionSupported=e=>(0,o.i7)(e)||(0,o.vU)(e)||(0,o.un)(e),r.extensionReady=(e,t=100)=>new Promise((i=>{setTimeout((()=>{document.body&&(s=document.body.hasAttribute("data-pinterest-extension-installed"),r.isBrowserExtensionSupported(e)||(s=!0),i(s))}),t)})),r.initBrowserExtension=()=>{Promise.resolve().then(i.bind(i,422722)).then((({default:e})=>{e.logToServer(e.SERVER_LOG_TYPE.BROWSER_EXTENSION,e.HTTP_METHOD.POST,{browser_extension_installed:s})}))};const _=r},35495:(e,t,i)=>{i.d(t,{GT:()=>g,Gy:()=>a,Kl:()=>x,QY:()=>_,RR:()=>d,SP:()=>u,Sn:()=>f,Zs:()=>m,bA:()=>h,fz:()=>p,i8:()=>l,nn:()=>r,qN:()=>c});var n=i(834911),o=i(835209),s=i(229428);const r=e=>!!e&&(e.shopping_flags||[]).includes(2),a=e=>{var t,i;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null!==(t=null===(i=e.rich_metadata)||void 0===i?void 0:i.products)&&void 0!==t?t:[]).length>0},l=e=>{var t;return null===(t=e.aggregated_pin_data)||void 0===t?void 0:t.is_shop_the_look},d=e=>{var t,i;return null===(t=e.rich_summary)||void 0===t||null===(i=t.aggregate_rating)||void 0===i?void 0:i.rating_value},c=e=>e.is_oos_product,u=e=>e.is_stale_product,h=e=>c(e)||u(e),p=e=>{var t;const i=(0,o.Z)({richPinData:e.rich_summary||{}});return null==i||null===(t=i.brand)||void 0===t?void 0:t.name},_=e=>{var t,i,n,o;const s=null===(t=e.link_domain)||void 0===t||null===(i=t.official_user)||void 0===i?void 0:i.full_name;if(s)return s;const r=null===(n=e.rich_summary)||void 0===n?void 0:n.site_name;if(r)return r;if(e.domain){if("Uploaded by user"===e.domain){return((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name}return e.domain}const a=null===(o=e.via_pinner)||void 0===o?void 0:o.full_name;return e.is_repin&&a?a:void 0},g=e=>{if(e){const t=e.shopping_flags||[];return[...t,...!t.includes(10)&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images?[10]:[]]}return[]};function m(e,t){var i,o,r;const a=g(e);let l={...null==t||null===(i=t.contextLogData)||void 0===i?void 0:i.commerce_data};a.includes(2)&&(l={...l,pin_is_shop_the_look:!0}),a.includes(1)&&(l={...l,is_available:!0}),a.includes(5)&&(l={...l,is_product_pin_v2:!0}),a.includes(6)&&(l={...l,is_rich_product_pin:!0}),a.includes(10)&&(l={...l,is_organic_product_carousel:!0});if((!!e.visual_objects&&(0,s.k)(e.visual_objects)||[]).some((e=>!0===e.is_stela))&&(l={...l,pin_is_stela:!0}),e.is_eligible_for_pdp_plus||e.is_eligible_for_pdp||e.is_oos_product||e.is_stale_product){e.is_oos_product?l={...l,pin_show_pdp_oos:!0}:e.is_stale_product?l={...l,pin_show_pdp_stale:!0}:e.is_eligible_for_pdp&&(l={...l,pin_show_pdp:!0});const i=(0,n.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:e.rich_metadata,richSummary:e.rich_summary});if(null!=t&&t.isPdpPlus&&e.is_eligible_for_pdp_plus){var d,c,u,h,p,_,m,f,x;l={...l,is_pdpplus:!0};const t=null===(d=e.rich_metadata)||void 0===d||null===(c=d.products)||void 0===c?void 0:c[0],n=null==t||null===(u=t.shipping_info)||void 0===u?void 0:u.free_shipping_price,o=null==t||null===(h=t.shipping_info)||void 0===h?void 0:h.free_shipping_value,s=(null==t||null===(p=t.variant_set)||void 0===p||null===(_=p.variants)||void 0===_?void 0:_.length)||0,r=(e=>{const t=(null==e?void 0:e.variants)||[],i=(null==e?void 0:e.dimension_metadata)||[];return Array.isArray(t)&&Array.isArray(i)?i.reduce(((e,i)=>i.name&&Array.isArray(i.values)?e+i.values.filter((e=>t.find((t=>{var n,o;return(null===(n=t.dimensions)||void 0===n?void 0:n[null!==(o=i.name)&&void 0!==o?o:""])===e})))).length:e),0):0})(null==t?void 0:t.variant_set),a=(null==t||null===(m=t.variant_set)||void 0===m||null===(f=m.dimension_metadata)||void 0===f?void 0:f.length)||0,g=null==t||null===(x=t.brand)||void 0===x?void 0:x.signature;var b;if(g&&(l={...l,brand_signature:g}),i)l={...l,carousel_image_count:null===(b=i.carousel_slots)||void 0===b?void 0:b.length};n&&(l={...l,free_shipping_price:n}),o&&(l={...l,free_shipping_value:o}),s&&(l={...l,num_variants:s}),r&&(l={...l,valid_dimension_option_count:r}),a&&(l={...l,total_dimension_option_count:a})}else if(i){var y;l={...l,image_count:null===(y=i.carousel_slots)||void 0===y?void 0:y.length},l={...l,image_index:i.index}}}const v=null===(o=e.rich_summary)||void 0===o||null===(r=o.products)||void 0===r?void 0:r[0];null!=v&&v.item_id&&(l={...l,item_id:v.item_id}),null!=v&&v.item_set_id&&(l={...l,item_set_id:v.item_set_id});return(e.aggregated_pin_data||{}).is_shop_the_look&&(l={...l,pin_is_shop_the_look:!0}),e.story_pin_data&&(l={...l,story_pin_id:e.story_pin_data.id}),l}function f(e){const t=JSON.stringify(e);return"{}"!==t?{commerce_data:t}:null}const x=(e,t)=>e?f(m(e,t)):null},27255:(e,t,i)=>{i.d(t,{Z:()=>n});const n={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY:"_video_autoplay_state",VIDEO_IFRAME_ID:"video-iframe"}},155378:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var n=i(667294),o=i(319915),s=i(172071),r=i(379764),a=i(214494),l=i(947599),d=i(941646),c=i(499128),u=i(50286),h=i(898781),p=i(784590),_=i(19121),g=i(349700),m=i(966113),f=i(80816),x=i(407043),b=i(343341),y=i(883119),v=i(785893);const P=(0,n.lazy)((()=>Promise.all([i.e(80582),i.e(13047)]).then(i.bind(i,380582)))),w=new y.H3([r.Z]);function I({handleComplete:e,isNag:t}){const i=(0,u.ZP)(),r=(0,_.Z)(),{logContextEvent:I}=(0,x.v)(),A=(0,h.ZP)(),[E,C]=(0,n.useState)(!0),[S,j]=(0,n.useState)(!1),{showOneToast:T}=(0,b.F9)(),D=(0,p.Z)({name:"UserResource",options:{user_id:r.id||""}}),k="desktop"===i;(0,n.useEffect)((()=>{I({event_type:13,component:13716,view_type:474})}),[]);const z=(0,v.jsxs)(y.xv,{align:k?"start":"center",children:[A.bt("Usiamo i cookie per fornire annunci ed esperienze personalizzate e per analizzare il traffico sul nostro sito.", "We use cookies to deliver personalized ads and experiences, and to analyze traffic on our site.", "homeFeed.cookiesConsentBanner.bannerText", undefined, true)," ",(0,g.nk)(A.bt("Per ulteriori informazioni leggi le nostre {{ cookiePolicyLink }}.", "Read our {{ cookiePolicyLink }} for more information.", "homeFeed.cookiesConsentBanner.readCookiePolicyText", undefined, true),{cookiePolicyLink:(0,v.jsx)(y.xv,{inline:!0,weight:"bold",children:(0,v.jsx)(y.rU,{href:m._I,display:"inlineBlock",target:"blank",underline:"hover",children:A.bt("norme sui cookie", "cookie policy", "homeFeed.cookiesConsentBanner.cookiePolicyLink", undefined, true)},"cookie-policy-link")})})]}),O=(0,v.jsxs)(y.kC,{direction:k?"row":"column",gap:k?{row:2,column:0}:{column:4,row:0},children:[(0,v.jsx)(y.zx,{fullWidth:!0,onClick:()=>{I({event_type:101,component:13716,view_type:474,element:11984}),s.Z.increment("webapp.updateCookiePreferences",.1,{allow_analytic_cookies:"true",allow_marketing_cookies:"true",allow_personalization_cookies:"true",location:"app_packages_CookieConsent_Banner_handleAcceptAll"}),a.Z.create("UserSettingsResource",{allow_analytic_cookies:!0,allow_marketing_cookies:!0,allow_personalization_cookies:!0,surface_tag:f.i.HOLISTIC_PROFILE_PROMPT}).callUpdate().then((()=>{D.refresh(),T((({hideToast:e})=>(0,v.jsx)(c.ZP,{duration:3e3,onHide:e,text:A.bt("Abbiamo salvato le tue preferenze sui cookie. Puoi modificarle in qualsiasi momento nella sezione impostazioni del profilo.", "We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "homeFeed.cookiesConsentBanner.acceptedAllToastText", undefined, true)}))),e()}))},size:k?"lg":"md",text:A.bt("Accetta tutti", "Accept all", "navFooter.cookieConsentBanner.acceptAllButton", undefined, true)}),(0,v.jsx)(y.zx,{fullWidth:!0,onClick:()=>{I({event_type:101,component:13716,view_type:474,element:11985}),s.Z.increment("webapp.updateCookiePreferences",.1,{allow_analytic_cookies:"false",allow_marketing_cookies:"false",allow_personalization_cookies:"false",location:"app_common_react_components_CookieConsent_Banner_handleRejectAll"}),a.Z.create("UserSettingsResource",{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1,surface_tag:f.i.HOLISTIC_PROFILE_PROMPT}).callUpdate().then((()=>{D.refresh(),T((({hideToast:e})=>(0,v.jsx)(c.ZP,{duration:3e3,onHide:e,text:A.bt("Abbiamo salvato le tue preferenze sui cookie. Puoi modificarle in qualsiasi momento nella sezione impostazioni del profilo.", "We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "homeFeed.cookiesConsentBanner.acceptedAllToastText", undefined, true)}))),e()}))},size:k?"lg":"md",text:A.bt("Rifiuta tutto", "Reject all", "navFooter.cookieConsentBanner.rejectAllButton", undefined, true)}),(0,v.jsx)(y.zx,{fullWidth:!0,onClick:()=>{I({event_type:101,component:13716,view_type:474,element:11986}),j(!0),k||C(!1)},size:k?"lg":"md",text:A.bt("Fammi scegliere", "Let me choose", "navFooter.cookieConsentBanner.manageCookiesButton", undefined, true)})]});return(0,v.jsxs)(n.Fragment,{children:[E&&(k?(0,v.jsx)(y.xu,{paddingX:2,smPaddingX:6,paddingY:2,smPaddingY:t?2:0,children:(0,v.jsxs)(y.xu,{alignItems:"center",borderStyle:"sm","data-test-id":"cookie-consent-banner",display:"flex",direction:"column",smDirection:"row",justifyContent:"between",marginBottom:t?0:6,overflow:"hidden",padding:t?3:6,position:"relative",rounding:4,children:[(0,v.jsx)(y.xu,{display:"flex",marginEnd:0,smMarginEnd:7,children:z}),(0,v.jsx)(y.xu,{alignItems:"center",display:"flex",flex:"none",justifyContent:"center",marginTop:4,smMarginTop:0,children:O})]})}):(0,v.jsx)(y.mh,{zIndex:w,children:(0,v.jsx)(y.xu,{bottom:!0,marginBottom:2,position:"fixed",width:"100%",children:(0,v.jsxs)(y.xu,{alignItems:"center",borderStyle:"shadow",color:"default",direction:"column",display:"flex",marginEnd:"auto",marginStart:"auto",padding:6,rounding:6,width:"95%",children:[z,(0,v.jsx)(y.xu,{marginTop:4,minWidth:240,children:O})]})})})),S&&(0,v.jsx)(o.Z,{name:"SafeSuspense_CookieConsentBanner_SettingsModal",children:(0,v.jsx)(l.Z,{children:(0,v.jsx)(d.Z,{id:"settings-modal",children:(0,v.jsx)(P,{dismissIcon:"cancel",onClose:()=>j(!1),handleComplete:e})})})})]})}},199324:(e,t,i)=>{i.d(t,{Z:()=>n});const n=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"Helvetica",'" Pro W3"','"Hiragino Kaku Gothic Pro"',"","Meiryo",'" "',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},918301:(e,t,i)=>{i.d(t,{CB:()=>p,y9:()=>h});var n=i(667294),o=i(689070),s=i(121151),r=i(898781),a=i(883119),l=i(785893);const d=({onConfirm:e})=>{const t=(0,r.ZP)(),[i,d]=(0,n.useState)(!1),c=()=>{d(!0),(0,o.Z)({url:"/v3/users/email/verify/resend/",method:"POST"})};return(0,l.jsx)(s.ZP,{accessibilityModalLabel:t.bt("Verifica l'email", "Verify your email", "Accessible label for email verification being required", undefined, true),onDismiss:e,heading:t.bt("Verifica l'email", "Verify your email", "Accessible label for email verification being required", undefined, true),footer:(0,l.jsxs)(a.kC,{justifyContent:"end",gap:{row:2,column:0},children:[i?(0,l.jsx)(a.zx,{fullWidth:!0,size:"lg",color:"gray",text:t.bt("Email inviata", "Email sent", "Button text for verification email being sent", undefined, true),disabled:i,onClick:c}):(0,l.jsx)(a.zx,{fullWidth:!0,size:"lg",color:"gray",text:t.bt("Invia di nuovo email", "Resend email", "Button text for resending email verification email", undefined, true),disabled:i,onClick:c}),(0,l.jsx)(a.zx,{fullWidth:!0,size:"lg",color:"red",text:t.bt("Ok", "Got it", "Button text for acknowledging email verificaiton is required", undefined, true),onClick:e})]}),role:"alertdialog",children:(0,l.jsx)(a.xu,{padding:8,children:(0,l.jsx)(a.xv,{align:"center",size:"300",children:t.bt("Mantieni il tuo account sicuro verificando il tuo indirizzo email. Controlla la posta associata a questo account per ricevere un'email da parte nostra e continuare a usare Pinterest.", "Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.", "Inform users that they need to verify their email to keep their account secure and continue using Pinterest", undefined, true)})})})};var c=i(425288);const{Provider:u,useHook:h}=(0,c.Z)("EmailVerificationReminderModal");function p({children:e}){const[t,i]=(0,n.useState)(!1),o=(0,n.useMemo)((()=>({showEmailVerificationReminderModal:()=>{i(!0)}})),[]);return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(u,{value:o,children:e}),t&&(0,l.jsx)(d,{onConfirm:()=>{i(!1)}})]})}},403368:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(898781),s=i(883119),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l=16,d=32;class c extends n.Component{constructor(...e){super(...e),a(this,"state",{isHovering:!1}),a(this,"handleMouseEnter",(e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)})),a(this,"handleMouseLeave",(e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)}))}render(){const{forwardedRef:e,icon:t,onClick:i,onMouseDown:n,onMouseUp:o,selected:a,style:c,text:u,x:h,y:p,zIndex:_,backdropDiameter:g=d,dotDiameter:m=l}=this.props,{isHovering:f}=this.state,x=f?g+4:g,b={zIndex:_,position:"absolute",top:p-x/2,left:h-x/2,outline:"none"},y={backgroundColor:"rgba(0, 0, 0, 0.1)",width:x,height:x,border:"none",borderRadius:x,cursor:i?"pointer":"default"};return(0,r.jsx)("div",{"data-test-id":"flashlight-dot",onClick:i,onKeyPress:i,onMouseDown:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:o,ref:e,role:"button",style:b,tabIndex:"0","aria-label":this.props.i18n.bt("Cerca questo articolo", "Search this item", "flashlight.dot.a11ylabel", undefined, true),children:(0,r.jsx)("div",{"data-test-id":"flashlight-dot-style",style:{...y,...c},children:(0,r.jsxs)(s.xu,{alignItems:"center",borderStyle:"none",color:"default",display:"flex",height:m,justifyContent:"center",position:"absolute",padding:0,width:m,dangerouslySetInlineStyle:{__style:{boxShadow:a?"0 0 0 3px #e60023":"none",borderRadius:m,top:(x-m)/2,left:(x-m)/2}},children:[!!u&&(0,r.jsx)(s.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:u}),t&&(0,r.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Tag di ancoraggio", "Tag anchor", "accessibility label for an anchor for an object in a pin", undefined, true),color:"error",icon:t,size:m/2,inline:!0})]})})})}}const u=(0,n.forwardRef)(((e,t)=>{const i=(0,o.ZP)();return(0,r.jsx)(c,{...e,forwardedRef:t,i18n:i})}))},558068:(e,t,i)=>{i.d(t,{Hv:()=>l,aX:()=>u,nK:()=>h});var n=i(667294),o=i(425288),s=i(616550),r=i(785893);const{Provider:a,useHook:l}=(0,o.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),d=e=>e&&e.pathname?e.pathname+(e.search||""):"";function c(e,t){var i;const n={action:t.type,location:t.location,match:t.match};if(t.location===(null===(i=e.current)||void 0===i?void 0:i.location))return e;switch(t.type){case"POP":return e.forward.length>0&&d(e.forward[0].location)===d(n.location)?{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous}:{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:n,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:n};default:return e}}function u(){const{current:e,previous:t}=l();return(0,n.useMemo)((()=>e?t.concat(e):t),[e,t])}function h({children:e}){const t=(0,s.useHistory)(),i=(0,s.useLocation)(),o=(0,s.useRouteMatch)(),l={forward:[],current:{action:t.action,location:i,match:o},previous:[]},[d,u]=(0,n.useReducer)(c,l);return(0,n.useEffect)((()=>{const{action:e}=t;u({type:e,location:i,match:o})}),[i]),(0,r.jsx)(a,{value:d,children:e})}},391254:(e,t,i)=>{i.d(t,{Z:()=>s});i(441143);var n=i(785893);class o{static factory(e){return e instanceof o?e:new o(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function s(e){const{css:t,unsafeCSS:i,...s}=e,r=String(t||"")||i||"";return!!r?(0,n.jsx)("style",{...s,dangerouslySetInnerHTML:{__html:String(o.factory(r))}}):null}},966224:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(898781),o=i(883119),s=i(785893);function r({accessibilityLabel:e,fixedPosition:t,rounding:i}){const r=(0,n.ZP)();return(0,s.jsxs)(o.xu,{children:[(0,s.jsx)(o.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,opacity:1,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new o.Ry(101),children:(0,s.jsx)(o.$j,{accessibilityLabel:e||r.bt("Caricamento", "Loading", "Label for loading spinner", undefined, true),show:!0})}),(0,s.jsx)(o.xu,{bottom:!0,color:"default",left:!0,opacity:.7,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new o.Ry(100),rounding:i})]})}},583375:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),o=i(785893);function s({fillColor:e,size:t,noCircle:i}){const s=(0,n.ZP)();return(0,o.jsxs)("svg",{height:t,style:{display:"block"},viewBox:i?"3 3 70 70":"-3 -3 82 82",width:t,children:[(0,o.jsx)("title",{children:s.bt("Logo Pinterest", "Pinterest logo", "Accessibility label for Pinterest icon", undefined, true)}),i?null:(0,o.jsx)("circle",{cx:"38",cy:"38",fill:e?"transparent":"white",r:"40"}),(0,o.jsx)("path",{d:"M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",fill:null!=e?e:"#e60023",fillRule:"evenodd"})]})}},241244:(e,t,i)=>{i.d(t,{N:()=>r,Z:()=>s});var n=i(883119),o=i(785893);function s({children:e,fullWidth:t}){return(0,o.jsx)(n.xu,{"data-test-id":"pointer-events-wrapper",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},children:e})}function r({children:e,enabled:t}){return t?(0,o.jsx)(s,{children:e}):e}},335174:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(483205);const o=e=>`@keyframes shopButtonSlideInThenOut {\n    0% {\n      width: 0px;\n    }\n\n    15% {\n      width: ${e+n.DY}px;\n    }\n\n    85% {\n      width: ${e+n.DY}px;\n    }\n\n    100% {\n      width: 0px;\n    }\n  }\n\n  @keyframes shopButtonSlideIn {\n    0% {\n      width: 48px;\n    }\n\n    100% {\n      width: ${e+n.Nv}px;\n    }\n  }\n\n  @keyframes shopButtonSlideOut {\n    0% {\n      width: ${e+n.Nv}px;\n    }\n\n    100% {\n      width: 48px;\n    }\n  }\n\n  @keyframes revealShopText {\n    from {\n      clip-path: inset(0 100% 0 0);\n    }\n    to {\n      clip-path: inset(0 0 0 0);\n    }\n  }\n\n\n  @keyframes stelaSlideIn {\n    0% {\n        opacity: 0;\n    }\n\n    100% {\n        opacity: 1;\n    }\n}\n\n@keyframes stelaSlideOut {\n    0% {\n        opacity: 1;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n@keyframes stelaSlideInThenOut {\n    0% {\n        opacity: 0;\n    }\n\n    15% {\n        opacity: 0;\n    }\n\n    25% {\n        opacity: 1;\n    }\n\n    50% {\n        opacity: 1;\n    }\n\n    75% {\n        opacity: 1;\n    }\n\n    85% {\n        opacity: 0;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n  `},325016:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(335174),s=i(391254),r=i(112690),a=i(883119),l=i(483205),d=i(241244),c=i(785893);function u({alwaysShow:e,contextLogData:t,enablePointerEvents:i=!0,imageSignature:u,isSelected:h,onStelaDotAnimationComplete:p,stelaDotAnimationType:_}){const[g,m]=(0,n.useState)(!1),f=(0,r.Z)();(0,n.useEffect)((()=>{g||m(!0)}),[]);let x;(0,n.useEffect)((()=>{f({event_type:120,view_type:3,aux_data:{...t},...t})}),[]),"in"===_?x="stelaSlideIn .3s ease-in-out forwards":"out"===_?x="stelaSlideOut .3s ease-in-out forwards":"inOut"===_?x="stelaSlideInThenOut 3s ease-in-out forwards":"none"===_&&(x="none");const b=e?"black":"white",y=e?{opacity:1}:{animation:x,opacity:"none"===x?0:void 0};return(0,c.jsx)(n.Fragment,{children:(0,c.jsxs)(d.N,{enabled:i,children:[(0,c.jsx)(s.Z,{unsafeCSS:(0,o.Z)()}),(0,c.jsx)(a.xu,{"data-test-id":"closeup-stela-dot",height:l.b9,width:l.b9,onAnimationEnd:()=>{p&&"inOut"===_&&p()},dangerouslySetInlineStyle:{__style:y},children:(0,c.jsxs)("svg",{fill:"none",height:"36",viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("g",{filter:"url(#filter0_d)",children:(0,c.jsx)("circle",{cx:"18",cy:"18",fill:h?b:"white",r:"8"})}),(0,c.jsx)("defs",{children:(0,c.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36",id:"filter0_d",width:"36",x:"0",y:"0",children:[(0,c.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,c.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,c.jsx)("feOffset",{}),(0,c.jsx)("feGaussianBlur",{stdDeviation:"5"}),(0,c.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,c.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),(0,c.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})]})})]})})]})})}},483205:(e,t,i)=>{i.d(t,{DY:()=>r,Nv:()=>o,RZ:()=>s,b9:()=>n});const n=36,o=44,s=446,r=16},941646:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){const{children:t,display:i,id:s}=e;return(0,o.jsx)(n.xu,{"data-test-id":s,display:i,children:t})}},55259:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(794230),o=i(619937);const s={campaignFilter:"all",adGroupFilter:"all",adFilter:"all"},r=e=>{let t={};return e&&(t={objectiveTypes:[e]}),t},a={overview:()=>"/",reporting:e=>{const t=e.objectiveType||null;delete e.objectiveType;const i={...e,...r(t)};return(0,n.Z)("/reporting/campaigns/",i)},reportingAdGroup:e=>{const{campaignId:t,objectiveType:i,showAllEntities:o,adGroupId:a,message:l}=e,d=a?{adGroupIds:[a]}:{},c={campaignIds:[t],...o?s:{},...r(i),...d,message:l};return(0,n.Z)("/reporting/adgroups/",c)},campaign:e=>{const{id:t,objectiveType:i}=e;return(0,n.Z)("/reporting/adgroups/",{campaignIds:[t],...r(i)})},editCampaign:e=>e.isAutomatedCampaign?a.editAutomated({campaignId:e.id,view:"campaign"}):a.editV2({campaignId:e.id,view:"campaign"}),adgroup:e=>{const{id:t,objectiveType:i,showAllEntities:o,pinPromotionId:a,campaignId:l}=e;if("TEMPORARY_SHOPPING"===i||"CATALOG_SALES"===i)return(0,n.Z)("/reporting/productgroups/",{adGroupIds:[t],...r(i)});{const e=o?s:{},d=l?{campaignIds:[l]}:{},c=a?{pinPromotionIds:[a]}:{};return(0,n.Z)("/reporting/ads/",{adGroupIds:[t],...r(i),...e,...c,...d})}},editAdGroup:e=>e.isAutomatedCampaign?a.editAutomated({campaignId:e.id,view:"campaign"}):a.editV2({adGroupId:e.id,view:"adgroup"}),pinPromotion:e=>{const{id:t,adFilter:i}=e,o=i?{adFilter:i}:{};return(0,n.Z)("/reporting/ads/",{pinPromotionIds:[t],...o})},editPinPromotion:e=>{const t=e.isCreatingPins?{isCreatingPins:!0}:{},i=e.pinPromotionId?{pinPromotionId:e.pinPromotionId}:{};return a.editV2({adGroupId:e.adGroupId,view:"ad",...i,...t})},productGroup:e=>{const{id:t,name:i}=e;return(0,n.Z)("/reporting/productgroups/",{productGroupIds:[t],name:i})},campaigns:()=>"/reporting/campaigns/",adgroups:()=>"/reporting/adgroups/",ads:()=>"/reporting/ads/",productgroups:()=>"/reporting/productgroups/",campaignNegativeKeywords:()=>"/reporting/campaignNegativeKeywords/",campaignSearchQueries:()=>"/reporting/campaignSearchQueries/",adGroupNegativeKeywords:()=>"/reporting/adGroupNegativeKeywords/",adGroupPositiveKeywords:()=>"/reporting/adGroupPositiveKeywords/",adGroupSearchQueries:()=>"/reporting/adGroupSearchQueries/",ad:e=>a.pinPromotion(e),campaignMode:e=>(0,n.Z)("/ads/campaign_mode/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),create:e=>{const{campaignId:t,objectiveType:i,partialCreate:o,catalogsFeedId:s,managedClientId:r,productGroupId:a,resumeLastDraft:l}=e,d={};return t&&o&&(d.campaignId=t),i&&(d.objectiveType=i),"CATALOG_SALES"===i&&s&&(d.catalogsFeedId=s),a&&(d.productGroupId=a),r&&(d.managedClientId=r),l&&(d.resumeLastDraft=!0),(0,n.Z)("/ads/create/",d)},createAutomated:e=>(0,n.Z)("/automated/ads/create/",e),editV2:e=>(0,n.Z)("/ads/edit/",e),editAutomated:e=>(0,n.Z)("/automated/ads/edit/",e),editDraftCampaign:e=>(0,n.Z)("/ads/edit_draft/",{campaignId:e.campaignId,view:"campaign"}),duplicateCampaign:e=>(0,n.Z)("/ads/duplicate/",e),audiences:e=>(0,n.Z)("/audiences/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),audience_debug:()=>"/audience_debug/",prepaid_spend_campaign_breakdown:()=>"/billing/prepaid_spend_campaign_breakdown/",billing:e=>{const{page:t,subSection:i,nextStepUrl:s}=e;switch(t){case o.kM.BILLING_HISTORY:return"/billing/history/";case o.kM.ORDER_LINES:return"/billing/order_lines/";case o.kM.PROMOTIONS:return"/billing/promotions/";case o.kM.DOCUMENTS:return"/billing/documents/";case o.kM.PREPAID_CAMPAIGN_SPEND:return"/billing/prepaid_campaign_spend_summary/";default:const e={};return i&&(e.section=i),s&&(e.next_step_link_url=s),(0,n.Z)("/billing/",e)}},bulk:e=>{const{subSection:t,page:i,jobStarted:s}=e||{};switch(i){case o.fm.UPLOAD_TEMPLATE:return(0,n.Z)("/bulk_editor/upload_template/",{section:t});case o.fm.DOWNLOAD_TEMPLATE:return(0,n.Z)("/bulk_editor/download_template/",{section:t});case o.fm.HISTORY:return(0,n.Z)("/bulk_editor/history/",{section:t,job_started:s});case o.fm.RESOURCES:return(0,n.Z)("/bulk_editor/resources/",{section:t});default:return"/bulk_editor/"}},history:e=>(0,n.Z)("/history/",e),shopping:e=>a.reporting(r("TEMPORARY_SHOPPING")),pinterest_tag:e=>{const{page:t,subSection:i,platform:s,source:r,origin:a}=e;switch(t){case o.qp.PINTEREST_EVENT_HISTORY:return r?(0,n.Z)("/conversions/event-history/",{source:r}):"/conversions/event-history/";case o.qp.CONVERSION_HEALTH:return"/conversions/health/";case o.qp.PINTEREST_TAG:return(0,n.Z)("/conversions/tag/",{subPage:i,platform:s});case o.qp.PINTEREST_TAG_MANUAL_SETUP_FLOW:return"/conversions/tag_manual_setup/";case o.qp.PINTEREST_TAG_EVENTS:return"/conversions/tag-events/";case o.qp.PINTEREST_TAG_HEALTH:return"/conversions/tag-health/";case o.qp.CONVERSION_UPLOAD:return(0,n.Z)("/conversions/upload/",{subPage:i});case o.qp.UPLOAD_HISTORY:return(0,n.Z)("/conversions/history/",{subPage:i});case o.qp.PCA_UPLOAD_HISTORY:return(0,n.Z)("/conversions/pca_history/",{subPage:i});case o.qp.PCA_UPLOAD:return(0,n.Z)("/conversions/pca_upload/",{subPage:i});case o.qp.CONVERSIONS_API_MANUAL_SETUP_FLOW:return r||a?(0,n.Z)("/conversions/api_manual_setup/",{source:r,origin:a}):"/conversions/api_manual_setup/";case o.qp.CONVERSIONS_API_ACCESS_TOKEN:return"/conversions/access_token/";case o.qp.CONVERSIONS_API_DEDUPLICATION:return"/conversions/deduplication/";default:return"/conversions/tag/"}},"pin-builder":e=>(0,n.Z)("/pin-builder/",e),purchases:()=>a.reporting(r("PURCHASE")),awareness_reserved:()=>a.reporting(r("IMPRESSION")),engagement:()=>a.reporting(r("BILLABLE_ENGAGEMENT")),videos:()=>a.reporting(r("TEMPORARY_BIDDED_CPM_VIDEO")),videos_reserved:()=>a.reporting(r("TEMPORARY_IMPRESSION_VIDEO")),videos_cpv:()=>a.reporting(r("TEMPORARY_MRC_CPV_VIDEO")),conversions:()=>a.reporting(r("WEB_CONVERSION")),accounts_manager:()=>"/accounts_manager/",reporting_preferences:e=>(0,n.Z)("/reporting/preferences/",e),report_builder:e=>(0,n.Z)("/report-center/builder/",e),report_history:e=>(0,n.Z)("/report-center/history/",e),report_unsubscribe:e=>(0,n.Z)("/report-center/unsubscribe/",e),report_download:e=>(0,n.Z)("/report-center/download/",e),media_planner:()=>"/media_planner/",awareness:()=>a.reporting(r("AWARENESS")),traffic:()=>a.reporting(r("TRAFFIC")),app_installs:()=>a.reporting(r("APP_INSTALL")),catalog_sales:()=>a.reporting(r("CATALOG_SALES")),web_conversion:()=>a.reporting(r("WEB_CONVERSION")),video_view:()=>a.reporting(r("VIDEO_VIEW")),quick_promote:e=>(0,n.Z)("/quick-promote/",e),quick_promote_on_www:()=>"/advertiser/quick-promote/",recommendations:e=>(0,n.Z)("/recommendations/",e),catalog_view:()=>"/product-catalogs/data-source",campaign_insights:e=>`/campaign-insights/${e.campaignId}/`},l=a},619937:(e,t,i)=>{i.d(t,{$N:()=>h,GY:()=>l,MZ:()=>r,NR:()=>c,Vn:()=>d,fm:()=>n,kM:()=>s,q6:()=>o,qp:()=>a,uV:()=>u});const n={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},o={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},s={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},r={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce"},a={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TAG_EVENTS:"PINTEREST_TAG_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY"},l={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},d={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},c={ATTRIBUTION_DESTINATION:"destination",ATTRIBUTION_EXPIRY:"expiry",ATTRIBUTION_SOURCE:"attributionsrc",ATTRIBUTION_SOURCE_EVENT_ID:"source_event_id"},u=604800,h={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"}},28543:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(567831);var o=i(55259),s=i(966113);function r(e,t,i){if(!o.Z[e])throw new Error(`unknown url key: ${e}`);i||(i={});let r=o.Z[e](i);const a=function(e,t){let i=null;return e&&(i=e.advertiserId||null),!i&&t&&(i=t.id),i}(i,t);return"string"==typeof a&&(r="/advertiser/"+a+r),!!i.absolutify&&(r=(0,n.Z)(r,void 0,s.KU)),r}},209064:(e,t,i)=>{i.d(t,{Fv:()=>a,LN:()=>s,Ob:()=>n,Tc:()=>o,mE:()=>r});const n={APP_INSTALL:"TEMPORARY_APP_INSTALL_CLICKTHROUGH",APP_TRAFFIC:"TEMPORARY_TRAFFIC_CLICKTHROUGH_APP",AWARENESS:"TEMPORARY_BIDDED_CPM",VIDEO:"TEMPORARY_BIDDED_CPM_VIDEO",TRAFFIC:"CLICKTHROUGH",SHOPPING:"TEMPORARY_SHOPPING",WEB_CONVERSION:"WEB_CONVERSION",APP_INSTALL_V2:"APP_INSTALL_VARIABLE_ATTR",VIDEO_VIEW:"TEMPORARY_MRC_CPV_VIDEO"},o="CONSIDERATION",s={TRAFFIC:"TRAFFIC",AWARENESS:"AWARENESS",APP_INSTALL:"APP_INSTALL",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS"},r={CONSIDERATION:"CONSIDERATION",AWARENESS:"AWARENESS",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS"},a={[s.TRAFFIC]:r.CONSIDERATION,[s.AWARENESS]:r.AWARENESS,[s.APP_INSTALL]:null,[s.WEB_CONVERSION]:r.WEB_CONVERSION,[s.CATALOG_SALES]:r.CATALOG_SALES,[s.VIDEO_VIEW]:r.VIDEO_VIEW,[s.WEB_SESSIONS]:r.WEB_SESSIONS}},422586:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(89254),o=i(966113);function s(e,t){let i="";if(e&&(i=e,t)){const s=(0,n.Z)(e,!0),r="/advertiser/",{hostname:a}=s;null!==a&&a!==o.KU||(e.startsWith(o.au)&&(e=e.replace(o.au,"")),i=e.startsWith(r)?e:r+t+e)}return i}},21353:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(702664),o=i(28543);function s(){const e=(0,n.useSelector)((({advertiser:e})=>e));return(t,i)=>(0,o.default)(t,e,i)}},567482:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(667294),o=i(231486),s=i(216895),r=i(829407),a=i(898781),l=i(807609),d=i(45169),c=i(53987),u=i(226198),h=i(883119),p=i(616550),_=i(780280),g=i(134906),m=i(785893);const f=({disableMandatoryAgeCheck:e,focusOnMount:t,value:i,onChange:f,onError:x,onChangeParsed:b,onValidation:y,preventValidationOnStart:v,error:P,customPlaceholderText:w})=>{const[I,A]=(0,n.useState)(""),[E,C]=(0,n.useState)(!1),{country:S}=(0,_.B)(),j=(0,a.ZP)(),T=(0,p.useLocation)(),D=(0,n.useRef)(I);(0,n.useEffect)((()=>{D.current!==I&&(x&&I&&x(I),D.current=I)}));const k=(0,n.useRef)(null);(0,r.Z)((()=>{t&&k.current&&k.current.focus()}));const z=t=>{const i=(0,c.Ni)(T)&&(0,d.du)(S)||!e,n=(0,s.Z)(t||"",[...i?[(0,g.aH)({message:j.bt("Hai dimenticato qualcosa! Facci sapere la tua et.", "You missed a spot! Let us know how old you are.", "Required age validation error", undefined, true)})]:[],(0,g.qA)({message:j.bt("Non  un numero.", "Not a number.", "Number field validation error message", undefined, true)}),(0,g.ZA)({invalidAgeString:j.bt("Inserisci un numero valido.", "Please enter a valid number.", "webapp.app.Signup.ageError", undefined, true)})]),o=(null==n?void 0:n.toString())||"";return null==y||y(o),o};(0,n.useEffect)((()=>{v||z(i)}),[]);const O=!!(0,l.Z)()||"1"!==o.U2(u.It);(0,n.useEffect)((()=>{O||E||(A(j.bt("Spiacenti, al momento non disponi dell'idoneit per iscriverti a Pinterest.", "Sorry, youre not eligible to sign up for Pinterest right now.", "Error message shown when underage user tries to register", undefined, true)),C(!0))}));const R=e=>{const t=z(e);A(t)};return(0,m.jsx)(h.nv,{ref:k,errorMessage:I||P,id:"age-input",disabled:!O,name:"age",value:i||"",onChange:e=>{const{value:t}=e,i=parseInt(t,10);t&&Number.isNaN(i)||(null==f||f(e),null==b||b(e.value?i:void 0),R(t))},onBlur:()=>{O&&(A(""),R(i))},hasError:!!I,size:"lg",autoComplete:"off",placeholder:w||j.bt("Et", "Age", "Textfield placeholder", undefined, true),type:"text"})}},77601:(e,t,i)=>{i.d(t,{Z:()=>o});const n="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();function o({window:e,duration:t,run:i}){const o=n();let s=0,r=null;const a=()=>{const l=n()-o,d=l-s;if(t===1/0)i(0,l,d);else{const e=l/t;if(e>=1)return void i(1,l,d);i(e,l,d)}s=l,r=e.requestAnimationFrame(a)};return{start:()=>{r=e.requestAnimationFrame(a)},cancel:()=>{r&&(e.cancelAnimationFrame(r),r=null)}}}},377184:(e,t,i)=>{i.d(t,{CX:()=>a,ML:()=>o,N$:()=>r,Od:()=>n,yK:()=>s});const n="extensionNagCount",o=4,s=3,r=1050,a=880},773515:(e,t,i)=>{function n(e){return"object"==typeof e&&null!==e&&"url"in e&&"media"in e}i.d(t,{Z:()=>n})},945212:(e,t,i)=>{i.d(t,{O:()=>o,r:()=>n});const n="ref",o="os"},366284:(e,t,i)=>{i.d(t,{G6:()=>s,i7:()=>r,oi:()=>n,u$:()=>o,un:()=>l,vU:()=>a});const n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),o=e=>e?e.includes("Chrome")?n.CHROME:e.includes("Safari")?n.SAFARI:e.includes("Firefox")?n.FIREFOX:e.includes("Opera")?n.OPERA:e.includes("IE")?n.IE:e.includes("Edge")?n.EDGE:n.OTHER:n.OTHER;function s(e){return o(e)===n.SAFARI}function r(e){return o(e)===n.CHROME}function a(e){return o(e)===n.FIREFOX}function l(e){return o(e)===n.EDGE}},78714:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(56641),o=i(954931),s=i(867820);const r=(e,t)=>{null!=t&&t.disableOriginCheck||(0,o.Z)(e)||(e="/",(0,s.My)("url_reset")),(0,n.Z)(e)}},792182:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(667294);function o(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}function s(){return window.innerWidth}function r(){return window.innerHeight}function a(){return null}function l(){const e=(0,n.useSyncExternalStore)(o,r,a),t=(0,n.useSyncExternalStore)(o,s,a);return null!==e&&null!==t?{height:e,width:t}:null}},924196:(e,t,i)=>{i.d(t,{Z:()=>n});const n={GOOGLE_ADWORDS_ID:852082959,GOOGLE_ADWORDS_LABEL_PROPEL_QUALIFIED:"Mah3CPrv13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_PROPEL_UNQUALIFIED:"_DJfCKzy13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CREATE:"GGbCCM7p-nYQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT:"SwBsCIz9k3cQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_ADVERTISER_INTENT:"kDf0COWL4okBEI-Cp5YD",DOUBLECLICK_TAG_ID:"8032161",DOUBLECLICK_EVENT_ID_PROPEL:"prope001",DOUBLECLICK_CATEGORY_ID_PROPEL_QUALIFIED:"pinte0",DOUBLECLICK_CATEGORY_ID_PROPEL_UNQUALIFIED:"pinte00",TRADEDESK_ADVERTISER_ID:"fc1uc9n",TRADEDESK_EVENT_ID_GENERAL_PAGEVIEW:"ogalyt3",TRADEDESK_CONVERSION_ID_PROPEL_QUALIFIED:"judrn76",TRADEDESK_CONVERSION_ID_PROPEL_UNQUALIFIED:"f0v4s5d",FACEBOOK_ADVERTISER_ID:"956400731086791",TWITTER_UNIVERSAL_TAG_ID:"nuzh8",TWITTER_CONVERSION_ID_PROPEL_QUALIFIED:"ny8zl",TWITTER_CONVERSION_ID_PROPEL_UNQUALIFIED:"nya0d",LINKEDIN_PARTNER_ID:"44352",LINKEDIN_CONVERSION_ID_PROPEL_QUALIFIED:"166217",LINKEDIN_CONVERSION_ID_PROPEL_UNQUALIFIED:"171754",LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT:"529092",PINTEREST_TAG_ID:"2614461171935",SMB_PAID_PINTEREST_ID:"2613736141997"}},904431:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>s});class o{static reportGoogleConversion(e,t,i,n){n||(void 0!==window.gtag_report_conversion?window.gtag_report_conversion(e,t,i):o.queuedGoogleConversions.push({id:e,label:t,url:i}))}static reportFacebookConversion(e,t,i){void 0!==window.fbq?i?window.fbq("track",t,i):window.fbq("track",t):o.queuedFacebookConversions.push({id:e,event:t,data:i})}static reportCustomFacebookConversion(e,t,i){void 0!==window.fbq?i?window.fbq("trackCustom",t,i):window.fbq("trackCustom",t):o.queuedFacebookConversions.push({id:e,isCustomEvent:!0,event:t,data:i})}static reportPinterestConversion(e,t,i){void 0!==window.pintrk?i?window.pintrk("track",t,i):window.pintrk("track",t):o.queuedPinterestConversions.push({id:e,event:t,data:i})}static reportTwitterConversion(e,t){void 0!==window.twttr?t?window.twttr.conversion.trackPid(e,t):window.twttr.conversion.trackPid(e):o.queuedTwitterConversions.push({id:e,data:t})}static reportTheTradeDeskConversion(e,t){const i=document.createElement("img");i.setAttribute("height","1"),i.setAttribute("width","1"),i.setAttribute("role","presentation"),i.style.borderStyle="none",i.style.position="absolute",i.setAttribute("src",`//insight.adsrvr.org/track/conv/?adv=${e}&ct=0:${t}&fmt=3`),document.body.insertBefore(i,document.body.lastChild)}static reportLinkedInConversion(e,t){const i=document.createElement("img");i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("role","presentation"),i.setAttribute("src",`https://dc.ads.linkedin.com/collect/?pid=${e}&conversionId=${t}&fmt=gif`),i.style.display="none",document.body.insertBefore(i,document.body.lastChild)}static reportDoubleClickConversion(e,t,i){const n=1e13*Math.random(),o=document.createElement("iframe");o.setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("frameborder","0"),o.setAttribute("src",`https://${e}.fls.doubleclick.net/activityi;src=${e};\n    type=${t};cat=${i};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=${n}?`),o.style.display="none",document.body.insertBefore(o,document.body.lastChild)}static insertGoogleAdWordsTag(e,t){const i=document.createElement("script");t||(i.setAttribute("async",""),i.setAttribute("src",`https://www.googletagmanager.com/gtag/js?id=AW-${e}`),i.onload=()=>{window.dataLayer=window.dataLayer||[],window.gtag=function(e,t,i){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config","AW-"+e),window.gtag_report_conversion=function(e,t,i){return window.gtag("event","conversion",{send_to:"AW-"+e+"/"+t,event_callback:function(){void 0!==i&&window.location.assign(i)}}),!1};const i=o.queuedGoogleConversions;for(let n=0;n<i.length;n+=1){const s=i[n];s.id===e&&o.reportGoogleConversion(s.id,s.label,s.url,t)}}),document.body.insertBefore(i,document.body.firstChild)}static insertFacebookPixelTag(e){var t,i,n,s,r,a;t=window,i=document,n="script",t.fbq||(s=t.fbq=function(){s.callMethod?s.callMethod.apply(s,arguments):s.queue.push(arguments)},t._fbq||(t._fbq=s),s.push=s,s.loaded=!0,s.version="2.0",s.queue=[],(r=i.createElement(n)).async=!0,r.src="//connect.facebook.net/en_US/fbevents.js",(a=i.getElementsByTagName(n)[0]).parentNode.insertBefore(r,a)),window.fbq("init",e),window.fbq("track","PageView");const l=o.queuedFacebookConversions;for(let d=0;d<l.length;d+=1){const t=l[d];t.id===e&&(t.isCustomEvent?o.reportCustomFacebookConversion(e,t.event,t.data):o.reportFacebookConversion(e,t.event,t.data))}}static insertTwitterUniversalTag(e){var t,i,n,o,s,r;t=window,i=document,n="script",t.twq||((o=t.twq=function(){o.exe?o.exe.apply(o,arguments):o.queue.push(arguments)}).version="1.1",o.queue=[],(s=i.createElement(n)).async=!0,s.src="//static.ads-twitter.com/uwt.js",(r=i.getElementsByTagName(n)[0]).parentNode.insertBefore(s,r)),window.twq("init",e),window.twq("track","PageView")}static insertLinkedInInsightTag(e){window._linkedin_data_partner_id=e;const t=document.createElement("script");t.setAttribute("src","//snap.licdn.com/li.lms-analytics/insight.min.js"),document.body.insertBefore(t,document.body.firstChild)}static insertPinterestTag(e){!function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};const e=window.pintrk;e.queue=[],e.version="3.0";const t=document.createElement("script");t.async=!0,t.src="https://s.pinimg.com/ct/core.js";const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}}(),window.pintrk("load",e),window.pintrk("page");const t=o.queuedPinterestConversions;for(let i=0;i<t.length;i+=1){const n=t[i];n.id===e&&o.reportPinterestConversion(e,n.event,n.data)}}}n(o,"queuedGoogleConversions",[]),n(o,"queuedFacebookConversions",[]),n(o,"queuedPinterestConversions",[]),n(o,"queuedTwitterConversions",[]);const s=o},639410:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(898781),s=i(785893);function r(){const e=(0,o.ZP)();return(0,s.jsx)(n.Fragment,{children:e.bt("400 milioni", "400 million", "Business.MauText", undefined, true)})}},306775:(e,t,i)=>{i.d(t,{Fl:()=>l,Pw:()=>c,dl:()=>a,k3:()=>u,su:()=>h,tW:()=>d});var n=i(926275),o=i(411938),s=i(826067);const r=["AT","AU","BE","BR","CA","CH","CY","CZ","DE","DK","ES","FI","FR","GB","GR","HU","IE","IT","LU","MT","MX","NL","NO","NZ","PT","RO","SE","SK","US"],a=["AU","AT","BE","BR","CA","CY","CZ","DK","FI","FR","DE","GR","HU","IE","IT","LU","MT","MX","NL","NZ","NO","PL","PT","RO","SK","ES","SE","CH","GB","US","AR","CO","CL","JP"],l=e=>r.includes(e.toUpperCase()),d=Object.freeze({NOT_ANSWERED:0,YES:1,NO:2,NOT_SURE:3}),c=({requestContext:e,history:t,pinId:i})=>{((e,t)=>{const i=(0,s.ru)("/business/convert",{next:t});e.push(i)})(t,(e=>e?`/business/ad_create?pinId=${e}`:"/business/ad_create")(i))},u=e=>{const t=e.trim().split(" ").filter((e=>!!e));return{firstName:t.length>0?t[0]:"",lastName:t.length>1?t.slice(1).join(" "):""}},h=e=>e.isAuth&&!e.isPartner&&!(0,o.Z)(null,e)&&!(0,n.Z)(e.createdAt)},834911:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(835209),o=i(341732);function s({carouselData:e,images:t,richMetadata:i,richSummary:s,shouldUnifyImageSizes:r,additionalImages:a}){const l=(0,n.Z)({richPinData:i||s});return l&&a&&a.length>0?(0,o.Z)(null,a,e&&e.index,r,l.id):l&&l.additional_images&&l.additional_images.length>0?(0,o.Z)(t,l.additional_images,e&&e.index,r,l.id):e||void 0}},687551:(e,t,i)=>{function n(e){return!!(e&&e.carousel_data&&e.carousel_data.id)}i.d(t,{Z:()=>n})},341732:(e,t,i)=>{i.d(t,{Z:()=>s});const n=["236x","474x","564x","736x"];function o(e){function t(e,{imageKey:t,height:i,width:n}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:i,width:n}}}),e}const i=n.map((function(t){const i=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].height||1/0))),n=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].width||1/0)));return{imageKey:t,height:i,width:n}}));return e.map((e=>i.reduce(t,e)))}function s(e,t,i,n,s){const r=(null==t?void 0:t.map((({canonical_images:e,image_signature:t})=>({images:e||void 0,image_signature:t||void 0}))))||[],a=e?[{images:e},...r]:r;return{carousel_slots:n?o(a):a,index:i||0,id:s}}},827896:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(768559),o=i(350118),s=i(616550);function r(){const e=(0,o.S6)(),t=(0,s.useLocation)();return(i,o)=>{let s;const r=e(i);if(null!=o&&o.shouldTrackForPrevLocation){const e=(null==r?void 0:r.tracking_params_map)||{},t=Object.keys(e).find((e=>"PinResource"!==e));r&&(s=t?e[t]:e.PinResource)}else if(r){var a,l;s=(0,n.Z)({boardUrl:null===(a=r.board)||void 0===a?void 0:a.url,callToCreateSourcePinId:r.call_to_create_source_pin_id,location:t,pinId:r.id,pinnerUserName:null===(l=r.pinner)||void 0===l?void 0:l.username,storyPinDataId:r.story_pin_data_id,trackingParams:r.tracking_params,trackingParamsMap:r.tracking_params_map})}return s}}},81636:(e,t,i)=>{i.d(t,{Q:()=>d,Z:()=>c});var n=i(667294),o=i(682492),s=i.n(o),r=i(112690),a=i(780280),l=i(385740);function d(e,t){const{setViewContextData:i}=(0,l.sV)(),{requestIdentifier:o}=(0,a.B)(),d=(0,r.Z)(),{viewData:c}=(0,l.SU)();(0,n.useEffect)((()=>{var t;e&&(i({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data?s()(c,e.view_data):s()({},c),component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),d({...e,event_type:13,request_identifier:o}))}),[t])}function c(e){const{children:t,log:i}=e;return d(i),t||null}},407043:(e,t,i)=>{i.d(t,{B:()=>l,v:()=>a});var n=i(385740),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("ContextLogger");function l({children:e,value:t}){const{setViewContextData:i}=(0,n.sV)();return t.injectSetViewContextDataFromHook=i,(0,s.jsx)(r,{value:t,children:e})}},112690:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(407043);const o=()=>(0,n.v)().logContextEvent},385740:(e,t,i)=>{i.d(t,{BE:()=>d,Ih:()=>c,SU:()=>u,sV:()=>a});var n=i(667294),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("View");let l;function d(){return l}function c({children:e,initialState:t={}}){const[i,o]=(0,n.useState)(t),a=(0,n.useCallback)((()=>{l={},o({})}),[]),d=(0,n.useCallback)((e=>{l={...l,...e},o((t=>({...t,...e})))}),[]),c=(0,n.useMemo)((()=>({viewContextData:i,clearViewContextData:a,setViewContextData:d})),[i,d,a]);return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(r,{value:c,children:e})})}function u(){const{viewContextData:e}=a();return e}},425288:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);function o(e,t){return`\n  ${"consumer"===t?`${e}Consumer`:`use${e}`} must be used within a ${e}Provider.\n  Please see https://pdocs.pinadmin.com/docs/webapp/testing-jest#createhydra-errors for more information.\n  `}function s(e,t){const i=(0,n.createContext)(t),{messageDisplayName:s}=function(e,t){let i=e.slice(1);if(i=i.endsWith("Context")?i:`${i}Context`,t)return{hocDisplayName:`with${e[0].toUpperCase()}${i}(${t})`};return{propsDisplayName:`${e[0].toLowerCase()}${i}`,messageDisplayName:`${e[0].toUpperCase()}${i}`}}(e);i.displayName=s;const r=i.Provider,a=({children:e})=>{const t=(0,n.useContext)(i);if(void 0===t)throw new Error(o(s,"consumer"));return e(t)},l=()=>(0,n.useContext)(i);return r.displayName=`${s}Provider`,a.displayName=`${s}Consumer`,{Provider:r,Consumer:a,MaybeConsumer:({children:e})=>e((0,n.useContext)(i)),useMaybeHook:l,useHook:function(){const e=l();if(void 0===e)throw new Error(o(s,"hook"));return e}}}},998499:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(316271);function o(e,t={execution:"sequential"}){const{execution:i}=t;return e.reduce(((e,t)=>{const{combinedTransitions:o,totalDelay:s}=e,r=t.delay||0,a="sequential"===i?s+r:t.delay;return{combinedTransitions:0===o.length?(0,n.Z)(t):`${o}, ${(0,n.Z)({...t,delay:a})}`,totalDelay:s+r}}),{combinedTransitions:"",totalDelay:0}).combinedTransitions}},316271:(e,t,i)=>{i.d(t,{Z:()=>s});const n={instant:85,short:250,medium:420,semiLong:500,long:800},o={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",linear:"0.5, 0.5, 1.0, 1.0",spring:"1, 100, 17, 8"};function s({property:e,duration:t,timingFunction:i,delay:s}){return`${e} ${"number"==typeof t?`${t}ms`:`${n[t]}ms`} cubic-bezier(${o[i]})${s?` ${s}ms`:""}`}},782534:(e,t,i)=>{i.d(t,{Z:()=>r,k:()=>o.k});var n=i(780280),o=i(451820),s=i(785893);const r=({dateFormatType:e,useUTC:t=!0,value:i})=>(0,s.jsx)(n.LC,{children:n=>(0,o.Z)(n.locale,i,e,t)})},969759:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{const i=new Date(e);return i.setDate(e.getDate()+t),i}},810196:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{const t=new Date;return Math.floor(new Date(t.setFullYear(t.getFullYear()-e)).getTime()/1e3)}},451820:(e,t,i)=>{i.d(t,{Z:()=>o,k:()=>n});const n={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit"};function o(e,t,i,o=!0){const s=function(e){switch(e){case n.YEAR:return{year:"numeric"};case n.LONG:return{year:"numeric",month:"long",day:"numeric"};case n.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case n.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case n.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case n.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case n.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.MONTH_DAY:return{month:"long",day:"numeric"};case n.SHORT_MONTH:return{month:"short"};case n.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case n.DAY:return{day:"numeric"};case n.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case n.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case n.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case n.TIME:return{hour:"numeric",minute:"2-digit"};case n.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}}(i);o&&(s.timeZone="UTC");return new Intl.DateTimeFormat(e,s).format(t)}},989392:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{const i=new Date;return new Date(1e3*e)<=new Date(i.getFullYear()-(t||18),i.getMonth(),i.getDate())}},81226:(e,t,i)=>{function n(e){const t=Math.round(e/1e3),i=t%60;return Math.floor(t/60)+":"+(i<10?"0":"")+i}i.d(t,{Z:()=>n})},816068:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>Math.floor(new Date(e).getTime()/1e3)},85651:(e,t,i)=>{i.d(t,{w:()=>A,Z:()=>C});var n=i(996438),o=i(611683),s=i(45993),r=i(593559),a=i(689070),l=i(898781),d=i(883119),c=i(785893);function u({callBack:e,color:t,email:i,inline:n,overrideText:o}){const s=(0,l.ZP)(),r=o||s.bt("Reimposta password", "Reset password", "Request a password reset email", undefined, true);return(0,c.jsx)(d.zx,{accessibilityLabel:r,color:t||"red",fullWidth:n,onClick:()=>{(0,a.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:i}}).then((()=>e()))},text:r})}var h=i(349700);function p({email:e,onClose:t,onPasswordResetSent:i,socialButtons:n}){const o=(0,l.ZP)();return(0,c.jsx)(r.Z,{heading:o.bt("Sembra che tu stia incontrando problemi di accesso.", "Looks like youre having trouble logging in", "Modal heading for user who have attempted to login three times", undefined, true),onDismiss:t,size:"sm",children:(0,c.jsx)(d.xu,{alignItems:"center",justifyContent:"center",display:"flex",marginBottom:9,"data-test-id":"touchableErrorMessage",children:(0,c.jsxs)(d.kC,{alignItems:"center",direction:"column",width:290,children:[(0,c.jsx)(d.xu,{marginBottom:6,children:(0,c.jsx)(d.xv,{align:"center",children:(0,h.nk)(o.bt("Abbiamo inviato un'email a {{ email }} per aiutarti a riaccedere.", "We sent an email to {{ email }} to help you get back in.", " - ", undefined, true),{email:(0,c.jsx)(d.xv,{inline:!0,weight:"bold",children:e},"emailAddress")})})}),(0,c.jsx)(d.xu,{width:"100%",marginBottom:8,children:(0,c.jsx)(u,{inline:!0,color:"red",email:e,callBack:i,overrideText:o.bt("Invia di nuovo email", "Resend email", "Button to allow the user to request a password reset email", undefined, true)})}),(0,c.jsx)(d.xv,{children:o.bt("Oppure accedi con Facebook o Google", "Or log in with Facebook or Google", "Upsell to use Facebook or Google for login", undefined, true)}),(0,c.jsx)(d.xu,{marginTop:4,marginBottom:12,width:"100%",children:n}),(0,c.jsx)(d.xu,{marginBottom:12,width:"100%",children:(0,c.jsx)(s.Z,{onClick:t})})]})})})}var _=i(743678);function g({email:e,loginWith:t,onClose:i,onPasswordResetSent:n}){const o=(0,l.ZP)();return(0,c.jsx)(r.Z,{heading:o.bt("Ops! Si  verificato un errore", "Oops! Something went wrong", "Modal heading", undefined, true),onDismiss:i,size:"md",children:(0,c.jsxs)(d.xu,{paddingX:6,marginBottom:4,children:[(0,c.jsx)(d.xu,{marginBottom:6,children:"facebook"===t?(0,c.jsx)(d.xv,{children:o.bt("Non siamo riusciti ad associare il tuo account Facebook a un account Pinterest. Prova a reimpostare la password.", "We couldnt match your Facebook account to any Pinterest account. Try resetting your password instead.", "Notice that no Pinterest account exists for the Facebook account used to attempt login", undefined, true)}):(0,c.jsx)(d.xv,{children:o.bt("Non siamo riusciti ad associare il tuo account Google a un account Pinterest. Prova a reimpostare la password.", "We couldnt match your Google account to any Pinterest account. Try resetting your password instead.", "Notice that no Pinterest account exists for the Facebook account used to attempt login", undefined, true)})}),(0,c.jsx)(u,{inline:!0,email:e,callBack:n}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(s.Z,{onClick:i})})]})})}var m=i(667294),f=i(499128),x=i(966113);function b({email:e,onClose:t}){const i=(0,l.ZP)(),[n,o]=(0,m.useState)(!1);return(0,c.jsxs)(m.Fragment,{children:[(0,c.jsx)(r.Z,{heading:i.bt(" stata inviata l'email per reimpostare la password", "Password reset email sent", "Modal label for confirmation of password reset send", undefined, true),onDismiss:t,children:(0,c.jsxs)(d.xu,{paddingX:6,marginBottom:4,children:[(0,c.jsx)(d.xv,{overflow:"normal",children:(0,h.nk)(i.bt("Abbiamo inviato le istruzioni per scegliere una nuova password a {{ email }}.", "We sent instructions to pick a new password to {{ email }}.", "Statement that a password reset email has been sent to the user", undefined, true),{email:(0,c.jsx)(d.xv,{inline:!0,overflow:"normal",weight:"bold",children:e},"emailAddress")})}),(0,c.jsx)(d.xu,{paddingY:4,children:(0,c.jsx)(u,{inline:!0,color:"gray",email:e,callBack:()=>o(!n),overrideText:i.bt("Invia di nuovo email", "Resend email", "Button to allow the user to request a password reset email", undefined, true)})}),(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:(0,h.nk)(i.bt("Non hai ricevuto l'email? Prova questi {{ tips }}", "Didnt get the email? Try these {{ tips }}", "Direction to help center if the password reset email failed", undefined, true),{tips:(0,c.jsx)(d.xv,{inline:!0,weight:"bold",children:(0,c.jsx)(d.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/articles/trouble-pinterest-emails?source=account_recovery",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:i.bt("suggerimenti dal Centro assistenza", "tips from our Help Center", "Link text to go to help center", undefined, true)},"helpCenterLink")},"helpCenter")})})}),(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:(0,h.nk)(i.bt("Non  il tuo indirizzo email? {{ tryAgain }}", "Not your email address? {{ tryAgain }}", "Link to password reset flow for users who make an incorrect password reset request", undefined, true),{tryAgain:(0,c.jsx)(d.xv,{inline:!0,weight:"bold",children:(0,c.jsx)(d.rU,{display:"inlineBlock",href:x.lf,onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:i.bt("Prova un altro", "Try another", "Link text to enter the password reset flow for a different email address/username", undefined, true)},"passwordResetLink")},"tryAgain")})})})]}),(0,c.jsx)(d.xu,{children:(0,c.jsx)(s.Z,{color:"red",onClick:t})})]})}),n&&(0,c.jsx)(d.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,c.jsx)(f.ZP,{onHide:()=>o(!n),text:i.bt("Email inviata!", "Email sent!", " - ", undefined, true),duration:3500})})]})}function y({email:e,onClose:t,onPasswordResetSent:i,socialButtons:n}){const o=(0,l.ZP)();return(0,c.jsx)(r.Z,{heading:o.bt("Abbiamo protetto il tuo account", "We protected your account", "Modal heading for user who need to recover their accounts", undefined, true),onDismiss:t,size:480,children:(0,c.jsxs)(d.xu,{paddingX:12,marginBottom:8,children:[(0,c.jsx)(d.xu,{paddingX:4,marginBottom:4,children:(0,c.jsx)(d.xv,{align:"center",children:o.bt("Per motivi di sicurezza, abbiamo reimpostato la password del tuo account Pinterest e ti abbiamo disconnesso su tutti i dispositivi e browser.", "For security purposes we've reset your Pinterest account password and logged you out on all devices and browsers.", "softBannedAccountModal.modal.description", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:4,marginBottom:4,children:(0,c.jsx)(d.xv,{align:"center",children:o.bt("Reimposta la password o accedi con Facebook o Google per tornare al tuo account.", "Reset your password or log in with Facebook or Google to get back into your account.", "Prompt to take action to reset password or upsell login with Facebook/Google", undefined, true)})}),(0,c.jsxs)(d.xu,{paddingX:12,children:[(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(u,{inline:!0,email:e,callBack:i})}),n,(0,c.jsx)(d.xu,{marginTop:4,children:(0,c.jsx)(s.Z,{onClick:t})})]})]})})}var v=i(576494),P=i(817656),w=i(584595),I=i(290148);const A={[w.OW]:I.Ny.RATE_LIMITED,[w.bd]:I.Ny.RATE_LIMITED,[w.$j]:I.Ny.SOFT_BANNED,[w.an]:I.Ny.SUSPENDED,[w.RL]:I.Ny.LOGIN_ASSISTANCE,[w.yV]:I.Ny.SOFT_BANNED,[P.Ej]:I.Ny.RATE_LIMITED},E=({onLoginWithMfa:e,onLoginWithSuspended:t,onLoginWithVoluntarilyDeactivated:i,updateAccountRecoveryModal:s})=>(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(n.Z,{container:"account_recovery",disablePostSignupNextUrl:!0,onLoginWithMfa:e,onLoginWithSuspended:t,showFallback:!0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:()=>s(I.Ny.PREVENT_FACEBOOK_REGISTER)},showLoginRateLimited:()=>s(I.Ny.RATE_LIMITED)}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(o.Z,{container:"account_recovery",onLoginWithMfa:e,onLoginWithSuspended:t,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:()=>s(I.Ny.PREVENT_GOOGLE_REGISTER)},onLoginWithVoluntarilyDeactivated:e=>{s(null),null==i||i(e)},showLoginRateLimited:()=>s(I.Ny.RATE_LIMITED)})})]});function C({email:e,modalType:t,onLoginWithMfa:i,onLoginWithSuspended:n,onLoginWithVoluntarilyDeactivated:o,updateAccountRecoveryModal:s}){const r=()=>s(null),a=()=>s(I.Ny.PASSWORD_RESET_SENT),l=(0,c.jsx)(E,{onLoginWithMfa:i,onLoginWithSuspended:n,onLoginWithVoluntarilyDeactivated:o,updateAccountRecoveryModal:s});switch(t){case I.Ny.SUSPENDED:return(0,c.jsx)(v.Z,{onClose:r});case I.Ny.LOGIN_ASSISTANCE:return(0,c.jsx)(p,{email:e,onClose:r,onPasswordResetSent:a,socialButtons:l});case I.Ny.RATE_LIMITED:return(0,c.jsx)(_.Z,{onClose:r});case I.Ny.SOFT_BANNED:return(0,c.jsx)(y,{email:e,onClose:r,onPasswordResetSent:a,socialButtons:l});case I.Ny.PREVENT_FACEBOOK_REGISTER:case I.Ny.PREVENT_GOOGLE_REGISTER:return(0,c.jsx)(g,{email:e,onClose:r,onPasswordResetSent:a,loginWith:t===I.Ny.PREVENT_FACEBOOK_REGISTER?"facebook":"google"});case I.Ny.PASSWORD_RESET_SENT:return(0,c.jsx)(b,{email:e,onClose:r});default:return null}}},45993:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(898781),o=i(883119),s=i(785893);function r({color:e,onClick:t,overrideText:i}){const r=(0,n.ZP)(),a=i||r.bt("OK", "Got it", "Acknowledge protected account modal message", undefined, true);return(0,s.jsx)(o.zx,{fullWidth:!0,accessibilityLabel:a,color:e||"gray",onClick:t,text:a})}},593559:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(124580),s=i(223815),r=i(662730),a=i(883119),l=i(785893);function d({children:e,headingNode:t,heading:i,onDismiss:d,size:c}){return(0,n.useEffect)((()=>(o.Z.pause(),function(){o.Z.resume()})),[]),(0,l.jsx)(a.mh,{zIndex:r.C,children:(0,l.jsx)(s.Z,{allowEsc:!0,children:(0,l.jsx)(a.u_,{accessibilityModalLabel:i,heading:t||i,onDismiss:()=>{o.Z.resume(),d()},role:"alertdialog",size:c||"md",padding:"none",children:e})})})}},743678:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(593559),o=i(898781),s=i(883119),r=i(785893);function a({onClose:e}){const t=(0,o.ZP)();return(0,r.jsxs)(n.Z,{heading:t.bt("Ops! Troppi tentativi di accesso", "Oops! Too many login attempts", "LoginRateLimitedModal.Modal.Heading", undefined, true),onDismiss:e,size:"sm",headingNode:(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.xu,{padding:6,justifyContent:"center",display:"flex",children:(0,r.jsx)(s.JO,{icon:"pinterest",accessibilityLabel:t.bt("Logo Pinterest", "Pinterest logo", "Accessibility label for Pinterest icon", undefined, true),color:"brandPrimary",size:40})}),(0,r.jsx)(s.X6,{align:"center",size:"500",accessibilityLevel:1,children:t.bt("Ops! Troppi tentativi di accesso", "Oops! Too many login attempts", "LoginRateLimitedModal.Modal.Heading", undefined, true)})]}),children:[(0,r.jsx)(s.xu,{paddingX:12,marginTop:4,marginBottom:12,children:(0,r.jsx)(s.xv,{align:"center",children:t.bt("Hai raggiunto il numero massimo di tentativi di accesso. Riprova tra 30 minuti.", "You have reached the maximum number of login attempts. Try again in 30 minutes.", "LoginRateLimitedModal.Modal.Heading", undefined, true)})}),(0,r.jsx)(s.xu,{paddingX:12,marginBottom:8,justifyContent:"center",display:"flex",children:(0,r.jsx)(s.zx,{fullWidth:!0,color:"red",text:t.bt("OK", "Okay", "LoginRateLimitedModal.Modal.OkButton", undefined, true),onClick:e})})]})}},576494:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(45993),s=i(593559),r=i(898781),a=i(349700),l=i(333071),d=i(883119),c=i(785893);function u({onClose:e}){const t=(0,r.ZP)(),i=t.bt("Tra i motivi pi comuni della disattivazione degli account ci sono:", "Common reasons for account deactivation include:", " - ", undefined, true),u=t.bt("{{ help_link }} in caso di domande o se desideri riattivare il tuo account.", "{{ help_link }} if you have questions or would like to reactivate your account.", " - ", undefined, true),h=[t.bt("Violazione delle Linee guida per la community di Pinterest", "Violating Pinterest Community Guidelines.", "One example reason for account deactivation", undefined, true),t.bt("Abbiamo notato attivit insolite sul tuo account.", "We noticed unusual activity on your account.", "One example reason for account deactivation", undefined, true),t.bt("Hai richiesto la chiusura dell'account.", "You requested an account closure.", "One example reason for account deactivation", undefined, true)];return(0,c.jsx)(s.Z,{heading:t.bt("Il tuo account  stato disattivato", "Your account has been deactivated", "Modal heading for user who have attempted to login with a deactivated account", undefined, true),onDismiss:e,size:"md",children:(0,c.jsxs)(d.xu,{paddingX:6,marginBottom:4,children:[(0,c.jsxs)(d.xu,{marginBottom:4,children:[(0,c.jsxs)(d.xv,{children:[" ",i," "]}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(n.Fragment,{children:h.map((e=>(0,c.jsx)(d.xv,{children:" "+e},`reasons-${e}`)))})}),(0,c.jsx)(d.xv,{inline:!0,children:(0,a.nk)(u,{help_link:(0,c.jsx)(l.q,{},"suspended user help_link")})})]}),(0,c.jsx)(d.xu,{marginTop:4,children:(0,c.jsx)(o.Z,{color:"red",onClick:e,overrideText:t.bt("Ok", "Got it", "Acknowledge suspended account modal message", undefined, true)})})]})})}},333071:(e,t,i)=>{i.d(t,{q:()=>r});var n=i(898781),o=i(883119),s=i(785893);const r=()=>{const e=(0,n.ZP)();return(0,s.jsx)(o.rU,{display:"inlineBlock",href:"https://help.pinterest.com/login-request?what_do_you_need_help_with=Getting+into+my+account&tell_more_account_access=Appeal+account+suspension",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:e.bt("Contattaci", "Contact us", "link text shown to redirect to help.pinterest.com for appealing a suspension", undefined, true)})}},777024:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),o=i(785893);function s(){const e=(0,n.ZP)();return(0,o.jsx)("p",{style:{marginBottom:"8px",marginTop:"8px",overflow:"hidden",textAlign:"center",fontSize:"14px",color:"#333",fontWeight:"bold"},children:e.bt("OPPURE", "OR", " - ", undefined, true)})}},803491:(e,t,i)=>{i.d(t,{Z:()=>s,m:()=>o});var n=i(785893);const o="\n.red.active:focus,\n.red.active:hover {\n  background-color: #d50c22 !important;\n}\n.lightGrey.active:focus,\n.lightGrey.active:hover {\n  background-color: #f5f3f3 !important;\n}\n.SignupButton:focus {\n  box-shadow: 0 0 0 4px rgba(0, 132, 255, 0.5);\n  outline: 0;\n}\n";function s({accessibilityLabel:e,children:t,className:i,dataTestId:o,disabled:s,href:r,id:a,noButtonStyles:l,onClick:d,styleOverrides:c,tabIndex:u,type:h}){const p=(i?i.split(" "):[]).concat(s?[]:["active"]);let _=l?{background:"none",border:"none",padding:"0",textAlign:"left",display:"block"}:{border:"0px",height:"40px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center",...s&&{backgroundColor:"#efefef",color:"#767676"}||p.includes("red")&&{backgroundColor:"#e60023",color:"#fff"}||p.includes("lightGrey")&&{backgroundColor:"#ebebeb",color:"#444"}};return _={..._,...c},s&&(_={..._,cursor:"not-allowed"}),(0,n.jsx)("button",{"aria-label":e||"",className:p.join(" "),"data-test-id":o,disabled:s,href:r,id:a,onClick:d,...u?{tabIndex:u}:{},style:_,type:h||"button",children:t})}},996438:(e,t,i)=>{i.d(t,{Z:()=>R});var n=i(667294),o=i(379913),s=i(803491),r=i(199324),a=i(336882),l=i(935879),d=i(910702),c=i(883119),u=i(785893);function h({anchor:e,message:t,children:i}){const[o,s]=(0,n.useState)(!!t);return(0,n.useEffect)((()=>{s(!!t)}),[t]),o&&t?(0,u.jsx)(c.J2,{anchor:e,color:"darkGray",idealDirection:"right",onDismiss:()=>s(!0),shouldFocus:!1,size:"md",children:(0,u.jsx)(c.xu,{column:12,padding:3,children:i?(0,u.jsx)("span",{children:i}):(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:t},style:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}})})}):null}var p=i(989392),_=i(290148),g=i(830269),m=i(174382),f=i(70212),x=i(85334),b=i(19121),y=i(901656),v=i(45169),P=i(905171),w=i(773285),I=i(402201);const A=({onError:e,onEventReceived:t,onSuccess:n,rerequestFacebookEmail:o,viewer:s})=>{let r=null;const a=i=>{const o=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(i.origin!==o)return;if("social-connect-complete"!==i.data.type&&"social-connect-error"!==i.data.type)return;const s=i.data;"facebook"===s.network&&(t(),clearInterval(r),"social-connect-error"===s.type?e("OTHER_ERROR"):n({type:"PROFILE",profile:s.profile}))};if(window.addEventListener("message",a),o)i.e(51798).then(i.bind(i,107193)).then((({default:t})=>{t((t=>{t.login((t=>{var i;"connected"===t.status&&((null===(i=t.authResponse.grantedScopes)||void 0===i?void 0:i.split(","))||[]).includes("email")?n({type:"ACCESS_TOKEN",id:t.authResponse.userID,access_token:t.authResponse.accessToken}):e("OTHER_ERROR")}),{scope:"email",auth_type:"rerequest",return_scopes:!0})}),s)}));else{const t=(0,I.Z)(),i=window.open("/connect/facebook/","",t);i?r=setInterval((()=>{i.closed&&(clearInterval(r),e("OTHER_ERROR"))}),1e3):e("POPUP_DISABLED")}return{unsubscribe:()=>{window.removeEventListener("message",a)}}};var E=i(898781),C=i(467570),S=i(867820),j=i(233211),T=i(584595),D=i(780280),k=i(903095);function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class O extends n.Component{constructor(...e){var t;super(...e),t=this,z(this,"state",{showModal:!1}),z(this,"unsubscribeThisButton",null),z(this,"loginWithFacebook",(({facebookConnectData:e,isFromStatusChange:t,isAccountSwitch:i,handlePostSuccessConnect:n,loadingIndicatorCallback:s})=>{const{checkExperiment:r,container:a,desktopCoreLoginContext:{getDeviceAppTypeString:l},i18n:d,login:c,onLoginWithMfa:u,onLoginWithSuspended:h,pageContext:p,showResponseMessageModal:g,showLoginRateLimited:m,socialSignupCallbacks:x}=this.props,b={container:a,page:null==p?void 0:p.pageType},y="PROFILE"===(v=e).type?{facebook_id:v.profile.id}:{facebook_id:v.id,facebook_token:v.access_token};var v;c({creds:y,loggingOptions:{loggingData:b,loginAttemptContextEvent:this.signupLoginContextEvent(7534)},isAccountSwitch:i}).then((e=>{var t,s;const d=null==e||null===(t=e.resource_response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.user;i&&d&&(0,o.Z)(d,"facebook",a),(0,S.My)("login.facebook."+l()),g?g(!0):_.ZP.handleRedirect(this.props.nextUrlParam||_.ZP.defaultSocialLoginRedirectUrl()),null==n||n(),r("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,f.Z)()}),(i=>{var n;i.api_error_code===T.Zn?(null==s||s(!1),(0,S.My)("login.facebook."+l()),null==u||u(y,{phoneNumberEnd:null===(n=i.data)||void 0===n?void 0:n.phone_number_end})):i.api_error_code===T.xN||i.api_error_code===T.lg?"ACCOUNT_RECOVERY"===x.type?x.switchToAccountRecoverySignupFlow("facebook"):this.registerWithFacebook({facebookConnectData:e,loggingData:b,isFromStatusChange:t,switchToSocialSignupWithAgeFlow:x.switchToSocialSignupWithAgeFlow}):[T.ik].includes(i.api_error_code)?null==m||m():(i.api_error_code&&(0,S.My)(`facebook_button.failed_login_${i.api_error_code}`),i.api_error_code===T.an&&h?h():(0,P.x)(d.bt("Spiacenti, impossibile effettuare l'accesso.", "Sorry, we can't log you in.", "error message when user failed to login caused by suspend/deactivated etc.", undefined, true)))}))})),z(this,"statusChangeCallback",(e=>{var t,i;null===(t=(i=this.props).onClick)||void 0===t||t.call(i);const{connectErrorMessage:n,handlePostSuccessConnect:o,isAccountSwitch:s,loadingIndicatorCallback:r}=this.props;let a;if("connected"===e.status){const{authResponse:t}=e;(0,S.My)("web.facebook_connect_button.login_status.connected"),null==r||r(!0),this.loginWithFacebook({facebookConnectData:{type:"ACCESS_TOKEN",id:t.userID,access_token:t.accessToken},isFromStatusChange:!0,isAccountSwitch:s,handlePostSuccessConnect:o,loadingIndicatorCallback:r}),a="success"}else"not_authorized"===e.status?((0,S.My)("web.facebook_connect_button.cancel.not_authorized"),(0,P.x)(n),a="not_authorized"):((0,S.My)("web.facebook_connect_button.cancel.unknown"),(0,P.x)(n),a="other_error");const{handlePostConnectClick:l}=this.props;null==l||l(a)})),z(this,"showDefaultError",(()=>{const{i18n:e,loadingIndicatorCallback:t}=this.props;null==t||t(!1),(0,P.x)(e.bt("L'email  necessaria per la registrazione.", "Email required for registration.", " - ", undefined, true))})),z(this,"registerWithFacebook",(async function({facebookConnectData:e,loggingData:i,isFromStatusChange:n,switchToSocialSignupWithAgeFlow:o}){const{desktopCoreLoginContext:{register:s},disablePostSignupNextUrl:r,loadingIndicatorCallback:a,nextUrlParam:l,onFBMissingEmail:c,onFBPhoneOnlyConnectVerified:u,showResponseMessageModal:h,showSignupWelcomeLoadingFn:g}=t.props,m=()=>{t.showDefaultError(),n||(t.rerequestFacebookEmail=!0)};let f=null;if("PROFILE"===e.type)f={...e.profile};else try{f=await(0,C.MI)(e.access_token)}catch(w){m()}if(!f)return;const x=(0,d.Z)(f),b={type:"facebook",context:i,signupOptions:x};if(!f.email)return void(u?(n||null==a||a(!1),u(b)):n&&c?c(b):m());const y={birthday_source_site:v.E_.FACEBOOK,email_source_site:v.E_.FACEBOOK};if(!n)return void o(b);const{birthday:P}=x;if(void 0===P||!(0,p.Z)(P))return null==a||a(!1),void o({...b,signupOptions:{...b.signupOptions,email_source_site:v.E_.FACEBOOK}});h||null==g||g(!0);try{await s({...x,...y,birthday:P},{signupContext:i,signupAttemptContextEvent:t.signupLoginContextEvent(7537)})}catch(w){m()}h?h(!0):_.ZP.handleSignupRedirect(n?l:l||window.location.pathname,r)}))}componentDidMount(){if(this.props.webFacebookDisabled)return;"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=()=>this.checkLoginState(),window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1);const{requestContext:{userAgent:{platform:e}}}=this.props;if(["ios","ipad"].includes(e))if(window.fb_init!==a.Z.STARTED&&window.fb_init!==a.Z.FINISHED)this.initializeFB();else if(window.fb_init===a.Z.FINISHED&&window.FB.XFBML)window.FB.XFBML.parse();else{const e=setInterval((()=>{window.fb_init===a.Z.FINISHED&&window.FB.XFBML&&(window.FB.XFBML.parse(),clearInterval(e))}),100)}else setTimeout((()=>{window.__branchRedirectToStore||!window.__branchPinterestStarted?this.initializeFB():window.onbeforeunload=()=>{window.__branchRedirectToStore&&this.initializeFB()}}),50);var t,i,n,o;this.props.isRerequest&&(null===(t=(i=this.props).loadingIndicatorCallback)||void 0===t||t.call(i,!1),null===(n=(o=this.props).showSignupWelcomeLoadingFn)||void 0===n||n.call(o,!1))}componentDidUpdate(){window.nextUrlParam=this.props.nextUrlParam}componentWillUnmount(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){const e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam)}}initializeFB(){const{requestContext:{locale:e}}=this.props;null!==this.profilePicButton&&(void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():(window.fbAsyncInit=()=>(0,C.sl)(),((t,i,n)=>{const o=t.getElementsByTagName(i)[0];if(t.getElementById(n))return;const s=t.createElement(i);s.id=n,s.src=(0,l.Z)(e),o&&o.parentNode&&o.parentNode.insertBefore(s,o)})(document,"script","facebook-jssdk")))}checkLoginState(){window.FB.getLoginStatus((function(e){this.statusChangeCallback&&this.statusChangeCallback(e)}))}signupLoginContextEvent(e){const{desktopCoreLoginContext:{viewer:t}}=this.props;return{event_type:e,aux_data:{...(0,y.Z)(t.type),signup_login_method:g.Z.FACEBOOK}}}renderProfilePicButtonWithFallback(){const{i18n:e,isRerequest:t,showFallback:i}=this.props;return(0,u.jsxs)(c.xu,{"data-test-id":"facebook-connect-button",ref:e=>{this._fallbackButton=e},children:[(0,u.jsx)(s.Z,{onClick:()=>{var e;const{connectErrorMessage:t,desktopCoreLoginContext:{getDeviceAppTypeString:i},i18n:n,webFacebookDisabled:o,viewer:s}=this.props;if(o)return void this.setState({showModal:!0});(0,S.My)("fallback_facebook_button.click"),(0,S.NC)("press_facebook_login_fallback"),(0,S.My)("unauth_web.facebook_connect.manual.attempt"),(0,S.My)(`unauth_web.social_connect.facebook.${i()}`),null===(e=this.unsubscribeThisButton)||void 0===e||e.call(this);const{unsubscribe:r}=A({onSuccess:e=>{(0,S.My)("unauth_web.facebook_connect.manual.success"),this.loginWithFacebook({facebookConnectData:e,isFromStatusChange:!1})},onError:e=>{(0,S.My)("unauth_web.facebook_connect.manual.failure"),(0,P.x)("POPUP_DISABLED"===e?n.bt("Devi abilitare i popup!", "You must enable popups!", " - ", undefined, true):t)},onEventReceived:()=>{var e;null===(e=this.unsubscribeThisButton)||void 0===e||e.call(this)},rerequestFacebookEmail:this.rerequestFacebookEmail,viewer:s});this.unsubscribeThisButton=()=>{r(),this.unsubscribeThisButton=null}},styleOverrides:{backgroundClip:"padding-box",backgroundColor:"#1877F2",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:i?"relative":"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%",borderRadius:"20px"},tabIndex:-1,children:(0,u.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(c.xu,{color:"default",rounding:"circle",marginStart:1,dangerouslySetInlineStyle:{__style:{paddingTop:4,paddingBottom:3,paddingRight:3,paddingLeft:3}},height:24,width:24,children:(0,u.jsx)(c.JO,{accessibilityLabel:e.bt("Facebook", "facebook", "accessible label for facebook icon", undefined, true),color:"shopping",icon:"facebook",inline:!0,size:19})}),(0,u.jsx)("span",{style:{color:"#fff",display:"inline-block",fontFamily:r.Z,fontSize:"16px",fontWeight:"bold",letterSpacing:"0.1px",lineHeight:"15px",marginRight:"24px",marginLeft:"15px",paddingTop:"4px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},children:e.bt("Continua con Facebook", "Continue with Facebook", " - ", undefined, true)})]})}),!i&&(0,u.jsx)(c.xu,{height:40,dangerouslySetInlineStyle:{__style:{textAlign:"left"}},ref:e=>{this.profilePicButton=e},children:(0,u.jsx)("div",{className:"fb-login-button","data-auth-type":t?"rerequest":void 0,"data-button-type":"continue_with","data-layout":"rounded","data-onlogin":"checkLoginState","data-scope":C.$.join(","),"data-size":"large","data-use-continue-as":"true","data-width":"268px"})})]})}render(){const{tooltip:e}=this.props;return(0,u.jsxs)("div",{style:{position:"relative"},children:[this.renderProfilePicButtonWithFallback(),!!e&&(0,u.jsx)(h,{anchor:this._fallbackButton,message:e}),this.state.showModal&&(0,u.jsx)(m.Z,{type:"facebook",onDismiss:()=>this.setState({showModal:!1})})]})}}function R(e){const t=(0,E.ZP)(),i=(0,D.B)(),n=(0,j.B$)(),o=(0,k.lO)(),{checkExperiment:s}=(0,w.F)(),{anyEnabled:r}=s("web_facebook_disabled"),a=(0,b.Z)();return(0,u.jsx)(O,{...e,connectErrorMessage:t.bt("Impossibile connettersi.  necessario autorizzare Pinterest.", "Couldn't connect. You must authorize Pinterest.", " - ", undefined, true),desktopCoreLoginContext:n,i18n:t,login:(0,x.Z)(),requestContext:i,pageContext:o,webFacebookDisabled:r,viewer:a,checkExperiment:s})}},402171:(e,t,i)=>{i.r(t),i.d(t,{default:()=>dt});var n=i(667294),o=i(116303),s=i(231486),r=i(655340),a=i.n(r),l=i(290148),d=i(816068),c=i(830269),u=i(803491),h=i(785893);const p=({margin:e,wideLight:t})=>(0,h.jsx)("div",{style:{borderBottom:(t?"#efefef":"#dedede")+" 1px solid",margin:null!=e?e:"10px auto",width:t?404:110}});var _=i(898781),g=i(112690),m=i(52022),f=i(901656),x=i(170168),b=i(966113),y=i(867820),v=i(233211),P=i(780280),w=i(883119);function I({type:e}){const{viewer:t}=(0,v.B$)(),i=(0,_.ZP)(),n=(0,g.Z)(),o=`${x.C0}${b.Hm}`;return(0,h.jsxs)(w.xu,{display:"flex",alignItems:"center",justifyContent:"center",fit:!0,marginTop:2,marginEnd:"auto",marginBottom:1,marginStart:"auto",children:[(0,h.jsx)(w.xv,{size:"100",weight:"normal",children:i.bt("Sei un'azienda?", "Are you a business?", "Prompt for business signup", undefined, true)}),(0,h.jsx)(w.xu,{"data-test-id":"business-start",marginStart:1,children:(0,h.jsx)(w.rU,{href:o,underline:"none",target:"blank",onClick:()=>{(0,y.My)("unauth.business_link.click"),n({event_type:101,component:"signupToLogin"===e?13096:13867,element:10281,aux_data:(0,f.Z)(t.type)})},children:(0,h.jsx)(w.xv,{size:"100",weight:"bold",children:i.bt("Inizia qui", "Get started here!", "Prompt for signing up", undefined, true)})})})]})}const A=({children:e,layout:t})=>{const{isRTL:i}=(0,P.B)();switch(t){case"SIGNUP_LARGE":return(0,h.jsx)(w.xu,{children:(0,h.jsx)(w.xu,{marginTop:4,children:e})});case"SIGNUP_SMALL":return(0,h.jsx)(w.xu,{marginTop:3,children:e});case"SIGNUP_WITH_AGE":return(0,h.jsx)(w.xu,{margin:-4,children:(0,h.jsx)(w.xu,{padding:3,"data-test-id":"login-button",children:e})});case"LOGIN_INLINE":return(0,h.jsxs)(w.xu,{children:[(0,h.jsx)(p,{}),(0,h.jsx)(w.xu,{display:"inlineBlock",marginEnd:1,children:e})]});case"LOGIN_SMALL":return(0,h.jsxs)(w.xu,{children:[(0,h.jsx)(p,{}),e]});case"SIGNUP_DEFAULT":case"LOGIN_DEFAULT":return(0,h.jsxs)(w.xu,{children:[(0,h.jsx)(p,{margin:"SIGNUP_DEFAULT"===t?i?"20px -68px 15px 0px":"20px 0px 15px -68px":i?"20px 30px 15px -10px":"20px -10px 15px -68px",wideLight:!0}),(0,h.jsx)(w.xu,{children:e})]});default:return e}};function E({layout:e,onClick:t,shouldHideBusinessCreateFooterLink:i,type:n}){const o=(0,_.ZP)(),s=(0,m.Z)();return(0,h.jsxs)(A,{layout:e,children:[(0,h.jsx)(w.xu,{display:"flex",fit:!0,marginEnd:"auto",marginBottom:1,alignItems:"center",justifyContent:"center",children:(0,h.jsxs)(w.kC,{alignItems:"stretch",justifyContent:"center",children:[(0,h.jsx)(w.xv,{size:"100",children:o.bt("Hai gi un account?", "Already a member?", "modernized.nux.footer.text", undefined, true)}),(0,h.jsx)(u.Z,{noButtonStyles:!0,onClick:e=>{s({action:"click",item:"email-signup-button"}),t(e)},styleOverrides:{color:"#333",marginLeft:"5px",fontWeight:"bold"},type:"button",dataTestId:"login-signup-toggle",children:"signupToLogin"===n&&o.bt("Accedi", "Log in", "modernize.nux.switch.to.login.modal", undefined, true)||o.bt("Non usi ancora Pinterest? Registrati", "Not on Pinterest yet? Sign up", "nux.unauth.user.sign.up.message", undefined, true)})]})}),!i&&(0,h.jsx)(I,{type:n})]})}var C=i(563387),S=i(45169),j=i(109322),T=i(226198),D=i(143461),k=i(754124),z=i(584595),O=i(469134);const R=({disablePostSignupNextUrl:e,handleLoginToggleButtonClick:t,loadingIndicatorCallback:i,nextUrlParam:o,registrationCredentials:r,showResponseMessageModal:u})=>{const p=(0,_.ZP)(),{register:g,viewer:m}=(0,v.B$)(),{refreshToken:x}=(0,D.D)(),[b,P]=(0,n.useState)(!1),[I,A]=(0,n.useState)(!0),[R,L]=(0,n.useState)(!1),[M,B]=(0,n.useState)(""),[N,F]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{"1"===s.U2(T.It)&&(L(!0),B(p.bt("Spiacenti, al momento non disponi dell'idoneit per iscriverti a Pinterest.", "Sorry, youre not eligible to sign up for Pinterest right now.", "signup.birthdaycollection.ineligible.msg", undefined, true)))}),[p,B]),(0,n.useEffect)((()=>{(0,y.My)("dweb.signup_age_step",{type:null==r?void 0:r.type,format:"birthday"})}),[null==r?void 0:r.type]);const Z=async()=>{if(!r||!N)return void i(!1);const t={...r.signupOptions,birthday:(0,d.Z)(N),birthday_source_site:S.E_.PINTEREST};try{const i={facebook:c.Z.FACEBOOK,google:c.Z.GPLUS,google_one_tap:c.Z.GOOGLE_ONE_TAP,line:c.Z.LINE,socialSignupWithAge:void 0}[r.type];let n;"google"===r.type?n=12981:"google_one_tap"===r.type&&(n=12982),await g(t,{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,element:n,aux_data:{...(0,f.Z)(m.type),...i?{signup_login_method:i}:Object.freeze({})}}}),(0,y.My)("dweb.birthdaycollection.signup_success"),u?u(!0):l.ZP.handleSignupRedirect(o,e)}catch(n){switch(x&&x(),n.api_error_code){case z.tz:(0,y.My)("dweb.birthdaycollection.signup_error.underage"),s.t8(T.It,"1",(0,s.kZ)(T.It)),P(!0);break;case z.NF:(0,y.My)("dweb.birthdaycollection.signup_error.eu_missing_age"),B(n.message||p.bt("Abbiamo bisogno di sapere la tua et per poterti fornire questo servizio.", "We need to know your age to provide you this service.", "signup.birthdaycollection.error.missingAge", undefined, true));break;case z.tL:(0,y.My)("dweb.birthdaycollection.signup_error.overage"),B(n.message||p.bt("Ops! Per registrarti, inserisci un'et valida.", "Oops! Please use a valid age to sign up.", "signup.birthdaycollection.error.overage", undefined, true));break;case z.iZ:(0,y.My)("dweb.birthdaycollection.signup_error.invalid_email"),B(p.bt("Il tuo indirizzo email non  valido.", "Your email is invalid.", "signup.birthdaycollection.error.invalidEmail", undefined, true));break;case z.Jt:(0,y.My)("dweb.birthdaycollection.signup_error.email_contain_pinterest"),B(p.bt("Riporta fedelmente il tuo nome o il nome del tuo brand", "Please stick to your name, or the name of your brand", "signup.birthdaycollection.error.emailContainsPinterest", undefined, true));break;default:(0,y.My)("dweb.birthdaycollection.signup_error.other"),B(p.bt("Spiacenti! Si  verificato un errore nel nostro sistema.", "Sorry! Something went wrong on our end.", "signup.birthdaycollection.error.other", undefined, true))}}};return b?(0,h.jsx)(k.Z,{birthday:N,onEditBirthday:()=>P(!1)}):(0,h.jsx)(w.xu,{paddingX:5,paddingY:5,children:(0,h.jsx)(w.xu,{paddingX:12,children:(0,h.jsxs)(w.kC,{direction:"column",justifyContent:"center",alignItems:"center",children:[(0,h.jsx)(w.xu,{width:48,height:48,marginTop:5,marginBottom:1,children:(0,h.jsx)(w.Ee,{alt:p.bt("Immagine compleanno", "Birthday Image", "signup.birthdaycollection.image.alt", undefined, true),src:a(),naturalHeight:48,naturalWidth:48})}),(0,h.jsx)(w.xu,{marginBottom:2,children:(0,h.jsx)(w.X6,{align:"center",size:"600",children:p.bt("Inserisci la tua data di nascita", "Enter your birthdate", "signup.birthdaycollection.title", undefined, true)})}),(0,h.jsxs)(w.xu,{width:310,marginBottom:4,children:[(0,h.jsx)(w.xu,{marginBottom:4,children:(0,h.jsx)(w.xv,{align:"center",children:p.bt("Raccogliamo queste informazioni per fornire un'esperienza migliore ai giovani della nostra community. Useremo anche la tua data di nascita per personalizzare i suggerimenti e gli annunci.", "We collect this info to help provide a better experience for the younger people in our community. Well also use your birthdate to help personalize your recommendations and ads.", "signup.birthdaycollection.subheader1", undefined, true)})}),(0,h.jsx)(w.xv,{align:"center",children:p.bt("Queste informazioni non verranno mostrate pubblicamente.", "It will not be displayed publicly.", "signup.birthdaycollection.subheader2", undefined, true)})]}),(0,h.jsx)(w.xu,{width:280,marginBottom:4,children:(0,h.jsx)(w.nv,{autoComplete:"bday",disabled:R,errorMessage:M,id:"birthday",onChange:({value:e})=>{B(""),A(!e),F(e)},size:"lg",type:"date",value:N||""})}),(0,h.jsx)(w.xu,{marginBottom:10,children:(0,h.jsx)(w.xv,{color:"subtle",children:(0,k.b)(p)})}),(0,h.jsx)(w.xu,{width:280,marginBottom:3,children:(0,h.jsx)(w.zx,{color:"red",disabled:I,fullWidth:!0,onClick:()=>{!N||(0,O.Cd)(N,j.kx)?Z():B((0,O.Uy)(p))},text:p.bt("Crea account", "Create account", "signup.birthdaycollection.submit_label", undefined, true)})}),(0,h.jsx)(w.xu,{marginTop:2,marginBottom:9,width:340,children:(0,h.jsx)(C.Z,{dark:!0})}),(0,h.jsx)(w.xu,{marginBottom:2,children:(0,h.jsx)(E,{layout:"SIGNUP_LARGE",onClick:()=>t(),type:"signupToLogin"})})]})})})};var L=i(123906),M=i(56641),B=i(810196),N=i(777024),F=i(319915),Z=i(996438),U=i(689070),V=i(738192),H=i(611683),G=i(743847),W=i(65189),$=i(389054),q=i(216895),Y=i(947599),X=i(499128),K=i(85334),J=i(323468),Q=i(817656),ee=i(905171),te=i(773285),ie=i(385740),ne=i(85651),oe=i(134906),se=i(903095),re=i(616550),ae=i(343341);function le(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const de=(0,n.lazy)((()=>i.e(97500).then(i.bind(i,97500)))),ce="emailpwdstep";class ue extends n.Component{constructor(e){var t;super(e),t=this,le(this,"onLoginWithSuspended",(()=>{const{loadingIndicatorCallback:e}=this.props;e(!1),this.setState({accountRecoveryModalType:ne.w[z.an]})})),le(this,"onLoginWithVoluntarilyDeactivated",(e=>this.setState({googleValidationError:e}))),le(this,"setLoadingState",(e=>{const{loadingIndicatorCallback:t,showSignupWelcomeLoadingFn:i}=this.props;return i&&!1===e&&i(!1),t(e)})),le(this,"handleEmailChange",(e=>{this.props.setEmail(e.target.value),this.setState({hideFBGoogleToolTip:!0})})),le(this,"handlePasswordChange",(e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.setPassword(e.target.value)})),le(this,"handleAgeChange",(e=>{this.state.birthdayValidationError&&this.setState({birthdayValidationError:null}),this.props.onAgeChange&&this.props.onAgeChange(e)})),le(this,"handleEmailSignUp",(()=>{var e;(0,y.My)("unauth_email_validation_attempt"),this.props.trackInteraction({action:"click",item:"email-signup-button"});let t=(0,q.Z)(null!==(e=this.props.email)&&void 0!==e?e:"",this.emailValidators);if(t)this.setState({emailValidationError:t}),(0,y.My)(`unauth.login.error.CLIENT_ERROR.malformemail.${ce}`);else{var i,n;const e=(0,q.Z)(null!==(i=this.props.password)&&void 0!==i?i:"",this.asciiValidators);e&&(this.setState({passwordValidationError:e}),(0,y.My)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${ce}`)),t=(0,q.Z)(null!==(n=this.props.password)&&void 0!==n?n:"",this.loginPasswordValidators),t?(this.setState({passwordValidationError:t}),(0,y.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${ce}`)):(this.setState({passwordValidationError:null}),this.validateEmailAvailable()),this.setState({emailValidationError:null}),this.props.setNameFromEmail()}})),le(this,"register",(({birthday:e})=>{const{birthdayCollectionRequired:t,container:i,email:n,name:o,pageContext:r,password:a,onBirthdayUnderage:d,requestContext:c,signupSource:u,register:h,i18n:p}=this.props,_={type:"email",birthday:e,email:n,password:a,country:c.country,first_name:o,last_name:"",recaptchaV3Token:this.props.recaptchaV3Token||"default"},g={container:i,page:null==r?void 0:r.pageType,signupSource:u};(0,y.My)("one_step_age_signup_complete"),h(_,{signupContext:g,signupAttemptContextEvent:this.signupLoginContextEvent(7537)}).then((()=>{const{showResponseMessageModal:e}=this.props;(0,y.My)("unauth.signup_one_step.completed"),e?e(!0):l.ZP.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl)}),(e=>{switch(this.setLoadingState(!1),this.props.refreshRecaptchaV3Token&&this.props.refreshRecaptchaV3Token(),e.api_error_code){case z.tz:s.t8(T.It,"1"),d&&t?d({birthday:this.props.birthday,email:n}):this.showUnderAgeError(e.message);break;case z.NF:this.setState({birthdayValidationError:e.message||p.bt("Abbiamo bisogno di sapere la tua et per poterti fornire questo servizio.", "We need to know your age to provide you this service.", "userRegistration.missingAgeError", undefined, true)});break;case z.tL:this.setState({birthdayValidationError:e.message||p.bt("Ops! Per registrarti, inserisci un'et valida.", "Oops! Please use a valid age to sign up.", "userRegistration.overageError", undefined, true)});break;case z.iZ:(0,y.My)("unauth_show_invalid_email_inline_error"),this.setState({emailValidationError:p.bt("Il tuo indirizzo email non  valido.", "Your email is invalid.", " - ", undefined, true)});break;case z.Jt:(0,y.My)("unauth_show_invalid_email_contains_pinterest"),this.setState({emailValidationError:p.bt("Riporta fedelmente il tuo nome o il nome del tuo brand", "Please stick to your name, or the name of your brand", " - ", undefined, true)});break;default:(0,ee.x)(p.bt("Spiacenti! Si  verificato un errore nel nostro sistema.", "Sorry! Something went wrong on our end.", " - ", undefined, true))}}))})),le(this,"checkEmailExistsWithCompletion",(({email:e,handleEmailExists:t,handleEmailNotExist:i,handleError:n})=>{const{i18n:o}=this.props;(0,U.Z)({url:"/v3/register/exists/",data:{email:e}}).then((e=>{var n;this.setState({emailValidationError:null}),!1===(null===(n=e.resource_response)||void 0===n?void 0:n.data)?i():t()}),(e=>{let t=o.bt("Mmm... non sembra un indirizzo email valido", "Hmm...that doesn't look like an email address", " - ", undefined, true);if(e.api_error_code===z.bd)t=e.message;else{(0,q.Z)(this.props.email,this.asciiValidators)&&(0,y.My)(`unauth.login.error.CLIENT_ERROR.nonasciiemail.${ce}`)}this.setState({emailValidationError:t}),null==n||n()}))})),le(this,"checkEmailValidation",(async function(e){const{i18n:i,showToast:n}=t.props;if((0,G.Z)(e)||(0,G.z)(e,"yahoo")||(0,G.z)(e,"hotmail"))t.setState({emailValidationError:i.bt("Siamo spiacenti, questo non sembra un indirizzo email valido", "Sorry, this doesn't look like a valid email", "register.email.error.message", undefined, true)});else try{const n=await(0,U.Z)({url:"/v3/email/validation/",data:{email:e}}),{data:o}=n.resource_response||{};o&&o.is_valid?t.setState({emailValidationError:null}):t.setState({emailValidationError:i.bt("Siamo spiacenti, questo non sembra un indirizzo email valido", "Sorry, this doesn't look like a valid email", "register.email.error.message", undefined, true)})}catch(o){null!=o&&o.message?n((({hideToast:e})=>(0,h.jsx)(X.ZP,{duration:3e3,type:"error",text:o.message,onHide:e}))):(0,y.My)(`unauth.login.error.${ce}.ERROR${o.api_error_code}`)}})),le(this,"updateAccountRecoveryModal",(e=>this.setState({accountRecoveryModalType:e}))),le(this,"renderSignupForm",(()=>{const{age:e,birthday:t,birthdayCollectionRequired:i,email:n,i18n:o,onBirthdayChange:r,password:a,suppressFocus:l,logContextEvent:d,viewType:c,viewParameter:u,component:p,attributionLabel:_}=this.props,{birthdayValidationError:g}=this.state,m=(0,O.Uy)(o);return this.state.showRegisterForm?(0,h.jsx)($.Z,{buttonText:o.bt("Continua", "Continue", "Continue button on web", undefined, true),buttonTextLabel:o.bt("Continua a creare il tuo account Pinterest", "Continue creating your Pinterest account", "Accessiblity button text to continue creating an account", undefined, true),email:n,emailFieldHasError:this.state.emailFieldHasError,emailLabel:o.bt("Continua con l'email", "Continue with email", "Sign up button", undefined, true),emailText:o.bt("Email", "Email", "Text on button asking for email", undefined, true),emailValidationError:this.state.emailValidationError,signupForm:{ageOrBirthday:i?{type:"birthday",props:{birthday:t,birthdayValidationError:g,setBirthdayValidationError:e=>this.setState({birthdayValidationError:e}),onBirthdayChange:r}}:{type:"age",props:{age:e,ageValidationError:g,onAgeChange:this.handleAgeChange,onAgeError:e=>this.setState({birthdayValidationError:e})}},checkEmailExistsWithCompletion:this.checkEmailExistsWithCompletion,checkEmailValidation:this.checkEmailValidation,registerRestricted:"1"===s.U2(T.It)},onButtonClick:()=>{if(i){if("1"===s.U2(T.It))return void this.showUnderAgeError();if(t&&!(0,O.Cd)(t,j.kx))return void this.setState({birthdayValidationError:m})}this.setState({facebookValidationError:null,googleValidationError:null,hideFBGoogleToolTip:!1}),this.handleEmailSignUp()},onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:null!=a?a:"",passwordText:o.bt("Crea una password", "Create a password", "Text asking the user to create a password while registering", undefined, true),passwordValidationError:this.state.passwordValidationError,suppressFocus:l,component:p,viewType:c,viewParameter:u}):(0,h.jsx)(w.xu,{"data-test-id":"emailSignUpButton",children:(0,h.jsx)(w.zx,{fullWidth:!0,text:o.bt("Continua con l'email", "Continue with email", "Text on the sign up button for signing up with email", undefined, true),color:"red",onClick:()=>{d({view_type:c,view_parameter:u,component:p,element:13506,event_type:10441,aux_data:{upsell_reason:_}}),(0,y.NC)("signup_email_button"),this.props.trackInteraction({action:"click",item:"email-signup-button",within:"bottom-right-upsell"}),this.setState({showRegisterForm:!0})}})})})),le(this,"showUnderAgeError",(e=>{const{i18n:t}=this.props;this.setState({birthdayValidationError:e||t.bt("Spiacenti, al momento non disponi dell'idoneit per iscriverti a Pinterest.", "Sorry, youre not eligible to sign up for Pinterest right now.", "Error message shown when underage user tries to register", undefined, true)})}));const i=new URLSearchParams(e.location.search),n=+i.get("aec");i.delete("aec"),e.history.replace({pathname:e.location.pathname,search:i.toString()}),this.state={accountRecoveryModalType:n===z.yV||n===z.$j?l.Ny.SOFT_BANNED:null,birthdayValidationError:null,emailFieldHasError:!1,emailValidationError:null,facebookValidationError:null,googleValidationError:null,passwordValidationError:null,showRegisterForm:"home_page"===this.props.container,hideFBGoogleToolTip:!1};const{i18n:o}=e;this.emailValidators=[(0,oe.aH)({message:o.bt("Hai saltato qualcosa! Non dimenticare di aggiungere il tuo indirizzo email.", "You missed a spot! Don't forget to add your email.", " - ", undefined, true)}),(0,oe.GT)({message:o.bt("Mmm... non sembra un indirizzo email valido.", "Hmm...that doesn't look like an email address.", " - ", undefined, true)})];const r=o.bt("La password  troppo breve. Sono necessari pi di 6 caratteri.", "Your password is too short! You need 6+ characters.", " - ", undefined, true),a=o.bt("Utilizza solo una combinazione di lettere, numeri e caratteri speciali (ad esempio: ?, !, $).", "Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "EmailPasswordStep.password.onlyASCII", undefined, true);this.requireAgeValidatorMessage=o.bt("Aiutaci a proteggerti indicando la tua et", "Help us protect you by providing your age", "signup.emailpasswordstep.age.validator_message", undefined, true),this.requireBirthdayValidatorMessage=o.bt("Hai dimenticato qualcosa. Ricordati di aggiungere la tua data di nascita.", "You missed a spot. Dont forget to add your birthday.", "signup.emailpasswordstep.birthday.require.validator_message", undefined, true);const d=o.bt("Data non valida", "Invalid date", "signup.emailpasswordstep.birthday.validator_message", undefined, true);this.passwordValidators=[(0,oe.aH)({message:r}),(0,J.r)({shortPassStr:r,samePasswordStr:o.bt("Crea un nome utente e una password diversi.", "Please make your username and password different.", " - ", undefined, true),blackPassStr:o.bt("Crea una password pi sicura.", "Please make a stronger password.", " - ", undefined, true)})],this.asciiValidators=[(0,oe.oR)({message:a})],this.loginPasswordValidators=[(0,oe.aH)({message:r}),(0,oe.oR)({message:a}),(0,oe.Gy)({min:6,minErrorString:r})];const c=o.bt("Inserisci un numero valido.", "Please enter a valid number.", "Signup.EmailPasswordStep.ageError", undefined, true),u=(0,oe.ZA)({invalidAgeString:c,ageTooShortString:c});this.ageValidators=e.birthdayCollectionRequired?[]:[(0,oe.aH)({message:this.requireAgeValidatorMessage}),u],this.birthdayValidators=[(0,oe.aH)({message:this.requireBirthdayValidatorMessage}),(0,oe.C9)({date:new Date((new Date).getFullYear(),0,1),message:d})]}handleLoginFailure(e,t){const{setPassword:i,email:n,onLoginWithMfa:o,i18n:s}=this.props,r=e.http_status===Q.Ej?Q.Ej:e.api_error_code;var a;if(r===z.Zn)return void l.ZP.handleLoginMfa(t,{phoneNumberEnd:null===(a=e.data)||void 0===a?void 0:a.phone_number_end},o);const d=(0,V.Z)({error:e,source:"emailPasswordStep",onClickPasswordReset:()=>{(0,y.My)("unauth_password_reset_link_tapped"),(0,U.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:n}}).then((()=>this.updateAccountRecoveryModal(l.Ny.PASSWORD_RESET_SENT)))}});d?(this.setState({...d,accountRecoveryModalType:r?ne.w[r]:void 0}),d.passwordValidationError&&i(""),this.setLoadingState(!1)):((0,ee.x)(s.bt("Spiacenti! Si  verificato un errore nel nostro sistema.", "Sorry! Something went wrong on our end.", " - ", undefined, true)),this.setLoadingState(!1))}handleLoginSuccess(e){l.ZP.storeLoginCredentialsToBrowser(e);const{showResponseMessageModal:t}=this.props;t?t(!1):this.props.nextUrlParam?l.ZP.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl):window.location.reload()}signupLoginContextEvent(e){const{viewer:t}=this.props;return{event_type:e,aux_data:{...(0,f.Z)(t.type),signup_login_method:c.Z.EMAIL}}}validateEmailAvailable(){var e=this;const{birthdayCollectionRequired:t,container:i,email:n,login:o,pageContext:s,password:r}=this.props;this.setLoadingState(!0),this.checkEmailExistsWithCompletion({email:n,handleEmailExists:()=>{const e={username_or_email:n,password:null!=r?r:""};o({creds:e,loggingOptions:{loggingData:{container:i,page:null==s?void 0:s.pageType},loginAttemptContextEvent:this.signupLoginContextEvent(7534)}}).then((()=>this.handleLoginSuccess(e)),(t=>this.handleLoginFailure(t,e)))},handleEmailNotExist:async function(){await e.checkEmailValidation(n);const{age:i,birthday:o,password:s}=e.props;if(e.setLoadingState(!1),e.state.emailValidationError)return;const r=t?(0,q.Z)(o||"",e.birthdayValidators):(0,q.Z)(i||"",e.ageValidators);if(r)return(0,y.My)(`unauth.login.error.CLIENT_ERROR.${t?"invalidbirthday":"invalidage"}.${ce}`),void e.setState({birthdayValidationError:r});let a;if(a=t?o?(0,d.Z)(o):void 0:null!=i&&i.trim()?(0,B.Z)(parseInt(i,10)):void 0,void 0===a)return void e.setState({birthdayValidationError:t?e.requireBirthdayValidatorMessage:e.requireAgeValidatorMessage});const l=(0,q.Z)(null!=s?s:"",e.passwordValidators);if(l)return e.setState({passwordValidationError:l}),void(0,y.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${ce}`);(0,G.Z)(n)?e.setState({emailFieldHasError:!0}):(e.setState({emailValidationError:null}),(0,y.My)("unauth.signup_step_1.completed"),e.register({birthday:a}))}})}render(){const{additionalChildren:e,container:t,disablePostSignupNextUrl:i,email:o,loadingIndicatorCallback:s,nextUrlParam:r,onFBMissingEmail:a,onFBPhoneOnlyConnectVerified:d,onLoginWithMfa:c,switchToSocialSignupWithAgeFlow:u,showLineConnectButton:p,showResponseMessageModal:_,showSignupWelcomeLoadingFn:g,logContextEvent:m,viewType:f,viewParameter:x,component:b,attributionLabel:y}=this.props,{accountRecoveryModalType:v,facebookValidationError:P,googleValidationError:I,hideFBGoogleToolTip:A,showRegisterForm:E}=this.state,S=e=>{m({view_type:f,view_parameter:x,component:b,element:e,event_type:10441,aux_data:{upsell_reason:y}})};return(0,h.jsxs)(w.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:[(0,h.jsx)(ne.Z,{email:o,modalType:v,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,updateAccountRecoveryModal:this.updateAccountRecoveryModal}),(0,h.jsxs)(w.xu,{children:[this.renderSignupForm(),!!E&&(0,h.jsx)(N.Z,{}),(0,h.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"10px"}},children:[(0,h.jsx)(Z.Z,{container:t,disablePostSignupNextUrl:i,loadingIndicatorCallback:s,onFBPhoneOnlyConnectVerified:d,onFBMissingEmail:a,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:u},showResponseMessageModal:_,showSignupWelcomeLoadingFn:g,tooltip:!A&&P||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(l.Ny.RATE_LIMITED),onClick:()=>{S(13505)}}),(0,h.jsx)(w.xu,{height:10}),(0,h.jsx)(w.xu,{children:(0,h.jsx)(H.Z,{container:t,nextUrlParam:r,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:u},showResponseMessageModal:_,tooltip:!A&&I||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(l.Ny.RATE_LIMITED),onClick:()=>{S(13504)}})}),p&&(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(w.xu,{height:10}),(0,h.jsx)(F.Z,{name:"SafeSuspense_EmailPasswordStep_LineConnectButton",children:(0,h.jsx)(Y.Z,{children:(0,h.jsx)(de,{container:t,loadingIndicatorCallback:s,nextUrlParam:r,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:u},showResponseMessageModal:_,showLoginRateLimited:()=>this.updateAccountRecoveryModal(l.Ny.RATE_LIMITED),onClick:()=>{S(13507)}})})})]})]})]}),(0,h.jsx)(C.Z,{dark:!0}),e]})}}function he(e){const t=(0,se.lO)(),i=(0,P.B)(),{showToast:o}=(0,ae.F9)(),{register:s,viewer:r}=(0,v.B$)(),a=(0,K.Z)(),l=(0,g.Z)(),{viewType:d,viewParameter:c}=(0,ie.SU)(),u=(0,m.Z)(),p=(0,_.ZP)(),f=i.country,x=(0,re.useLocation)(),b=(0,re.useHistory)(),{recaptchaV3Token:y,refreshToken:w}=(0,D.D)(),{checkExperiment:I}=(0,te.F)(),A=I("web_birthday_collection_eu_new_users").anyEnabled,E=["GB","IE"].includes(f)||A,C="JP"===f,[S,j]=(0,n.useState)(),[T,k]=(0,n.useState)(),[z,O]=(0,n.useState)(""),[R,L]=(0,n.useState)("");return(0,h.jsx)(ue,{...e,age:S,onAgeChange:e=>j(e.value),birthday:T,onBirthdayChange:e=>k(e.value),name:z,setNameFromEmail:()=>O((0,W.Z)(e.email,f)),password:R,setPassword:L,recaptchaV3Token:y,refreshRecaptchaV3Token:w,birthdayCollectionRequired:E,pageContext:t,requestContext:i,viewer:r,register:s,login:a,logContextEvent:l,viewType:d,viewParameter:c,i18n:p,location:x,history:b,showLineConnectButton:C,showToast:o,trackInteraction:u})}var pe=i(894738);const _e=({email:e,emailError:t,onNotNowClick:i,handleEmailChange:o,handleSubmit:s})=>{const r=(0,_.ZP)();(0,n.useEffect)((()=>{(0,y.My)("unauth.fb_phone_only_signup.email_step")}),[]),r.bt("Utilizziamo il tuo indirizzo email per creare l'account e per avvisi importanti sulla sicurezza e sugli aspetti legali.", "We use your email address for account creation and for important security and legal notices.", "subtitle to explain the step on email collection form", undefined, true);const a=r.bt("Ops. Non possiamo creare il tuo account senza email. Per continuare, assicurati di fornire un indirizzo email per creare l'account.", "Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.", "subtitle to explain the step on email collection form", undefined, true);return(0,h.jsx)(w.xu,{marginTop:3,children:(0,h.jsxs)("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),s()},children:[(0,h.jsx)(w.xv,{align:"start",overflow:"normal",children:a}),(0,h.jsx)(w.xu,{marginTop:3}),(0,h.jsx)(w.xu,{children:(0,h.jsx)(w.nv,{ref:pe.Z,errorMessage:Array.isArray(t)?t.join(""):t,id:"email",onChange:o,placeholder:r.bt("Indirizzo email", "Email address", "email placeholder in the email inputfield on email collection form", undefined, true),size:"lg",type:"email"})}),(0,h.jsx)(w.xu,{marginTop:5}),(0,h.jsx)(w.zx,{fullWidth:!0,color:"red",disabled:!e,text:r.bt("Continua", "Continue", "word on the button which to submit user email information", undefined, true),type:"submit"}),(0,h.jsx)(w.xu,{marginTop:2}),(0,h.jsx)(w.zx,{fullWidth:!0,onClick:()=>{(0,y.My)("unauth.fb_phone_only_signup.email_step.not_now_click"),i&&i()},text:r.bt("Non ora", "Not now", "word on not now button to dismiss the collection form", undefined, true),type:"submit"})]})})};var ge=i(910702),me=i(989392),fe=i(467570);function xe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const be="email";class ye extends n.Component{constructor(e){super(e),xe(this,"mounted",!1),xe(this,"handleEmailChange",(({value:e})=>{this.setState({email:e})})),xe(this,"showError",((e,t)=>{this.mounted&&t===be&&this.setState({emailError:e})})),xe(this,"handleSubmit",(()=>{const{i18n:e}=this.props;if((0,y.My)("unauth.fb_phone_only_signup.submit_email"),this.state.email)(0,y.My)("unauth.fb_phone_only_signup.submit_email"),this.attemptEmailSignupOrLogin();else{const t=e.bt("Email obbligatoria", "Email is required", "email error message", undefined, true);this.setState({emailError:t})}})),xe(this,"handleSignupSuccess",(()=>{l.ZP.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0),(0,y.My)("unauth.fb_phone_only_signup.signup_success")})),xe(this,"handleSignupFailure",(e=>t=>{const{i18n:i}=this.props,n=t.message||i.bt("Spiacenti! Si  verificato un errore... Clicca su Continua per riprovare.", "Oops! Something went wrong Click Continue to try again.", "Error during signup during FB email collection step", undefined, true);this.showError(n,e),(0,y.My)("unauth.fb_phone_only_signup.signup_failure")})),xe(this,"attemptEmailSignupOrLogin",(()=>{const{desktopCoreLoginContext:{register:e},i18n:t}=this.props,{email:i}=this.state,n=[(0,oe.GT)({message:t.bt("Mmm... Non sembra un indirizzo email valido.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)})],o=(0,q.Z)(i,n);if(o)return(0,y.My)("unauth.fb_phone_only_signup.email_validation_failure"),void this.setState({emailError:o});const{registrationCredentials:{type:s,signupOptions:r},showSocialSignupWithAgeStep:a,showEmailAlreadyExistModal:l}=this.props;(0,U.Z)({url:"/v3/register/exists/",data:{email:i}}).then((t=>{var n;if(!1===(null===(n=t.resource_response)||void 0===n?void 0:n.data)){const t={...r,email:i,email_source_site:S.E_.PINTEREST},{birthday:n}=t;if(void 0!==n&&(0,me.Z)(n)){(t.facebook_token?(0,fe.MI)(t.facebook_token).then(ge.Z):Promise.resolve(Object.freeze({}))).then((i=>e({...i,...t,birthday:n,birthday_source_site:S.E_.FACEBOOK},{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_type:10}}))).then(this.handleSignupSuccess,this.handleSignupFailure(be))}else a({type:s,signupOptions:t})}else l({email:i}),(0,y.My)("unauth.fb_phone_only_signup.email_existed")}),(e=>{let i=t.bt("Mmm... Non sembra un indirizzo email valido.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true);e.api_error_code===z.bd&&(i=e.message),this.showError(i,be),(0,y.My)("unauth.fb_phone_only_signup.email_exist_api_call_failure")}))})),this.state={email:"",emailError:""}}componentDidMount(){this.mounted=!0,this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1)}componentWillUnmount(){this.mounted=!1}render(){return(0,h.jsx)(w.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:(0,h.jsx)(_e,{email:this.state.email,emailError:this.state.emailError,handleEmailChange:this.handleEmailChange,handleSubmit:this.handleSubmit,onNotNowClick:this.props.onNotNowClick})})}}const ve=e=>{const t=(0,v.B$)(),i=(0,P.B)(),n=(0,_.ZP)();return(0,h.jsx)(ye,{...e,desktopCoreLoginContext:t,i18n:n,requestContext:i})},Pe=({onClick:e})=>{const t=(0,P.B)(),i=(0,_.ZP)();return(0,h.jsx)(w.xu,{position:"absolute",display:"block",marginTop:4,marginEnd:4,marginStart:4,height:40,width:40,right:!t.isRTL,left:t.isRTL,top:!0,"data-test-id":"full-page-signup-close-button",children:(0,h.jsx)(w.hU,{accessibilityLabel:i.bt("chiudi", "close", "accessible label for close button", undefined, true),onClick:e,icon:"cancel",iconColor:"darkGray",size:"md"})})};var we=i(350118);const Ie=({fallback:e,savePinId:t})=>{var i,n;const o=(0,_.ZP)(),{path:s}=(0,re.useRouteMatch)(),r=(0,re.useLocation)(),a=(0,we.S6)(),l=t||("/pin/:id"===s?r.pathname.split("/")[2]:null);if(!l)return e;const d=a(l);if(!d)return e;const c=null===(i=d.images)||void 0===i||null===(n=i["236x"])||void 0===n?void 0:n.url;return c?(0,h.jsx)(w.xu,{width:56,height:72,margin:"auto",marginBottom:6,marginTop:4,children:(0,h.jsx)(w.zd,{width:56,height:72,rounding:2,children:(0,h.jsx)(w.Ee,{alt:o.bt("Salva l'immagine del Pin", "Save pin image", "FullPageSignup.signupImage.savePinImage", undefined, true),color:d.dominant_color||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:c})})}):e};function Ae({container:e,fallback:t,savePinId:i,user:n}){var s,r;const a=(0,_.ZP)();switch(e){case"follow":return(0,h.jsx)(w.xu,{display:"flex",justifyContent:"center",marginTop:8,marginBottom:4,children:(0,h.jsx)(o.Z,{accessibilityLabel:a.bt("Avatar utente", "User Avatar", "profile.ProfileHeader.Avatar", undefined, true),name:null!==(s=null==n?void 0:n.full_name)&&void 0!==s?s:"",outline:!0,size:"md",src:null!==(r=null==n?void 0:n.image_large_url)&&void 0!==r?r:""})});case"save":case"download":return(0,h.jsx)(Ie,{fallback:t,savePinId:i});default:return t}}var Ee=i(583375);function Ce({large:e}){return(0,h.jsx)(w.xu,{display:"block",height:45,width:45,dangerouslySetInlineStyle:{__style:{margin:"8px auto 6px"}},children:(0,h.jsx)(Ee.Z,{size:e?50:40})})}class Se extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{container:e,modalType:t}=this.props;(0,y.My)("web.unauth.modal_title.view"),(0,y.My)(`unauth_web_modal.${e||"unknown"}.tier1.${t}.shown`)},(i="componentDidMount")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{titleText:e}=this.props;return(0,h.jsx)("h1",{style:{color:"#333",fontSize:"32px",fontWeight:"600",letterSpacing:"-1.2px",MozOsxFontSmoothing:"grayscale",paddingLeft:"16px",paddingRight:"16px",WebkitFontSmoothing:"antialiased",wordBreak:"keep-all"},children:e})}}var je=i(704115),Te=i(124580),De=i(12610);const ke=e=>{Te.Z.resume(De.LU),(0,y.My)(`web.dismiss_account_switcher.${e}`)},ze=({email:e,emailError:t,onNotNowClick:i,handleEmailChange:o,handleSubmit:s})=>{const r=(0,_.ZP)();(0,n.useEffect)((()=>{(0,y.My)("unauth.line_missing_email.email_step")}),[]),r.bt("Utilizziamo il tuo indirizzo email per creare l'account e per avvisi importanti sulla sicurezza e sugli aspetti legali.", "We use your email address for account creation and for important security and legal notices.", "subtitle to explain the step on email collection form", undefined, true);const a=r.bt("Ops. Non possiamo creare il tuo account senza email. Per continuare, assicurati di fornire un indirizzo email per creare l'account.", "Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.", "subtitle to explain the step on email collection form", undefined, true);return(0,h.jsx)(w.xu,{marginTop:3,children:(0,h.jsxs)("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),s()},children:[(0,h.jsx)(w.xv,{align:"start",overflow:"normal",children:a}),(0,h.jsx)(w.xu,{marginTop:3,marginBottom:5,children:(0,h.jsx)(w.nv,{ref:pe.Z,errorMessage:Array.isArray(t)?t.join(""):t,id:"email",onChange:o,placeholder:r.bt("Indirizzo email", "Email address", "email placeholder in the email inputfield on email collection form", undefined, true),size:"lg",type:"email"})}),(0,h.jsx)(w.zx,{fullWidth:!0,color:"red",disabled:!e,text:r.bt("Continua", "Continue", "word on the button which to submit user email information", undefined, true),type:"submit"}),(0,h.jsx)(w.xu,{marginTop:2}),(0,h.jsx)(w.zx,{fullWidth:!0,onClick:()=>{(0,y.My)("unauth.line_missing_email.email_step.not_now_click"),i&&i()},text:r.bt("Non ora", "Not now", "word on not now button to dismiss the collection form", undefined, true),type:"submit"})]})})};var Oe=i(829407);const Re=({nextUrlParam:e,loadingIndicatorCallback:t,showEmailAlreadyExistModal:i,onNotNowClick:o,registrationCredentials:s,showSocialSignupWithAgeStep:r})=>{const a=(0,v.B$)(),d=(0,_.ZP)(),[c,u]=(0,n.useState)(""),[p,g]=(0,n.useState)("");return(0,Oe.Z)((()=>{t(!1)})),(0,h.jsx)(w.xu,{marginTop:0,marginBottom:0,marginStart:"auto",marginEnd:"auto",width:268,children:(0,h.jsx)(ze,{email:c,emailError:p,handleEmailChange:({value:e})=>u(e),handleSubmit:()=>{if((0,y.My)("unauth.line_missing_email.submit_email"),!c)return void g(d.bt("Email obbligatoria", "Email is required", "email error message", undefined, true));(0,y.My)("unauth.line_missing_email.submit_email");const{register:n}=a,o=[(0,oe.GT)({message:d.bt("Mmm... Non sembra un indirizzo email valido.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)})],u=(0,q.Z)(c,o);if(u)return(0,y.My)("unauth.line_missing_email.email_validation_failure"),void g(u);const{type:h,signupOptions:p}=s;(0,U.Z)({url:"/v3/register/exists/",data:{email:c}}).then((o=>{var s;if(!1!==(null===(s=o.resource_response)||void 0===s?void 0:s.data))return i({email:c}),void(0,y.My)("unauth.line_missing_email.email_existed");t(!0);const{birthday:a}=p;void 0===a?(r({type:h,signupOptions:{...p,email:c}}),t(!1)):n({...p,email:c,birthday:a},{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_type:10}}).then((()=>{t(!1),l.ZP.handleSignupRedirect(e||l.ZP.defaultSocialLoginRedirectUrl(),!0),(0,y.My)("unauth.line_missing_email.signup_success")}),(e=>{t(!1);const i=e.message||d.bt("Spiacenti! Si  verificato un errore... Clicca su Continua per riprovare.", "Oops! Something went wrong Click Continue to try again.", "unauth.lineEmailCollect.error", undefined, true);g(i),(0,y.My)("unauth.line_missing_email.signup_failure")}))}),(e=>{g(e.api_error_code===z.bd?e.message:d.bt("Mmm... Non sembra un indirizzo email valido.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)),(0,y.My)("unauth.line_missing_email.email_exist_api_call_failure")}))},onNotNowClick:o})})};var Le=i(966224),Me=i(710893),Be=i(597922),Ne=i(407043),Fe=i(81636),Ze=i(349700);const Ue=function({container:e="unknown",creds:t,isAccountSwitch:i,nextUrlParam:o,phoneNumberEnd:s}){const[r,a]=(0,n.useState)(null),[d,c]=(0,n.useState)(""),[p,g]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),{isAuthenticated:x,loginState:v}=(0,P.B)(),I=(0,_.ZP)(),A=(0,se.lO)(),E=(0,K.Z)(),C={container:e,page:null==A?void 0:A.pageType},{logContextEvent:S}=(0,Ne.v)();(0,Fe.Q)({view_type:565,view_parameter:3731}),(0,n.useEffect)((()=>{!i&&l.ZP.isFullyLoggedIn(x,v)&&l.ZP.handleRedirect(o)}),[]);const j=I.bt("Continua", "Continue", " - ", undefined, true);return(0,h.jsxs)(w.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"18px auto"}},children:[p&&(0,h.jsx)(Le.Z,{rounding:8}),(0,h.jsx)("p",{style:{fontSize:"14px",margin:"24px 0",textAlign:"center"},children:s?(0,Ze.nk)(I.bt("Verifica sul telefono di aver ricevuto un codice che termina con {{ phoneNumberEnd }} e inseriscilo nel campo sottostante per effettuare l'accesso.", "Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in.", " - ", undefined, true),{phoneNumberEnd:(0,h.jsx)("strong",{children:s},"phone")}):I.bt("Verifica sul telefono di aver ricevuto un codice e inseriscilo nel campo sottostante per effettuare l'accesso.", "Please check your phone for a code and enter it in the field below to log in.", " - ", undefined, true)}),(0,h.jsxs)("form",{method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),S({view_type:565,view_parameter:3731,event_type:101,element:12019});const i=(0,q.Z)(null!=d?d:"",[(0,oe.aH)({message:I.bt("Hai dimenticato qualcosa! Aggiungi il codice di verifica.", "You missed a spot! Don't forget to add your verification code.", " - ", undefined, true)}),(0,oe.VC)({message:I.bt("Mmm... non sembra un codice di verifica.", "Hmm...that doesn't look like a verification code.", " - ", undefined, true)})]);i?(a(i),(0,y.My)("unauth.login.error.CLIENT_ERROR.wrongcode.loginmfa")):(a(null),g(!0),E({creds:{...t,mfa_token:d},loggingOptions:{loggingData:C,loginAttemptContextEvent:{event_type:7534,view_type:565,view_parameter:3731}}}).then((()=>{S({view_type:565,view_parameter:3731,event_type:9992});const e=window.location.pathname===b.lf||window.location.pathname.startsWith(b.rO)?"/":window.location.pathname;l.ZP.handleRedirect(o||e)}),(e=>{e.message?(a(e.message),g(!1)):((0,ee.x)(I.bt("Spiacenti! Si  verificato un errore nel nostro sistema.", "Sorry! Something went wrong on our end.", " - ", undefined, true)),g(!1))})))},children:[(0,h.jsx)(Be.Z,{autoComplete:"off",focused:!0,hasError:!!r,id:"mfaCode",name:"code",onChange:e=>c(e.target.value),placeholder:I.bt("Codice di verifica", "Verification code", " - ", undefined, true),tooltip:r,type:"text",value:d}),(0,h.jsx)(u.Z,{accessibilityLabel:j,className:"red SignupButton",styleOverrides:{width:"100%",borderRadius:"20px"},type:"submit",children:(0,h.jsx)(w.xu,{children:j})})]}),(0,h.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"15px",color:"#333"}},children:(0,Ze.nk)(I.bt("Se non lo hai ricevuto, possiamo {{ resendCode }}.", "If you didn't get it, we can {{ resendCode }}.", " - ", undefined, true),{resendCode:(0,h.jsx)(w.rU,{display:"inlineBlock",href:"",onClick:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),e.preventDefault(),S({view_type:565,view_parameter:3731,event_type:101,element:12920}),g(!0),E({creds:{...t,mfa_resend:!0},loggingOptions:{loggingData:C,loginAttemptContextEvent:{event_type:7534,view_type:565,view_parameter:3731}}}).then((()=>{g(!1),f(!0)}),(e=>{g(!1),e.message?a(e.message):(0,ee.x)(I.bt("Spiacenti! Si  verificato un errore nel nostro sistema.", "Sorry! Something went wrong on our end.", " - ", undefined, true))}))},underline:"hover",children:(0,h.jsx)(w.xv,{size:"100",weight:"bold",children:I.bt("inviare nuovamente il codice", "resend the code", " - ", undefined, true)})},"code")})}),m&&(0,h.jsx)(w.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:50,left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,h.jsx)(X.ZP,{onHide:()=>f(!1),text:I.bt("Ti abbiamo inviato un nuovo codice!", "We sent you a new code!", "login2fa.resendCode.success", undefined, true),duration:5e3})})]})};var Ve=i(66699),He=i(796592),Ge=i(567482);const We=({age:e,handleAgeChange:t,handleSubmit:i,error:o,removeExtraSpaceForErr:s,method:r})=>{const a=(0,_.ZP)();(0,n.useEffect)((()=>{(0,y.My)("dweb.signup_age_step",{type:r,format:"age"})}),[r]);const[l,d]=(0,n.useState)(""),c=a.bt("Inserisci la tua et", "Enter your age", "age.input.placeholder", undefined, true);return(0,h.jsx)(w.xu,{children:(0,h.jsxs)("form",{method:"post",noValidate:!0,onSubmit:t=>{t.preventDefault(),e&&!l&&i({age:e})},children:[(0,h.jsx)(w.xu,{marginTop:2}),(0,h.jsx)(Ge.Z,{value:null==e?void 0:e.toString(),focusOnMount:!0,error:o,onChangeParsed:e=>t({value:e}),onValidation:d,customPlaceholderText:c}),(0,h.jsxs)(w.xu,{children:[(0,h.jsx)(w.xu,{paddingY:12,marginTop:12}),(0,h.jsx)(w.xu,{paddingY:(e=>s&&""!==e?2:5)(l)})]}),(0,h.jsx)(w.xu,{marginTop:3}),(0,h.jsx)(w.xu,{children:(0,h.jsx)(w.zx,{fullWidth:!0,color:"red",disabled:!!l||!e,text:a.bt("Avanti", "Next", "social.connect.age.form.next.btn", undefined, true),type:"submit"})})]})})};function $e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class qe extends n.Component{constructor(...e){super(...e),$e(this,"state",{age:void 0,error:"",isLoading:!1,removeExtraSpaceForErr:!1}),$e(this,"getViewParameter",(e=>{switch(null==e?void 0:e.type){case"facebook":return 3205;case"google":return 3204;case"google_one_tap":return 3201;default:return}})),$e(this,"handleAgeChange",(({value:e})=>{this.setState({age:e,removeExtraSpaceForErr:!0})})),$e(this,"handleSignupSuccess",(()=>{this.track("signup_success");const{showResponseMessageModal:e}=this.props;e?e(!0):l.ZP.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0)})),$e(this,"handleSignupFailure",(e=>{const{i18n:t}=this.props;this.track("signup_failure"),this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.setState({isLoading:!1});const i=e.message||t.bt("Spiacenti! Si  verificato un errore... Clicca su Continua per riprovare.", "Oops! Something went wrong Click Continue to try again.", "Error during signup during age collection step", undefined, true);this.setState({error:i})})),$e(this,"handleSubmit",(({age:e})=>{const{desktopCoreLoginContext:{register:t},onLineEmailMissingError:i}=this.props;this.track(`submit_button_click.${e||"undefined"}`);const{loadingIndicatorCallback:n,registrationCredentials:o,showResponseMessageModal:r}=this.props;if("1"===s.U2(T.It))return void this.track("signup_failure");const a=o&&o.type;if(n&&!["google_one_tap","google","facebook"].includes(a)&&n(!0),!o)return void n(!1);const l=(0,B.Z)(e),d={signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_parameter:this.getViewParameter(this.props.registrationCredentials)}};if("facebook"===o.type){this.track("attempt_signup");t({...o.signupOptions,birthday:l,birthday_source_site:S.E_.PINTEREST},d).then(this.handleSignupSuccess,this.handleSignupFailure)}else if("google"===o.type||"google_one_tap"===o.type){this.track("attempt_signup");t({...o.signupOptions,birthday:l},d).then(this.handleSignupSuccess,this.handleSignupFailure)}else if("line"===o.type){this.track("attempt_signup");const e={...o.signupOptions,birthday:l};t({...e},d).then(this.handleSignupSuccess,(t=>{t.api_error_code===z.iZ&&i?i({...o,signupOptions:e}):this.handleSignupFailure(t)}))}r||"facebook"!==o.type||this.setState({isLoading:!0})}))}componentDidMount(){this.track("shown")}track(e){const{container:t,registrationCredentials:i}=this.props,n=i?i.type:"undefined";(0,y.My)(`unauth_web.age_collection_form.${e}.${n}.${t||"undefined"}`)}render(){const{age:e,error:t,isLoading:i,removeExtraSpaceForErr:n}=this.state,{registrationCredentials:o}=this.props;return i?(0,h.jsx)(He.Z,{}):(0,h.jsx)(w.xu,{width:464,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:(0,h.jsx)(We,{age:e,error:t,handleAgeChange:this.handleAgeChange,handleSubmit:this.handleSubmit,removeExtraSpaceForErr:n,method:null==o?void 0:o.type})})}}const Ye=e=>{const t=(0,_.ZP)(),i=(0,v.B$)();return(0,h.jsx)(qe,{...e,desktopCoreLoginContext:i,i18n:t})};var Xe=i(941646),Ke=i(407159),Je=i(698330),Qe=i(708196);const et={backgroundColor:"#fff",borderRadius:"8px",padding:"22px 0",position:"relative",textAlign:"center",width:"400px",margin:"auto",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},tt=({children:e,noBoxShadow:t})=>{const i={...et,...t?{boxShadow:"none"}:{}},{viewer:n}=(0,v.B$)(),o=(0,v.Cw)();return"LIMITED_LOGIN"===n.type&&o?(0,h.jsxs)("div",{"data-test-id":"login-modal-default",style:{...i,display:"flex",width:"auto",padding:""},children:[(0,h.jsx)(w.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderRadius:"8px 0 0 8px"}},children:(0,h.jsx)(w.xu,{maxWidth:400,height:"100%",dangerouslySetInlineStyle:{__style:{width:"number"==typeof o.height&&"number"==typeof o.width?600*(o.width/o.height||0):0,backgroundSize:"cover",backgroundPosition:"center",backgroundImage:o.url?`url(${o.url})`:""}}})}),(0,h.jsx)(w.xu,{width:400,dangerouslySetInlineStyle:{__style:{padding:"32px 0"}},children:e})]}):(0,h.jsx)("div",{"data-test-id":"login-modal-default",style:{...i,padding:"32px 0"},children:e})},it=({children:e,email:t,footer:i,handleNotYouClick:s,header:r,noBoxShadow:a,title:l,viewerInfo:d})=>{var c;const{viewer:u}=(0,v.B$)(),p=(0,_.ZP)();return(0,h.jsx)(tt,{noBoxShadow:a,children:(0,h.jsxs)(n.Fragment,{children:[r,(0,h.jsx)("div",{style:{display:"block",margin:"0 auto 16px",width:40,height:40},children:(0,h.jsx)(Ee.Z,{size:40})}),(0,h.jsx)("div",{style:{__style:{width:"auto",overflow:"hidden",maxHeight:"150px",margin:"0 48px 16px"}},children:l}),"LIMITED_LOGIN"===u.type&&(0,h.jsx)(w.xu,{marginBottom:4,paddingX:12,children:(0,h.jsx)(Qe.Z,{})}),(0,h.jsx)(w.xu,{width:120,dangerouslySetInlineStyle:{__style:{margin:"0 auto 16px"}},children:(0,h.jsx)(o.Z,{name:d.firstName,src:null!==(c=d.imageUrl)&&void 0!==c?c:void 0})}),(0,h.jsx)(w.xu,{marginBottom:3,children:(0,h.jsx)(w.xv,{align:"center",children:t})}),e,(0,h.jsx)(w.xu,{paddingY:5,children:(0,h.jsx)(w.iz,{})}),(0,h.jsx)(w.xu,{"data-test-id":"login-switch-account",children:(0,h.jsx)(w.iP,{fullWidth:!1,onTap:({event:e})=>{e.preventDefault(),s()},children:(0,h.jsx)(w.xv,{align:"center",size:"200",weight:"bold",children:(0,h.jsx)(w.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:p.bt("Non sei tu? Accedi con un altro account", "Not you? Log in with a different account", "Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})})})}),(0,h.jsx)(w.xu,{marginBottom:0,marginTop:1,children:i})]})})},nt={backgroundColor:"#fff",borderRadius:"32px",position:"relative",textAlign:"center",margin:"auto",minHeight:"450px",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},ot={...nt,height:"610px",width:"528px",padding:"20px 10px 24px"},st={home_page:{...nt,minHeight:"initial"},pinBookmarklet:{...nt,boxShadow:"none"}},rt={minHeight:"400px",padding:"20px 10px 24px"},at={margin:"0 auto 22px",width:"270px"},lt={margin:"90px auto 22px",width:"464px"};function dt({container:e,savePinId:t,customLoginTagline:i,customSignupTagline:s,handleCloseButtonClick:r,handleShowingSignupWelcomeLoading:a,hideAccountSwitchValueProp:l,inviter:d,isAccountSwitch:c=!1,isBusiness:u,nextUrlParam:x,renderBusinessCreateButton:b,showCloseIcon:I,showResponseMessageModal:A,signupRedirectUrl:C,signupSource:S="defaultSource",suppressFocus:j,toggleType:T="DEFAULT_TOGGLE",signupFlow:D,component:z,attributionLabel:O}){var B;const N=(0,P.B)(),F=N.country,Z=(0,_.ZP)(),{viewer:{info:U,type:V}}=(0,v.B$)(),H=(0,g.Z)(),G=(0,m.Z)(),{checkExperiment:W}=(0,te.F)(),$=W("web_birthday_collection_eu_new_users").anyEnabled,[q,Y]=(0,n.useState)(!1),[X,K]=(0,n.useState)(!1),[J,Q]=(0,n.useState)(!1),[ee,ie]=(0,n.useState)("signup"===(0,je.Z)().type?{type:"signup"}:D),[ne,oe]=(0,n.useState)(!1),se=(0,f.Z)(V),{username:ae}=(0,re.useParams)(),le=(0,Je.cm)(),de=ae?le(ae):null,ce=["GB","IE"].includes(F)||$;(0,n.useEffect)((()=>((0,y.My)(`unauth.authentication_modal.shown.${T}.${ee.type}`),()=>{c&&((0,Ke.Z)("add_account_dismiss",null,e),ke(e))})),[]);const ue=(0,n.useRef)(ee.type);(0,n.useEffect)((()=>{ue.current!==ee.type&&(ue.current=ee.type,(0,y.My)(`unauth.authentication_modal.shown.${T}.${ee.type}`))}));const pe=(0,n.useRef)(D);(0,n.useEffect)((()=>{pe.current.type!==D.type&&(pe.current=D,ie(D))}));const _e=null!==(B=st[e])&&void 0!==B?B:nt,ge=()=>x?decodeURIComponent(x):x,me=e=>ge()?(0,L.Z)(e,{next:ge()}):e,fe=e=>ie({type:"EmailCollection",registrationCredentials:e}),xe=e=>ie({type:"socialSignupWithAge",registrationCredentials:e}),be=(e,t)=>ie({type:"loginMfa",creds:e,phoneNumberEnd:(null==t?void 0:t.phoneNumberEnd)||void 0}),ye=e=>{(0,y.My)(`unauth.personalized_login.prevent_register.${e}`),oe(!0),K(!1),ie({type:"signup"})},we=()=>{(0,y.My)("unauth.personalized_login.not_you.click"),(0,y.NC)("click_change_signin_account"),H({aux_data:se,element:10879,event_type:101})},Ie=e=>{(0,y.My)(`unauth.authentication_modal.${e}.${T}.${ee.type}`)},Ee=e=>{Ie("login_toggle_click"),(0,y.NC)("click_toggle_login"),G({action:"click",item:"login-button"}),ie({type:"login",email:null==e?void 0:e.email}),Y(!1)},Te=({email:e})=>{Ie("signup_toggle_click"),(0,y.NC)("click_toggle_signup"),C?(0,M.Z)(C,!1):ie({type:"signup",email:e})},De=({email:e})=>(0,h.jsx)(w.iP,{fullWidth:!1,onTap:t=>{const i={event_type:101,element:10880};u?H(i):(t.event.preventDefault(),(0,y.My)("unauth.personalized_login.signup_instead.click"),H({...i,aux_data:se}),Te({email:e}))},children:(0,h.jsx)(w.xv,{align:"center",size:"200",weight:"bold",children:(0,h.jsx)(Xe.Z,{id:"need-account-link",children:(0,h.jsx)(w.rU,{href:u?me("/business/create"):"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:Z.bt("Hai bisogno di un account? Iscriviti adesso", "Need an account? Sign up now", "Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account", undefined, true)})})})}),ze=I&&(0,h.jsx)(Pe,{onClick:r});if(J&&["signup","login","socialSignupWithAge"].includes(ee.type))return(0,h.jsx)(He.Z,{});switch(ee.type){case"signup":case"respondMessage":{var Oe;const i=q?Z.bt("Che piacere rivederti su Pinterest!", "Welcome back to Pinterest!", "welcoming user back to pinterest in signup modal when we recognize their email", undefined, true):s||((e,t)=>{switch(t){case"boardInvite":return e.bt("Registrati per accettare l'invito alla bacheca", "Sign up to accept your board invite", "Sign up copy board invite", undefined, true);case"saveButton":return e.bt("Registrati per visualizzare altro", "Sign up to see more", "signup copy save button", undefined, true);case"saveButtonExp":return e.bt("Iscriviti a Pinterest per salvare questa idea", "Join Pinterest to save this idea", "FullPageSignup.signupTagline.save", undefined, true);case"homePage":return e.bt("Ti diamo il benvenuto su Pinterest", "Welcome to Pinterest", "Title on desktop signup modal on home page", undefined, true);case"pinBookmarklet":return e.bt("Registrati per salvare questo Pin!", "Sign up to save this Pin!", "signup copy save button from third party website", undefined, true);case"downloadImageBtnDweb":return e.bt("Non perdere mai pi di vista le tue idee! Iscriviti per creare un account", "Never lose track of your ideas again! Sign up for an account", "mweb.unauth.download_modal.download_value_prop", undefined, true);case"followButton":return e.bt("Iscriviti a Pinterest per seguire", "Join Pinterest to follow", "mweb.unauth.follow_modal.follow_value_prop", undefined, true);default:return e.bt("Registrati per visualizzare altro", "Sign up to see more", "sigup copy default includes pin click and scrolling", undefined, true)}})(Z,S),r=d&&!d.is_default_image?d:null,l=(0,h.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:at},width:"login_page"!==e?400:void 0,children:(0,h.jsx)(Se,{container:e,modalType:"signup",titleText:r&&("respondMessage"===D.type?(Z.bt("Registrati e fai sapere a {{ name }} cosa ne pensi", "Sign up and let {{ name }} know what you think", "Prompt user to signup to access all Pinterest features", undefined, true)).replace("{{ name }}",r.first_name||r.full_name):(Z.bt("Unisciti a {{ name }} su Pinterest per visualizzare pi idee", "Join {{ name }} on Pinterest for more ideas", "Prompt user to signup to access all Pinterest features", undefined, true)).replace("{{ name }}",r.first_name||r.full_name))||(["login_page","home_page","save","download","follow"].includes(e)?i:Z.bt("Accesso gratuito illimitato alle migliori idee da tutto il mondo", "Unlimited free access to the world's best ideas", "FullPageSignup.signupTitle.save", undefined, true))})});return(0,h.jsxs)(w.xu,{"data-test-id":"signup-default-modal",width:484,dangerouslySetInlineStyle:{__style:_e},children:[X&&(0,h.jsx)(Le.Z,{}),(0,h.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:r?{minHeight:"400px",padding:"30px 10px 20px"}:rt},children:[ze,r?(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(w.xu,{width:108,dangerouslySetInlineStyle:{__style:{margin:"0 auto 16px"}},children:(0,h.jsx)(o.Z,{name:r.first_name||r.full_name,src:r.image_medium_url,verified:"respondMessage"===D.type})}),l]}):(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(Ae,{container:e,fallback:(0,h.jsx)(Ce,{large:"homePage"!==S}),savePinId:t,user:de}),l,(0,h.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:at},children:!q&&(0,h.jsx)(w.xu,{marginTop:-4,marginBottom:4,children:(0,h.jsx)(w.xv,{size:"300",align:"center",children:"login_page"!==e&&"home_page"!==e&&"save"!==e&&"download"!==e&&"follow"!==e?i:"downloadImageBtnDweb"===S&&Z.bt("Scopri un modo migliore per organizzare le tue idee", "Discover a better way to keep your ideas organized", "mweb.unauth.signup_modal.download_value_prop_subheader", undefined, true)||"followButton"===S&&(0,Ze.nk)(Z.bt("Per seguire {{ creatorName }} crea un account", "Create an account to follow {{ creatorName }}", "mweb.unauth.signup_modal.follow_value_prop_subheader", undefined, true),{creatorName:null==de?void 0:de.full_name})||"homePage"===S&&Z.bt("Scopri nuove idee da provare", "Find new ideas to try", "Value prop on desktop signup modal on home page", undefined, true)||"saveButtonExp"===S&&Z.bt("Accesso gratuito illimitato alle migliori idee da tutto il mondo", "Unlimited free access to the world's best ideas", "FullPageSignup.signupSubTitle.saDDve", undefined, true)||Z.bt("La scoperta inizia qui", "Discovery starts here", "Pinterest value proposition on desktop login modal", undefined, true)})})})]}),(0,h.jsx)(w.xu,{"data-test-id":"signup-options",position:"relative",dangerouslySetInlineStyle:{__style:{textAlign:"center",margin:"0 auto"}},children:(0,h.jsx)(he,{additionalChildren:(0,h.jsx)(E,{layout:("NOT_NOW_BUTTON"===T?"SIGNUP_LARGE":"home_page"===e&&"SIGNUP_SMALL")||"SIGNUP_DEFAULT",onClick:()=>Ee({email:ee.email}),type:"signupToLogin",shouldHideBusinessCreateFooterLink:!!b}),container:e,disablePostSignupNextUrl:!x,email:null!==(Oe=ee.email)&&void 0!==Oe?Oe:"",loadingIndicatorCallback:K,nextUrlParam:ge(),onBirthdayUnderage:({birthday:e,email:t})=>{ie({type:"UnderageConfirmation",birthday:e,email:t})},onFBPhoneOnlyConnectVerified:fe,onFBMissingEmail:fe,onLoginWithMfa:be,setEmail:e=>ie((ee.type,{...ee,email:e})),showResponseMessageModal:"respondMessage"===D.type?A:void 0,showSignupWelcomeLoadingFn:e=>{Q(e),a&&a(e)},signupSource:S,suppressFocus:j,switchToSocialSignupWithAgeFlow:xe,component:z,attributionLabel:O})})]}),b&&b()]})}case"login":{if(!ne&&!c&&U&&"AUTH"!==V&&"bottom.right.upsell.email"!==e){var Be;const t=U.hasPassword||U.connectedToFacebook||U.connectedToGoogle;return(0,h.jsx)(it,{email:null!==(Be=ee.email)&&void 0!==Be?Be:"",handleNotYouClick:()=>{oe(!0),we()},noBoxShadow:"pinBookmarklet"===e,header:(0,h.jsxs)(n.Fragment,{children:[X&&(0,h.jsx)(Le.Z,{}),ze]}),viewerInfo:U,title:(0,h.jsx)(Se,{container:e,modalType:"personalizedLogin",titleText:(0,Ze.nk)(Z.bt("Che bello ritrovarti, {{name}}!", "Welcome back, {{name}}!", "Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest", undefined, true),{name:U?U.firstName:""}).join("")}),footer:De({email:ee.email}),children:(0,h.jsx)(Me.ZP,{container:e,disablePostSignupNextUrl:!x,email:U.email,hideEmailField:!0,hideFacebookButton:t&&!U.connectedToFacebook,hideGoogleButton:t&&!U.connectedToGoogle,hideLineButton:t,hidePasswordField:t&&!U.hasPassword,hideTermsOfService:!0,loadingIndicatorCallback:K,loginButtonTextOverride:Z.bt("Continua", "Continue", " - ", undefined, true),nextUrlParam:ge(),onEmailChange:()=>{},onLoginWithMfa:be,requestContext:N,showResponseMessageModal:"respondMessage"===D.type?A:void 0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:ye},component:z,attributionLabel:O})})}let t=i||((e,t)=>{switch(t){case"boardInvite":return e.bt("Accedi per accettare l'invito alla bacheca", "Log in to accept your board invite", "Login copy board invite", undefined, true);case"homePage":return e.bt("Ti diamo il benvenuto su Pinterest", "Welcome to Pinterest", "Title on desktop signup modal on home page", undefined, true);case"pinBookmarklet":return e.bt("Accedi per salvare questo Pin!", "Sign in to save this Pin!", "Login copy save button from third party website", undefined, true);default:return e.bt("Accedi per vedere di pi", "Log in to see more", "Title on desktop login modal", undefined, true)}})(Z,S);return"save"===e&&W("dweb_signup_to_login_modal").group.endsWith("save")&&(t=Z.bt("Accedi per salvare questa idea", "Log in to save this idea", "dweb.login.modal.title.on.save", undefined, true)),(0,h.jsxs)(w.xu,{"data-test-id":"login-modal-default",width:484,dangerouslySetInlineStyle:{__style:_e},children:[X&&(0,h.jsx)(Le.Z,{}),(0,h.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ze,(0,h.jsx)(Ce,{large:"homePage"!==S}),(0,h.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:at},width:"login_page"!==e?400:void 0,children:(0,h.jsx)(Se,{container:e,modalType:"login",titleText:t})}),c&&!l&&(0,h.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:at},children:(0,h.jsx)(w.xu,{marginTop:-4,marginBottom:8,children:(0,h.jsx)(w.xv,{align:"center",size:"300",children:Z.bt("Hai un altro account Pinterest? Accedi per passare velocemente da uno all'altro", "Have another Pinterest account? Log in to easily switch between them", "Subtitle on the login modal that explains to a user why they would add an additional account to their profile", undefined, true)})})}),(0,h.jsx)(Me.ZP,{container:e,disablePostSignupNextUrl:!x,email:ee.email,isAccountSwitch:c,loadingIndicatorCallback:K,nextUrlParam:ge(),onEmailChange:e=>ie({...ee,email:e.target.value}),onFBPhoneOnlyConnectVerified:fe,onLoginWithMfa:be,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:xe},requestContext:N,showResponseMessageModal:"respondMessage"===D.type?A:void 0,component:z,attributionLabel:O}),u?(0,h.jsxs)(w.kC,{direction:"column",alignItems:"center",children:[(0,h.jsx)(p,{}),(0,h.jsx)(w.xv,{weight:"bold",size:"100",children:(0,h.jsx)(w.rU,{href:me("/business/create"),children:Z.bt("Crea nuovo account", "Create new account", "Link to the page to create a new business account instead of logging in", undefined, true)})})]}):!c&&(0,h.jsx)(E,{layout:("NOT_NOW_BUTTON"===T?"LOGIN_INLINE":"SMALL_TOGGLE"===T&&"LOGIN_SMALL")||"LOGIN_DEFAULT",type:"loginToSignup",onClick:()=>Te({email:ee.email})})]})]})}case"loginMfa":return(0,h.jsx)(w.xu,{"data-test-id":"login-modal-mfa",width:489,dangerouslySetInlineStyle:{__style:_e},children:(0,h.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ze,(0,h.jsx)(Ce,{}),(0,h.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:{...at,padding:"0 10px"}},width:"100%",children:(0,h.jsx)(Se,{container:e,modalType:"loginMfa",titleText:Z.bt("Autenticazione a due fattori necessaria", "Two-factor authentication required", "desktopLoginModal.2fa.title", undefined, true)})}),(0,h.jsx)(Ue,{container:e,creds:ee.creds,isAccountSwitch:c,nextUrlParam:ge(),phoneNumberEnd:ee.phoneNumberEnd})]})});case"socialSignupWithAge":{if(ce)return(0,h.jsx)(w.xu,{"data-test-id":"birthday-collection-modal",dangerouslySetInlineStyle:{__style:_e},minHeight:"0",children:(0,h.jsx)(R,{disablePostSignupNextUrl:!x,handleLoginToggleButtonClick:Ee,loadingIndicatorCallback:K,nextUrlParam:ge(),registrationCredentials:ee.registrationCredentials,showResponseMessageModal:"respondMessage"===D.type?A:void 0})});const t=ee.registrationCredentials.signupOptions.first_name;return(0,h.jsxs)(w.xu,{"data-test-id":"login-modal-with-age",dangerouslySetInlineStyle:{__style:ot},children:[X&&(0,h.jsx)(Le.Z,{}),(0,h.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ze,(0,h.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:lt},children:[(0,h.jsx)(w.X6,{size:"500",align:"center",children:t?(0,Ve.Z)(Z.bt("Ciao {{facebookFirstName}}! Quanti anni hai?", "Oh hi, {{facebookFirstName}}! How old are you?", "social.signup.age.collection.header", undefined, true),{facebookFirstName:t}):Z.bt("Registrati per visualizzare altro", "Sign up to see more", "Age collection signup step for Facebook/G+ authentication", undefined, true)}),(0,h.jsx)(w.xu,{children:(0,h.jsx)(w.xv,{size:"300",align:"center",children:Z.bt("Questa informazione non verr mostrata pubblicamente. Raccogliamo informazioni relative all'et per offrirti un'esperienza ottimale su Pinterest e per personalizzare i suggerimenti e gli annunci.", "This won't be publicly displayed. We collect age to provide you with the right experience on Pinterest, including to personalize your recommendations and ads.", "social.signup.age.collection.subheader", undefined, true)})})]}),(0,h.jsx)(Ye,{container:e,loadingIndicatorCallback:K,nextUrlParam:ge(),registrationCredentials:ee.registrationCredentials,showResponseMessageModal:"respondMessage"===D.type?A:void 0,onLineEmailMissingError:fe})]}),(0,h.jsx)(E,{layout:"SIGNUP_WITH_AGE",onClick:()=>Ee(),type:"signupToLogin"})]})}case"EmailCollection":{const e=()=>{ie({type:"signup",email:ee.registrationCredentials.signupOptions.email}),K(!1)},t=({email:e})=>ie({type:"EmailAlreadyExist",email:e});return(0,h.jsxs)(w.xu,{"data-test-id":"line"===ee.registrationCredentials.type?"signup-modal-line-phone-only":"signup-modal-facebook-phone-only",minHeight:400,dangerouslySetInlineStyle:{__style:nt},children:[X&&(0,h.jsx)(Le.Z,{}),(0,h.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ze,(0,h.jsx)(Ce,{}),(0,h.jsx)(w.xu,{width:310,dangerouslySetInlineStyle:{__style:at},children:(0,h.jsx)(w.X6,{size:"600",children:Z.bt("Qual  il tuo indirizzo email?", "What's your email address?", "Prompt for email address in after sign in with line", undefined, true)})}),"line"===ee.registrationCredentials.type?(0,h.jsx)(Re,{loadingIndicatorCallback:K,nextUrlParam:x,onNotNowClick:e,registrationCredentials:ee.registrationCredentials,showEmailAlreadyExistModal:t,showSocialSignupWithAgeStep:xe}):(0,h.jsx)(ve,{loadingIndicatorCallback:K,nextUrlParam:x,onNotNowClick:e,registrationCredentials:ee.registrationCredentials,showEmailAlreadyExistModal:t,showSocialSignupWithAgeStep:xe})]})]})}case"EmailAlreadyExist":return(0,h.jsxs)(w.xu,{"data-test-id":"login-modal-existing-email",dangerouslySetInlineStyle:{__style:et},children:[X&&(0,h.jsx)(Le.Z,{}),(0,h.jsx)(Ce,{}),(0,h.jsx)(w.xu,{overflow:"hidden",maxHeight:120,width:350,dangerouslySetInlineStyle:{__style:at},children:(0,h.jsx)(Se,{container:e,modalType:"personalizedLogin",titleText:(0,Ze.nk)(Z.bt("Sembra che tu sia gi su Pinterest", "Looks like you're already on Pinterest", "Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest", undefined, true),{name:U?U.firstName:""}).join("")})}),(0,h.jsx)(w.xu,{marginBottom:3,children:(0,h.jsx)(w.xv,{align:"center",children:ee.email})}),(0,h.jsx)(Me.ZP,{container:e,disablePostSignupNextUrl:!x,email:ee.email,hideEmailField:!0,hideFacebookButton:!0,hideLineButton:!0,hideTermsOfService:!0,loadingIndicatorCallback:K,loginButtonTextOverride:Z.bt("Continua", "Continue", " - ", undefined, true),nextUrlParam:ge(),onEmailChange:()=>{},onLoginWithMfa:be,requestContext:N,showResponseMessageModal:"respondMessage"===D.type?A:void 0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:ye},component:z,attributionLabel:O}),(0,h.jsx)(w.xu,{paddingY:5,children:(0,h.jsx)(w.iz,{})}),(0,h.jsx)(w.xu,{"data-test-id":"login-switch-account",children:(0,h.jsx)(w.iP,{fullWidth:!1,onTap:({event:e})=>{e.preventDefault(),ie({type:"login"}),oe(!0),we()},children:(0,h.jsx)(w.xv,{align:"center",size:"200",weight:"bold",children:(0,h.jsx)(w.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:Z.bt("Non sei tu? Accedi con un altro account", "Not you? Log in with a different account", "Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})})})}),(0,h.jsx)(w.xu,{marginBottom:4,marginTop:1,children:De({email:ee.email})}),ze]});case"UnderageConfirmation":return(0,h.jsx)(w.xu,{"data-test-id":"underage-confirmation-modal",dangerouslySetInlineStyle:{__style:_e},children:(0,h.jsx)(k.Z,{birthday:ee.birthday,onEditBirthday:()=>{ie({type:"signup",email:ee.email}),K(!1)}})});default:return null}}},611683:(e,t,i)=>{i.d(t,{Z:()=>j});var n=i(667294),o=i(379913),s=i(711781),r=i(803491),a=i(472644),l=i(174382),d=i(640672),c=i(898781),u=i(883119),h=i(785893);function p(e){const t=(0,c.ZP)(),{tooltip:i}=e,[o,s]=(0,n.useState)();return(0,h.jsxs)(u.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,h.jsx)(r.Z,{onClick:()=>s(!0),type:"button",styleOverrides:{width:"100%",borderRadius:"20px",border:"0px solid"},children:(0,h.jsxs)(u.kC,{alignItems:"center",justifyContent:"center",children:[(0,h.jsx)(u.xu,{height:24,width:24,marginTop:1,children:(0,h.jsx)(a.Z,{size:20})}),(0,h.jsx)(u.xu,{marginStart:2,children:(0,h.jsx)(u.xv,{weight:"bold",children:t.bt("Collegati a Google", "Connect with Google", "googleConnectButtonWithDisabledSDK.buttonText", undefined, true)})})]})}),!!i&&(0,h.jsx)(u.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,h.jsx)(d.Z,{message:i})}),o&&(0,h.jsx)(l.Z,{type:"google",onDismiss:()=>s(!1)})]})}var _=i(290148),g=i(830269),m=i(70212),f=i(85334),x=i(829407),b=i(901656),y=i(905171),v=i(233211),P=i(773285),w=i(524172),I=i(903095),A=i(780280),E=i(83969),C=i(584595);const S=({container:e,isAccountSwitch:t,nextUrlParam:i,onLoginWithMfa:r,onLoginWithSuspended:a,onLoginWithVoluntarilyDeactivated:l,showResponseMessageModal:p,socialSignupCallbacks:S,tooltip:j,showLoginRateLimited:T,onClick:D})=>{const{viewer:{type:k}}=(0,v.B$)(),z=(0,f.Z)(),O=(0,I.lO)(),R=(0,c.ZP)(),{checkExperiment:L}=(0,P.F)(),M=(0,w.M)(),B=(0,n.useRef)(null),N=L("dweb_google_button_locale_fix").anyEnabled,{locale:F}=(0,A.B)(),Z=N?F:void 0;return(0,x.Z)((()=>(window.googleConnectButtonContainer=e||"",()=>{delete window.googleConnectButtonContainer}))),(0,x.Z)((()=>{const n=({credential:n,select_by:d})=>{const c=(0,E.mK)((0,E.PL)(d));z({creds:{google_open_id_token:n},loggingOptions:{loggingData:{container:window.googleConnectButtonContainer,page:null==O?void 0:O.pageType,trigger:c},loginAttemptContextEvent:{event_type:7534,element:12981,aux_data:{...(0,b.Z)(k),signup_login_method:g.Z.GPLUS}}},isAccountSwitch:t}).then((n=>{var s,r;const a=null==n||null===(s=n.resource_response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.user;t&&a&&(0,o.Z)(a,"google",e),p?p(!1):_.ZP.handleRedirect(i||_.ZP.defaultSocialLoginRedirectUrl()),L("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,m.Z)()}),(e=>{switch(C.ik.includes(e.api_error_code)&&(null==T||T()),e.api_error_code){case C.E6:null==l||l(e.message);break;case C.Zn:var t;null==r||r({google_open_id_token:n},{phoneNumberEnd:null===(t=e.data)||void 0===t?void 0:t.phone_number_end});break;case C.xN:if("ACCOUNT_RECOVERY"===S.type)S.switchToAccountRecoverySignupFlow("google");else{const e=(0,s.Z)(n),t={container:window.googleConnectButtonContainer,page:null==O?void 0:O.pageType,trigger:c},i={type:"google",google_open_id_token:n,first_name:e.given_name,last_name:e.family_name,image_url:e.picture};S.switchToSocialSignupWithAgeFlow({type:"google",context:t,signupOptions:{...i}})}break;default:e.api_error_code===C.an&&a?a():(0,y.x)(R.bt("Spiacenti, impossibile effettuare l'accesso.", "Sorry, we can't log you in.", "error message when user failed to login caused by suspend/deactivated etc.", undefined, true))}}))};return(async()=>{await(null==M?void 0:M.ensureInit("button",n)),(0,E.ru)({buttonRef:B,isDesktop:!0,locale:Z})})(),()=>{null==M||M.removeButtonCallback(n)}})),(0,h.jsxs)(u.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,h.jsx)(u.xu,{height:44,children:(0,h.jsx)("div",{ref:B,style:{position:"absolute",width:"100%"},onClick:()=>{null==D||D()}})}),!!j&&(0,h.jsx)(u.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,h.jsx)(d.Z,{message:j})})]})};function j(e){const{checkExperiment:t}=(0,P.F)(),{anyEnabled:i}=t("web_google_disabled");return i?(0,h.jsx)(p,{tooltip:e.tooltip}):(0,h.jsx)(S,{...e})}},708196:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(898781),o=i(11363),s=i(883119),r=i(987318),a=i(785893);const l=({useDefaultText:e})=>{const{limitedLoginModalSubheader:t}=(0,r.H)(),i=(0,n.ZP)();return(0,a.jsx)(s.xv,{align:"center",overflow:"normal",children:e||!t?(0,o.lt)(i):t.text})}},710893:(e,t,i)=>{i.d(t,{OL:()=>U,ZP:()=>H});var n=i(667294),o=i(379913),s=i(777024),r=i(319915),a=i(996438),l=i(689070),d=i(738192),c=i(611683),u=i(124580),h=i(389054),p=i(216895),_=i(947599),g=i(830269),m=i(563387),f=i(85334),x=i(901656),b=i(12610),y=i(323468),v=i(966113),P=i(905171),w=i(407043),I=i(385740),A=i(143461),E=i(85651),C=i(290148),S=i(898781),j=i(584595),T=i(817656),D=i(134906),k=i(867820),z=i(780679),O=i(233211),R=i(780280),L=i(883119),M=i(903095),B=i(785893);function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const F=(0,n.lazy)((()=>i.e(97500).then(i.bind(i,97500)))),Z=v.lf,U="6LeZIo0UAAAAAKFpimHio-ff_ddIT8f_QzpXG0_1";class V extends n.Component{constructor(e){super(e),N(this,"onLoginWithVoluntarilyDeactivated",(e=>this.setState({googleValidationError:e}))),N(this,"onLoginWithSuspended",(()=>{const{loadingIndicatorCallback:e}=this.props;e&&e(!1),this.setState({accountRecoveryModalType:E.w[j.an],loading:!1})})),N(this,"onloadCallback",(()=>{try{window.recaptchaIdOne=window.grecaptcha.render("recaptcha_placeholder_1",{sitekey:U,callback:"verifyCaptcha"})}catch(e){}try{window.recaptchaIdTwo=window.grecaptcha.render("recaptcha_placeholder_2",{sitekey:U,callback:"verifyCaptcha"})}catch(e){}})),N(this,"handleButtonClick",((e,t)=>{var i;(0,k.My)("unauth.login.button.clicked");const{logContextEvent:n,desktopCoreLoginContext:{viewer:o}}=this.props;n({event_type:101,element:30,aux_data:{...(0,x.Z)(o.type),signup_login_method:g.Z.EMAIL}}),this.setState({googleValidationError:null,hideFBGoogleToolTip:!1});let s=(0,p.Z)(null!==(i=this.props.email)&&void 0!==i?i:"",this.emailValidators);if(s)this.setState({emailValidationError:s}),(0,k.My)("unauth.login.error.CLIENT_ERROR.malformemail.loginmodal");else{this.setState({emailValidationError:null}),s=(0,p.Z)(this.props.password,this.passwordValidators);const e=(0,p.Z)(this.props.password,this.asciiValidators);s?(this.setState({passwordValidationError:s}),(0,k.My)("unauth.login.error.CLIENT_ERROR.malformpwd.loginmodal")):e?(this.setState({passwordValidationError:e}),(0,k.My)("unauth.login.error.CLIENT_ERROR.malformpwd.loginmodal")):(this.setState({passwordValidationError:null}),this.loginUser("email",void 0,t))}})),N(this,"updateAccountRecoveryModal",(e=>this.setState({accountRecoveryModalType:e}))),N(this,"loadRecaptchaView",(()=>{if("undefined"!=typeof document&&document.head)if(document.getElementById("recaptcha-jssdk"))this.onloadCallback();else{const e=document.createElement("script");e.id="recaptcha-jssdk",e.src="https://www.recaptcha.net/recaptcha/api.js?onload=onloadCallback&render=explicit",document.head&&document.head.appendChild(e)}})),N(this,"handleLoginFailure",((e,t,i)=>{const{email:n,i18n:o,loadingIndicatorCallback:s,setPassword:r}=this.props;(0,k.My)(`unauth.login.error.LOGIN_FAILURE.${e}`),s(!1),this.props.refreshRecaptchaV3Token&&this.props.refreshRecaptchaV3Token();const a=t.http_status||t.httpStatus,c=a===T.Ej?T.Ej:t.api_error_code;var u;if(c===j.Zn)return void C.ZP.handleLoginMfa(i,{phoneNumberEnd:null===(u=t.data)||void 0===u?void 0:u.phone_number_end},this.props.onLoginWithMfa);if(a===T.Ej&&c===j.bd&&t.message&&"!"!==t.message[t.message.length-1]&&!C.ZP.isExceedRecaptchaLocalLimit())return this.loadRecaptchaView(),void this.setState({passwordValidationError:o.bt("Ops! Hai effettuato l'accesso troppo in fretta. Riprova con il reCAPTCHA.", "Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha", undefined, true),loading:!1});if(c===j._K&&a===T.AB&&!C.ZP.isExceedRecaptchaLocalLimit())return this.loadRecaptchaView(),void this.setState({passwordValidationError:o.bt("Ops! Hai effettuato l'accesso troppo in fretta. Riprova con il reCAPTCHA.", "Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha", undefined, true),loading:!1});const h=(0,d.Z)({error:t,source:"login",onClickPasswordReset:()=>{(0,k.My)("unauth_password_reset_link_tapped"),(0,l.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:n}}).then((()=>this.updateAccountRecoveryModal(C.Ny.PASSWORD_RESET_SENT)))}});h?(this.setState({...h,accountRecoveryModalType:c?E.w[c]:void 0,loading:!1}),h.passwordValidationError&&r("")):((0,P.x)(o.bt("Spiacenti! Si  verificato un errore nel nostro sistema.", "Sorry! Something went wrong on our end.", " - ", undefined, true)),this.setState({loading:!1}))})),N(this,"verifyCaptcha",(()=>{const e=window.grecaptcha.getResponse(window.recaptchaIdOne)||window.grecaptcha.getResponse(window.recaptchaIdTwo);C.ZP.updateRecaptchaTimeStamp(),this.handleButtonClick(void 0,e),C.ZP.isExceedRecaptchaLocalLimit()||(void 0!==window.recaptchaIdOne&&window.grecaptcha.reset(window.recaptchaIdOne),void 0!==window.recaptchaIdTwo&&window.grecaptcha.reset(window.recaptchaIdTwo))})),N(this,"handleEmailChange",(e=>{this.props.onEmailChange&&this.props.onEmailChange(e),this.setState({hideFBGoogleToolTip:!0})})),N(this,"handlePasswordChange",(e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.setPassword(e.target.value)})),N(this,"handleBlur",(()=>{var e;this.setState({googleValidationError:null});let t=(0,p.Z)(null!==(e=this.props.email)&&void 0!==e?e:"",this.asciiValidators);t&&(0,k.My)("unauth.login.error.CLIENT_ERROR.nonasciiemail.loginmodal"),t=(0,p.Z)(this.props.password,this.asciiValidators),t&&(0,k.My)("unauth.login.error.CLIENT_ERROR.nonasciipwd.loginmodal")})),N(this,"renderSocialButtons",(()=>{const{disablePostSignupNextUrl:e,hideFacebookButton:t,hideLineButton:i,hideGoogleButton:o,isAccountSwitch:s,isPersonalizedLoginFlyout:l,loadingIndicatorCallback:d,nextUrlParam:u,onLoginWithMfa:h,onFBPhoneOnlyConnectVerified:p,onFBMissingEmail:g,container:m="unknown",socialSignupCallbacks:f,showResponseMessageModal:x,isLineAuthenticationEnabled:b,logContextEvent:y,viewType:v,viewParameter:P,component:w,attributionLabel:I}=this.props,{hideFBGoogleToolTip:A}=this.state,E="ACCOUNT_RECOVERY"===f.type?{...f,type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:e=>{"facebook"===e?this.updateAccountRecoveryModal(C.Ny.PREVENT_FACEBOOK_REGISTER):"google"===e&&this.updateAccountRecoveryModal(C.Ny.PREVENT_GOOGLE_REGISTER),f.switchToAccountRecoverySignupFlow(e)}}:f,S=e=>{y({view_type:v,view_parameter:P,component:w,element:e,event_type:10441,aux_data:{upsell_reason:I}})},j=!t&&(0,B.jsx)(a.Z,{container:m,disablePostSignupNextUrl:e,isAccountSwitch:s,loadingIndicatorCallback:d,nextUrlParam:u,onFBPhoneOnlyConnectVerified:p,onFBMissingEmail:g,onLoginWithMfa:h,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:E,showResponseMessageModal:x,tooltip:null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(C.Ny.RATE_LIMITED),onClick:()=>{S(13505)}}),T=!o&&(0,B.jsx)(c.Z,{container:m,isAccountSwitch:s,nextUrlParam:u,onLoginWithMfa:h,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,showResponseMessageModal:x,tooltip:!A&&this.state.googleValidationError||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(C.Ny.RATE_LIMITED),socialSignupCallbacks:E,onClick:()=>{S(13504)}}),D=!i&&b&&(0,B.jsx)(r.Z,{name:"SafeSuspense_LineConnectButton",children:(0,B.jsx)(_.Z,{children:(0,B.jsx)(F,{container:m,loadingIndicatorCallback:d,isAccountSwitch:s,nextUrlParam:u,onLoginWithMfa:h,onLoginWithSuspended:this.onLoginWithSuspended,showResponseMessageModal:x,socialSignupCallbacks:E,showLoginRateLimited:()=>this.updateAccountRecoveryModal(C.Ny.RATE_LIMITED),onClick:()=>{S(13507)}})})}),k=!t&&!o?"8px":"0px";return(0,B.jsxs)(L.xu,{"data-test-id":"login-options",dangerouslySetInlineStyle:{__style:{marginTop:l?"9px":"10px"}},children:[j,(0,B.jsx)(L.xu,{dangerouslySetInlineStyle:{__style:{height:l?k:"10px"}}}),T,!i&&b&&(0,B.jsxs)(n.Fragment,{children:[(0,B.jsx)(L.xu,{dangerouslySetInlineStyle:{__style:{height:l?k:"10px"}}}),D]})]})})),N(this,"renderRegisterForm",(()=>{const{disableEmailLogin:e,email:t,hideEmailField:i,hideFacebookButton:o,hideGoogleButton:s,hidePasswordField:r,i18n:a,isAccountSwitch:l,loginButtonTextOverride:d,password:c,suppressFocus:u,logContextEvent:p,requestContext:{isRTL:_},desktopCoreLoginContext:{viewer:g},viewType:m,viewParameter:f,component:b,attributionLabel:y}=this.props,{emailValidationError:v,loading:P,passwordValidationError:w}=this.state,I=d||a.bt("Accedi", "Log in", "Copy on the button to log in", undefined, true),A=w&&(0,n.isValidElement)(w)?null:(0,B.jsx)(L.xu,{marginBottom:3,marginTop:2,dangerouslySetInlineStyle:{__style:{float:_?"right":"left"}},children:(0,B.jsx)(L.xv,{size:"200",weight:"bold",children:(0,B.jsx)(L.rU,{href:Z+(t?`?q=${t}`:""),onClick:({dangerouslyDisableOnNavigation:e})=>{e(),(0,k.My)("login_modal_forget_account"),(0,k.NC)("click_forget_password"),p({event_type:101,element:10881,aux_data:{...(0,x.Z)(g.type)}})},children:a.bt("Hai dimenticato la password?", "Forgot your password?", "Desktop login modal link for users to recover their account", undefined, true)})})});return(0,B.jsx)(h.Z,{buttonText:I,disableEmailLogin:e,email:t,emailText:a.bt("Email", "Email", "Placeholder text for email field", undefined, true),emailValidationError:v,hideEmailField:i,hideFacebookButton:o,hideGoogleButton:s,hidePasswordField:r,loading:P&&!l,onButtonClick:this.handleButtonClick,onEmailBlur:this.handleBlur,onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:c,passwordResetLink:A,passwordText:a.bt("Password", "Password", " - ", undefined, true),passwordValidationError:w,suppressFocus:u,component:b,attributionLabel:y,viewType:m,viewParameter:f})})),N(this,"renderOriginalForm",(()=>{const{hideFacebookButton:e,hideGoogleButton:t,hidePasswordField:i}=this.props,o=!(i||t&&e);return(0,B.jsxs)(n.Fragment,{children:[this.renderRegisterForm(),o&&(0,B.jsx)(s.Z,{}),this.renderSocialButtons()]})})),N(this,"renderButtons",(()=>this.renderOriginalForm())),this.state={accountRecoveryModalType:null,emailValidationError:null,passwordValidationError:null,googleValidationError:null,loading:!1,hideFBGoogleToolTip:!1};const{i18n:t}=e,i=t.bt("Hai saltato qualcosa! Non dimenticare di aggiungere il tuo indirizzo email.", "You missed a spot! Don't forget to add your email.", " - ", undefined, true),o=t.bt("Mmm... non sembra un indirizzo email valido.", "Hmm...that doesn't look like an email address.", " - ", undefined, true),u=t.bt("Utilizza solo una combinazione di lettere, numeri e caratteri speciali (ad esempio: ?, !, $).", "Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "Login.password.onlyASCII", undefined, true);this.emailValidators=[(0,D.aH)({message:i}),(0,D.GT)({message:o})];const m=t.bt("La password inserita non  corretta.", "The password you entered is incorrect.", " - ", undefined, true);this.passwordValidators=[(0,y.r)({shortPassStr:m,samePasswordStr:m,blackPassStr:m})],this.asciiValidators=[(0,D.oR)({message:u})]}componentDidMount(){const{isAccountSwitch:e,nextUrlParam:t,requestContext:i,showResponseMessageModal:n}=this.props;C.ZP.isFullyLoggedIn(i.isAuthenticated,i.loginState)&&!e&&(n?n(!1):C.ZP.handleRedirect(t)),window.onloadCallback=this.onloadCallback,window.verifyCaptcha=this.verifyCaptcha,void 0===window.recaptchaCount?window.recaptchaCount=1:window.recaptchaCount+=1}componentWillUnmount(){void 0!==window.recaptchaCount&&(window.recaptchaCount-=1)}loginUser(e,t,i){const{container:n="unknown",email:s,flushContextEvents:r,isAccountSwitch:a,loadingIndicatorCallback:l,login:d,pageContext:c,showResponseMessageModal:h,desktopCoreLoginContext:{viewer:p},requestContext:_}=this.props;this.setState({loading:!0}),l(!0);const m=t||{username_or_email:s||"",password:this.props.password},f={container:n,page:c?c.pageType:void 0};let y=g.Z.EMAIL;"facebook"===e?y=g.Z.FACEBOOK:"google"===e&&(y=g.Z.GPLUS),u.Z.pause(b.LU),r(),d({creds:m,loggingOptions:{loggingData:f,loginAttemptContextEvent:{event_type:7534,element:"google"===e?12981:void 0,aux_data:{...(0,x.Z)(p.type),signup_login_method:y}}},isAccountSwitch:a,recaptchaV2Token:i,recaptchaV3Token:this.props.recaptchaV3Token||"default"}).then(((e={})=>{C.ZP.storeLoginCredentialsToBrowser(m);let t=this.props.nextUrlParam||C.ZP.defaultLoginRedirectUrl();const{anyEnabled:i}=_.experimentsClient.checkExperiment("m10n_measurement_pinterest_tag_us");if(i&&"undefined"!=typeof window&&window.pintrk)try{window.pintrk("track","custom",{lead_type:"Pinterest Login",em:s})}catch(r){}if(a&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const i=e.resource_response.data.user;(0,o.Z)(i,"email",n),t="/"+i.username}else C.ZP.storeLoginCredentialsToBrowser(m);h?h(!1):C.ZP.handleRedirect(t)}),(t=>this.handleLoginFailure(e,t,m)))}render(){const{email:e}=this.props;return(0,B.jsxs)(L.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:[(0,B.jsx)(E.Z,{email:e||"",modalType:this.state.accountRecoveryModalType,onLoginWithMfa:this.props.onLoginWithMfa,updateAccountRecoveryModal:this.updateAccountRecoveryModal}),this.renderButtons(),!this.props.hideTermsOfService&&(0,B.jsx)(m.Z,{dark:!0})]})}}function H(e){const t=(0,S.ZP)(),{flushContextEvents:i,logContextEvent:o}=(0,w.v)(),s=(0,M.lO)(),{recaptchaV3Token:r,refreshToken:a}=(0,A.D)(),l=(0,O.B$)(),{country:d}=(0,R.B)(),c="JP"===d,u=(0,f.Z)(),[h,p]=(0,n.useState)(""),{viewType:_,viewParameter:g}=(0,I.SU)(),m=(0,z.g)();return(0,B.jsx)(V,{...e,desktopCoreLoginContext:l,flushContextEvents:i,i18n:t,logContextEvent:o,login:u,pageContext:s,password:h,recaptchaV3Token:r,refreshRecaptchaV3Token:a,isLineAuthenticationEnabled:c,setPassword:p,viewType:_,viewParameter:g,unauthDesktopSignupModalPageContext:m})}},389054:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(803491);const s=["gmail.com","hotmail.com","hotmail.com.ar","yahoo.com.ar","live.com.ar","outlook.com","live.com","bigpond.com","yahoo.com","icloud.com","yahoo.com.au","yahoo.com.br","bol.com.br","yahoo.ca","hotmail.ca","web.de","gmx.de","t-online.de","hotmail.de","hotmail.es","yahoo.es","hotmail.fr","orange.fr","yahoo.fr","live.fr","free.fr","laposte.net","wanadoo.fr","outlook.fr","hotmail.co.uk","rediffmail.com","yahoo.co.in","yahoo.in","libero.it","hotmail.it","alice.it","yahoo.co.jp","ezweb.ne.jp","docomo.ne.jp","i.softbank.jp","softbank.ne.jp","live.com.mx","outlook.es","aol.com","outlook.com","comcast.net"];var r=i(326216),a=i(597922),l=i(898781),d=i(349700),c=i(407043),u=i(567482),h=i(867820),p=i(883119),_=i(785893);function g({age:e,ageValidationError:t,onAgeChange:i,onAgeError:o}){const s=(0,l.ZP)();return(0,n.useEffect)((()=>{(0,h.My)("dweb.signup_age_step",{type:"email",format:"age"})}),[]),(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(p.xu,{marginBottom:1,marginStart:2,marginTop:2,children:(0,_.jsx)(p.__,{htmlFor:"age",children:(0,_.jsx)(p.xv,{size:"200",children:s.bt("Et", "Age", "registerForm.label.age", undefined, true)})})}),(0,_.jsx)(p.xu,{"data-test-id":"ageInputField",children:(0,_.jsx)(p.xu,{marginTop:1,children:(0,_.jsx)(u.Z,{error:null==t?void 0:t.toString(),value:e,onChange:i,onValidation:o,preventValidationOnStart:!0})})})]})}var m=i(662730);function f({birthday:e,birthdayValidationError:t,setBirthdayValidationError:i,onBirthdayChange:o}){const s=(0,l.ZP)();(0,n.useEffect)((()=>{(0,h.My)("dweb.signup_age_step",{type:"email",format:"birthday"})}),[]);return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(p.xu,{marginBottom:1,marginStart:2,marginTop:2,children:(0,_.jsxs)(p.kC,{children:[(0,_.jsx)(p.xu,{marginEnd:2,children:(0,_.jsx)(p.__,{htmlFor:"birthdate",children:(0,_.jsx)(p.xv,{size:"200",children:s.bt("Data di nascita", "Birthdate", "registerForm.label.birthdate", undefined, true)})})}),(0,_.jsx)(p.u,{idealDirection:"right",text:s.bt("Raccogliamo queste informazioni per fornire un'esperienza migliore ai giovani della nostra community. Useremo anche la tua data di nascita per personalizzare i suggerimenti e gli annunci. Queste informazioni non verranno mostrate pubblicamente.", "We collect this info to help provide a better experience for the younger people in our community. Well also use your birthdate to help personalize your recommendations and ads. It will not be displayed publicly.", "registerForm.label.birthdate.tooltipDescription", undefined, true),zIndex:m.C,children:(0,_.jsx)(p.JO,{accessibilityLabel:s.bt("Tooltip", "Tooltip", "registerForm.label.birthdate.tooltip.access", undefined, true),icon:"info-circle"})})]})}),(0,_.jsx)(p.xu,{"data-test-id":"signup-birthdate-field",children:(0,_.jsx)(p.nv,{autoComplete:"bday",errorMessage:t,id:"birthdate",onChange:e=>{o(e),i("")},size:"lg",type:"date",value:e||""})})]})}function x({buttonText:e,buttonTextLabel:t,disableEmailLogin:i,email:u,emailFieldHasError:m,emailLabel:x,emailText:b,emailValidationError:y,hideEmailField:v,hideFacebookButton:P,hideGoogleButton:w,hidePasswordField:I,onButtonClick:A,onEmailBlur:E,onEmailChange:C,onPasswordChange:S,password:j,passwordResetLink:T,passwordText:D,passwordValidationError:k,signupForm:z,suppressFocus:O,component:R,attributionLabel:L,viewType:M,viewParameter:B}){const N=(0,l.ZP)(),[F,Z]=(0,n.useState)(!!z),[U,V]=(0,n.useState)(null),[H,G]=(0,n.useState)("");let W=y;W||!I&&!i||(P||w?!P&&w?W=N.bt("Il tuo account  collegato a Facebook. Usa il pulsante Facebook per accedere", "Your account is connected to Facebook - use the Facebook button to log in", "Customized desktop login for users with Facebook", undefined, true):P&&!w&&(W=N.bt("Il tuo account  collegato a Google. Usa il pulsante Google per accedere", "Your account is connected to Google - use the Google button to log in", "Customized desktop login for users with Google", undefined, true)):W=N.bt("Il tuo account  collegato a Facebook e Google. Usa i pulsanti per accedere", "Your account is connected to Facebook and Google - use the buttons to log in", "Customized desktop login for users with FB and Google", undefined, true));const{logContextEvent:$}=(0,c.v)();return(0,_.jsxs)("form",{"data-test-id":"registerForm",method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),A(e)},children:[!v&&(0,_.jsx)(p.xu,{marginBottom:1,marginStart:2,children:(0,_.jsx)(p.__,{htmlFor:"email",children:(0,_.jsx)(p.xv,{size:"200",children:N.bt("Email", "Email", "registerForm.label.email", undefined, true)})})}),!v&&(0,_.jsx)(p.xu,{"data-test-id":"emailInputField",dangerouslySetInlineStyle:{__style:{marginBottom:7}},children:(0,_.jsx)(a.Z,{accessibilityLabel:x,autoComplete:"email",disabled:!(null==z||!z.registerRestricted),domainError:U?(0,d.nk)(N.bt("Intendevi {{ newEmail }}?", "Did you mean {{ newEmail }}?", " - ", undefined, true),{newEmail:(0,_.jsx)(p.xv,{color:"error",inline:!0,size:"200",weight:"bold",children:U},"err_text")}):void 0,focused:!O,hasError:!!y||!!m,id:"email",name:"id",onBlur:()=>{null==E||E(),z&&(u?z.checkEmailExistsWithCompletion({email:u,handleEmailExists:()=>{(0,h.My)("web.unauth.signup.email_entered"),F&&Z(!1)},handleEmailNotExist:async()=>{F||Z(!0),await z.checkEmailValidation(u)},handleError:()=>{Z(!0)}}):Z(!0));const e=e=>{G(e),u===e?V(null):(V(e),(0,h.My)("unauth.email_domain_typo_suggestion.shown"))},t=u&&-1!==u.indexOf("@")?u.split("@"):[];if(u&&u!==H||V(null),u&&t&&u.length<60){if(2===t.length){const i=t[1],n=i&&-1!==i.indexOf(".")?i.split("."):[];if(n.length>=2&&"gmail"===n[0])if("com"!==n.slice(1).join(".")){e(t[0]+"@gmail.com")}else V(null)}const i=t[1]&&s.includes(t[1])?null:t[1]&&s.map((e=>{const i=(0,r.Z)(e,t[1]);return 2===i||1===i?e:null})).filter((e=>"string"==typeof e));if(i&&i.length){e(i[0]?`${t[0]}@${i[0]}`:"")}}},onChange:C,placeholder:b,tooltip:W,type:"email",value:u})}),!I&&(0,_.jsx)(p.xu,{marginBottom:1,marginStart:2,children:(0,_.jsx)(p.__,{htmlFor:"password",children:(0,_.jsx)(p.xv,{size:"200",children:N.bt("Password", "Password", "registerForm.label.password", undefined, true)})})}),!I&&(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(p.xu,{"data-test-id":"passwordInputField",children:(0,_.jsx)(a.Z,{autoComplete:"new-password",disabled:!!i||!(null==z||!z.registerRestricted),hasError:!!k,id:"password",name:"password",onChange:S,onFocus:()=>{(0,h.NC)("focus_password")},placeholder:D,tooltip:k,type:"password",value:j,focused:!!v&&!O})}),(0,_.jsx)(p.xu,{"data-test-id":"password-reset-button",children:null!=T?T:null})]}),window.recaptchaCount>0?(0,_.jsx)("div",{className:"g-recaptcha",id:`recaptcha_placeholder_${window.recaptchaCount}`,style:{marginTop:"16px",transform:"scale(0.88)",transformOrigin:"0 0"}}):null,z&&("birthday"===z.ageOrBirthday.type?(0,_.jsx)(f,{...z.ageOrBirthday.props}):F&&(0,_.jsx)(g,{...z.ageOrBirthday.props})),(null==z?void 0:z.registerRestricted)&&"birthday"===z.ageOrBirthday.type&&(0,_.jsx)(p.xu,{marginTop:2,children:(0,_.jsx)(p.xv,{size:"100",color:"error",children:N.bt("Spiacenti, al momento non disponi dell'idoneit per iscriverti a Pinterest.", "Sorry, youre not eligible to sign up for Pinterest right now.", "Signup.AgeStep.underageError", undefined, true)})}),!I&&(0,_.jsx)(p.xu,{"data-test-id":"registerFormSubmitButton",children:(0,_.jsx)(o.Z,{accessibilityLabel:t,className:"red SignupButton",disabled:i||!(null==z||!z.registerRestricted),onClick:()=>{$({view_type:M,view_parameter:B,component:R,element:14320===R?13506:30,event_type:10441,aux_data:{upsell_reason:L}}),F?(0,h.NC)("press_signup_continue"):(0,h.NC)("press_login_continue")},styleOverrides:{width:"100%",borderRadius:"20px",marginTop:"8px"},type:"submit",children:(0,_.jsx)(p.xu,{children:e})})})]})}},796592:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(157796),o=i(898781),s=i(883119),r=i(785893);const a=()=>{const e=(0,o.ZP)();return(0,r.jsx)(s.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%",children:(0,r.jsxs)(s.xu,{color:"default",height:600,minWidth:"500px",rounding:2,width:"30%",children:[(0,r.jsxs)(s.xu,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12,children:[(0,r.jsx)(s.xu,{alignItems:"center",color:"primary",display:"flex",height:60,justifyContent:"center",marginBottom:4,rounding:"circle",width:60,children:(0,r.jsx)(s.JO,{accessibilityLabel:e.bt("Registrazione con Google one-tap in fase di caricamento", "Loading state for google one tap registration", " - ", undefined, true),color:"inverse",icon:"pin",size:"28"})}),(0,r.jsx)(s.xu,{paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}},children:(0,r.jsx)(s.X6,{children:e.bt("Ti diamo il benvenuto su Pinterest!", "Welcome to Pinterest!", "Welcome to Pinterest!", undefined, true)})}),(0,r.jsx)(s.xv,{align:"center",overflow:"normal",children:(0,r.jsx)("span",{className:"deprecatedTextSizeXL",children:e.bt("Le risposte alle prossime domande ci aiuteranno a trovare le idee pi adatte a te", "Your answers to the next questions will help us find the right ideas for you", "loading state description while waiting for google one tap registration to complete", undefined, true)})})]}),(0,r.jsx)(s.xu,{width:"100%",children:(0,r.jsx)(n.Z,{duration:6e3,finalProgress:95,shape:"rounded"})})]})})}},174382:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(121151),o=i(898781),s=i(883119),r=i(785893);function a({type:e,onDismiss:t}){const i=(0,o.ZP)(),a="facebook"===e?i.bt("Ops! Facebook non  disponibile", "Oops! Facebook isn't available", "socialAuthDisabled.facebook.title", undefined, true):i.bt("Ops! Google non  disponibile", "Oops! Google isn't available", "socialAuthDisabled.google.title", undefined, true),l="facebook"===e?i.bt("Sembra che al momento Facebook non sia disponibile. Prova un'altra opzione o aggiorna la pagina e riprova.", "Looks like Facebook isn't available right now. Give another option a try or refresh the page and try again later.", "socialAuthDisabled.facebook.description", undefined, true):i.bt("Sembra che al momento Google non sia disponibile. Prova un'altra opzione o aggiorna la pagina e riprova.", "Looks like Google isn't available right now. Give another option a try or refresh the page and try again later.", "socialAuthDisabled.google.description", undefined, true);return(0,r.jsx)(n.ZP,{accessibilityModalLabel:a,footer:(0,r.jsx)(s.kC,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(s.xu,{paddingX:1,children:(0,r.jsx)(s.zx,{color:"red",onClick:t,text:i.bt("OK", "OK", "socialAuthDisabled.okButton", undefined, true),size:"md"})})}),heading:a,onDismiss:t,children:(0,r.jsx)(s.xu,{paddingX:5,children:(0,r.jsx)(s.xv,{align:"center",children:l})})})}},563387:(e,t,i)=>{i.d(t,{E:()=>l,Z:()=>d});var n=i(898781),o=i(349700),s=i(883119),r=i(966113),a=i(785893);const l="\n.TermsOfService__light a {\n  color: rgba(255,255,255,0.9);\n}\n";function d({dark:e}){const t=(0,n.ZP)();return(0,a.jsx)("div",{style:{marginTop:"12px"},children:(0,a.jsx)("span",{"data-test-id":"terms-of-service",className:e?"":"TermsOfService__light",style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear",...e?{color:"#767676",width:"224px"}:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"}},children:(0,a.jsx)("span",{children:(0,o.nk)(t.bt("Continuando, accetti i {{ tos }} di Pinterest e dichiari di aver letto le nostre {{ privacyPolicy }}. {{ noticeAtCollection }}.", "By continuing, you agree to Pinterest's {{ tos }} and acknowledge you've read our {{ privacyPolicy }}. {{ noticeAtCollection }}.", "termOfService.text", undefined, true),{tos:(0,a.jsx)(s.xu,{"data-test-id":"tos",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,a.jsx)(s.rU,{display:"inlineBlock",target:"blank",href:r.dQ,underline:"hover",children:t.bt("Termini di servizio", "Terms of Service", "termOfService.link.tos", undefined, true)},"tos")},"tos"),privacyPolicy:(0,a.jsx)(s.xu,{"data-test-id":"privacy",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,a.jsx)(s.rU,{display:"inlineBlock",target:"blank",href:"/_/_/policy/privacy-policy/",underline:"hover",children:t.bt("Norme sulla privacy", "Privacy Policy", "termOfService.link.privacyPolicy", undefined, true)},"privacy")},"privacy"),noticeAtCollection:(0,a.jsx)(s.xu,{"data-test-id":"noticeAtCollection",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,a.jsx)(s.rU,{display:"inlineBlock",target:"blank",href:r.cv,underline:"hover",children:t.bt("Avviso sulla raccolta", "Notice at collection", "termOfService.link.noticeAtCollection", undefined, true)},"noticeAtCollection")},"noticeAtCollection")})})})})}},597922:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(883119),s=i(785893);function r({accessibilityLabel:e,autoComplete:t="on",disabled:i,domainError:r,focused:a,hasError:l,helperText:d,id:c,name:u,onBlur:h,onChange:p,onFocus:_,placeholder:g,tooltip:m,type:f,useExperimentalTextfield:x,value:b}){var y;const v=(0,n.useRef)(a),P=(0,n.useRef)(null),w=(0,n.useRef)(l);return(0,n.useEffect)((()=>{var e;v.current&&(null===(e=P.current)||void 0===e||e.focus())}),[]),(0,n.useEffect)((()=>{var e;!1===w.current&&l&&(null===(e=P.current)||void 0===e||e.focus());w.current=l}),[l]),(0,s.jsxs)("fieldset",{style:{position:"relative"},children:[(0,s.jsx)(o.xu,{display:"visuallyHidden",children:(0,s.jsx)(o.__,{htmlFor:c,children:null!==(y=null!=e?e:g)&&void 0!==y?y:""})}),(0,s.jsx)(o.nv,{autoComplete:x?void 0:t,disabled:i,errorMessage:m?x&&r||m:"",helperText:x?void 0:d,id:c,name:u,onBlur:h,onChange:({event:e})=>{p(e)},onFocus:_,placeholder:g,ref:P,size:x?void 0:"lg",type:f,value:b||""})]})}},640672:(e,t,i)=>{i.d(t,{Z:()=>r,g:()=>s});var n=i(883119),o=i(785893);const s="\n.Tooltip_message:before, .Tooltip_message:after {\n  border-style: solid;\n  content: '';\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_message:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_message:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_mobileMessage:before, .Tooltip_message:after {\n  border-style: solid;\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_mobileMessage:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_mobileMessage:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_wrapper {\n  position: absolute;\n  left: calc(100% + 12px);\n  z-index: 1;\n}\n.Tooltip_mobileWrapper {\n  margin-top: 7px;\n  z-index: 1;\n}\n";function r({message:e}){return(0,o.jsxs)("div",{className:"Tooltip_wrapper","data-test-id":"tooltip",style:{top:"0px",width:"215px"},children:[(0,o.jsx)("div",{className:"Tooltip_message",style:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:"left",maxWidth:"215px",display:"inline-block",float:"left"},children:(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:e},style:{overflowWrap:"break-word",wordWrap:"break-word"}})}),(0,o.jsx)(n.xu,{})]})}},754124:(e,t,i)=>{i.d(t,{Z:()=>g,b:()=>_});var n=i(667294),o=i(231486),s=i(290148),r=i(499128),a=i(349700),l=i(226198),d=i(867820),c=i(782534),u=i(898781),h=i(883119),p=i(785893);const _=e=>e.bt("Usa la tua data di nascita, anche se si tratta di un account per aziende.", "Use your own birthday even if this is a business account.", "signup.underageconfirmation.info", undefined, true),g=({birthday:e,onEditBirthday:t,onConfirmBirthday:i=(()=>{})})=>{const g=(0,u.ZP)(),[m,f]=(0,n.useState)(!1);return(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(h.xu,{padding:8,"data-test-id":"underageconfirmation-modal",children:(0,p.jsxs)(h.kC,{direction:"column",justifyContent:"center",alignItems:"center",children:[(0,p.jsx)(h.xu,{width:420,marginBottom:5,"data-test-id":"underageconfirmation-title",children:(0,p.jsx)(h.X6,{align:"center",size:"600",children:(0,a.nk)(g.bt("La tua data di nascita : {{date}}?", "Is {{date}} your birthday?", "signup.underageconfirmation.question", undefined, true),{date:e?(0,p.jsx)(c.Z,{dateFormatType:c.k.LONG,useUTC:!0,value:new Date(e)}):null})})}),(0,p.jsx)(h.xu,{marginBottom:10,children:(0,p.jsx)(h.xv,{children:_(g)})}),(0,p.jsx)(h.xu,{children:(0,p.jsxs)(h.kC,{children:[(0,p.jsx)(h.xu,{marginEnd:2,children:(0,p.jsx)(h.zx,{text:g.bt("Modifica", "Edit", "signup.underageconfirmation.edit", undefined, true),onClick:()=>{(0,d.My)("dweb.underageconfirmation.edit"),o.t8(l.It,"0",(0,o.kZ)(l.It)),t()}})}),(0,p.jsx)(h.zx,{text:g.bt("Conferma", "Confirm", "signup.underageconfirmation.confirm", undefined, true),type:"submit",color:"red",onClick:()=>{f(!0),(0,d.My)("dweb.underageconfirmation.confirm"),i(),setTimeout((()=>{s.ZP.handleRedirect("/")}),4e3)}})]})})]})}),m&&(0,p.jsx)(h.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,p.jsx)(r.ZP,{onHide:()=>f(!m),text:g.bt("Spiacenti, al momento non disponi dell'idoneit per iscriverti a Pinterest.", "Sorry, youre not eligible to sign up for Pinterest right now.", "signup.underageconfirmation.error", undefined, true),duration:3500})})]})}},995146:(e,t,i)=>{i.d(t,{a$:()=>h,kv:()=>u,pH:()=>p});var n=i(643913),o=i(966113),s=i(584595),r=i(214494);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends Error{constructor(e){super(e.statusText),a(this,"name","CrossDomainHandshakeHttpError"),this.response=e}}class d extends Error{constructor(e){super(e.message),a(this,"name","CrossDomainHandshakeApiError"),this.api_error_code=e.code,this.response=e}}const c=({path:e,data:t,unauthId:i})=>fetch(`${o.cD}/v3/${e}/handshake/`,{credentials:"include",mode:"cors",method:"POST",body:(0,n.Z)(t),headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":i}}).then((e=>{if(200===e.status||401===e.status||409===e.status)return e;throw new l(e)})).then((e=>e.json())).then((e=>{if("success"===e.status)return Promise.resolve(e);if(e.code===s.Zn)return e.api_error_code=e.code,Promise.reject(e);throw new d(e)})).catch((e=>{throw e})),u=(e,t=!1)=>r.Z.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),h=(e,{facebookToken:t,inviteCode:i,locale:n,referrer:o,unauthId:s})=>{const r=(e.business_name?"partner":e.facebook_id&&"facebook")||"email";let a={email:e.email||"",username:e.username||"",password:e.password||"",first_name:e.first_name||"",last_name:e.last_name||"",country:e.country||"",locale:n,referrer:o};return e.birthday&&(a={...a,birthday:e.birthday}),e.custom_gender&&(a={...a,custom_gender:e.custom_gender}),e.gender&&(a={...a,gender:e.gender}),e.business_name&&(a={...a,business_name:e.business_name,first_name:e.business_name}),i&&(a={...a,invite_code:i}),e.facebook_id&&(a={...a,facebook_id:e.facebook_id,facebook_token:t||e.facebook_token||""}),e.recaptchaV3Token&&(a={...a,recaptcha_v3_token:e.recaptchaV3Token}),c({path:`register/${r}`,data:a,unauthId:s})},p=(e,{recaptchaV3Token:t,referrer:i,unauthId:n})=>{const o=e.mfa_token?"login/mfa":"login";let s={username_or_email:e.username_or_email.trim(),password:e.password,referrer:i};return e.mfa_token&&(s={...s,mfa_token:e.mfa_token}),t&&(s={...s,token:t}),c({path:o,data:s,unauthId:n})}},233211:(e,t,i)=>{i.d(t,{B$:()=>d,Cw:()=>r,I7:()=>l,c4:()=>a});var n=i(667294),o=i(425288);const s=(0,n.createContext)(null),r=()=>(0,n.useContext)(s),a=s.Provider,{Provider:l,useHook:d}=(0,o.Z)("DesktopCoreLogin")},905171:(e,t,i)=>{i.d(t,{o:()=>a,x:()=>r});var n=i(667294),o=i(898781);const s=new Set,r=e=>{s.forEach((t=>t(e)))},a=e=>{const t=(0,o.ZP)();(0,n.useEffect)((()=>{const i=i=>{e(i||t.bt("Errore sconosciuto", "Unknown Error", "unauth.error.modal.unknown", undefined, true))};return s.add(i),()=>{s.delete(i)}}),[])}},910702:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(816068);const o=e=>({type:"facebook",first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.picture&&!e.picture.data.is_silhouette?e.picture.data.url:void 0,facebook_id:e.id,facebook_token:e.access_token,birthday:e.birthday?(0,n.Z)(e.birthday):void 0})},11363:(e,t,i)=>{i.d(t,{Bx:()=>o,N4:()=>r,is:()=>a,lt:()=>n,oM:()=>s});const n=e=>e.bt("Ci sei quasi! Accedi per usufruire di tutte le funzionalit di Pinterest", "You're almost there! Log in to access all of Pinterest", "loginModal.limitedLogin.subheader", undefined, true),o=e=>e.bt("Accedi per salvare questo Pin", "Log in to save this Pin", "limitedLogin.modalHeader.repin", undefined, true),s=e=>e.bt("Accedi per modificare questo Pin", "Log in to edit this Pin", "limitedLogin.modalHeader.editPin", undefined, true),r=({i18n:e,toFollow:t})=>t?e.bt("Accedi per seguire", "Log in to follow", "limitedLogin.modalHeader.follow", undefined, true):e.bt("Accedi per smettere di seguire", "Log in to unfollow", "limitedLogin.modalHeader.unfollow", undefined, true),a=e=>e.bt("Accedi per creare un Pin o una bacheca", "Log in to create a Pin or board", "limitedLogin.modalHeader.create", undefined, true)},70212:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(689070);const o=async()=>{try{var e,t,i,o;const s=await(0,n.Z)({url:"/v3/users/me/"}),r=(null===(e=s.resource_response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email)||(null===(i=((null===(o=s.resource_response)||void 0===o?void 0:o.client_context)||Object.freeze({})).user)||void 0===i?void 0:i.email);"undefined"!=typeof window&&window.pintrk&&window.pintrk("track","custom",{lead_type:"Pinterest Login",em:r})}catch(s){}}},780679:(e,t,i)=>{i.d(t,{g:()=>r,t:()=>s});var n=i(667294);const o=(0,n.createContext)(null),s=o.Provider,r=()=>(0,n.useContext)(o)},85334:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(667294),o=i(231486),s=i(807998),r=i(383690),a=i(69642),l=i(584595),d=i(330102),c=i(290148),u=i(817656),h=i(532975),p=i(762752),_=i(407043),g=i(283943),m=i(214494),f=i(995146),x=i(867820),b=i(226198),y=i(529195);function v(){const e=(0,g.hq)(),t=(0,r.Z)(),{logContextEvent:i}=(0,_.v)(),v=(0,a.Z)();return(0,n.useCallback)((({creds:n,isAccountSwitch:r,loggingOptions:{loggingData:a=Object.freeze({}),loginAttemptContextEvent:_},recaptchaV2Token:g,recaptchaV3Token:P})=>{t();const w=!(!n.facebook_autologin&&!n.autologin),I=(0,c.eD)(n),A=e=>{const t=n.google_open_id_token?"google":"facebook";w&&(0,x.dy)({event:e,provider:t})};i({..._,event_type:7534}),v({action:w?"autologin":"login",event:"attempt",trigger:a.trigger,type:I});const E=e=>{let t="referrer_unknown";try{const e=document.referrer;t=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(l){}const o=a===Object(a)?a.container:"container_unknown";(0,x.My)("login.referrer."+t+"."+I),(0,x.My)("login.container."+String(o)+"."+I),(0,x.My)("login.type."+I);const s=I||"method_unknown",r=a.page||"page_unknown";n.facebook_autologin?((0,x.My)("web_autologin_facebook"),(0,x.My)("new_web_autologin_facebook",{page:r,referrer:t,container:o})):((0,x.My)(`web_login.${s}.success.${r}.${String(o)}.${t}.tier1`),(0,x.My)(`new_web_login.${s}.success`,{page:r,referrer:t,container:o})),(0,d.ko)({country:null==e?void 0:e.country,countryFromHostName:null==e?void 0:e.countryFromHostName,countryFromIp:null==e?void 0:e.countryFromIp,regionFromIp:null==e?void 0:e.regionFromIp,deviceType:"Desktop",eventCategory:"Logins"}),i({..._,event_type:7536}),v({action:w?"autologin":"login",event:"success",trigger:a&&a.trigger,type:I})},C=({error:e,isCrossDomain:t})=>{if(!e)return;const n=e.http_status===u.Ej?u.Ej:e.api_error_code;let o=n;n&&l.qF.has(n)&&(o=l.qF.get(n));const{container:s,trigger:r}=a;(0,x.My)(`${t?"unauth_web_client_cctld_login_api_error":"unauth_web_client_login_api_error"}.${String(o)}.${s||"unknow_container"}.${I}`),i({..._,event_type:7535}),v({action:w?"autologin":"login",event:"fail",trigger:r,type:I})};if(n.username_or_email&&!n.mfa_resend&&e&&-1!==s.Z.indexOf(e.origin)){const t=e=>(0,x.My)(`web_cross_domain_login.${e}.${(0,c.eD)(n)}`);t("attempt");const{referrer:i,facebookToken:o,unauthId:s}=e;return(0,f.pH)(n,{recaptchaV3Token:P,referrer:i,facebookToken:o,unauthId:s}).then((e=>{const i=e&&e.data;if(i)return t("success_with_token"),(0,f.kv)(i).then((e=>(t("success_token_exchanged"),E(),Promise.resolve())),(e=>{throw t("success_token_not_exchanged"),e}));throw t("success_without_token"),new Error}),(e=>{throw t("failure"),C({error:e,isCrossDomain:!0}),e}))}A("login_api_call_start");const S=(0,y.OJ)();return m.Z.create("UserSessionResource",{...n,...S?{referrer:S}:Object.freeze({}),get_user:n.get_user||n.switch_account&&r,app_type_from_client:7===e.appType?7:5,visited_pages_before_login:(0,y.t_)()||null,recaptchaV2Token:g,recaptchaV3Token:P}).callCreate({showError:!1,async:!0}).then((e=>{const{country:t,country_from_hostname:i,country_from_ip:n,region_from_ip:s}=(null==e?void 0:e.client_context)||Object.freeze({});return E({country:t,countryFromHostName:i,countryFromIp:n,regionFromIp:s}),A("login_api_call_success"),(0,h.B)(!1),o.zN(b.e7.name),o.zN(b.x3.name),(0,p.D)("login").then((()=>e))}),(e=>(C({error:e,isCrossDomain:!1}),A("login_api_call_failure"),Promise.reject(e))))}),[e,t,i,v])}},946984:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(898781),o=i(11363),s=i(987318);const r=()=>{const{loginForMore:e,viewer:t,limitedLoginModalSubheader:i}=(0,s.H)(),r=(0,n.ZP)();return"AUTH"===t.type?null:t=>{null==e||e.setVisible(!0),null==i||i.setText((null==t?void 0:t.loginModalHeader)||(0,o.lt)(r))}}},901656:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(432300);const o=e=>"UNAUTH"===e?Object.freeze({}):{login_state:"LIMITED_LOGIN"===e?n.Z.LIMITED:n.Z.DEFAULT}},662730:(e,t,i)=>{i.d(t,{C:()=>s,P:()=>o});var n=i(883119);const o=new n.Ry(1e4),s=new n.H3([o])},903095:(e,t,i)=>{i.d(t,{Mi:()=>o,lO:()=>s});var n=i(425288);const{Provider:o,useMaybeHook:s}=(0,n.Z)("pageContext")},532975:(e,t,i)=>{i.d(t,{B:()=>r,a:()=>s});var n=i(957161),o=i(299899);const s=()=>!!n.Z.getItem(o.WM),r=e=>{n.Z.setItem(o.WM,!!e)}},583421:(e,t,i)=>{i.d(t,{Z:()=>c,y:()=>a});var n=i(667294),o=i(60598),s=i(14890),r=i(785893);const a={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};const l={hover:({index:e,onDragHover:t},i,n)=>{t(e,function(e,t){const i=t.targetEl;if(!(i&&i instanceof HTMLElement))return null;const{x:n,y:o}=e.getClientOffset(),{left:s,right:r,top:a,bottom:l,width:d,height:c}=i.getBoundingClientRect();return{positionRelativeToCenter:{x:n-(s+r)/2,y:o-(a+l)/2},boundingBox:{width:d,height:c}}}(i,n))}};class d extends n.Component{render(){const{children:e,connectDragSource:t,connectDropTarget:i,isDragging:n,isDraggingInternal:o,isDropTargetOnly:s}=this.props,a=i((0,r.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:n||o?0:1},children:e}));return s?a:t(a)}}const c=(0,s.compose)((0,o.GR)((e=>e.type),l,(e=>({connectDropTarget:e.dropTarget()}))),(0,o.Ej)((e=>e.type),{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},((e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.isDragging()}))))(d)},266898:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(60598),o=i(395141);const s=(0,n.Z5)(o.ZP)},345221:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(60598),o=(i(583421),i(266898)),s=i(14890);const r=e=>t=>(0,s.compose)(o.Z,(0,n.GR)(e,{},((e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()}))))(t)},743847:(e,t,i)=>{i.d(t,{Z:()=>o,z:()=>s});var n=i(326216);function o(e){const t=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2===t.length){const e=t[1],i=e&&-1!==e.indexOf(".")?e.split("."):[];if(i.length>=2&&"gmail"===i[0]&&"com"!==i.slice(1).join("."))return!0;const o=(0,n.Z)(e,"gmail.com");if("g"===e.charAt(0)&&(1===o||2===o))return!0}return!1}function s(e,t){const i=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2!==i.length)return!1;const o=i[1],s=o&&-1!==o.indexOf(".")?o.split("."):[],r=s[0];if(r===t&&s.length>3)return!0;if(s.length>=2){const e=(0,n.Z)(r,t);return r.charAt(0)===t.charAt(0)&&(1===e||2===e)}return(2!==s.length||r!==t||2!==s[1].length&&"com"!==s[1])&&(s.length,!1)}},375571:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(172071),s=i(395164);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends n.Component{constructor(...e){super(...e),r(this,"state",{error:null,info:null}),r(this,"resetError",(()=>{this.setState({error:null,info:null})}))}componentDidCatch(e,t){try{var i;const t=this.props.name,n=this.props.type||"secondary";(0,s.T)({extraData:null!==(i=e.extraData)&&void 0!==i?i:{},errorBoundary:t,errorBoundaryType:n,message:e.message,name:e.name,stack:e.stack}),o.Z.increment("react.error_boundary",.1,{component:void 0,name:this.props.name})}catch(n){o.Z.increment("react.error_boundary.error",1,{name:this.props.name})}this.setState({error:e,info:t})}render(){const{renderErrorState:e}=this.props,{error:t,info:i}=this.state;return t&&i?e?e({error:t,info:i,resetError:this.resetError}):null:this.props.children}}},319915:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(375571).Z},121093:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(702664),s=i(332611),r=i(242923),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.Component{constructor(...e){super(...e),l(this,"state",{hasCompleted:[],hasDismissed:[]}),l(this,"view",(()=>{const{experience:e,isBackendExperience:t,targeting:i,viewExperience:n,viewExperienceObject:o}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",o(e)):i?n(e.placement_id,e.experience_id,i):n(e.placement_id,e.experience_id))})),l(this,"complete",(e=>{const{completeExperience:t,completeExperienceObject:i,experience:n,isBackendExperience:o,preventRemoval:s,targeting:r}=this.props,a=e||1;if(n&&!this.state.hasCompleted.includes(n.experience_id)){const{placement_id:e,experience_id:l}=n||{},d=s||2===a;(1===a||d)&&e&&l&&(o?i(n,d):r?t(e,l,d,r):t(e,l,d),this.setState((e=>({hasCompleted:[...e.hasCompleted,l]}))))}})),l(this,"dismiss",(()=>{const{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:n,preventRemoval:o,targeting:s}=this.props,{placement_id:r,experience_id:a}=i||{};i&&!this.state.hasDismissed.includes(a)&&(n?t(i):s?e(r,a,!!o,s):e(r,a,!!o),this.setState((e=>({hasDismissed:[...e.hasDismissed,a]}))))})),l(this,"shouldRenderExperience",(()=>{const{experience:e}=this.props;if(e){const{eligibleIds:t,eligibleTypes:i,predicate:n,transitionType:o}=this.props,{experience_id:s,type:r}=e;if(t&&t.includes(s))return!0;if(null==t||!t.length){if(n&&n(e))return!0;if(i&&i.includes(r))return!0;if(o&&o===r)return!0}}return!1}))}componentDidMount(){if(this.props.disableAutoView)return;const{experience:e}=this.props;e&&this.shouldRenderExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;const t=e.experience,i=this.props.experience;i&&this.shouldRenderExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){const{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.shouldRenderExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):n.Children.only(e):null}}function c(e){const t=(0,o.useSelector)((({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0))),i=(0,o.useDispatch)();return(0,a.jsx)(d,{...e,experience:t,completeExperience:(e,t,n,o)=>i((0,s.CK)(e,t,n,!1,{},o)),completeExperienceObject:(e,t)=>i((0,r.Tl)(e,t)),dismissExperience:(e,t,n,o)=>i((0,s.Qu)(e,t,n,void 0,o)),dismissExperienceObject:e=>i((0,r.CF)(e)),viewExperience:(e,t,n)=>i((0,s.UT)(e,t,!1,!1,void 0,n)),viewExperienceObject:e=>i((0,r.dy)(e))})}l(d,"defaultProps",{eligibleIds:[],eligibleTypes:[]})},701500:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(249647),s=i(570470),r=i(883119),a=i(785893);class l extends n.Component{renderPulsar(){const{anchor:e,handleComplete:t,handlePulsarCompleteOnHover:i,zIndex:n}=this.props;return(0,a.jsx)(s.Z,{anchor:e,onTouch:t,onMouseEnter:i,zIndex:n})}renderFlyout(){const{anchor:e,tooltip:t,handleDismiss:i,handleComplete:n}=this.props;if(!t)return null;const{cancelButtonText:o,confirmButtonText:s,mainText:l,idealDirection:d="down"}=t,c=o&&i&&s&&n;return(0,a.jsx)(r.J2,{anchor:e,color:"blue",idealDirection:d,onDismiss:i,shouldFocus:!1,showCaret:!0,size:"flexible",children:(0,a.jsxs)(r.xu,{maxWidth:284,padding:3,width:"max-content",children:[(0,a.jsx)(r.xv,{color:"inverse",overflow:"breakWord",weight:"bold",children:l}),c?(0,a.jsxs)(r.xu,{marginTop:2,display:"flex",alignItems:"center",children:[(0,a.jsx)(r.xu,{column:6,marginEnd:1,children:(0,a.jsx)(r.zx,{fullWidth:!0,color:"transparentWhiteText",onClick:e=>i(e),size:"md",text:String(o)})}),(0,a.jsx)(r.xu,{column:6,children:(0,a.jsx)(r.zx,{fullWidth:!0,color:"white",size:"md",text:String(s),onClick:n})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}var d=i(70061),c=i(764990),u=i(123159);function h({anchor:e,anchorElementRef:t,children:i,containerBoxConfig:s,experience:h,isHidden:p,onCompleteClick:_,zIndex:g}){var m;const{completeExperience:f,dismissExperience:x,experiences:b,viewExperience:y}=(0,u.M)(),v=(({anchor:e,anchorExperiences:t,passedExperience:i})=>i||(t?t[e]:null))({anchor:e,anchorExperiences:Object.values(b).reduce(((e,t)=>(8===t.type&&(e[(0,c.A0)(t)]=t),e)),{}),passedExperience:h}),P=(null==v||null===(m=v.display_data)||void 0===m?void 0:m.delay)||0,[w,I]=(0,n.useState)(!!P);if((0,n.useEffect)((()=>{if(P>0&&w){const e=setTimeout((()=>{I(!1)}));return()=>clearTimeout(e)}return()=>{}}),[P,w]),(0,n.useEffect)((()=>{!w&&v&&y(v.placement_id,v.experience_id)}),[w,v]),!v||w||p)return n.Children.only(i);const A=(e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,o.Z)(d.Z,!0)(t)})(v),E=()=>{var e;null!==(e=v.display_data)&&void 0!==e&&e.complete_on_hover&&f(v.placement_id,v.experience_id)};return(0,a.jsxs)(r.xu,{position:"relative",height:null==s?void 0:s.height,display:null==s?void 0:s.display,children:[(0,a.jsx)(r.iP,{onMouseEnter:E,onTap:()=>{_&&_(),A.skipComplete||f(v.placement_id,v.experience_id)},children:n.Children.only(i)}),(0,a.jsx)(l,{anchor:t||null,handlePulsarCompleteOnHover:E,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),x(v.placement_id,v.experience_id)},pulserOnly:!!A.pulserOnly,tooltip:A.tooltip,zIndex:g})]})}},123159:(e,t,i)=>{i.d(t,{F:()=>h,M:()=>u});var n=i(667294),o=i(702664),s=i(14890),r=i(957191),a=i(425288),l=i(332611),d=i(785893);const{Provider:c,useHook:u}=(0,a.Z)("ExperienceContext");function h({children:e}){const[t,i]=(0,n.useReducer)(((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,[t.payload]:!0};if("UNMOUNT_PLACEMENT"===t.type){const i={...e};return delete i[t.payload],i}return e}),{}),a=(0,o.useDispatch)(),u=(0,o.useSelector)((e=>e.experiences)),h=(0,n.useMemo)((()=>{const e=(0,s.bindActionCreators)({completeExperience:l.CK,dismissExperience:l.Qu,fetchAllExperiences:l.fO,fetchAllExperiencesMulti:r.NW,fetchExperienceForPlacements:l.pz,mountPlacement:l.N,triggerExperimentsForPlacement:l.kd,viewExperience:l.UT},a);return{...e,mountPlacement:(t,...n)=>{e.mountPlacement(t,...n),i({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{i({type:"UNMOUNT_PLACEMENT",payload:e})}}}),[a,i]),p=(0,n.useMemo)((()=>({experiences:u,mountedPlacements:t,...h})),[u,t,h]);return(0,d.jsx)(c,{value:p,children:e})}},70943:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var n=i(667294),o=i(155378),s=i(249647),r=i(6663),a=i(898781),l=i(785893);const d=function({color:e="default",handleDismiss:t=(()=>{}),header:i="",headerSubtitle:n="",dismissButtonText:o=""}){const s=(0,a.ZP)();return(0,l.jsx)(r.Z,{message:`${i} ${n}`,dismissButtonText:o||s.bt("Ok", "Got it", "dismissButton.hero.dismissText", undefined, true),onDismiss:t,color:e})};var c=i(121093);const u=()=>{};function h({color:e,completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:n,dismissButtonText:o,handleComplete:s=u,handleDismiss:d=u,header:c="",headerSubtitle:h=""}){const p=(0,a.ZP)();return(0,l.jsx)(r.Z,{message:(c+" "+h).trim(),dismissButtonText:o||p.bt("Chiudi", "Close", "Closing a Hero banner", undefined, true),completeButtonText:t||p.bt("Vai", "Go", "Completing the Hero banner", undefined, true),completeUrl:i,onComplete:s,onDismiss:d,external:n,color:e})}var p=i(391254);const _=function({color:e="default",completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:n,handleComplete:o=(()=>{}),header:s="",headerSubtitle:d=""}){const c=(0,a.ZP)();return(0,l.jsx)(r.Z,{message:(s+" "+d).trim(),completeButtonText:t||c.bt("Vai", "Go", "Completing the Hero banner", undefined, true),completeUrl:i,onComplete:o,external:n,color:e})};var g=i(70061),m=i(116303),f=i(19121),x=i(349700),b=i(883119);function y({completeButtonText:e,headerSubtitle:t,handleComplete:i,handleDismiss:n}){const o=(0,a.ZP)(),s=(0,f.Z)(),{firstName:r,imageLargeUrl:d}=s.isAuth?s:{};return(0,l.jsx)(b.xu,{display:"flex",justifyContent:"center",position:"relative",children:(0,l.jsxs)(b.xu,{alignItems:"center",borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{backgroundColor:"#EBF4FE"}},display:"flex",justifyContent:"between",marginBottom:2,marginEnd:8,marginStart:8,marginTop:4,padding:8,position:"relative",rounding:4,width:1016,children:[(0,l.jsxs)(b.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(b.xu,{marginEnd:6,marginTop:-2,marginBottom:-2,children:(0,l.jsx)(m.Z,{name:r,src:d,size:"lg",outline:!0})}),(0,l.jsxs)(b.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[(0,l.jsx)(b.xu,{marginBottom:2,children:(0,l.jsx)(b.X6,{size:"400",children:(0,x.nk)(o.bt("Che piacere rivederti, {{ name }}", "Welcome back, {{ name }}", "shown on a banner, \"welcome back, first_name\"", undefined, true),{name:r})})}),(0,l.jsx)(b.xv,{children:t})]})]}),(0,l.jsx)(b.xu,{marginEnd:4,children:(0,l.jsx)(b.zx,{color:"white",size:"lg",text:e,onClick:i})}),(0,l.jsx)(b.xu,{position:"absolute",padding:2,top:!0,right:!0,children:(0,l.jsx)(b.hU,{accessibilityLabel:o.bt("Chiudi", "Close", "accessible label for close button", undefined, true),iconColor:"darkGray",icon:"cancel",onClick:n,size:"sm"})})]})})}var v=i(615071),P=i(780280);function w({completeButtonUrl:e,onDismiss:t,placementId:i}){const[r,a]=(0,n.useState)(!1),u=(0,P.B)();return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(p.Z,{unsafeCSS:"\n.ExperienceHero-enter {\n  opacity: 0;\n  transform: translateY(-50px);\n}\n\n.ExperienceHero-enter-active {\n  opacity: 1;\n  transform: none;\n  transition: all 400ms ease-out;\n}\n\n.ExperienceHero-exit {\n  opacity: 1;\n}\n\n.ExperienceHero-exit-active {\n  opacity: 0;\n  transition: opacity 400ms ease-out;\n}\n"}),(0,l.jsx)(c.Z,{placementId:i,eligibleTypes:[13],children:({complete:i,dismiss:n,experience:{display_data:c,experience_id:p}})=>{e&&(c.complete_button_url=e);const m=(e=>{switch(e){case 502597:return o.default;case 500863:return y;case 501153:case 501487:return _;default:return h}})(p),f={requestContext:u,experienceId:p,handleComplete:i,handleDismiss:()=>{t&&t(),n()},color:m===d?"dark":"infoBase",...(0,s.Z)(g.Z)(c)};return r||a(!0),(0,l.jsx)(v.Z,{in:r,timeout:400,classNames:"ExperienceHero",unmountOnExit:!0,children:(0,l.jsx)(b.xu,{marginBottom:4,children:(0,l.jsx)(m,{...f})})})}})]})}},333312:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(667294),o=i(121093),s=i(570470),r=i(883119),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.PureComponent{constructor(...e){super(...e),l(this,"onScroll",(()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout((()=>{e(),this.dismissed=!0,this.timer=void 0}),3e3))})),l(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:i,idealDirection:n}=this.props,o=i.slice(-3);return(0,a.jsx)(r.J2,{anchor:e,color:"white",idealDirection:n,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,a.jsxs)(r.xu,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[(0,a.jsx)(r.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,a.jsx)(r.xv,{color:"default",weight:"bold",children:t})}),(0,a.jsx)(r.xu,{display:"flex",marginEnd:-2,paddingX:2,children:o.map((e=>(0,a.jsx)(r.xu,{height:60,width:50,paddingX:1,children:(0,a.jsx)(r.zd,{rounding:2,height:60,children:(0,a.jsx)(r.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e)))})]})})}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.Component{constructor(...e){super(...e),c(this,"dismissRef",(0,n.createRef)()),c(this,"state",{paused:!1}),c(this,"dismissCb",(()=>{var e,t;null===(e=(t=this.dismissRef).current)||void 0===e||e.call(t)})),c(this,"handlePulsarClick",((e,t)=>{e?this.setState({paused:!0}):t()}))}componentWillUnmount(){const{anchor:e}=this.props;clearTimeout(this.timer),null==e||e.removeEventListener("click",this.dismissCb)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,i){return t&&e.text.replace("{boardName}",t),i?i(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:l,flyoutSize:c,fontSize:u,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:_,noClickToDismiss:g,onClickComplete:m,onClickDismiss:f,placementId:x,positionRelativeToAnchor:b,shouldTimeoutDismiss:y,showCaret:v,textAlign:P,textOverflow:w,textOverrideFn:I,textWeight:A,customizedComplete:E,pulsarZIndex:C,advertiserId:S}=this.props,j=t||(({children:e})=>_?(0,a.jsx)(r.mh,{children:e}):e),T="blue";return(0,a.jsx)(o.Z,{eligibleIds:i,placementId:x,eligibleTypes:[8],targeting:S?{advertiserId:parseInt(S,10)}:null,children:({complete:t,dismiss:i,experience:o})=>{const{display_data:{scroll_to_dismiss:x,scroll_to_dismiss_delay_in_seconds:S=0,...D}}=o,k=x&&e,z=()=>{O(),setTimeout(i,1e3*S)},O=()=>{k&&(window.removeEventListener("scroll",z),window.removeEventListener("touchmove",z))},R=()=>{O(),t()};if(k&&(window.addEventListener("scroll",z),window.addEventListener("touchmove",z)),this.setDefaultPulsarTooltip(D),!D.has_pulsar&&!D.has_tooltip)return R(),null;y&&D.disappearTime&&D.disappearTime>0&&(this.timer=setTimeout((()=>(z(),null)),D.disappearTime));const L=501041===o.experience_id||505086===o.experience_id;return D.has_tooltip&&!D.has_pulsar&&(this.dismissRef.current=z,null==e||e.addEventListener("click",this.dismissCb)),(0,a.jsxs)(n.Fragment,{children:[D.has_pulsar&&(0,a.jsx)(s.Z,{anchor:e,leftOverride:L?342:void 0,onTouch:()=>this.handlePulsarClick(D.has_tooltip,R),paused:this.state.paused,topOverride:L?-5:void 0,zIndex:C&&C.index()}),D.has_tooltip&&(!D.has_pulsar||this.state.paused)&&(D.thumbnail_urls?(0,a.jsx)(d,{anchor:e,dismiss:z,idealDirection:p||"down",text:D.text,thumbnails:D.thumbnail_urls}):(0,a.jsx)(j,{children:(0,a.jsx)(r.J2,{anchor:e,color:T,idealDirection:p||"down",onDismiss:g?()=>{}:z,positionRelativeToAnchor:!_&&b,shouldFocus:!1,showCaret:v,size:c,children:(0,a.jsxs)(r.xu,{column:12,padding:3,children:[(0,a.jsxs)(r.xv,{align:"right"===P?"end":P,color:"inverse",overflow:w,size:u,weight:A||"bold",children:[this.getText(D,l,I),D.secondary_cta_link&&(0,a.jsx)(r.xu,{display:"inlineBlock",marginStart:1,children:(0,a.jsx)(r.xv,{size:u,weight:"bold",color:"inverse",children:(0,a.jsx)(r.rU,{display:"inlineBlock",target:"blank",href:D.secondary_cta_link.url,underline:"hover",children:D.secondary_cta_link.text})})})]}),D.sub_text&&(0,a.jsx)(r.xu,{paddingY:2,children:(0,a.jsx)(r.xv,{color:"inverse",size:u,children:D.sub_text})}),(D.dismiss_button_text||D.complete_button_text)&&(0,a.jsxs)(r.xu,{display:"flex",alignItems:"center",marginTop:2,children:[D.dismiss_button_text&&(0,a.jsx)(r.xu,{marginEnd:1,column:6,children:(0,a.jsx)(r.zx,{fullWidth:h,color:T,onClick:()=>{f&&f(),z()},size:"md",text:D.dismiss_button_text})}),D.complete_button_text&&(0,a.jsx)(r.xu,{column:D.dismiss_button_text?6:12,children:E?(0,a.jsx)(r.iP,{fullHeight:!0,onTap:()=>{R(),m&&m()},rounding:2,children:(0,a.jsx)(r.xu,{display:"flex",color:"default",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:(0,a.jsx)(r.xv,{color:"shopping",weight:"bold",children:D.complete_button_text})})}):(0,a.jsx)(r.kC,{justifyContent:"center",children:(0,a.jsx)(r.zx,{fullWidth:h,color:"white",href:D.complete_button_cta_url,role:D.complete_button_cta_url?"link":"button",size:"md",target:D.complete_button_cta_url?"blank":null,text:D.complete_button_text,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),R(),m&&m()}})})})]})]})})}))]})}})}}c(u,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},332611:(e,t,i)=>{i.d(t,{CK:()=>p,N:()=>x,Qu:()=>_,UT:()=>h,YX:()=>f,d9:()=>g,fO:()=>d,kd:()=>m,pz:()=>c});var n=i(689070),o=i(214494),s=i(764990),r=i(172071),a=i(957191);let l;const d=(e,t)=>i=>{const n=t?{extra_context:e,targeting:t}:{extra_context:e};return o.Z.create("UserExperiencePlatformResource",n).callGet().then((e=>e.resource_response?i((0,a.OD)(e.resource_response.data)):void 0))},c=(e,t,i,n)=>(r,d)=>{if(t)return Promise.resolve();if(n&&(l=n),1===e.length){const t=e[0],n=d().experiences[t],o=(null==n?void 0:n.extraContext)||null;if(JSON.stringify(o)===JSON.stringify(i)||(0,s.E3)(n)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return o.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:n}).callGet().then((e=>e.resource_response?r((0,a.cL)(e.resource_response.data)):void 0))},u=(e,t)=>(i,n,s,r=!1,c,u)=>(h,p)=>{const{experiences:_,experiencesMulti:g}=p();let m=null,f=!0;var x;r||(f=_[i]&&_[i].experience_id===n,m=f?_[i]:Array.isArray(g[i])&&(null===(x=g[i])||void 0===x?void 0:x.find((e=>e.experience_id===n))));if(m&&m.experience_id===n||r&&i&&n){const r=o.Z.create(e,{placed_experience_id:`${i}%3A${n}`,extra_context:null!=c?c:{},targeting:u}),p=f?a.Yb:a.xW;switch(t){case"dismissed":return r.callDelete().then((()=>{h(p(i,n,t)),h(d(void 0,l))}));case"completed":return r.callUpdate().then((()=>{s||(h(p(i,n,t)),h(d(void 0,l)))}));case"viewed":return h(p(i,n,t)),r.callUpdate().then((()=>{1000162===i&&h(d())}));case"completedWithoutHomefeed":return r.callUpdate().then((()=>{s||h(p(i,n,t))}));default:return Promise.resolve()}}return Promise.resolve()},h=u("UserExperienceViewedResource","viewed"),p=u("UserExperienceCompletedResource","completed"),_=u("UserExperienceResource","dismissed"),g=u("UserExperienceCompletedResource","completedWithoutHomefeed"),m=(e,t)=>(i,o)=>{const{experiences:s}=o(),a=s[e];a&&a.triggerable_placed_exps&&a.triggerable_placed_exps.length&&a.triggerable_placed_exps.forEach((i=>{const[,o]=i.split(":");let s=t;a.metadata&&a.metadata[o]&&(s={...t,...a.metadata[o]}),(0,n.Z)({url:`/v3/experiences/${i.replace(":","%3A")}/trigger/`,method:"PUT",data:s?{extra_context:JSON.stringify(s,null,1)}:{}}).then((()=>{((e,t,i={})=>{r.Z.increment(`${e}.${t}`,1,i)})("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:o})}))}))},f=e=>(t,i)=>{t(m(e));const{experiences:n}=i();return n[e]},x=(e,t,i)=>n=>{i&&(l=i),n(m(e,t)),t&&Object.keys(t).length>0&&n(c([e],!1,t,i))}},242923:(e,t,i)=>{i.d(t,{CF:()=>a,Tl:()=>r,dy:()=>l});var n=i(214494),o=i(332611);const s=(e,t)=>(i,s)=>r=>{if(i&&i.id){const a=n.Z.create(e,{placed_experience_id:i.id,extra_context:{}});switch(t){case"dismissed":a.callDelete().then((()=>{r((0,o.fO)())}));break;case"completed":a.callUpdate().then((()=>{s||r((0,o.fO)())}));break;case"viewed":a.callUpdate()}}},r=s("UserExperienceCompletedResource","completed"),a=s("UserExperienceResource","dismissed"),l=s("UserExperienceViewedResource","viewed")},764990:(e,t,i)=>{function n(e){return!!e&&0!==e.type}i.d(t,{A0:()=>s,E3:()=>n,MQ:()=>o});const o=(e,t,i)=>{const o=e[i];return t[i]&&n(o)?o:null};function s(e){var t;return null===(t=e.display_data)||void 0===t?void 0:t.anchor}},207737:(e,t,i)=>{i.d(t,{$S:()=>n,V$:()=>o,_4:()=>r,iY:()=>a,mR:()=>s});const n="REFRESH_ALL_EXPERIENCES_MULTI",o="UPDATE_EXPERIENCE_MULTI",s="FETCH_EXPERIENCES",r="REFRESH_ALL_EXPERIENCES",a="UPDATE_EXPERIENCE"},957191:(e,t,i)=>{i.d(t,{NW:()=>r,OD:()=>l,Yb:()=>a,cL:()=>d,xW:()=>s});var n=i(214494),o=i(207737);const s=(e,t,i)=>({type:o.V$,payload:{placementId:e,experienceId:t,status:i}}),r=e=>t=>n.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then((e=>{return e.resource_response?t((i=e.resource_response.data,{type:o.$S,payload:{experiencesMulti:i}})):void 0;var i})),a=(e,t,i)=>({type:o.iY,payload:{placementId:e,experienceId:t,status:i}}),l=e=>({type:o._4,payload:{experiences:e}}),d=e=>({type:o.mR,payload:{experiences:e}})},570470:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(883119),s=i(785893);function r({anchor:e,children:t,zIndex:i,leftOverride:r,topOverride:a}){const l=(0,n.useRef)(null),[d,c]=(0,n.useState)(0),[u,h]=(0,n.useState)(0),{height:p,width:_}=e.getBoundingClientRect();(0,n.useEffect)((()=>{const{current:t}=l;if(e&&t){const{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:n,verticalOffset:o}=((e,t,i,n)=>({horizontalOffset:-(n/2-t/2),verticalOffset:-(i/2-e/2)}))(p,_,e,i);c(n),h(o)}}));const g=r||d,m=a||u;return(0,s.jsx)(o.xu,{position:"absolute",zIndex:i?new o.Ry(i):void 0,dangerouslySetInlineStyle:{__style:{left:g,top:m}},ref:l,children:t})}const a=function(e){const{anchor:t,leftOverride:i,onTouch:n,onMouseEnter:a,paused:l,size:d,topOverride:c,zIndex:u}=e;return t?(0,s.jsx)(r,{anchor:t,leftOverride:i,topOverride:c,zIndex:u,children:(0,s.jsx)(o.iP,{fullWidth:!1,onTap:({event:e})=>n(e),onMouseEnter:a,rounding:"circle",children:(0,s.jsx)(o.o3,{paused:l,size:d})})}):null}},497529:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=(i(957191),i(764990)),s=i(123159),r=i(780280);i(332611);function a(e){const{mountedPlacements:t,completeExperience:i,dismissExperience:a,experiences:l,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:h,viewExperience:p}=(0,s.M)(),{isBot:_}=(0,r.B)(),g=e&&!_?(0,o.MQ)(l,t,e):null;return(0,n.useMemo)((()=>({completeExperience:i,dismissExperience:a,experienceForPlacement:g,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:h,viewExperience:p})),[i,a,g,d,c,u,h,p])}},869636:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(702664),s=i(442279),r=i(123159),a=i(780280),l=i(172071);const d=(0,s.P1)((e=>e.experiences),((e,t)=>t),((e,t)=>e[t])),c=(e,t)=>"function"==typeof t?t(e):t,u=(e,t={},i=!1)=>{const[s,u]=(0,n.useReducer)(c,t),{isBot:h}=(0,a.B)(),{fetchExperienceForPlacements:p,mountPlacement:_,triggerExperimentsForPlacement:g,unmountPlacement:m}=(0,r.M)();(0,n.useDebugValue)(`Placement Hook ID - ${e}`),(0,n.useEffect)((()=>{const t={...s},n=i&&null!=t&&t.advertiser_id?{advertiserId:t.advertiser_id}:void 0;return _(e,t,n),()=>{m(e)}}),[]),(0,n.useEffect)((()=>{Object.keys(s).length>0&&p([e],h,s)}),[s]);const f=(0,o.useSelector)((t=>d(t,e))),x=(0,o.useSelector)((t=>t.experiencesMulti[e])),b=f?f.triggerable_placed_exps:[];(0,n.useEffect)((()=>{((e,t,i={})=>{l.Z.increment(`${e}.${t}`,1,i)})("experienceservice","placementHookExperimentTrigger.1",{platform:"web",placement_id:e,...b}),g(e,s)}),[JSON.stringify(b)]);return{experience:f,experiencesMulti:x,setExtraContext:u}}},784450:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(667294),o=i(702664),s=i(618446),r=i.n(s),a=i(764990),l=i(123159),d=i(332611),c=i(780280),u=i(785893);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},_=(e,t={},i)=>s=>{i={...p,...i};const _=function(e,t,i=!0,s=!0,p=!1,_){class g extends n.Component{constructor(e){super(e),h(this,"state",{extraContext:void 0}),h(this,"setExtraContextState",(e=>{r()(this.state.extraContext,e)||this.setState({extraContext:e})}))}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(i,n){const{dispatch:o,experience:s,requestContext:a}=this.props;let l=n.extraContext,c=this.state.extraContext||t||{};"function"==typeof t&&(l=t(i,n.extraContext||{}),c=t(this.props,this.state.extraContext||{})),c&&Object.keys(c).length>0&&!r()(l,c)&&o((0,d.pz)([e],a.isBot,c)),!s||i.experience&&s.id===i.experience.id||o((0,d.kd)(e,c))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){const i="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},n=p&&null!=i&&i.advertiser_id?{advertiserId:i.advertiser_id}:void 0;this.props.mountPlacement(e,i,n)}render(){const{experience:e,experiencesMulti:t}=this.props,i={[p?"advertiserExperience":"experience"]:(0,a.E3)(e)?e:null};return(0,u.jsx)(_,{...this.props,setPlacementExtraContext:this.setExtraContextState,...i,experiencesMulti:t})}}function m(e){const t=(0,c.B)(),i=(0,o.useDispatch)(),{mountPlacement:n,unmountPlacement:s}=(0,l.M)();return(0,u.jsx)(g,{...e,dispatch:i,mountPlacement:n,requestContext:t,unmountPlacement:s})}return m.displayName=`withPlacement(${_.displayName||_.name||"Component"})`,m}(e,t,i.shouldUsePlacedExperience,i.dispatchMountActionDuringSSR,i.isAdvertiserPlacement,s),g=t=>{const i=(0,o.useSelector)((t=>t.experiences[e])),n=(0,o.useSelector)((t=>t.experiencesMulti?t.experiencesMulti[e]:void 0));return(0,u.jsx)(_,{...t,experience:i,experiencesMulti:n})};return g.displayName=_.displayName,g}},894738:(e,t,i)=>{function n(e){e&&e.focus()}i.d(t,{Z:()=>n})},173159:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(537347),o=i.n(n);function s(e,t){if("undefined"==typeof window)return Promise.resolve();let i=document.querySelector(`#${t}`);if(i)return Promise.resolve();i=document.createElement("style"),i.setAttribute("id",t),e.filter((e=>!!e.fontFaceUrl)).forEach((e=>{i&&e.fontFaceUrl&&i.appendChild(document.createTextNode(`@import url('${e.fontFaceUrl}');`))}));const n=document.head;if(!n)return Promise.resolve();const s=document.createElement("style");s.setAttribute("id",`${t}-font-faces`),n.appendChild(i),n.appendChild(s);const r=[];return e.forEach((e=>{e.styles.forEach((t=>{if(e.format&&t.fontUrl&&s&&s.sheet){var i;s.sheet.insertRule(`\n            @font-face {\n              font-family: "${null!==(i=e.fontFamily)&&void 0!==i?i:""}";\n              font-style: "${t.fontStyle}";\n              font-weight: "${t.fontWeight}";\n              src: url("${t.fontUrl}") format("${e.format}");\n            }`,0)}r.push(new(o())(e.fontFamily,{weight:t.fontWeight,style:t.fontStyle}).load())}))})),Promise.all(r)}},116303:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(785893);const s=(e,t)=>{const i=null==e?void 0:e.includes("images/user/default");return Boolean(i&&t)};function r({accessibilityLabel:e,name:t,outline:i,size:r,src:a,verified:l}){return(0,o.jsx)(n.qE,{accessibilityLabel:e,name:t,outline:i,size:r,src:s(a,t)?void 0:a,verified:l})}r.displayName="Avatar";const a=r},22182:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(403323),s=i(835074),r=i(780280),a=i(785893);const l=(0,n.forwardRef)((({disabled:e,errorMessage:t,excludeDates:i,helperText:l,id:d,idealDirection:c,includeDates:u,label:h,maxDate:p,minDate:_,nextRef:g,onChange:m,placeholder:f,rangeEndDate:x,rangeSelector:b,rangeStartDate:y,selectLists:v,value:P},w)=>{const{locale:I}=(0,r.B)(),[A,E]=(0,n.useState)();return(0,n.useEffect)((()=>{(async()=>{const e=await(0,o.Z)(I);E(e)})()}),[I,E]),(0,a.jsx)(s.M,{id:d,onChange:m,disabled:e,errorMessage:t,excludeDates:i,helperText:l,idealDirection:c,includeDates:u,label:h,localeData:A||void 0,maxDate:p,minDate:_,nextRef:g,placeholder:f,rangeEndDate:x,rangeSelector:b,rangeStartDate:y,ref:w,selectLists:v,value:P})}));l.displayName="DatePicker";const d=l},499128:(e,t,i)=>{i.d(t,{UZ:()=>d,Vg:()=>l,ZP:()=>c});var n=i(667294),o=i(829407),s=i(50286),r=i(883119),a=i(785893);const l=200,d=({deviceType:e,hiding:t,visible:i})=>{const n="desktop"===e;let o=0,s=n?"translateY(200px)":"translateY(-200px)",r="opacity 0.1s ease-in-out",a="hidden";return i&&!t&&(o=1,s="translateY(0)",r="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",a="visible"),i&&t&&(s="scale(1.1)",r="opacity transform 0.2s"),{opacity:o,pointerEvents:"auto",position:"relative",marginTop:n?10:0,transform:s,transition:r,visibility:a}};function c({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:i,primaryAction:c,dismissButton:u,helperLink:h,thumbnail:p,type:_,dataTestId:g,duration:m=2e3,onHide:f,href:x,onClick:b,openNewPage:y,imageUrl:v}){var P;const w=(0,s.ZP)(),[I,A]=(0,n.useState)(!1),[E,C]=(0,n.useState)(!1),S=(0,n.useRef)(),j=()=>{A(!0),S.current=setTimeout(f,l)},T=()=>{S.current=setTimeout(j,m)},D=()=>{S.current&&clearTimeout(S.current)};let k;(0,o.Z)((()=>(setTimeout((()=>C(!0)),100),T(),D))),v&&(k={image:(0,a.jsx)(r.Ee,{alt:"string"==typeof i?i:`${i[0]} ${i[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:v})});const z=(0,a.jsx)(r.FN,{_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,primaryAction:c,text:i,thumbnail:null!==(P=k)&&void 0!==P?P:p,type:_,dismissButton:u,helperLink:h}),{marginTop:O,opacity:R,pointerEvents:L,position:M,transform:B,transition:N,visibility:F}=d({deviceType:w,hiding:I,visible:E});return(0,a.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{transform:B,transition:N,visibility:F,pointerEvents:L}},"data-test-id":null!=g?g:"toast",onMouseEnter:D,onMouseLeave:T,opacity:R,position:M,marginTop:O,display:"flex",children:x?(0,a.jsx)(r.iP,{role:"link",href:x,onTap:({event:e})=>null==b?void 0:b(e),target:y?"blank":null,rounding:"pill",children:z}):z})}},572752:(e,t,i)=>{function n(e){return`${e.userAgent.isMobile?"mobile":"desktop"}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}i.d(t,{Z:()=>n})},444445:(e,t,i)=>{i.d(t,{$H:()=>r,$q:()=>f,D6:()=>l,KN:()=>x,Lo:()=>o,P2:()=>_,ZZ:()=>c,g5:()=>u,jC:()=>a,lX:()=>p,nW:()=>h,oX:()=>g,qG:()=>m,tG:()=>s,yF:()=>n,yc:()=>d});const n=236,o=2*n/3,s=175,r=24,a=4,l=2,d=2,c=14,u=16,h=12,p=16,_=24,g=16,m=-1,f=(e=!1,t=!1)=>e?t?p:h:_,x=(e,t,i,n,o=c)=>{const s=e+o;return`\n@media (min-width: ${t*s}px) and (max-width: ${(i+1)*s-1}px) {\n  ${n}\n}\n`}},694379:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(892819),o=i(780280),s=i(785893);const r=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:r,shortformMaximumFractionDigits:a,formatStyle:l,uplimit:d,value:c})=>{const u=(0,n.Z)();return(0,s.jsx)(o.LC,{children:n=>u(n.locale||"en-US",c,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:r,shortform_maximum_fraction_digits:a,style:l,uplimit:d})})}},298361:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(898781),o=i(349700),s=i(202139);function r(){const e=(0,n.ZP)();return function(t,i){const n=new Date(t),r=new Date-n,a=Math.floor(r/s.FS),l=Math.floor(r/s.UK),d=Math.floor(r/s.F4),c=Math.floor(r/s.VL),u=Math.floor(r/s.N1),h=e.nbt(["{{ minutes }} minuto fa", "{{ minutes }} minuti fa"], a, " - ", true),p=e.nbt(["{{ hours }} ora fa", "{{ hours }} ore fa"], l, " - ", true),_=e.nbt(["{{ days }} giorno fa", "{{ days }} giorni fa"], d, " - ", true),g=e.nbt(["{{ weeks }} settimana fa", "{{ weeks }} settimane fa"], c, " - ", true),m=e.nbt(["{{ years }} anno fa", "{{ years }} anni fa"], u, " - ", true),f=e.nbt(["{{ minutes }} min", "{{ minutes }} min"], a, "minutes ago abbreviated", true),x=e.nbt(["{{ hours }} h", "{{ hours }} h"], l, "hours ago abbreviated", true),b=e.nbt(["{{ days }} g", "{{ days }} gg"], d, "days ago abbreviated", true),y=e.nbt(["{{ weeks }} sett", "{{ weeks }} sett"], c, "weeks ago abbreviated", true),v=e.nbt(["{{ years }} a", "{{ years }} aa"], u, "years ago abbreviated", true);return u>0?(0,o.nk)(i?v:m,{years:u}).join(""):c>0?(0,o.nk)(i?y:g,{weeks:c}).join(""):d>0?(0,o.nk)(i?b:_,{days:d}).join(""):l>0?(0,o.nk)(i?x:p,{hours:l}).join(""):a>0?(0,o.nk)(i?f:h,{minutes:a}).join(""):e.bt("Proprio ora", "Just now", " - ", undefined, true)}}},898781:(e,t,i)=>{i.d(t,{ZP:()=>a,oz:()=>s,q6:()=>o});var n=i(425288);const{Provider:o,Consumer:s,useHook:r}=(0,n.Z)("i18n"),a=r},892819:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(66699),o=i(898781);const s=(e,t)=>{const i=t||0,n=10**i,o=+(i?e*n:e).toFixed(8),s=Math.floor(o),r=o-s,a=r>.5-1e-8&&r<.5+1e-8?s%2==0?s:s+1:Math.round(o);return i?a/n:a},r=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0};function a(){const e=(0,o.ZP)();return(t,i,o)=>{let a=0,l=0;const d=o&&o.style||void 0,c=o&&o.shortform||!1,u=o&&o.uplimit||void 0,h=o&&o.currency||void 0,p=!!u&&i>=u,_=u&&p?u:i;if("currency"===d){const{minimumFractionDigits:e,maximumFractionDigits:i}=((e,t)=>{if(t){const{minimumFractionDigits:i,maximumFractionDigits:n}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==n)return{minimumFractionDigits:i,maximumFractionDigits:n}}return{minimumFractionDigits:2,maximumFractionDigits:2}})(t,h);a=void 0===o||void 0===o.maximum_fraction_digits?i:o.maximum_fraction_digits,l=void 0===o||void 0===o.minimum_fraction_digits?e:o.minimum_fraction_digits}else a=void 0===o||void 0===o.maximum_fraction_digits?0:o.maximum_fraction_digits,l=void 0===o||void 0===o.minimum_fraction_digits?0:o.minimum_fraction_digits;if(c&&_>999&&(a=void 0===o||void 0===o.shortform_maximum_fraction_digits?2:o.shortform_maximum_fraction_digits,l=0),a<l)return String(_);let g=_,m="";const f=[{"100M":{value:1e8,localeKey:e.bt("", "", "Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}},{"10k":{value:1e4,localeKey:e.bt("", "", "Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}}],x=[{b:{value:1e9,localeKey:e.bt("Mld", "B", "Abbreviation for one billion.", undefined, true)}},{m:{value:1e6,localeKey:e.bt("Mln", "M", "Abbreviation for one million.", undefined, true)}},{k:{value:1e3,localeKey:e.bt("mila", "k", "Abbreviation for one thousand.", undefined, true)}}],b=/^zh|ja|ko/.test(t);if(c&&_>999){const e=b?f:x;for(let t=0;t<e.length;t+=1){const i=Object.keys(e[t])[0],n=e[t][i].value;if(_>=n){g=s(_/n*Math.pow(10,a))/Math.pow(10,a),m=e[t][i].localeKey;break}}}if(null==g)return"";const y=g.toLocaleString([r(t)&&"ar-SA"!==t?t:"en-US"],(({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:n})=>{const o={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...o,style:i,..."currency"===i?{currency:n,currencyDisplay:"symbol"}:{}}:o})({maximumFractionDigits:a,minimumFractionDigits:l,currency:h,style:d}));return m&&m.length>0?(0,n.Z)(e.bt("{{formattedNumber}}{{numberSuffix}}", "{{formattedNumber}}{{numberSuffix}}", "i18n.usePrettyNumberFormat.prettyNumberFormat", undefined, true),{formattedNumber:y,numberSuffix:m})+(p?"+":""):y+(p?"+":"")}}},12610:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>h,LU:()=>p,ZP:()=>_});const o=1e6,s=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,r={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},a={},l={background:"#FF8A8A",transform:"scale(.98)"},d={init:e=>({transform:`scale(${a[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[r.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[r.exit]:l,[r.stopped]:l,[r.paused]:l,[r.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class c{constructor(e){n(this,"setMutationObserver",(e=>(this.mutationObserver=e,this))),n(this,"startMutationObserver",(e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)})),n(this,"stopMutationObserver",(()=>{this.mutationObserver&&this.mutationObserver.disconnect()})),n(this,"handleIntersectionChange",(e=>{const t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){const e=Date.now();this.startTime=e,this._debug(r.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach((e=>e()))}else!t&&this.inViewport&&(this._debug(r.exit,!0),this.exitCallbacks.forEach((e=>e(this.toJSON()))));this.inViewport=t})),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,s&&Object.assign(this.node.style,d.init(e)),this}pause(){return this.inViewport&&(this._debug(r.paused,!0),this.exitCallbacks.forEach((e=>e(this.toJSON())))),this}resume(){if(this.inViewport){const e=Date.now();this._debug(r.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(r.stopped,!0),this.exitCallbacks.forEach((t=>t(this.toJSON(e))))),this}toJSON(e=""){return{startTime:this.startTime*o,endTime:Date.now()*o,forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:(Date.now()-this.startTime)/1e3+" seconds"}}_debug(e,t){if(s)switch(window.console.log(` ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),d[e]&&Object.assign(this.node.style,d[e]),e){case r.flushed:case r.paused:case r.exit:a[this.debugId]=!0}}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=!0,p=!1;class _{constructor(){u(this,"_delegateChange",(e=>{e.forEach((e=>{const t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)}))})),u(this,"_handleMutations",((e,t)=>{const i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")})),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=p,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){const i=this.activeImpressions.get(e);var n;i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),null===(n=window.activeImpressions)||void 0===n||n.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);if(!t){var i;t=new c(e),this.activeImpressions.set(e,t),null===(i=window.activeImpressions)||void 0===i||i.set(e,t),this.observer.observe(e);const n=(e,t)=>this._handleMutations(e,t);t.setMutationObserver(new window.MutationObserver(n)),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=h){this.paused||(Array.from(this.activeImpressions.values()).forEach((e=>e.pause())),this.paused=!0,this.pausePriority===p&&(this.pausePriority=e))}resume(e=h){e===p&&this.pausePriority===h||this.paused&&(Array.from(this.activeImpressions.values()).forEach((e=>e.resume())),this.paused=!1,this.pausePriority=p)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){const e=Array.from(this.topObstructions).reduce(((e,t)=>{const{bottom:i}=t.getBoundingClientRect();return i>e?i:e}),0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce(((e,t)=>{const{top:i}=t.getBoundingClientRect();return i<e?i:e}),window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){const i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach((e=>this.observer.observe(e.node))),this.topHeight=e,this.bottomHeight=t}}}},564194:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(973935),s=i(124580),r=i(407043),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class c extends n.Component{constructor(e){super(e),l(this,"trackImpression",(()=>{try{this.node=(0,o.findDOMNode)(this),this.node instanceof HTMLElement&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}})),l(this,"logImpression",(e=>{const{carouselData:t,closeupImpressionType:i,closeupNavigationType:n,componentType:o,contextLogData:s,elementType:r,impressionAuxFields:a,impressionType:l,loggingId:c,objectIdStr:u,slotIndex:h,trackCarousel:p,viewData:_,viewParameter:g,viewType:m,logContextEvent:f}=this.props,x=d[l],b=x.idType,y=e.forcedExit&&"removed"===e.forcedExit?0:void 0;let v={endTime:e.endTime,[b]:c,slotIndex:h,time:e.startTime,renderDuration:e.endTime-e.startTime,type:i,...a,forcedExit:y};var P,w;"Pin"===l&&(v={...v,pinCellWidth:this.node.offsetWidth,pinCellHeight:this.node.offsetHeight,windowWidth:null===(P=window)||void 0===P?void 0:P.innerWidth,windowHeight:null===(w=window)||void 0===w?void 0:w.innerHeight});if(p||f({event_type:x.eventType,component:o,element:r,event_data:{[x.impressionType]:"Story"===l?v:[v]},object_id_str:u,view_type:m,view_data:_||{},view_parameter:g,aux_data:{...s,closeup_navigation_type:n}}),t&&p){const{carousel_slots:e,index:i=0,id:n}=t;f({event_type:7352,component:o,event_data:{pinCarouselSlotImpressions:[{...v,carouselDataId:Number(n),carouselSlotId:(null==e?void 0:e[i])&&Number(e[i].id),slotIndex:i}]},object_id_str:u,view_type:m,view_data:_||{},view_parameter:g,aux_data:{...s}})}})),this.impressionsFramework=e.impressionsFramework||s.Z}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&this.impressionsFramework.stop(this.node)}render(){return n.Children.only(this.props.children)}}function u(e){const{logContextEvent:t}=(0,r.v)();return(0,a.jsx)(c,{...e,logContextEvent:t})}},124580:(e,t,i)=>{i.d(t,{Z:()=>n});const n=new(i(12610).ZP)},65189:(e,t,i)=>{i.d(t,{Z:()=>n});function n(e,t){const i=e.split("@")[0];let n="";return n=i.includes(".")?i.replace("."," "):i.includes("_")?i.replace("_"," "):i,n=n.replace(/[0-9]/g,""),"GB"===t?"User_"+(e=>e.split("").sort((()=>.5-Math.random())).join(""))(n):(n=n.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())),n)}},926275:(e,t,i)=>{i.d(t,{Z:()=>n});function n(e){if(!e)return!1;const t=new Date(e);return t.setDate(t.getDate()+28),(new Date).getTime()<t.getTime()}},844753:(e,t,i)=>{function n(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}i.d(t,{Z:()=>n})},755742:(e,t,i)=>{i.d(t,{Z:()=>n});const n={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},326216:(e,t,i)=>{function n(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const i=[];let n,o;for(n=0;n<=t.length;n+=1)i[n]=[n];for(o=0;o<=e.length;o+=1)i[0][o]=o;for(n=1;n<=t.length;n+=1)for(o=1;o<=e.length;o+=1)t.charAt(n-1)===e.charAt(o-1)?i[n][o]=i[n-1][o-1]:i[n][o]=Math.min(i[n-1][o-1]+1,Math.min(i[n][o-1]+1,i[n-1][o]+1));return i[t.length][e.length]}i.d(t,{Z:()=>n})},720247:(e,t,i)=>{function n(e){let t=!1;return{promise:new Promise(((i,n)=>{e.then((e=>t?n({isCanceled:!0}):i(e)),(e=>n(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}}i.d(t,{Z:()=>n})},620707:(e,t,i)=>{function n(e,t){if("object"==typeof e&&"object"==typeof t){const i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&i.every((i=>e[i]===t[i]))}return e===t}i.d(t,{Ak:()=>n,_Y:()=>o,qe:()=>a,xZ:()=>r});const o=(e,t)=>e.length===t.length&&e.every(((e,i)=>n(e,t[i]))),s=(e,t)=>e.length===t.length&&e.every(((e,i)=>e===t[i])),r=(e,t=s)=>i=>{const n=[];return function(...o){const s=this,r=n.find((e=>e.context===s&&t(e.args,o)));if(r)return r.result;const a={context:s,args:o,result:i.apply(this,o)};return n.push(a),e&&n.length>e&&n.shift(),a.result}},a=r(1);r()},379913:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(407159),o=i(884732);const s=e=>{var t;const i={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return i.fullName&&i.imageMediumUrl&&i.imageLargeUrl||(0,n.Z)("utils.incomplete_user_values"),null!==(t=e.partner)&&void 0!==t&&t.is_create?{...i,partner:{is_create:!0}}:i},r=(e,t,i)=>{(0,o.r8)({...(0,o.rl)(),[e.id]:s(e)}),t&&i&&(0,n.Z)("new_account_add_success",{method:t,user_added:e.id},i)}},407159:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(867820),o=i(172045),s=i(884732);const r=(e,t,i)=>{let r=(0,s.yW)();r||(r=(()=>{const e=(0,o.Z)();return(0,n.tj)("web_account_switcher.utils.group_created",{group_id:e,group_count:(0,s.lv)()}),e})(),(0,s.M3)(r));const a={group_count:(0,s.lv)()};let l="";i&&(l="account_switcher_modal"===i?"modal.":"flyout."),(0,n.tj)(`web_account_switcher.${l}${e}`,{...t,...a})}},249647:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(844753);function o(e,t=!1){return i=>{if(!(0,n.Z)(i))return t&&Array.isArray(i)?i.map(o(e,t)):i;const s={};return Object.keys(i).forEach((r=>{const a=e(i[r],r);(0,n.Z)(i[r])||t&&Array.isArray(i[r])?s[a]=o(e,t)(i[r]):s[a]=i[r]})),s}}function s(e,t=!1){const i=(t,i)=>e(i);return e=>o(i,t)(e)}},170528:(e,t,i)=>{function n(e,t){if(!Array.isArray(t)){const{[t]:i,...n}=e;return n}const i=new Set(t.flat());return Object.fromEntries(Object.entries(e).filter((([e])=>!i.has(e))))}i.d(t,{Z:()=>n})},567450:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>r});const o=new class{constructor(){n(this,"onResumeListeners",[]),n(this,"onPauseListeners",[]),n(this,"inExp",!1),n(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter((t=>t!==e))}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter((t=>t!==e))}getAppState(){return this.windowInFocus?0:void 0}},s=e=>{if(e.isHidden){const{reason:t}=e;o.windowInFocus=!1,o.onPauseListeners.forEach((e=>e(t)))}else o.windowInFocus=!0,o.onResumeListeners.forEach((e=>e()))};setTimeout((()=>{window.addEventListener("beforeunload",(()=>s({isHidden:!0,reason:"beforeunload"}))),window.addEventListener("focus",(()=>s({isHidden:!1}))),window.addEventListener("blur",(()=>s({isHidden:!0,reason:"blur"}))),window.addEventListener("pageshow",(()=>s({isHidden:!1}))),window.addEventListener("pagehide",(()=>s({isHidden:!0,reason:"pagehide"}))),void 0!==document.hidden?document.addEventListener("visibilitychange",(()=>s(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",(()=>s(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1)}),0);const r=o},64446:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(605028);var o=i(341732),s=i(81226),r=i(898781),a=i(237056),l=i(623568),d=i(883119),c=i(785893);const u={borderRadius:"18px",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"},h={borderRadius:"18px",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"4px 8px"};function p({backgroundColor:e,identifier:t,size:i="sm"}){const n="pine"===e?"#0FA573":"#fff",o="sm"===i?u:h;return(0,c.jsx)(d.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{...o,backgroundColor:e?n:"rgba(255, 255, 255, 0.8)",color:"pine"===e?"#fff":"#111"}},"data-test-id":"PinTypeIdentifier",children:t})}function _({pin:e,size:t="sm",allowProductCarousel:i,allowShoppingPriceIndicator:u,shoppingLabelColor:h}){const _=(0,r.ZP)(),g=(0,a.Z)(),m=(0,n.Z)(e);if(m.isGif)return p({identifier:"GIF",size:t});if(m.isStoryPin&&!1!==e.should_open_in_stream){const{page_count:i=0,static_page_count:n=0,total_video_duration:o=0}=e.story_pin_data||{};let r=i.toString();if(o>0){const e=o+n*l.oN;return r=(0,s.Z)(e),p({identifier:r,size:t})}return p({identifier:(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(d.xu,{marginEnd:1,display:"flex",alignItems:"center",children:(0,c.jsx)(d.JO,{accessibilityLabel:g?_.bt("Pin", "Pin", "pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel.sce", undefined, true):_.bt("Pin Idea", "Idea Pin", "pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel", undefined, true),inline:!0,icon:"idea-pin",color:"default",size:"sm"===t?12:16})}),(0,c.jsx)(d.xv,{inline:!0,size:"100",weight:"bold",children:r})]}),size:t})}if(m.isVideo){const i=e.videos,{duration:n=0}=i&&i.video_list&&i.video_list[Object.keys(i.video_list)[0]]||{};return p({identifier:(0,s.Z)(n),size:t})}if(m.isProduct){const i=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary;if(u){const e=i&&(i.price||i.max_price);return e?p({identifier:e,size:t}):null}if(h){const i=function(e){var t;return((((null===(t=e.rich_summary)||void 0===t?void 0:t.products)||[])[0]||{}).label_info||{}).labels||[]}(e)[0];return i?p({identifier:i,backgroundColor:h,size:t}):null}return null}if(i){const i=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0],n=i&&(0,o.Z)(e.images,i.additional_images,e.carousel_data&&e.carousel_data.index)||{},{carousel_slots:s=[],index:r=0}=n;return p({identifier:`${r+1}/${s.length}`,size:t})}if(m.isCarousel){const i=e.carousel_data||{},{carousel_slots:n=[],index:o=0}=i;return p({identifier:`${o+1}/${n.length}`,size:t})}return null}},605028:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(687551),o=i(623568);function s(e){const{access:t,attribution:i,embed:s,is_eligible_for_web_closeup:r,promoted_is_lead_ad:a,rich_summary:l,sponsorship:d,story_pin_data_id:c,videos:u}=e,h={isLeadPin:!1,isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isSponsored:!1,isStoryPin:!1,isVideo:!1};a&&(h.isLeadPin=!0),(0,n.Z)(e)&&(h.isCarousel=!0),r&&(h.isOneTap=!0),(0,o.iR)(u)&&(h.isVideo=!0);const p=s||i&&i.embed||null;return p&&"gif"===p.type&&(h.isGif=!0),l&&"product"===l.type_name&&(h.isProduct=!0),l&&"recipe"===l.type_name&&(h.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(h.isPromoted=!0),(t||[]).includes("write")&&(h.isOwnPin=!0),c&&(h.isStoryPin=!0),d&&(h.isSponsored=!0),h}},623568:(e,t,i)=>{i.d(t,{Js:()=>a,NK:()=>b,Nc:()=>y,VX:()=>l,ZE:()=>m,Zt:()=>f,_J:()=>u,_S:()=>v,cL:()=>_,dZ:()=>I,hb:()=>x,hy:()=>c,iR:()=>r,jL:()=>d,o:()=>P,oN:()=>o,pU:()=>w,rM:()=>g,sV:()=>h,sY:()=>p});var n=i(605028);const o=5e3,s=["Uploaded by user"],r=e=>!!e&&!!e.video_list,a=(e,t)=>{let i=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(i=t.full_name),i},l=(e,t)=>t&&t.products&&t.products.length>0||(null==e?void 0:e.products)&&e.products.length>0||!1,d=(e,t)=>!!t&&!e,c=e=>!!e,u=e=>!!e.video_status&&5!==e.video_status,h=e=>["email","messages","deep_linking"].includes(e),p=e=>!!e&&"gif"===e,_=({embedSrc:e,embedSubtype:t,embedType:i})=>!!e&&!p(i)&&!(e=>"pinstory"===e)(t),g=({link:e,mobileLink:t,trackedLink:i})=>!t&&!i&&!e,m=e=>/pin.it/gim.test(e||""),f=({link:e,mobileLink:t,origImageUrl:i,trackedLink:n})=>t||n||e||i||"",x=({isStoryPin:e,isVideoPin:t})=>e?"storyPin":t?"video":"image",b=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function y({pin:e,isSCEEnabled:t}){var i;const{aggregated_pin_data:o}=e,{isStoryPin:s,isVideo:r}=(0,n.Z)(e);return!(!t&&(s||r))&&0!==Object.keys((null==o||null===(i=o.creator_analytics)||void 0===i?void 0:i["30d_realtime"])||{}).length}function v(e){for(const t of s)if(e===t)return!1;return!0}function P(e){return 0!==Object.keys((null==e?void 0:e["30d_realtime"])||{}).length}function w(e){return 0!==Object.keys((null==e?void 0:e.all_time_realtime)||{}).length}function I(e){var t;return!(null==e||null===(t=e["30d_realtime"])||void 0===t||!t.is_realtime)}},373695:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class s extends n.Component{constructor(e){super(e),o(this,"onImageLoad",(e=>{this.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?this.setState((t=>({loadedItems:[...t.loadedItems,e]}))):this.setState((e=>({errors:e.errors+1}))))})),o(this,"onImageError",(()=>{this.mounted&&this.setState((e=>({errors:e.errors+1})))})),o(this,"mounted",!1),o(this,"loadImages",(e=>{const t=new Image;t.onload=()=>this.onImageLoad({height:t.naturalHeight,url:e,width:t.naturalWidth}),t.onerror=()=>this.onImageError(),t.src=e})),this.state={errors:0,loadedItems:[]}}componentDidMount(){this.mounted=!0;const{url:e}=this.props;this.loadImages(e||"")}componentWillUnmount(){this.mounted=!1}render(){const{children:e}=this.props,{loadedItems:t}=this.state;return e({image:t})}}},122097:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(54574),s=i(898781),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends n.Component{constructor(e){super(e),a(this,"onImageLoad",(e=>{this.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?this.setState((t=>({loadedItems:[...t.loadedItems,e]}))):this.setState((e=>({errors:e.errors+1}))))})),a(this,"onImageError",(()=>{this.mounted&&this.setState((e=>({errors:e.errors+1})))})),a(this,"mounted",!1),a(this,"loadImages",(e=>{e.forEach((e=>{const t=new Image;t.onload=()=>this.onImageLoad({height:t.naturalHeight,url:e.url,width:t.naturalWidth}),t.onerror=()=>this.onImageError(),t.src=e.url}))})),this.state={errors:0,loadedItems:[]}}componentDidMount(){this.mounted=!0;const{images:{data:e}}=this.props,{items:t}=e||{};this.loadImages(t||[])}componentDidUpdate(e){const{images:{data:t,error:i},url:n}=e,{onError:o,images:{isLoaded:s,data:r,error:a},url:l}=this.props;if(!i&&a&&o&&o(),n!==l&&this.setState({loadedItems:[]}),s&&r){const{items:e}=t||{},{items:i}=r||{},n=(i||[]).slice((e||[]).length);this.loadImages(n)}}componentWillUnmount(){this.mounted=!1}render(){const{children:e,images:{data:t,error:i,isLoaded:n},url:o}=this.props,{items:s,title:r}=t||{},{errors:a,loadedItems:l}=this.state,d=i?i.message_detail||i.message:this.props.i18n.bt("Nessuna immagine trovata. Controlla l'URL e riprova.", "No images found. Check your URL and try again.", "No images are found at the URL submitted", undefined, true);let c=n&&0===l.length&&a===(s||[]).length&&o?d:void 0;c&&o.includes("?")&&(c=this.props.i18n.bt("Nessuna immagine trovata. Rimuovi i parametri di monitoraggio in questo URL e riprova.", "No images found. Remove any tracking parameters in this URL to try again.", "No images are found at the URL submitted. The url may contain tracking parameters", undefined, true));return e({loading:!n||0===l.length&&a!==(s||[]).length,title:r,error:c,images:l})}}function d(e){const t=(0,s.ZP)(),i=(0,o.Z)({url:e.url});return(0,r.jsx)(l,{...e,images:i,i18n:t})}},54574:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(784590);function o({url:e}){return(0,n.Z)({name:"FindPinImagesResource",options:{url:e,source:"pin_create",appendItems:!1,followRedirects:!0,scrapeMetric:"www_url_scrape"}})}},299295:(e,t,i)=>{i.d(t,{$4:()=>D,$K:()=>S,AQ:()=>G,Bj:()=>f,DB:()=>W,FH:()=>ae,FM:()=>J,G9:()=>L,GX:()=>m,Hy:()=>ce,JO:()=>z,Ke:()=>k,LM:()=>o,Lc:()=>pe,Lr:()=>de,MN:()=>b,Mn:()=>Q,NB:()=>te,P0:()=>ie,P9:()=>re,Pn:()=>y,TK:()=>P,TZ:()=>C,UU:()=>u,Uw:()=>X,VP:()=>he,W_:()=>le,XB:()=>l,Xy:()=>j,YM:()=>w,aD:()=>_e,aj:()=>Z,bA:()=>R,bo:()=>d,dS:()=>A,eZ:()=>_,fk:()=>oe,g1:()=>ue,gU:()=>c,hH:()=>N,i2:()=>h,iR:()=>M,jh:()=>ge,km:()=>p,lx:()=>O,mr:()=>$,mt:()=>H,n_:()=>F,np:()=>V,of:()=>n,q:()=>fe,qY:()=>I,qm:()=>se,rc:()=>K,ro:()=>me,sD:()=>r,sG:()=>g,u1:()=>Y,uR:()=>a,v5:()=>s,v9:()=>q,vk:()=>ee,wj:()=>v,x1:()=>B,yC:()=>x,yI:()=>T,yX:()=>E,yb:()=>U,zr:()=>ne});const n=880,o=340,s=380,r=510,a=40,l=20,d=4,c=474,u=134,h=96,p=800,_=186,g=40,m=10,f=88,x=183,b=130,y=24,v=400,P=50,w=8,I=8,A=5,E=20,C=13,S=29,j=5,T=20,D=T**2,k=100,z=500,O=500,R=40,L=100,M=5,B=["attempted","publishing","succeeded","uploading"],N={carousel:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],single:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],story:[{w:9,h:16}],storyFARPortrait:[{w:1,h:2},{w:9,h:16},{w:2,h:3},{w:3,h:4},{w:4,h:5},{w:1,h:1}],storyFARLandscape:[{w:2,h:1},{w:16,h:9},{w:3,h:2},{w:4,h:3},{w:5,h:4},{w:1,h:1}]},F=["tl","tc","tr","bl","bc","br"],Z=["left","center"],U=["top","center","bottom"],V=["none","uppercase"],H=["sm","md","lg"],G=[1,.75],W=198,$=132,q=1,Y=56,X=240,K="cubic-bezier(0.66, 0.025, 0.33, 0.975)",J=1e3,Q=1500,ee=2,te=3,ie=20,ne=20,oe=2,se=["processing","publishing","saving"],re=60.5,ae=120.5,le=1,de=104857600,ce=2500,ue=3,he=5e3,pe="pin-builder-default-education-id",_e="pin-builder-default-tour-id",ge="pin-builder-editing-tour-id",me="save_from_url",fe=["processing","edited","creating","saving","saved"]},66743:(e,t,i)=>{i.d(t,{NC:()=>s,Rc:()=>a,WK:()=>d,X9:()=>o,b9:()=>n,f9:()=>l,gu:()=>r});const n="pin-builder-font-faces",o="system-font-faces",s="pin-builder-education-font-faces",r="licensed",a="system",l="brand",d=4},665866:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(826067);const o={carousel:{authOnly:!0,partnerOnly:!0,orbacExperiment:"web_m10n_business_access_orbac_www"},disabledIdeaPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_idea_pins|disable_video)/,authOnly:!0,partnerOnly:!1},disabledPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_web_pins)/,authOnly:!0,partnerOnly:!1},disabledVideoPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_video)/,authOnly:!0,partnerOnly:!1},editing:{authOnly:!0,partnerOnly:!0},education:{authOnly:!0,partnerOnly:!0},offsitePinCreation:{scenarios:["offsite_pin_creation"]},layouts:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation","story_pin"]},linkStatusValidation:{authOnly:!0,partnerOnly:!0},requireLink:{scenarios:["ad_creation"]},multipage_deprecation:{customEnabledCheck:()=>!1,experiment:"web_multipage_deprecation",hasCustomEnabledCheck:({requestContext:e})=>{e.experimentsClient.checkExperiment("sce_lightswitch_organic"),e.experimentsClient.checkExperiment("sce_lightswitch_monetized");const{sterlingOnSteroidsLdap:t}=e||{};return!!t},groups:/^(employees|enabled)/,authOnly:!0,partnerOnly:!1,scenarios:["story_pin_v2"]},multi_pin:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation"]},multi_pin_pinner:{authOnly:!0,partnerOnly:!1,scenarios:["default"]},offsite_pin_creation_multi_select:{authOnly:!0,partnerOnly:!1,experiment:"web_offsite_pin_creation_multi_select",groups:/^(enabled|employees|enabled_redirect_to_hf)/,scenarios:["offsite_pin_creation"]},preview_deprecation:{experiment:"web_idea_pin_creation_preview_deprecation",groups:/^(employees|enabled)/,authOnly:!0,partnerOnly:!1,scenarios:["story_pin_v2"]},ideaPinExtendVideoLength:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_extend_video_duration",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinExtendVideoLengthAboveTwoMin:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_extend_video_duration_above_two_min",groups:/^(employees_min|enabled_min)/,scenarios:["story_pin_v2"]},imageSignals:{authOnly:!0,partnerOnly:!0,experiment:"pin_quality_signal_image",groups:/^(employees|enabled)/},scheduling:{authOnly:!0,partnerOnly:!0,scenarios:["default"],orbacExperiment:"web_m10n_business_access_orbac_www"},shop_the_pin:{authOnly:!0,partnerOnly:!0,orbacExperiment:"web_m10n_business_access_orbac_www"},storyPinCommentsPermissions:{authOnly:!0,partnerOnly:!1,groups:/^(employees|enabled)/,scenarios:["story_pin_v2"],orbacExperiment:"web_m10n_business_access_orbac_www"},systemFonts:{authOnly:!0,partnerOnly:!0},tagging:{authOnly:!0,partnerOnly:!0,experiment:"web_pin_builder_tagging",groups:/^(employees|enabled|rollout)/,orbacExperiment:"web_m10n_business_access_orbac_www"},suppressSuccessModal:{scenarios:["ad_creation","business_nux"]},video:{customEnabledCheck:({user:e})=>!(null==e||!e.video_upload_allowed),authOnly:!0,hasCustomEnabledCheck:()=>!0,orbacExperiment:"web_m10n_business_access_orbac_www"},videoEditing:{authOnly:!0,partnerOnly:!0,experiment:"video_edit",groups:/^(employees|enabled)/,orbacDisabled:!0},videoTagging:{authOnly:!0,partnerOnly:!0,languages:["en"],orbacExperiment:"web_m10n_business_access_orbac_www"},pinQuality:{partnerOnly:!0},adsVideoPipeline:{partnerOnly:!0,experiment:"aid_exp_use_ads_video_pipeline",groups:/^(employees|enabled)/},ideaPinLinkCreation:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_link_creation",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinScheduling:{authOnly:!0,partnerOnly:!1,experiment:"web_sce_idea_pin_scheduling",groups:/^(employees|enabled)/},ideaPinDraftExpirationTimeBased:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_drafts_expire_time_based",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinDescriptionInDetails:{authOnly:!0,partnerOnly:!1,experiment:"web_sc_combined_desc_details",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishPwtReduceImageRegistrations:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_reduce_image_registrations",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishPwtReduceMediaStatusWaiting:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_reduce_media_status_waiting",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishPwtPublishBeforeMediaCompleted:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_publish_before_media_completed",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishBeforeMediaCompletedCloseupPwt:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_publish_before_media_complete_closeup_pwt",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},multipageDeprecationBackendSignals:{authOnly:!0,partnerOnly:!1,experiment:"web_sce_be_signals",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]}},s={_experiments:null,_viewer:null,_advertiser:null,_scenario:null,_language:null,_context:null,_orbacActingAs:null,initialize(e){const{requestContext:t,viewer:i,location:o,advertiser:s,scenario:r,orbacActingAs:a}=e;this._context=e,this._experiments=t.experimentsClient,this._language=t.language,this._viewer=i,this._advertiser=s,this._orbacActingAs=a;const{adCreate:l}=(0,n.mB)(o.search);this._scenario=r||(l?"ad_creation":"default")},scenario(){return this._scenario},enabled(e){var t;if(!this._viewer||!this._experiments)return!1;const{advertisers:i,authOnly:n,customEnabledCheck:s,experiment:r,groups:a=/.*/,hasCustomEnabledCheck:l,languages:d,partnerOnly:c,scenarios:u,orbacDisabled:h,orbacExperiment:p}=o[e];return(!(!(null===(t=this._orbacActingAs)||void 0===t||!t.id)&&this._orbacActingAs.id!==this._viewer.id)||!(h||p&&"enabled"!==this._experiments.checkExperiment(p).group))&&(l&&s&&l(this._context)?s(this._context):!(!i||!this._advertiser||null===this._advertiser.billing_type)||!(n&&!this._viewer.isAuth)&&(!(c&&!this._viewer.isPartner)&&(!(u&&!u.includes(this._scenario))&&(!(d&&!d.includes(this._language))&&(!r||a.test(this._experiments.checkExperiment(r).group||""))))))},getExperimentGroup(e){if(!this._viewer||!this._experiments)return null;const{experiment:t}=o[e];if(t){const{group:e}=this._experiments.checkExperiment(t);return e}return null}}},309256:(e,t,i)=>{i.d(t,{$D:()=>l,CP:()=>a,KV:()=>d,Wt:()=>s,a2:()=>u,bs:()=>h,j1:()=>r,vK:()=>c});var n=i(173159),o=i(66743);const s=[{fontGroup:o.gu,fontFamily:"A-FRAME",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!0},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik XCond-Black.otf"}]},{fontGroup:o.gu,fontFamily:"Cross-stitch",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"normal",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Medium.otf"}]},{fontGroup:o.gu,fontFamily:"Lagoon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Gabriello-Black.otf"}]},{fontGroup:o.gu,fontFamily:"Lava lamp",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Ultra Italic.otf"}]},{fontGroup:o.gu,fontFamily:"Marathon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Super Italic.otf"}]},{fontGroup:o.gu,fontFamily:"Sourdough",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Bold.otf"}]},{fontGroup:o.gu,fontFamily:"Superglue",format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik-Bold+Italic.otf"}]},{fontGroup:o.Rc,fontFamily:"Merriweather",fontFaceUrl:"https://fonts.googleapis.com/css?family=Merriweather:700",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:o.gu,fontFamily:"Noto Serif SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:o.gu,fontFamily:"Noto Sans SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:o.gu,fontFamily:"Noto Serif TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:o.gu,fontFamily:"Noto Sans TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:o.gu,fontFamily:"Noto Serif KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:o.gu,fontFamily:"Noto Sans KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:o.gu,fontFamily:"Noto Serif JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:o.gu,fontFamily:"Noto Sans JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:o.gu,fontFamily:"Noto Serif",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:o.gu,fontFamily:"Noto Sans",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:o.Rc,fontFamily:"Playfair Display",fontFaceUrl:"https://fonts.googleapis.com/css?family=Playfair+Display:400",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Raleway",fontFaceUrl:"https://fonts.googleapis.com/css?family=Raleway:900",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Black",fontStyle:"",fontWeight:"900"}]},{fontGroup:o.Rc,fontFamily:"Roboto Condensed",fontFaceUrl:"https://fonts.googleapis.com/css?family=Roboto+Condensed:700i",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:o.Rc,fontFamily:"Suez One",fontFaceUrl:"https://fonts.googleapis.com/css?family=Suez+One&display=swap",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Domine",fontFaceUrl:"https://fonts.googleapis.com/css?family=Domine&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Overlock",fontFaceUrl:"https://fonts.googleapis.com/css?family=Overlock:900i&display=swap",fontOverrides:{letterSpacing:-1,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Black Italic",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Satisfy",fontFaceUrl:"https://fonts.googleapis.com/css?family=Satisfy&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]}];function r(){return s}function a(e,t,i){const n=e.styles.find((e=>e.fontStyle===t&&e.fontWeight===i));return n?n.name:""}function l(e,t){return e.reduce(((e,t)=>[...e,...t.fonts]),[]).find((e=>e.fontFamily===t))||null}function d(e){return(0,n.Z)(e,o.b9)}function c(){return(0,n.Z)(r(),o.X9)}function u(){return(0,n.Z)([s[o.WK]],o.NC)}function h(e){const t=function(e){const t=r();if(e){const i=t.findIndex((t=>t.localeFilter===e));if(i>=0)return t[i]}return t[6]}(e),i=t.defaultStyle,n=t.styles[i],{fontFamily:s,fontOverrides:a}=t,l=a&&a.textTransform?1:0,d=a&&a.lineHeight||1.2,c=a&&a.letterSpacing||0;return{fontGroupName:o.gu,fontFamilyName:null!=s?s:"",fontStyleName:n.name,fontWeight:n.fontWeight,fontSize:50,textColor:"#FFFFFF",marginIndex:1,alignmentIndex:1,positionIndex:2,backgroundColor:"",backgroundTransparencyIndex:0,lineHeight:d,letterSpacing:c,transformIndex:l,showMoreOptions:!1}}},984244:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(299295);function o(e){return n.hH[e]}},795067:(e,t,i)=>{function n(e){const t=e.lastIndexOf("."),i=e.toLocaleLowerCase();return i.substr(t).includes("gif")||i.startsWith("data:image/gif")}function o(e){if("localVideo"===e.type)return"localVideo";if("localImage"===e.type)return"image/gif"===(e.fileSrc&&e.fileSrc.type)?"gif":null;if("webImage"===e.type)return n(e.src)?"gif":null;if("dropboxFile"===e.type)return n(e.name)?"gif":null;if("pin"===e.type){const{images:t,videos:i}=e;if(i)return"localVideo";if(null!=t&&t.orig&&t.orig.url&&n(t.orig.url))return"gif"}return null}i.d(t,{Z:()=>o})},616672:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(299295);function o(e,t=n.LM,i=0){return(t-2*i)/e.width*e.height+2*i}},388628:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(299295);function o(e,t){const i=e/t,{carousel:o}=n.hH,s=o.length,r=o[0],a=o[s-1];if(i<=a.w/a.h)return{w:e,h:t};const[l]=o.reduce(((e,t,n)=>{const o=t.w/t.h,[s,r]=e,a=Math.abs(o-i);return r&&r<a?[s,r]:[t,a]}),[null,null]);return{w:t*(l?l.w/l.h:r.w/r.h),h:t}}},573545:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(540794);function o(e){if(e){return`partner_upload_${(0,n.Z)().includes("/create/")?"create_flow":"standalone"}`}return"pinner_upload_standalone"}},47615:(e,t,i)=>{i.d(t,{PG:()=>o,Sl:()=>s,rt:()=>a});var n=i(299295);function o(e){return e.width>=n.FM&&e.height>=n.Mn}function s(e){return!!e&&("localImage"===e.type||"webImage"===e.type||"assetImage"===e.type)}const r={STATIC:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],CAROUSEL:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],VIDEO:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","VIDEO_VIEW","WEB_SESSIONS"],COLLECTIONS:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"]};function a(e,t){return!(!e||!t)&&(r[e]||[]).includes(t)}},454074:(e,t,i)=>{function n(e){const t=[];return e.items?Array.from(e.items).forEach((e=>{if("file"===e.kind){const i=e.getAsFile();i&&t.push(i)}})):t.concat(Array.from(e.files)),t}i.d(t,{Z:()=>n})},724565:(e,t,i)=>{i.d(t,{SD:()=>r,TA:()=>s,to:()=>o});const n=6e3,o=e=>{const t=Math.floor(100*e||0),i=Math.floor(t/n),o=Math.floor((t-i*n)/100),s=t-i*n-100*o;return`${i<10?`0${i}`:i}:${o<10?`0${o}`:o}:${s<10?`0${s}`:s}`},s=e=>`00:${o(e).substring(0,5)}:00`,r=e=>{const t=e.split(":");let i=0;return 3===t.length&&(i+=isNaN(t[0])?0:60*+t[0],i+=isNaN(t[1])?0:+t[1],i+=isNaN(t[2])?0:+t[2]/100),i}},840839:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(385740);function o(e,t){const i=(0,n.BE)();e({event_type:13,view_type:212}),e(t),e({event_type:13,view_type:null==i?void 0:i.viewType,view_parameter:null==i?void 0:i.viewParameter,view_data:null==i?void 0:i.viewData})}},113110:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(773285);const s=()=>{const{checkExperiment:e}=(0,o.F)(),{anyEnabled:t}=e("web_set_crossorigin_anonymous"),[i,s]=(0,n.useState)(t);return{enabled:i,disable:()=>s(!1)}}},692627:(e,t,i)=>{function n({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:i,hasPinRichMetadataArticle:n,hasPinRichMetadataRecipe:o,hasPinStoryPinData:s}){if(e){if(t)return i?144:n?141:o?145:139;if(s)return 157}return 140}i.d(t,{Z:()=>n})},283943:(e,t,i)=>{i.d(t,{aU:()=>a,hq:()=>r,o_:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("AuthenticationContext");function r(){return s().loginContext}function a(){return s().logout}},472644:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e}){return(0,n.jsx)("svg",{height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,n.jsx)("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),(0,n.jsx)("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),(0,n.jsx)("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),(0,n.jsx)("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),(0,n.jsx)("path",{d:"M20 20h472v472H20V20z"})]})})}},830269:(e,t,i)=>{i.d(t,{Z:()=>n});const n={EMAIL:1,FACEBOOK:2,GPLUS:3,GOOGLE_ONE_TAP:4,SMARTLOCK:5,MULTIFACTOR:6,SWITCH_ACCOUNT:7,LINE:8}},177471:(e,t,i)=>{i.d(t,{k:()=>I});var n=i(667294),o=i(702664),s=i(689070),r=i(214494),a=i(19121),l=i(414327),d=i(773285),c=i(780280);const u=["etsy","facebook","microsoft","twitter","google","instagram","youtube","dropbox"];function h({network:e,data:t,requestContext:i}){if(u.includes(e))return r.Z.create("UserSocialNetworkResource",{network:e,data:t}).callCreate();const n=`/v3/connect/${e}/`,o=((e,t,i)=>{let n;switch(e){case"facebook":const{facebookToken:e}=i;n=t?{facebook_id:t.id,facebook_token:e}:Object.freeze({});break;case"gplus":n=t?{one_time_code:t.one_time_code,redirect_uri:t.redirect_uri||void 0}:Object.freeze({});break;case"line":n=t?{line_id_token:t.line_id_token,line_access_token:t.line_access_token}:Object.freeze({});break;default:n=Object.freeze({})}return n})(e,t,i);return(0,s.Z)({url:n,method:"PUT",data:o})}var p=i(553171),_=i(124237),g=i(402201),m=i(572752),f=i(966113),x=i(83969),b=i(867820);let y=Object.freeze({});const v=e=>{const{network:t}=e;if(!y[t])return;const{[t]:{error:i,success:n,complete:o},...s}=y;y={...s},"error"===e.type?null==i||i(Object.freeze({})):n("facebook"===e.network?{id:e.profile.id}:{one_time_code:e.one_time_code,redirect_uri:e.redirect_uri}),null==o||o()},P=({i18n:e,network:t,callbacks:i,requestContext:n,inAnyGoogleLocaleFixExperiment:o})=>{if(i={error:()=>{},complete:()=>{},...i},(0,b.My)(`auth_web.social_connect.${t}.${(0,m.Z)(n)}`),"gplus"===t||"google"===t)(0,b.My)("auth_web.social_connect.google.migration"),async function(e,t){var i,n;await(0,x.Px)(void 0,t||void 0);const o=null===(i=window.google)||void 0===i||null===(n=i.accounts)||void 0===n?void 0:n.oauth2;o&&o.initCodeClient({client_id:f.v3,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:e}).requestCode()}((e=>{i.success({one_time_code:e.code,redirect_uri:"postmessage"})}),o?n.language:void 0);else if("line"===t){const{locale:e}=n;(0,p.Z)(e,i)}else{const n=window.open("/connect/"+t+"/","",(e=>{switch(e){case"dropbox":return"width=600,height=800";case"instagram":return(0,g.Z)({width:580,height:580});case"etsy":return(0,g.Z)({width:580,height:775});case"youtube":return(0,g.Z)({width:605,height:640});default:return(0,g.Z)()}})(t));if(!n)return _.Z.showError(e.bt("Devi abilitare i popup!", "You must enable popups!", " - ", undefined, true)),void(i.error&&i.error(Object.freeze({})));const o=setInterval((()=>{n.closed&&(clearInterval(o),v({network:t,type:"error"}))}),1e3);y={...y,[t]:i}}};window.addEventListener("message",(e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(e.origin!==t)return;const i=e.data;if(i&&"social-connect-complete"===i.type){const t=e.data;t.network&&v(t)}}));class w{constructor({invalidateResource:e,requestContext:t,viewer:i,inAnyGoogleLocaleFixExperiment:n}){this.getUserId=()=>i.isAuth?i.id:"",this.getUsername=()=>i.isAuth?i.username:"",this.isLimitedLogin=()=>i.isLimitedLogin,this.invalidateResource=e,this.requestContext=t,this.inAnyGoogleLocaleFixExperiment=n}handleConnect(e,t,i,n){const o=t=>{("connect"===t.type?h({network:e,data:t.data,requestContext:this.requestContext}):(0,s.Z)({url:`/v3/connect/${e}/`,method:"DELETE"})).then((e=>{var t;const n={user_id:this.getUserId(),username:this.getUsername(),field_set_key:"social_connect"};this.invalidateResource("UserResource",n),r.Z.create("UserResource",n).callGet(),null===(t=i.success)||void 0===t||t.call(i,e)}),(e=>{var t;e&&"object"==typeof e&&(null===(t=i.error)||void 0===t||t.call(i,{api_error_code:e.api_error_code,code:e.code,message:e.message}))})).finally((()=>{var e;null===(e=i.complete)||void 0===e||e.call(i)}))};t?this.isLimitedLogin()?o({type:"connect"}):P({network:e,callbacks:{success:e=>o({type:"connect",data:e}),error:i.error,complete:i.complete},i18n:n,requestContext:this.requestContext,inAnyGoogleLocaleFixExperiment:this.inAnyGoogleLocaleFixExperiment}):o({type:"disconnect"})}}function I(){const e=(0,o.useDispatch)(),t=(0,c.B)(),i=(0,a.Z)(),{checkExperiment:s}=(0,d.F)(),r=s("mweb_google_button_locale_fix").anyEnabled||s("dweb_google_button_locale_fix").anyEnabled;return(0,n.useMemo)((()=>new w({invalidateResource:(t,i)=>e((0,l.jB)(t,i)),requestContext:t,viewer:i,inAnyGoogleLocaleFixExperiment:r})),[e,r,t,i])}},553171:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(231486);var o=i(643913),s=i(226198),r=i(966113),a=i(299899),l=i(826067),d=i(844974);const c="undefined"!=typeof window,u=c?`${window.location.origin}/oauth/line/redirect`:"";function h(e,t){var i;if(!c)return void(null===(i=t.error)||void 0===i||i.call(t,{message:"Window is undefined"}));let h;const p=function(e=5){const t="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map((()=>t[Math.floor(Math.random()*t.length)])).join("")}(10),_=async e=>{if(!e.isTrusted)return;const i=e instanceof MessageEvent?(({origin:e,data:t})=>t&&e===window.location.origin?String(t):null)(e):(({url:e,key:t})=>{if(!e.startsWith(window.location.origin)||t!==a.MM)return null;const i=(0,d.qn)(a.MM);return(0,d.L_)(a.MM),i})(e),r=(0,l.mB)(i);if(r.state&&r.code&&r.state===p){h&&!h.closed&&h.close();try{const e=await fetch("/oauth/line/verify",{headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-csrftoken":`${String(n.U2(s.fS))}`},method:"POST",body:(0,o.Z)({code:r.code,redirect_uri:u})}),i=await e.json(),{id_token:a,access_token:l}=i;var c;if(a&&l)t.success({line_id_token:a,line_access_token:l});else null===(c=t.error)||void 0===c||c.call(t,{message:"No tokens returned"})}catch(f){var g;null===(g=t.error)||void 0===g||g.call(t,f)}finally{var m;h&&!h.closed&&h.close(),window.removeEventListener("message",_),window.removeEventListener("storage",_),null===(m=t.complete)||void 0===m||m.call(t)}}};window.addEventListener("message",_),window.addEventListener("storage",_),h=window.open(`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${r.z}&redirect_uri=${encodeURIComponent(u)}&state=${p}&ui_locales=${e}&scope=profile%20openid%20email`,"_blank")}},56528:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(214494);const o=e=>n.Z.create("UserPasswordResource",e).callUpdate({showError:!1})},807998:(e,t,i)=>{i.d(t,{Z:()=>n});const n=["https://www.pinterest.info","https://www.pinterest.at","https://www.pinterest.com.au","https://www.pinterest.ca","https://www.pinterest.ch","https://www.pinterest.cl","https://www.pinterest.de","https://www.pinterest.dk","https://www.pinterest.es","https://www.pinterest.fr","https://www.pinterest.co.uk","https://www.pinterest.ie","https://www.pinterest.it","https://www.pinterest.jp","https://www.pinterest.co.kr","https://www.pinterest.com.mx","https://www.pinterest.nz","https://www.pinterest.se","https://www.pinterest.ph","https://www.pinterest.pt","https://www.pinterest.ru"]},711781:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{return JSON.parse(decodeURIComponent(atob((t=e.split(".")[1],(t||"").replace(/-/g,"+").replace(/_/g,"/"))).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")));var t}},467570:(e,t,i)=>{i.d(t,{$:()=>d,GH:()=>l,JF:()=>m,Jb:()=>p,MI:()=>g,sl:()=>u,we:()=>h});var n=i(935879),o=i(689070),s=i(713930),r=i(816068),a=i(867820);const l="274266067164",d=["public_profile","email","user_birthday","user_friends"],c=["picture.type(large)","id","first_name","last_name","email","gender","birthday"],u=e=>{e&&(0,a.dy)({event:"load_script_success",provider:"facebook"}),"undefined"!=typeof window&&window.FB?(e&&(0,a.dy)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:l,status:!0,xfbml:!0,version:"v2.7"})):e&&(0,a.dy)({event:"global_object_not_found",provider:"facebook"})},h=(e,t)=>{t&&(0,a.dy)({event:"load_script_start",provider:"facebook"});return(0,s.Z)((0,n.Z)(e),"FACEBOOK").then((()=>u(t)))},p=()=>new Promise((e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)})),_=({userID:e,accessToken:t,data:{birthday:i,email:n,first_name:o,gender:s,last_name:a,picture:l}})=>({type:"facebook",facebook_id:e,facebook_token:t,birthday:i?(0,r.Z)(i):void 0,email:n,first_name:o,gender:s,image_url:l&&!l.data.is_silhouette?l.data.url:void 0,last_name:a});async function g(e){var t;const i=(null===(t=(await(0,o.Z)({url:"/v3/facebook/profile_data/",method:"POST",data:{access_token:e,pii_safe_birthday:!0,fields:c}})).resource_response)||void 0===t?void 0:t.data)||{};return{access_token:e,birthday:i.birthday,email:i.email,first_name:i.first_name,gender:i.gender,id:i.id,last_name:i.last_name,picture:i.picture}}const m=()=>new Promise((e=>{window.FB.login(e,{scope:d.join(",")})})).then((e=>((e,t)=>new Promise(((i,n)=>{if("connected"!==e.status)return void n({status:e.status||"unknown"});const{userID:o,accessToken:s}=e.authResponse;g(s).then((e=>{i({creds:{facebook_id:o,facebook_token:s,facebook_autologin:(null==t?void 0:t.autologin)||!1},signupOptions:_({userID:o,accessToken:s,data:e})})}),n)})))(e)))},738192:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(898781),o=i(349700),s=i(584595),r=i(883119),a=i(785893);const l=({children:e,onClick:t})=>(0,a.jsx)("button",{onClick:t,style:{background:"transparent",border:"none",verticalAlign:"inherit",padding:0},type:"button",children:(0,a.jsx)(r.xv,{color:"error",inline:!0,size:"200",weight:"bold",children:e},"err_text")});function d({apiErrorCode:e,errorMessage:t,onClickPasswordReset:i}){const d=(0,n.ZP)(),c=(e=>{switch(e){case s.yV:case s.$j:return(0,o.nk)(d.bt("Abbiamo notato un'attivit inusuale sul tuo account. {{ resetPasswordLink }} o accedi con Facebook o Google per tornare al tuo account.", "We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.", "Error message when user is soft banned", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("Reimposta la password", "Reset your password", "Link text for password reset", undefined, true)})});case s.iK:return(0,o.nk)(d.bt("Il tuo account  gi collegato a Google. Per accedere con l'email, {{ resetPasswordLink }}", "Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("imposta una password.", "set a password.", "Link text to set password for user with account with only google auth", undefined, true)})});case s.nY:return(0,o.nk)(d.bt("Il tuo account  gi collegato a Facebook. Per accedere con l'email, {{ resetPasswordLink }}", "Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("imposta una password.", "set a password.", "Link text to set password for user with account with only facebook auth", undefined, true)})});case s.nf:return(0,o.nk)(d.bt("Il tuo account  collegato ad Apple. Questa opzione funziona solo sull'app Pinterest per iOS. Per accedere a Pinterest qui, dovrai {{ resetPasswordLink }}", "Your account is connected to Apple. This option works only on the Pinterest iOS app. To log into Pinterest here, youll need to {{ resetPasswordLink }}", "unauth.web.emailLogin", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("impostare una password.", "set a password.", "Link text to set password for user with account with only apple auth", undefined, true)})});case s.oP:return(0,o.nk)(d.bt("La password inserita non  corretta. Riprova o {{ resetPasswordLink }}", "The password you entered is incorrect. Try again or {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("Reimposta la password", "Reset your password", "Link text for password reset", undefined, true)})});default:return[t]}})(e);return(0,a.jsx)(r.xu,{"data-test-id":"touchableErrorMessage",children:c.map(((e,t)=>(0,a.jsx)(r.xv,{color:"error",inline:!0,size:"200",children:e},`err_message_${t}`)))})}var c=i(817656),u=i(867820);const h=[...s.ZP,c.Ej,s.oP,s.nf].filter((e=>e!==s.RL&&e!==s.an));function p({error:e,onClickPasswordReset:t,source:i}){var n;let o=e.api_error_code;(e.http_status||e.httpStatus)===c.Ej&&(o=c.Ej);const r=o&&h.includes(o)?(0,a.jsx)(d,{apiErrorCode:o,errorMessage:null!==(n=e.message)&&void 0!==n?n:"",onClickPasswordReset:t}):e.message;if(r)switch(o){case s.oP:case s.RL:return{passwordValidationError:r};case s.nY:return{facebookValidationError:r};case s.iK:return{googleValidationError:r};case s.hU:return{emailValidationError:r};case s._K:return{passwordValidationError:r};default:return{emailValidationError:r}}else(0,u.My)(`unauth.login.error.SERVER_ERROR.unknown.${String(o)}.${i}`);return null}},290148:(e,t,i)=>{i.d(t,{Ny:()=>u,ZP:()=>p,eD:()=>g,lp:()=>_});var n=i(794230),o=i(704115),s=i(78714),r=i(957161),a=i(432300),l=i(966113),d=i(299899),c=i(867820);const u=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6});class h{static defaultLoginRedirectUrl(){return window.location.pathname===l.lf||window.location.pathname===l.ZE||window.location.pathname.startsWith(l.rO)?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith(l.rO)?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){const e=r.Z.getItem(d.kl);if(e&&e.indexOf("|")>-1){const t=e.split("|");return 3===t.length&&(new Date).getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){const e=r.Z.getItem(d.kl);let t=[];e&&(t=e.split("|"),3===t.length&&t.shift());const i=((new Date).getTime()/1e3).toString();t.push(i);const n=t.join("|");r.Z.setItem(d.kl,n)}static isFullyLoggedIn(e,t){return e&&t===a.Z.DEFAULT}static handleRedirect(e){if(!e){e="/";const t=(0,o.Z)();if(t){const i=t.next;i&&(e=i,delete t.next),e=(0,n.Z)(e,t)}}(0,s.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){r.Z.setItem(d.F6,Date.now()),!t&&e&&"/"!==e?h.handleRedirect(e):h.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){const t=window.navigator.credentials;if(t&&e.username_or_email)try{const i=new window.PasswordCredential({id:e.username_or_email,password:e.password});t.store(i).then((()=>{(0,c.My)("navigatorCredentials.store.success")}))}catch(i){(0,c.My)("navigatorCredentials.store.error")}}static handleLoginMfa(e,t,i){(0,c.My)("multi_step_login"),h.storeLoginCredentialsToBrowser(e),i?i(e,t):(0,c.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}const p=h;function _(e){return e.facebook_id?"facebook":e.google_open_id_token?"google_one_tap":e.line_id_token?"line":e.username_or_email?"email":"other"}function g(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":_(e)}},884732:(e,t,i)=>{i.d(t,{M3:()=>d,PE:()=>r,Q:()=>c,lv:()=>a,r8:()=>s,rl:()=>o,yW:()=>l});var n=i(844974);const o=()=>{try{const e=(0,n.qn)("MULTIPLE_ACCOUNTS");return e?JSON.parse(e):Object.freeze({})}catch(e){return Object.freeze({})}},s=e=>(0,n.Nh)("MULTIPLE_ACCOUNTS",JSON.stringify(e)),r=()=>!!(0,n.qn)("MULTIPLE_ACCOUNTS"),a=()=>Object.keys(o()).length,l=()=>{try{const e=(0,n.qn)("MULTIPLE_ACCOUNTS_GROUP");return e?JSON.parse(e):null}catch(e){return null}},d=e=>(0,n.Nh)("MULTIPLE_ACCOUNTS_GROUP",JSON.stringify(e)),c=()=>({multipleAccountMap:o(),multipleAccountGroupId:l()})},773285:(e,t,i)=>{i.d(t,{F:()=>s,a:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("ExperimentContext")},129291:(e,t,i)=>{i.d(t,{MH:()=>l,ad:()=>a,iN:()=>d});var n=i(7789),o=i(584992);const{Provider:s,useHook:r}=(0,o.Z)({name:"board_picker",sampleRate:n.DQ?1:.1}),a=(e,t)=>{let i="unknown";null!=t&&t.includes("pin/")?i="PinCloseup":"/"===t?i="HomeFeed":"PinBookMarklet"===t&&(i="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",i,"STRING")},l=s,d=r},584992:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(667294),o=i(425288),s=i(198462),r=i(729524),a=i(860273),l=i(169213),d=i(358864),c=i(558775),u=i(505771),h=i(985271),p=i(383434),_=i(543059),g=i(453821),m=i(638089),f=i(607150),x=i(790348);const b=(0,p.XV)("PwtStopwatch"),y=(e,t)=>{if(h.Z){if("start"===t.type&&!e.isTiming){const{name:i,startTime:n,navigationType:o}=t;return(0,x.A9)(`TIMING.${i}`),{isTiming:!0,name:i,isSampled:t.isSampled,startTime:"number"==typeof n?n:h.Z.now(),metricId:{type:"stopwatch",name:i,navigationType:o},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(!t.bypassIsTimingCheck){const i=t.name||e.name;return b("ignoring action - stopwatch is not actively timing",t),(0,x.A9)(`WARN.${i}.noTiming.${t.type}`),e}b("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t)}if("annotate"===t.type){const i=h.Z.now();return b(`adding annotation {${t.label}: ${i}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:i}])}}if("binaryAnnotate"===t.type)return b(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){const{value:i,type:n}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const o=e.binaryAnnotations[t.name].value||0;return b(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(o)}\n          operand: ${String(i)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:i?t.operation(o,i):o,type:n}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:i,type:n}}}}if("addSubspan"===t.type){b(`adding subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&b(`WARNING: adding duplicate subspan name {${t.name}}`);const i=t.id||(0,d.Z)();-1!==e.spans.findIndex((e=>e.id===i))&&b(`WARNING: adding duplicate subspan id {${t.name}: ${i}}`);let n=0;return t.startTime?n=t.startTime:e.startTime?n=e.startTime:b(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:i,startTime:n,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){var i;b(`starting subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&b(`WARNING: starting duplicate subspan name {${t.name}}`);const n=t.id||(0,d.Z)();-1!==e.spans.findIndex((e=>e.id===n))&&b(`WARNING: starting duplicate subspan id {${t.name}: ${n}}`);const o=t.parentName?null===(i=e.spans.find((e=>e.name===t.parentName)))||void 0===i?void 0:i.id:null;return{...e,spans:[...e.spans,{name:t.name,id:n,parentId:t.parentId||o,startTime:h.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(b(`stopping subspan {${t.name}}`),!t.id){e.spans.reduce(((e,i)=>(i.name===t.name&&e.push(i),e)),[]).length>1&&(0,x.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type})}const i=t.id?e.spans.findIndex((e=>e.id===t.id)):e.spans.findIndex((e=>e.name===t.name));return i>-1?(e.spans[i].endTime=h.Z.now(),t.annotations&&(e.spans[i].annotationMap={...e.spans[i].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[i].binaryAnnotationMap={...e.spans[i].binaryAnnotationMap,...t.binaryAnnotations})):(0,x.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.reduce(((e,i)=>(i.name===t.currentName&&e.push(i),e)),[]).length>1&&(0,x.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});const i=e.spans.findIndex((e=>e.name===t.currentName));return i>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(b(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[i].name=t.newName):(0,x.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){const{startTime:i,metricId:n,pwtStaticContext:o,annotations:s,binaryAnnotations:l,isSampled:p,spans:x,traceId:y}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),p){const p=t.stopTime||h.Z.now(),v=[...x.map((t=>{t.endTime===1/0&&(t.endTime=p);const i=e.spanNameUpdates.findIndex((e=>t.name===e.currentName));return i>-1&&(b(`renaming subspan {${t.name}} to {${e.spanNameUpdates[i].newName}}`),t.name=e.spanNameUpdates[i].newName,e.spanNameUpdates=e.spanNameUpdates.filter((e=>e.newName!==t.name))),t}))];if(t.manualAndResourceSpans||0===x.length){const e=(0,d.Z)();v.push({name:"network_resources",id:e,startTime:i,endTime:p,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map((t=>(0,u.Z)((0,g.p)(t,[]),e))).filter(Boolean))}const P="initial_app_load"===n.navigationType&&(0,a.Z)(),w={type:"COMPLETE",traceId:y,startTime:i,endTime:p,spans:v,annotationMap:{...(0,r.Z)(s),...(0,f.jh)("browser_",P?(0,f.D3)(P):{}),...(0,f.jh)("mark_",(0,_.gQ)())},binaryAnnotationMap:(0,m.ng)({metricId:n,pwtStaticContext:o,binaryAnnotations:l,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,c.Z)({metricId:n,pwtStaticContext:o,result:w})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]}}if("error"===t.type){const{error:i,stopwatchPerformanceObserver:n}=t;return i&&(0,x.H)(i),n&&n.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:i,pwtStaticContext:n}=e,o=t.reason||"";return(0,c.Z)({metricId:i,pwtStaticContext:n,result:{type:"ABORT",reason:o}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]}}}return e},v=({name:e,sampleRate:t,navigationType:i,manualAndResourceSpans:o=!1})=>{const r=(0,s.N5)(),a=(0,n.useRef)([]),c=(0,n.useRef)(null),[u,h]=(0,n.useReducer)(y,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)(),spanNameUpdates:[]});return r?{isTiming:u.isTiming,start:n=>{if(window.PerformanceObserver){const e=1e3;a.current=[],c.current=(0,l.Z)({entryTypes:["resource"]},(t=>{a.current=a.current.concat(t.getEntries()),a.current.length>e&&(a.current=a.current.slice(-e))}))}const o={type:"start",startTime:n,name:e,navigationType:i,pwtStaticContext:r,isSampled:!t||Math.random()<t};return h(o)},stop:e=>h({type:"stop",stopTime:e,stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,manualAndResourceSpans:o}),error:e=>{h({type:"error",stopwatchPerformanceObserver:c.current,error:e})},abort:e=>h({type:"abort",stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,reason:e}),annotate:(e,t,i=!1)=>h({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:i}),binaryAnnotate:(e,t,i,n,o=!1)=>h({type:"binaryAnnotate",name:e,value:t,annotationType:i,parentId:n,bypassIsTimingCheck:o}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o=!1})=>h({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o}),addSubspan:({name:e,startTime:t,endTime:i,annotations:n={},binaryAnnotations:o={},parentId:s=null,id:r=null,bypassIsTimingCheck:a=!1})=>h({type:"addSubspan",name:e,startTime:t,endTime:i,annotations:n,binaryAnnotations:o,parentId:s,id:r,bypassIsTimingCheck:a}),subspanStart:({name:e,annotations:t={},binaryAnnotations:i={},parentId:n=null,parentName:o=null,id:s=null,bypassIsTimingCheck:r=!1})=>h({type:"subspanStart",name:e,annotations:t,binaryAnnotations:i,parentId:n,parentName:o,id:s,bypassIsTimingCheck:r}),subspanStop:({name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s=!1})=>h({type:"subspanStop",name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n=!0})=>h({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n}),getSpans:(e,t)=>u.spans.filter((i=>i[e]===t)),getTraceId:()=>u.traceId}:null};var P=i(785893);const w=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:i=!0,navigationType:r,manualAndResourceSpans:a=!1})=>{const{Provider:l,useMaybeHook:d}=(0,o.Z)(`Stopwatch_${e}`);return{Provider:function({children:o}){const d=v({name:e,sampleRate:t,navigationType:r,manualAndResourceSpans:a}),c=(0,s.fM)(),u=c?c.time:0,h=(0,n.useRef)(!1),p=null==d?void 0:d.isTiming,_=(0,n.useCallback)((t=>{h.current?(h.current=!1,null==d||d.abort(t)):(0,x.A9)(`WARN.${e}.noTiming.abort`)}),[d]),g=(0,n.useCallback)(((e,t)=>{null==d||d.annotate(e,t)}),[d]),m=(0,n.useCallback)(((e,t,i,n)=>{null==d||d.binaryAnnotate(e,t,i,n)}),[d]),f=(0,n.useCallback)((({name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o})=>{null==d||d.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o})}),[d]),b=(0,n.useCallback)((({name:e,startTime:t,endTime:i,annotations:n,binaryAnnotations:o,parentId:s,id:r,bypassIsTimingCheck:a})=>{null==d||d.addSubspan({name:e,startTime:t,endTime:i,annotations:n,binaryAnnotations:o,parentId:s,id:r,bypassIsTimingCheck:a})}),[d]),y=(0,n.useCallback)((({name:e,annotations:t,binaryAnnotations:i,parentId:n,parentName:o,id:s,bypassIsTimingCheck:r})=>{null==d||d.subspanStart({name:e,annotations:t,binaryAnnotations:i,parentId:n,parentName:o,id:s,bypassIsTimingCheck:r})}),[d]),w=(0,n.useCallback)((({name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s})=>{null==d||d.subspanStop({name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s})}),[d]),I=(0,n.useCallback)((({currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n})=>{null==d||d.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n})}),[d]),A=(0,n.useCallback)(((e,t)=>d?d.getSpans(e,t):[]),[d]),E=(0,n.useCallback)((()=>d?d.getTraceId():0),[d]),C=(0,n.useCallback)((t=>{h.current?(h.current=!1,null==d||d.error(t)):(0,x.A9)(`WARN.${e}.noTiming.error`)}),[d]),S=(0,n.useCallback)((e=>{h.current&&(null==d||d.abort("duplicated_init_stopwatch_action")),h.current=!0,null==d||d.start(e)}),[d]),j=(0,n.useCallback)((t=>{h.current?(h.current=!1,null==d||d.stop(t)):(0,x.A9)(`WARN.${e}.noTiming.stop`)}),[d]);(0,n.useEffect)((()=>()=>{i&&_("unloadOrClientNavigation")}),[u]);const T=(0,n.useMemo)((()=>({isTiming:p,abort:_,addAnnotation:g,addBinaryAnnotation:m,binaryAnnotationOperation:f,addSubspan:b,subspanStart:y,subspanStop:w,getSpans:A,getTraceId:E,updateSubspanName:I,stop:j,error:C,start:S})),[p,_,g,m,f,b,y,w,A,E,I,j,C,S]);return(0,P.jsx)(l,{value:T,children:o})},useHook:d}}},311560:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";default:return"OTHER"}}},143461:(e,t,i)=>{i.d(t,{D:()=>l,T:()=>a});var n=i(667294),o=i(874103),s=i(785893);const r=(0,n.createContext)({recaptchaV3Token:"",refreshToken:()=>{}});function a({children:e}){const[t,i]=(0,n.useState)(""),a=(0,n.useCallback)((()=>{(0,o.rY)((e=>i(e)),(e=>{}),o.sk)}),[]);(0,n.useEffect)((()=>{a();const e=setInterval(a,o.yc);return()=>{clearInterval(e)}}),[a]);const l=(0,n.useMemo)((()=>({recaptchaV3Token:t,refreshToken:a})),[t,a]);return(0,s.jsx)(r.Provider,{value:l,children:e})}const l=()=>(0,n.useContext)(r)},874103:(e,t,i)=>{i.d(t,{OA:()=>c,f$:()=>_,rY:()=>l,sk:()=>g,wQ:()=>u,xW:()=>h,yc:()=>d,ys:()=>p});var n=i(172071);const o="onloadRecaptchaJsCallback",s="6Ldx7ZkUAAAAAF3SZ05DRL2Kdh911tCa3qFP0-0r",r="recaptcha-enterprise-src",a=(e,t,i)=>{n.Z.increment("recaptcha_v3.request_token.attempt",.1,{action:i}),void 0===window.grecaptcha||void 0===window.grecaptcha.enterprise?(t(new Error("Error loading reCAPTCHA Enterprise")),n.Z.increment("recaptcha_v3.request_token.js_loading_error",.1,{action:i})):window.grecaptcha.enterprise.ready((()=>{try{window.grecaptcha.enterprise.execute(s,{action:i}).then(e).catch(t)}catch(o){n.Z.increment("recaptcha_v3.request_token.exec_error",.1,{action:i}),t(o)}}))},l=(e,t,i)=>{if(window[o]=function(){return a(e,t,i)},document.getElementById(r))a(e,t,i);else{const e=document.createElement("script");e.id=r,e.src=`https://www.recaptcha.net/recaptcha/enterprise.js?onload=${o}&render=${s}`;const t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}},d=105e3,c=8e3,u="mweb_auth",h="mweb_login",p="mweb_signup",_="web_auth",g="web_unauth"},561195:(e,t,i)=>{i.d(t,{A:()=>r,Z:()=>a});var n=i(667294),o=i(883119),s=i(785893);const r=({fill:e,width:t,color:i})=>{const r="half"===e?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.xu,{position:"absolute",children:(0,s.jsx)(o.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,s.jsx)(o.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,s.jsx)(o.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},display:"inlineBlock","data-test-id":`rating-star-${e}`,children:r})};function a({max_rating:e,rating:t,width:i,color:o}){const a=[],l=function(e,t){return 5*(t=t<=e?t:e)/e}(parseFloat(e)||5,parseFloat(t)||0);if(Number.isNaN(l))return null;const d=Math.floor(l),c=l-d;return[...Array(d).keys()].forEach((e=>a.push((0,s.jsx)(r,{color:o,fill:"full",width:i},e)))),c>=.75?a.push((0,s.jsx)(r,{color:o,fill:"full",width:i},a.length)):c>=.25&&a.push((0,s.jsx)(r,{color:o,fill:"half",width:i},a.length)),[...Array(5-a.length).keys()].forEach((()=>a.push((0,s.jsx)(r,{color:o,fill:"empty",width:i},a.length)))),(0,s.jsx)(n.Fragment,{children:a})}},780280:(e,t,i)=>{i.d(t,{B:()=>u,LC:()=>d,P2:()=>l,fH:()=>c,gf:()=>h});var n=i(667294),o=i(608832),s=i(620707),r=i(785893);const a=(0,n.createContext)();function l({children:e,value:t}){const[i,l]=(0,n.useState)(t),d=(0,n.useMemo)((()=>({requestContext:i,updateRequestContext:e=>{const t={...i,...e};(0,s.Ak)(i,e)||l(t),(0,o.J)(t)}})),[i]);return(0,r.jsx)(a.Provider,{value:d,children:e})}const d=({children:e})=>{const t=(0,n.useContext)(a);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)},c=({children:e})=>{const t=(0,n.useContext)(a);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)};function u(){const e=(0,n.useContext)(a);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e.requestContext}function h(){const e=(0,n.useContext)(a);if(!e)throw new Error("useUpdateRequestContext must be used within a RequestContextProvider");return e.updateRequestContext}},608832:(e,t,i)=>{let n;function o(e){n=e}function s(){return n}i.d(t,{J:()=>o,l:()=>s})},505920:(e,t,i)=>{i.d(t,{UZ:()=>u,Z8:()=>h,my:()=>p});var n=i(667294),o=(i(702664),i(425288)),s=i(214494),r=i(785893);function a(e,t,i){var n;const o=[...null!==(n=t[e][i.payload.name])&&void 0!==n?n:[],i.payload.handler],s={...t};return s[e]={...t[e],[i.payload.name]:o},s}function l(e,t,i){if(!t[e][i.payload.name])return t;const n=t[e][i.payload.name].filter((e=>e!==i.payload.handler)),o={...t};return o[e]={...t[e],[i.payload.name]:n},o}const{Provider:d,useHook:c}=(0,o.Z)("ResourceContext");function u({children:e}){const[{listeners:t,moreListeners:i},o]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"addListener":return a("listeners",e,t);case"addMoreListener":return a("moreListeners",e,t);case"removeListener":return l("listeners",e,t);case"removeMoreListener":return l("moreListeners",e,t);default:return e}}),{listeners:{},moreListeners:{}});s.Z.fetchCompleteCallback=({resource:e,options:i,response:n,normalizedResponse:o,refresh:s,resourceSchema:r})=>{t[e]&&t[e].forEach((t=>t({isRefresh:s,normalizedResponse:o,options:i,schema:r,resource:e,response:n})))},s.Z.fetchMoreCompleteCallback=({resource:e,options:t,response:n,normalizedResponse:o,refresh:s,resourceSchema:r})=>{i[e]&&i[e].forEach((i=>i({isRefresh:s,normalizedResponse:o,options:t,schema:r,resource:e,response:n})))};const c=(0,n.useMemo)((()=>({listenerDispatch:o})),[]);return(0,r.jsx)(d,{value:c,children:e})}function h(e,t){const{listenerDispatch:i}=c();(0,n.useEffect)((()=>(i({type:"addListener",payload:{name:e,handler:t}}),()=>{i({type:"removeListener",payload:{name:e,handler:t}})})))}function p(e,t){const{listenerDispatch:i}=c();(0,n.useEffect)((()=>(i({type:"addMoreListener",payload:{name:e,handler:t}}),()=>{i({type:"removeMoreListener",payload:{name:e,handler:t}})})))}},784590:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(702664),s=i(886858),r=i(718368),a=i(616550),l=i(780280),d=i(248327);const c={};function u(e){const{enabledRouteRefresh:t,__unstableEnableSuspenseSupport:i,headers:u,name:h,noCache:p,options:_,schema:g}=null!=e?e:{name:"DisabledResource",options:null},m=!e,f=(0,o.useDispatch)(),x=(0,s.Z)(_),b=(0,n.useRef)(null),y=(0,n.useRef)(),v=(0,a.useHistory)(),P=v&&"POP"!==v.action,w=e=>(e[h]||c)[x]||c,I=(0,o.useSelector)((({resources:e})=>w(e).nextBookmark)),A=(0,o.useSelector)((({resources:e})=>w(e).data)),E=(0,o.useSelector)((({resources:e})=>w(e).auxData)),C=(0,o.useSelector)((({resources:e})=>w(e).error)),S=(0,o.useSelector)((({resources:e})=>Boolean(w(e).fetching))),j=Boolean(C)||void 0!==A,T=j&&!S&&I===r.q,D=Boolean(j&&t&&P&&!m),[k,z]=(0,n.useState)(D),O=(0,n.useCallback)((e=>{b.current=f((0,d.U)(h,{options:_,schema:g,bookmark:e,headers:u}))}),[f,h,x,g,u]),R=()=>{b.current=f((0,d.b)(h,{options:_,schema:g,headers:u}))},{isBot:L}=(0,l.B)(),M=()=>{if(!m&&y.current!==x){const e=void 0===y.current;y.current=x,!j&&!S||e&&C&&(({httpStatus:e})=>!e||e>=500)(C)?O():(!L&&p||D)&&R()}};(0,n.useEffect)((()=>{i||M()})),i&&M();const B=(0,n.useCallback)((()=>{m||(R(),z(!0))}),[m,d.b,h,x,u,z]),N=(0,n.useCallback)((()=>{!I||T||S||m||O(I)}),[m,O,I,T,S]);if(b.current)if(j&&!S)b.current=null;else if(i)throw b.current;const F=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:N,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:B}),Z={auxData:E,data:A,error:C,fetchMore:N,isAtEnd:T,isFetching:S,isLoaded:j,isRefreshing:k,nextBookmark:I,refresh:B};return(0,o.shallowEqual)(Z,F.current)||(!k||!F.current.data&&D||(0,o.shallowEqual)(Z.data,F.current.data)||(Z.isRefreshing=!1,z(!1)),F.current=Z),F.current}},418614:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(784590),o=i(50286),s=i(780280),r=i(826067);var a=i(616550);function l({checkExperiments:e,disableFetch:t,viewer:i}){var n;const l=(0,a.useLocation)(),d=(0,a.useRouteMatch)(),c=(0,s.B)(),u=function({advertiser:e,deviceType:t,location:{pathname:i,search:n},inviteCode:o,match:{params:s,path:a},viewer:l}){return{advertiser:e,deviceType:t,routeData:{inviteCode:o,matchPath:a,params:s,parsedSearch:(0,r.mB)(n),pathname:i,search:n},user:{country:l.country||void 0,id:l.id||void 0,isAuth:l.isAuth,isEmployee:!!l.isEmployee||!1,isPartner:!!l.isPartner||!1,username:l.username||void 0,firstHomeFeedRequestAfterNux:l.firstHomeFeedRequestAfterNux||void 0}}}({advertiser:c.advertiser,deviceType:(0,o.Mq)(c),location:l,match:d,viewer:i,inviteCode:null!==(n=c.inviteCode)&&void 0!==n?n:""}),h=!!t&&t(u),p=!(!h&&e)||e(c.experimentsClient);return{args:u,fetchDisabled:h||!p}}var d=i(19121);function c({getOptions:e,checkExperiments:t,disableFetch:i,...o}){const s=function(){const e=(0,d.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee||!1,isPartner:!!e.isPartner||!1,username:e.username||void 0,firstHomeFeedRequestAfterNux:e.firstHomeFeedRequestAfterNux||void 0}}(),{args:r,fetchDisabled:a}=l({checkExperiments:t,disableFetch:i,viewer:s}),c=e?e(r):void 0;return(0,n.Z)(a?null:{options:c,...o})}},995228:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(773285),s=i(780280),r=i(785893);function a({children:e,fallback:t}){const i=t||null,{isAuthenticated:a}=(0,s.B)(),{checkExperiment:l}=(0,o.F)();return(0,r.jsx)(n.Suspense,{fallback:i,children:e})}},947599:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(995228).Z},251183:(e,t,i)=>{function n({scrollPosition:e,containerSize:t,contentSize:i,intendedDistance:n,extendToEdgeDistance:o=0}){const s=i-t,r=s-e,a=-e;let l=n;return l=Math.min(l,r),l=Math.max(l,a),n>0&&s-(e+l)<=o?l=s-e:n<0&&e+l<=o&&(l=-e),l}i.d(t,{Z:()=>a});var o=i(77601);const s={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},r={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:(4-2*e)*e-1};function a(e,t,i,a={}){const l={...s,...a},{scrollLeft:d,scrollTop:c,scrollWidth:u,scrollHeight:h,clientWidth:p,clientHeight:_}=e,g=n({scrollPosition:d,containerSize:p,contentSize:u,intendedDistance:t,extendToEdgeDistance:l.extendToEdgeDistanceX}),m=n({scrollPosition:c,containerSize:_,contentSize:h,intendedDistance:i,extendToEdgeDistance:l.extendToEdgeDistanceY}),f=Math.abs(Math.floor(g/l.scrollSpeedPxPerMs)),x=Math.abs(Math.floor(m/l.scrollSpeedPxPerMs));let b=Math.max(f,x);l.minScrollDuration&&(b=Math.max(b,l.minScrollDuration));const y=r[l.easingFunction]||r["ease-in-out"];return(0,o.Z)({window,duration:b,run:t=>{e.scrollLeft=d+g*y(t),e.scrollTop=c+m*y(t),1===t&&l.onAnimationComplete&&setTimeout(l.onAnimationComplete,0)}})}},730447:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(254469);function s({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:i,resourceName:s,resourceOptions:r,value:a}){const l=(0,o.Z)({allowSearchOnMount:e,resourceName:s,resourceOptions:r,value:a});return(0,n.useEffect)((()=>{null!=l&&l.length&&i(l)}),[l]),t||null}},254469:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294);const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},s=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};s.prototype.set=function(e,t){let i=this._uidToData[e];i||(i=new o(e,t),this._uidToData[e]=i,this._numItems+=1),this._moveToFront(i),this._numItems>this._maxNumItems&&this._evict()},s.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},s.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},s.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},s.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};const r=s;var a=i(214494);function l({resourceName:e,resourceOptions:t}){const i={...t,count:"count"in t?t.count:5},n=a.Z.create(e,i),o=new r,s=()=>{n.abort()};return async function(e,t){const i=o.get(`${t}-${e}`);if(i){const t=i.items;if(t&&t.length){s();return{hint:i.hint,items:t,term:e}}}return e.length>=0?(async(e,t)=>{var i;if(n.isCalling()){var r,a;const i=null===(r=n.options)||void 0===r?void 0:r.term,o=null===(a=n.options)||void 0===a?void 0:a.pin_scope;if(e===i&&t===o)return;s()}const{bookmarks:l,...d}=n.options||{};n.options={...d,term:e,pin_scope:t};const c=null===(i=(await n.callGet({showError:!1})).resource_response)||void 0===i?void 0:i.data,u=null==c?void 0:c.items,h=(null==c?void 0:c.hint)||{},p={hint:h,items:u};return o.set(`${t}-${e}`,p),{term:e,items:u,hint:h}})(e,t):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:i={},value:o}){const s=(0,n.useRef)(!1),r=(0,n.useRef)({}),[a,d]=(0,n.useState)([]),c=function({resourceName:e,resourceOptions:t}){const i=(0,n.useRef)();return i.current||(i.current=l({resourceName:e,resourceOptions:t})),i.current}({resourceName:t,resourceOptions:i}),u=i.pin_scope||"pins",h=`${u}-${o}`;return(0,n.useEffect)((()=>{(async()=>{if(null!=o&&(e||s.current))if(h in r.current)d(r.current[h]);else try{const e=await c(o,u);if(e){const{items:t}=e;r.current[h]=t,d(t)}}catch(t){if("Resource call aborted"===t)return;throw t}s.current||(s.current=!0)})()}),[o,u,h]),a}},80816:(e,t,i)=>{i.d(t,{i:()=>n});const n={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",UNKNOWN:"unknown"}},835209:(e,t,i)=>{function n({richPinData:e={}}){return((null==e?void 0:e.products)||[])[0]}i.d(t,{Z:()=>n})},53325:(e,t,i)=>{i.d(t,{$O:()=>a,GZ:()=>d,OE:()=>c,Xv:()=>l,Z0:()=>n,_z:()=>s,fM:()=>r,qA:()=>o,zX:()=>u});const n=40,o=4,s=106,r=133,a=.1,l=10,d=246,c=197,u=236},734765:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(50286),o=i(705064);function s(){return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"pintergration":return 10;case"www":default:return"phone"===e||"tablet"===e?1:0}}({deviceType:(0,n.ZP)(),site:(0,o.uo)()})}},31149:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#EFEFEF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1106 19.6408C18.2759 19.551 18.4653 19.5 18.6667 19.5H37.3333C37.5535 19.5 37.7594 19.561 37.9351 19.667C37.9351 19.667 37.9352 19.667 37.9352 19.667L28.7395 27.2024C28.3095 27.5547 27.6905 27.5547 27.2605 27.2024L18.0648 19.667C18.0799 19.6579 18.0951 19.6492 18.1106 19.6408ZM14 20.8611V20.6667C14 18.0893 16.0893 16 18.6667 16H37.3333C39.9107 16 42 18.0893 42 20.6667V20.8611V34.6667C42 37.244 39.9107 39.3333 37.3333 39.3333H18.6667C16.0893 39.3333 14 37.244 14 34.6667V20.8611ZM38.5 23.7292V34.6667C38.5 35.311 37.9777 35.8333 37.3333 35.8333H18.6667C18.0223 35.8333 17.5 35.311 17.5 34.6667V23.7292L25.0422 29.9095C26.7622 31.319 29.2378 31.319 30.9578 29.9096L38.5 23.7292Z",fill:"black"})]})}},659522:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M56 28C56 12.536 43.464 0 28 0S0 12.536 0 28c0 13.975 10.24 25.56 23.625 27.66V36.094h-7.11V28h7.11v-6.169c0-7.017 4.18-10.893 10.576-10.893 3.064 0 6.268.546 6.268.546v6.891h-3.53c-3.479 0-4.564 2.159-4.564 4.373V28h7.766l-1.242 8.094h-6.524V55.66C45.761 53.56 56 41.975 56 28Z",fill:"#1877F2"}),(0,n.jsx)("path",{d:"M38.9 36.094 40.14 28h-7.765v-5.252c0-2.215 1.085-4.373 4.563-4.373h3.53v-6.89s-3.203-.547-6.267-.547c-6.396 0-10.576 3.876-10.576 10.893V28h-7.11v8.094h7.11V55.66a28.206 28.206 0 0 0 8.75 0V36.094h6.524Z",fill:"#fff"})]})}},331744:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M28 56c15.464 0 28-12.536 28-28S43.464 0 28 0 0 12.536 0 28s12.536 28 28 28Z",fill:"#00B900"}),(0,n.jsx)("path",{d:"M46.625 26.32c0-8.335-8.354-15.115-18.625-15.115-10.267 0-18.625 6.78-18.625 15.115 0 7.471 6.627 13.73 15.578 14.91.606.13 1.432.401 1.642.92.187.47.122 1.208.06 1.684l-.265 1.596c-.08.471-.373 1.843 1.615 1.003 1.988-.835 10.724-6.314 14.634-10.812 2.693-2.964 3.986-5.969 3.986-9.3Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M24.215 22.293H22.91c-.201 0-.364.163-.364.364v8.115c0 .2.163.364.364.364h1.306c.2 0 .364-.163.364-.364v-8.12a.363.363 0 0 0-.364-.36ZM33.208 22.293H31.9c-.2 0-.364.163-.364.364v4.82l-3.72-5.02c-.009-.015-.018-.024-.027-.038l-.005-.005-.023-.023c-.005 0-.005-.005-.005-.005-.005-.005-.014-.01-.019-.014l-.009-.01c-.005-.004-.014-.008-.019-.013-.004-.005-.009-.005-.009-.005a.036.036 0 0 0-.019-.01c-.004 0-.009-.004-.009-.004-.005-.004-.014-.004-.019-.01-.004 0-.009-.004-.014-.004l-.023-.01c-.005 0-.01 0-.014-.004-.01 0-.014-.005-.019-.005h-.014c-.004 0-.014 0-.018-.004H26.212c-.2 0-.364.163-.364.364v8.115c0 .2.164.364.364.364h1.307c.2 0 .364-.163.364-.364v-4.82l3.724 5.03a.283.283 0 0 0 .093.089s.005 0 .005.005c.01.004.014.009.023.014.005 0 .005.004.01.004.004.005.01.005.018.01.005.004.01.004.02.009.004 0 .008.005.008.005.01.004.02.004.024.009h.004c.028.01.061.014.094.014h1.306c.201 0 .364-.163.364-.364v-8.125a.37.37 0 0 0-.368-.36ZM21.065 29.097h-3.551v-6.445c0-.2-.164-.364-.364-.364h-1.307c-.2 0-.364.163-.364.364v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306a.358.358 0 0 0-.359-.364ZM40.422 24.323c.201 0 .364-.163.364-.364v-1.307c0-.2-.163-.364-.364-.364h-5.217a.353.353 0 0 0-.252.103l-.005.005c0 .004-.004.004-.004.004a.373.373 0 0 0-.103.252v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55c.201 0 .364-.164.364-.364v-1.307c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55v.005Z",fill:"#00B900"})]})}},757146:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,n.jsx)("path",{d:"M28 12c-9.012 0-16 6.604-16 15.52 0 4.664 1.912 8.696 5.024 11.48.26.232.42.56.428.912l.088 2.848c.028.908.964 1.5 1.796 1.132l3.176-1.4c.268-.12.572-.14.856-.064 1.46.4 3.012.616 4.632.616 9.012 0 16-6.604 16-15.52S37.012 12 28 12Z",fill:"url(#paint0_radial_3730_649)"}),(0,n.jsx)("path",{d:"m18.392 32.06 4.7-7.456a2.401 2.401 0 0 1 3.472-.64l3.74 2.804a.96.96 0 0 0 1.156-.004l5.048-3.832c.672-.512 1.552.296 1.104 1.012l-4.704 7.452a2.401 2.401 0 0 1-3.472.64l-3.74-2.804a.96.96 0 0 0-1.156.004l-5.048 3.832c-.672.512-1.552-.292-1.1-1.008Z",fill:"#fff"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("radialGradient",{id:"paint0_radial_3730_649",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.16 43.826) scale(34.8672)",children:[(0,n.jsx)("stop",{stopColor:"#09F"}),(0,n.jsx)("stop",{offset:".61",stopColor:"#A033FF"}),(0,n.jsx)("stop",{offset:".935",stopColor:"#FF5280"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#FF7061"})]})})]})}},464240:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#1DA1F2"}),(0,n.jsx)("path",{d:"M24.34 42c11.37 0 17.591-9.429 17.591-17.591 0-.265 0-.53-.012-.796a12.596 12.596 0 0 0 3.087-3.207c-1.11.494-2.303.82-3.557.976a6.22 6.22 0 0 0 2.725-3.424 12.299 12.299 0 0 1-3.93 1.495 6.17 6.17 0 0 0-4.51-1.953 6.19 6.19 0 0 0-6.186 6.185c0 .483.06.953.157 1.411-5.136-.253-9.694-2.725-12.744-6.463a6.184 6.184 0 0 0-.832 3.111 6.2 6.2 0 0 0 2.749 5.148 6.254 6.254 0 0 1-2.797-.771v.084a6.196 6.196 0 0 0 4.955 6.065 6.028 6.028 0 0 1-1.628.217c-.397 0-.783-.036-1.157-.109a6.182 6.182 0 0 0 5.775 4.293 12.4 12.4 0 0 1-7.68 2.652c-.494 0-.989-.024-1.471-.084A17.587 17.587 0 0 0 24.34 42Z",fill:"#fff"})]})}},22641:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#25D366"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.206 16.65A15.75 15.75 0 0 0 27.99 12c-8.74 0-15.854 7.113-15.857 15.855a15.821 15.821 0 0 0 2.117 7.927L12 44l8.406-2.205a15.837 15.837 0 0 0 7.577 1.93h.007c8.74 0 15.853-7.114 15.856-15.857a15.76 15.76 0 0 0-4.64-11.218ZM27.99 41.047h-.005c-2.365 0-4.684-.636-6.708-1.837l-.482-.286-4.988 1.309 1.331-4.864-.313-.499a13.146 13.146 0 0 1-2.015-7.014c.003-7.266 5.915-13.178 13.185-13.178a13.09 13.09 0 0 1 9.318 3.865 13.098 13.098 0 0 1 3.856 9.324c-.003 7.267-5.915 13.18-13.179 13.18Zm7.23-9.871c-.397-.199-2.345-1.157-2.708-1.289-.364-.132-.628-.198-.891.198-.264.397-1.024 1.29-1.255 1.554-.231.264-.462.297-.858.099-.396-.199-1.673-.617-3.187-1.966-1.178-1.051-1.973-2.348-2.204-2.745-.231-.397-.024-.611.173-.808.178-.178.397-.463.595-.695.198-.23.264-.396.396-.66.132-.265.066-.496-.033-.695-.098-.198-.89-2.148-1.221-2.941-.322-.773-.649-.668-.892-.68a16.01 16.01 0 0 0-.759-.014c-.264 0-.693.099-1.057.495-.363.397-1.387 1.356-1.387 3.305 0 1.95 1.42 3.835 1.618 4.1.199.264 2.794 4.265 6.769 5.982.945.409 1.683.653 2.259.835.948.302 1.812.26 2.495.157.76-.114 2.344-.958 2.674-1.884.33-.925.33-1.719.23-1.884-.098-.166-.362-.266-.758-.464Z",fill:"#fff"})]})}},619277:(e,t,i)=>{i.d(t,{o$:()=>o,ty:()=>s,vE:()=>r});var n=i(425288);const{Provider:o,MaybeConsumer:s,useMaybeHook:r}=(0,n.Z)("inviteContext")},867060:(e,t,i)=>{i.d(t,{LO:()=>s,Pu:()=>r,cc:()=>n,dB:()=>o,yF:()=>a});const n={10:13098,11:13099,6:13100,5:13101,14:13102,12:13103,15:13104,8:13105,4:13106,1:13107,3:13107,18:13108,19:13109,20:13110,21:13111,22:13112,23:13113,26:13114,27:13115,29:13116,9:13286},o={10:13415,11:13416,6:13417,5:13418,14:13419,12:13420,15:13421,8:13422,4:13423,1:13424,3:13424,18:13425,19:13426,20:13427,21:13428,22:13429,23:13430,26:13431,27:13432,29:13433,9:13434},s={10:13436,11:13437,6:13438,5:13439,14:13440,12:13441,15:13442,8:13443,4:13444,1:13445,3:13445,18:13446,19:13447,20:13448,21:13449,22:13450,23:13451,26:13452,27:13453,29:13454,9:13455},r={10:13457,11:13458,6:13459,5:13460,14:13461,12:13462,15:13463,8:13464,4:13465,1:13466,3:13466,18:13467,19:13468,20:13469,21:13470,22:13471,23:13472,26:13473,27:13474,29:13475,9:13476},a={pin:1,board:2,did_it:6,pinner:3,user:3,today_article:8}},223815:(e,t,i)=>{i.d(t,{U:()=>r,Z:()=>a});var n=i(755742),o=i(785893);const s=()=>{},r=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function a({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:i,allowScroll:a,children:l}){const d=e=>function(e,t){t&&e.keyCode===n.Z.ESCAPE||r(e)}(e,t);return(0,o.jsx)("div",{onAbort:r,onAnimationEnd:r,onAnimationIteration:r,onAnimationStart:r,onBlur:s,onCanPlay:i?s:r,onCanPlayThrough:r,onChange:r,onClick:e?s:r,onCompositionEnd:r,onCompositionStart:r,onCompositionUpdate:r,onContextMenu:r,onCopy:r,onCut:r,onDoubleClick:r,onDurationChange:r,onEmptied:r,onEncrypted:r,onEnded:r,onError:r,onFocus:s,onInput:r,onInvalid:r,onKeyDown:d,onKeyPress:d,onKeyUp:d,onLoad:r,onLoadedData:r,onLoadedMetadata:r,onLoadStart:r,onMouseDown:r,onMouseEnter:r,onMouseLeave:r,onMouseMove:e?s:r,onMouseOut:r,onMouseOver:r,onMouseUp:e?s:r,onPaste:r,onPause:r,onPlay:r,onPlaying:r,onProgress:r,onRateChange:r,onScroll:a?s:r,onSeeked:r,onSeeking:r,onSelect:r,onStalled:r,onSubmit:r,onSuspend:r,onTimeUpdate:r,onTouchCancel:r,onTouchEnd:e?s:r,onTouchMove:e?s:r,onTouchStart:e?s:r,onTransitionEnd:r,onVolumeChange:r,onWaiting:r,onWheel:r,children:l})}},858416:(e,t,i)=>{i.d(t,{Wr:()=>u,Hx:()=>p,RC:()=>h});var n=i(667294);var o=i(311541),s=i(425288),r=i(924687),a=i(785893);const l=()=>Promise.resolve().then(i.bind(i,924687)),{Provider:d,useHook:c}=(0,s.Z)("IdeaPinVideoPlayer");function u({children:e}){const[t,i]=(0,o.Z)(l,r.initialState),s=(0,n.useMemo)((()=>({dispatch:i,ideaPinVideoPlayerControls:t})),[i,t]);return(0,a.jsx)(d,{value:s,children:e})}function h(){const{dispatch:e}=c();return(0,n.useMemo)((()=>({updateSeekTime:(t,i)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:i||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})},updateSeekingIdeaPin:t=>{e(t?{type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t}}:{type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t,seekTime:void 0}})},updateCurrentTime:t=>{e({type:"UPDATE_CURRENT_TIME",payload:{currentTime:t}})},updateDuration:t=>{e({type:"UPDATE_DURATION",payload:{duration:t}})}})),[e])}function p(){const{ideaPinVideoPlayerControls:e}=c();return e}},924687:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o,initialState:()=>n});const n={seekTime:void 0,seekTimes:{},isSeekingIdeaPin:!1,currentProgressInfo:{currentTime:0,duration:0}};function o(e=n,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime},seekTime:t.payload.seekTime};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{},seekTime:void 0};case"UPDATE_SEEKING_IDEA_PIN":return{...e,isSeekingIdeaPin:t.payload.isSeekingIdeaPin};case"UPDATE_CURRENT_TIME":return{...e,currentProgressInfo:{...e.currentProgressInfo,currentTime:t.payload.currentTime}};case"UPDATE_DURATION":return{...e,currentProgressInfo:{...e.currentProgressInfo,duration:t.payload.duration}};default:return e}}},224496:(e,t,i)=>{i.d(t,{Cc:()=>h,Gf:()=>m,LX:()=>o,Lc:()=>x,Ls:()=>p,Rf:()=>l,YL:()=>a,ap:()=>s,h8:()=>c,jH:()=>f,pE:()=>d,s5:()=>g,tQ:()=>u,yR:()=>r});var n=i(883119);const o={w:9,h:16},s=o.w/o.h,r=8,a=10,l=5e3;function d(e,t=1){return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}const c={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},u=[c.IMAGE,c.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},p=new n.Ry(1),_=new n.Ry(5),g=new n.H3([_]),m=new n.H3([g]),f=new n.Ry(1e3),x=e=>{const t=Math.floor(e||0),i=Math.floor(t/60),n=t-60*i;return`${i<10?`${i}`:i}:${n<10?`0${n}`:n}`}},458451:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>Array.from(e)[0].toUpperCase()+Array.from(e).slice(1).join("")},985913:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(858142);const o=/\{\{\s*(\w+)\s*\}\}/g,s=(e,t)=>(0,n.Z)(o,e,t)},858791:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},936776:(e,t,i)=>{i.d(t,{Z:()=>o});const n=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,o=e=>n.test(e)},858142:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>t?t.replace(e,((e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:"")):""},66699:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(985913),o=i(858791);const s=(e,t)=>{const i={};return Object.keys(t).forEach((e=>{i[e]=t[e]?(0,o.Z)(t[e].toString()):""})),(0,n.Z)(e,i)}},883561:(e,t,i)=>{i.d(t,{ZP:()=>n});function n(e,t=80,i="",n=false){let o;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||n)o=e.substring(0,t);else{const i=e.lastIndexOf(" ",t);o=e.substring(0,i)}return o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""),o+i}},70061:(e,t,i)=>{function n(e){return e.replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))}i.d(t,{Z:()=>n})},784641:(e,t,i)=>{i.d(t,{E5:()=>d,T7:()=>s,Y_:()=>c,bl:()=>a,d9:()=>h,nx:()=>u,xt:()=>l});var n=i(19121),o=i(780280);i(883119);function s(e,t,i,n){const o=function(e,t){return t?"shop":0===e||2===e?"trending":1===e?"best":"article"}(e,t),s=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\'"]/g,"").trim().replace(/\s+/g,"-")}(i);return`/today/${o}/${encodeURIComponent(s)}/${n}/`}const r={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]};function a(){var e;const t=(0,o.B)(),i=(0,n.Z)(),s=i.isAuth?i.country:t.country,a=t.locale.substring(0,2);return null===(e=r[a])||void 0===e?void 0:e.includes(s)}const l=(e,t,i)=>e||(t||i||""),d=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)),c=e=>"todayarticle"===e.type,u=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),h=e=>{var t,i;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(i=e.width)&&void 0!==i?i:1)}},482981:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(784641);function o(e){const{article_creator_user:t,display_type:i,feed_source:o,header_pin_id:s,id:r,is_product_pin_feed:a,title:l,video_pin:d}=e;switch(i){case 0:case 1:return l?(0,n.T7)(o,null!=a&&a,l,r):"";case 8:return null!=t&&t.username?`/${encodeURIComponent(t.username)}/`:"";case 3:case 6:return s?`/pin/${s}/`:"";case 2:return null!=d&&d.id?`/pin/${d.id}/`:"";default:return""}}},52022:(e,t,i)=>{i.d(t,{S:()=>a,Z:()=>l});var n=i(667294),o=i(867820),s=i(53987),r=i(616550);const a=e=>(0,s.L6)(e)?"pin":(0,s.am)(e)?"board":(0,s.Xn)(e)?"login":(0,s.C$)(e)?"home":(0,s.cD)(e)?"profile":(0,s.dr)(e)?"ideas":(0,s.gT)(e)?"ideas-root":(0,s.tZ)(e)?"videos":(0,s.$Y)(e)?"article":(0,s.E0)(e)?"shopping-spotlight":(0,s.Zz)(e)?"today":(0,s.j8)(e)?"unauth-profile":(0,s.f1)(e)?"shopping-root":(0,s.OX)(e)?"shopping-category":"other";function l(){const e=(0,r.useLocation)();return(0,n.useCallback)((({action:t,item:i,within:n})=>{const s=a(e);(0,o.My)(`logged_out_product.interaction.${s}.${t}`,{item:i||"none",within:n||"none"})}),[e])}},207112:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(883119),s=i(785893);class r extends n.Component{constructor(e){var t,i,o;super(e),o={manualTruncate:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,this.ref=(0,n.createRef)()}componentDidMount(){const{maxHeightPx:e,shaveOptions:t={}}=this.props,n=this.ref&&this.ref.current;if(!n)return;const o=void 0===n.textContent?"innerText":"textContent",s=n[o];("boolean"!=typeof t.spaces||t.spaces?s.split(" "):s).length<2?this.setState({manualTruncate:!0}):i.e(14118).then(i.bind(i,448433)).then((({default:i})=>{i(n,e,t)}))}render(){const{maxWidthPx:e,maxHeightPx:t,inline:i=!1}=this.props,{manualTruncate:n}=this.state,r={maxWidth:e,maxHeight:t},a=i?{display:"inline",...r}:{...r};return n?(0,s.jsx)(o.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:a},ref:this.ref,"data-test-id":"truncater",children:this.props.children}):(0,s.jsx)(o.xu,{ref:this.ref,dangerouslySetInlineStyle:{__style:a},"data-test-id":"truncater",children:this.props.children})}}const a=r},6663:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(701500),s=i(391254),r=i(898781),a=i(883119),l=i(785893);function d({color:e,completeButtonText:t,completeUrl:i,dismissButtonText:d,experienceId:c,external:u,message:h,onComplete:p,onDismiss:_}){const g=(0,r.ZP)(),m=(0,n.useRef)(null),f=({event:e})=>{p&&p(e)},x=({event:e})=>{_&&_(e)},b=h&&!t,y=500735===c,v=t&&(!i||y)&&(0,l.jsx)(a.zx,{color:"white",onClick:f,text:t}),P=t&&i&&(0,l.jsx)(o.Z,{anchor:".HomeButton2",anchorElementRef:m.current,containerBoxConfig:{display:"flex",height:"100%"},children:(0,l.jsx)(a.zx,{accessibilityLabel:t,ref:m,role:"link",href:i,onClick:({event:e})=>f({event:e}),rel:u?"nofollow":"none",size:"md",color:"white",text:t},"naglink")}),w=d&&_&&(0,l.jsx)(a.xu,{mdPaddingX:2,children:(0,l.jsx)(a.zx,{color:e&&"default"!==e?"white":"gray",onClick:x,text:d})}),I=b&&!y&&_&&!d&&(0,l.jsx)(a.hU,{accessibilityLabel:g.bt("Chiudi", "Close", "accessibility close label", undefined, true),bgColor:"lightGray",onClick:x,icon:"cancel",iconColor:"gray",size:"md"});return(0,l.jsxs)(a.xu,{display:"flex",direction:"column",smDirection:"row",color:null!=e?e:"dark",paddingY:3,paddingX:6,alignItems:"center",justifyContent:"between",children:[(0,l.jsx)(a.xu,{column:12,smColumn:b?11:8,children:(0,l.jsxs)(a.xv,{color:"inverse",weight:y?"normal":"bold",children:[(0,l.jsx)(s.Z,{unsafeCSS:".Banner--message a { color: #fff; text-decoration: underline; }"}),(0,l.jsx)("div",{className:"Banner--message",children:(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})})]})}),(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"end",children:[w,v||P,I]})]})}},948618:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s({ariaHidden:e=!1,color:t="darkGray",size:i}){return(0,o.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,o.jsx)(n.xv,{color:t,inline:!0,size:null!=i?i:"200",children:""})})}},938999:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(785893);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r extends n.Component{constructor(...e){super(...e),s(this,"handleKeyPress",(e=>{const{onClick:t}=this.props;!t||32!==e.charCode&&13!==e.charCode||(e.preventDefault(),t())}))}render(){const{selected:e,rounded:t,color:i,onClick:n,children:s,style:r}=this.props,a={cursor:n?"pointer":"default",borderRadius:t?"8px":0,boxShadow:e?`0 0 0 2px ${i}`:"none",outline:"none",...r};return(0,o.jsx)("div",{role:"button",onClick:n,onKeyPress:this.handleKeyPress,tabIndex:"0",style:a,children:s})}}s(r,"defaultProps",{selected:!1,rounded:!0,color:"#e60023"})},343341:(e,t,i)=>{i.d(t,{F9:()=>r,Zo:()=>o,nE:()=>s});var n=i(425288);const{Provider:o,Consumer:s,useHook:r}=(0,n.Z)("toastManagerContext")},925797:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(561195),o=i(237056),s=i(784590),r=i(898781),a=i(883119),l=i(785893);function d({pinId:e}){const t=(0,r.ZP)(),i=(0,o.Z)(),{data:n}=(0,s.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed"}}),d=n&&n.story_pin_data?n.story_pin_data.page_count:null;return(0,l.jsxs)(a.kC,{alignItems:"center",height:20,justifyContent:"start",children:[(0,l.jsx)(a.JO,{dangerouslySetSvgPath:{__path:"M21,17.6119404 L21,9.15332448 C21,7.0136795 20.7772185,6.23779253 20.3588815,5.45557032 C19.9405445,4.67334809 19.3266519,4.05945552 18.5444297,3.64111848 C17.7622075,3.22278146 16.9863205,3 14.8466755,3 L6.3880595,3 C6.46224202,2.80834445 6.54669936,2.63211874 6.64111848,2.45557032 C7.05945552,1.67334809 7.67334809,1.05945552 8.45557032,0.64111848 C9.23779253,0.222781464 10.0136795,0 12.1533245,0 L17.8466755,0 C19.9863205,0 20.7622075,0.222781464 21.5444297,0.64111848 C22.3266519,1.05945552 22.9405445,1.67334809 23.3588815,2.45557032 C23.7772185,3.23779253 24,4.0136795 24,6.15332448 L24,11.8466755 C24,13.9863205 23.7772185,14.7622075 23.3588815,15.5444297 C22.9405445,16.3266519 22.3266519,16.9405445 21.5444297,17.3588815 C21.3678813,17.4533006 21.1916556,17.5377581 21,17.6119404 Z M6.15332448,6 L11.8466755,6 C13.9863205,6 14.7622075,6.22278146 15.5444297,6.64111848 C16.3266519,7.05945552 16.9405445,7.67334809 17.3588815,8.45557032 C17.7772185,9.23779253 18,10.0136795 18,12.1533245 L18,17.8466755 C18,19.9863204 17.7772185,20.7622075 17.3588815,21.5444297 C16.9405445,22.3266518 16.3266519,22.9405445 15.5444297,23.3588815 C14.7622075,23.7772186 13.9863205,24 11.8466755,24 L6.15332448,24 C4.0136795,24 3.23779253,23.7772186 2.45557032,23.3588815 C1.67334809,22.9405445 1.05945551,22.3266518 0.64111849,21.5444297 C0.222781467,20.7622075 0,19.9863204 0,17.8466755 L0,12.1533245 C0,10.0136795 0.222781467,9.23779253 0.64111849,8.45557032 C1.05945551,7.67334809 1.67334809,7.05945552 2.45557032,6.64111848 C3.23779253,6.22278146 4.0136795,6 6.15332448,6 Z"},accessibilityLabel:i?t.bt("Icona del Pin", "Pin Icon", "legacyPinTypeIdentifier.ideaPinAccessibilityLabel.sce", undefined, true):t.bt("Icona Pin Idea", "Idea Pin Icon", "legacyPinTypeIdentifier.ideaPinAccessibilityLabel", undefined, true),size:12,color:"default"}),d&&(0,l.jsx)(a.xu,{marginStart:1,children:(0,l.jsx)(a.xv,{inline:!0,size:"100",weight:"bold",children:d})})]})}function c({color:e="#333",height:t}){const i=14*t/10;return(0,l.jsx)("svg",{width:i,height:t,viewBox:"3 3 18 18",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{fill:e,d:"M20.571 8.573h-3.428V12h1.714v1.715h-1.714v3.428h-1.714V6.86h5.142v1.714zM12 17.144V6.86h1.714v10.285H12zm-1.714-8.571H5.143v6.857H8.57v-1.714H6.857V12h3.429v5.143H3.429V6.86h6.857v1.714zM5.143 3.43A5.143 5.143 0 0 0 0 8.573v6.857a5.143 5.143 0 0 0 5.143 5.143h13.714A5.143 5.143 0 0 0 24 15.43V8.573a5.143 5.143 0 0 0-5.143-5.143H5.143z"})})}const u={__path:"M6 5h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm8 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1z"},h=({icon:e,i18n:t,ideaPinRenamingEnabled:i})=>{switch(e){case"arrow-up-right":return t.bt("Annuncio", "Promoted Pin", "Icon indicating this Pin is promoted", undefined, true);case"play":return t.bt("Pin video", "Video Pin", "Icon indicating this Pin is a video", undefined, true);case"gif":return t.bt("Pin GIF", "GIF Pin", "Icon indicating this Pin is a GIF", undefined, true);case"tag":return t.bt("Pin prodotto", "Product Pin", "Icon indicating this Pin is a product", undefined, true);case"star":return t.bt("Pin di ricette", "Recipe Pin", "Icon indicating this Pin is a recipe", undefined, true);case"story-pin":return i?t.bt("Pin", "Pin", "legacyPinTypeIdentifier.getLabel.ideaPinLabel.sce", undefined, true):t.bt("Pin Idea", "Idea Pin", "legacyPinTypeIdentifier.getLabel.ideaPinLabel", undefined, true);case"collage":return t.bt("Pin collage", "Collage Pin", "Icon indicating this Pin is a collage", undefined, true);default:return""}};function p({max_rating:e,icon:t,text:i,rating:s,pinId:p}){const _=(0,r.ZP)(),g=(0,o.Z)();let m;if(t)switch(t){case"star":m=(0,l.jsx)(n.Z,{rating:s||"",max_rating:e,width:10});break;case"gif":m=(0,l.jsx)(c,{height:10,color:"#333"});break;case"story-pin":m=(0,l.jsx)(d,{pinId:p||""});break;default:m=(0,l.jsx)(a.xu,{display:"flex",alignItems:"center",marginEnd:1,children:(0,l.jsx)(a.JO,{dangerouslySetSvgPath:"collage"===t?u:void 0,icon:"collage"===t?void 0:t,accessibilityLabel:h({icon:t,i18n:_,ideaPinRenamingEnabled:g}),color:"default",size:10,inline:!0})})}return(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[m,i&&(0,l.jsx)(a.xu,{marginStart:1,children:(0,l.jsx)(a.xv,{inline:!0,size:"200",children:i.trim().substring(0,25)})})]})}},123906:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{const i=new URL(e,"https://pinterest.com");return i.search=new URLSearchParams(t).toString(),i.toString().substring(i.origin.length)}},170168:(e,t,i)=>{i.d(t,{Ag:()=>s,C0:()=>l,Vi:()=>r,YD:()=>u,kS:()=>o,oo:()=>a,p3:()=>h,vC:()=>d,vI:()=>c});var n=i(401060);const o="https://www.pinterest.com/business/hub/",s="https://www.pinterest.com/homefeed/",r="www.pinterest.com",a="https://help.pinterest.com",l="https://www.pinterest.com",d=(0,n.Z)({site:"developers"}),c=`${(0,n.Z)({site:"sterling"})}`,u=`${(0,n.Z)({site:"analytics"})}`,h=`${(0,n.Z)({site:"www",path:"/product-catalogs/data-source/?advertiserId="})}`},934723:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(422586),o=i(966113);function s({advertiser:e,isAdsSite:t,isAnalyticsSite:i,isTrendsSite:s,baseUrl:r,adsUrl:a,isQuickPromote:l,isShoppingCatalogs:d}){if(t&&!e&&!l)return"/";let c=r;return(t||i||s)&&!d?(a||(a=r),e?(c=(0,n.Z)(a,e.id),t||(c=o.au+c)):c=t?a:o.au+c):d?c=o.au+(0,n.Z)(r,e?e.id:""):a||(c=o.au+r),c}},540794:(e,t,i)=>{i.d(t,{Z:()=>n});const n=()=>window.location.pathname},388619:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(704115);const o=({url:e})=>{if(e){const t=e.split("?");if(t[1])return(0,n.Z)(t[1])}return(0,n.Z)()}},149230:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(954931);const o=({url:e})=>!(!e||!e.match(/^https{0,1}:\/\//)||(0,n.Z)(e))},566101:(e,t,i)=>{i.d(t,{Z:()=>n});const n=({url:e})=>""===e||/^(https?:\/\/)?[a-z0-9_\-]+\..+/i.test(e)},327476:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(773285);function o(){const{checkExperiment:e}=(0,n.F)();return t=>e("web_transform_promoted_text").anyEnabled?t.replace(" ","  "):t}},50286:(e,t,i)=>{i.d(t,{HG:()=>u,Kf:()=>r,Mq:()=>o,Wb:()=>c,ZP:()=>h,dA:()=>a,ds:()=>l,ml:()=>d});var n=i(780280);function o(e){const{isMobile:t,isTablet:i}=e.userAgent;return i?"tablet":t?"phone":"desktop"}const s=()=>o((0,n.B)()),r=e=>"phone"===e,a=e=>"tablet"===e,l=e=>"desktop"===e,d=()=>r(s()),c=()=>a(s()),u=()=>l(s()),h=s},311541:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);function o(e,t){const i=(0,n.useRef)([]),[o,s]=(0,n.useState)(),[r,a]=(0,n.useReducer)(null!=o?o:()=>t,t),l=(0,n.useCallback)((t=>{o?a(t):(i.current.length||e().then((e=>{s((()=>e.default))})),i.current=[...i.current,t])}),[e,o]);return(0,n.useEffect)((()=>{o&&(i.current.forEach(a),i.current=[])}),[o]),[r,l]}},215292:(e,t,i)=>{i.d(t,{Z:()=>r,q:()=>s});var n=i(667294);const o=()=>{const[e,t]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1);return{active:e,focused:i,hovered:s,onBlur:()=>{o(!1),t(!1)},onFocus:()=>o(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>r(!0),onMouseLeave:()=>{r(!1),t(!1)},onMouseUp:()=>t(!1)}};function s({children:e}){return e(o())}const r=o},807609:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294);const o=()=>()=>{},s=()=>!1,r=()=>!0,a=()=>(0,n.useSyncExternalStore)(o,s,r)},19121:(e,t,i)=>{i.d(t,{$:()=>o,Z:()=>r});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("viewer"),r=s},216895:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{let i;return t.some((t=>{const n=t(e);return n.errors.length>0&&(i=n.errors[0],!0)})),i}},556663:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(883119),s=i(785893);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a={default:{backgroundColor:"#efefef",boxShadow:"none"},drag:{backgroundColor:"rgba(74, 144, 226, 0.08)",boxShadow:"0 0 0 1px #0074e8"},error:{backgroundColor:"rgba(230, 0, 35, 0.03)",boxShadow:"0 0 0 1px #e60023"}},l={error:{backgroundColor:"#FFE0E0",boxShadow:"0 0 0 2px #CC0000"}};class d extends n.Component{constructor(...e){super(...e),r(this,"state",{isDraggingOver:!1,isHoveringOver:!1}),r(this,"handleOnDragEnter",(e=>{const{onDragEnter:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!0}),t&&t(e)})),r(this,"handleOnDragLeave",(e=>{const{onDragLeave:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)})),r(this,"handleOnDragOver",(e=>{const{onDragOver:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e)})),r(this,"handleOnDrop",(e=>{const{onDrop:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)})),r(this,"handleMouseEnter",(()=>{const{onMouseEnter:e}=this.props;e&&e(),this.setState({isHoveringOver:!0})})),r(this,"handleMouseLeave",(()=>{const{onMouseLeave:e}=this.props;e&&e(),this.setState({isHoveringOver:!1})}))}getDragContainerStyles(e,t){const{experimentsClient:i}=this.props,n=null==i?void 0:i.checkExperiment("aid_exp_error_handling_pin_builder");return t&&"default"===e?{...a[e],backgroundColor:t}:n&&"error"===e?l[e]:a[e]}render(){const{children:e,color:t,dropRounding:i,hasError:n,height:r,position:a,width:l}=this.props,{isDraggingOver:d,isHoveringOver:c}=this.state,u=d?"drag":n?"error":"default";return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...this.getDragContainerStyles(u,t),...i?{borderRadius:i}:{}}},height:r||"100%","data-test-id":"drag-behavior-container",onDragEnter:this.handleOnDragEnter,onDragLeave:this.handleOnDragLeave,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:a,rounding:2,width:l,children:e(d,c)})}}},281139:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(556663),s=i(883119),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l={cursor:"pointer",height:"100%",opacity:0,position:"absolute",width:"100%",left:0,top:0,fontSize:0};class d extends n.Component{constructor(...e){super(...e),a(this,"handleChange",(e=>{const{onChange:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e),e.target.value=""})),a(this,"handleClick",(e=>{const{onClick:t}=this.props;t&&t(e)}))}render(){const{accept:e,accessibilityLabel:t,allowMultipleFiles:i,children:n,color:a,dropRounding:d,hasError:c,height:u,id:h,onDrop:p,position:_,rounding:g=2,width:m,isAriaHidden:f,experimentsClient:x}=this.props;return(0,r.jsx)(o.Z,{color:a,dropRounding:d,hasError:c,height:u,onDrop:p,position:_,width:m,experimentsClient:x,children:o=>(0,r.jsxs)(s.xu,{height:"100%",position:"relative",rounding:g,children:[n(o),(0,r.jsx)("input",{"aria-label":t,id:h,"data-test-id":h,style:l,type:"file",accept:e,onChange:this.handleChange,onClick:this.handleClick,multiple:i,"aria-hidden":f,tabIndex:f?-1:0})]})})}}},893446:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(214494);function o(e,{onSuccess:t,onError:i,onProcessingStarted:o,resolvedAfterProcessingStarted:s,delay:r=2e3}){let a,l,d=!1;const c=()=>{clearTimeout(l),clearTimeout(a)},u=()=>{d||n.Z.create("VIPResource",{upload_ids:[e]}).callGet().then((n=>{const{data:h}=n.resource_response;if(h[e]){const{status:n,signature:p,failure_code:_}=h[e];a||(a=setTimeout((()=>{d=!0,i("","registered_timeout")}),6e4)),l||(l=setTimeout((()=>{d=!0,i("","processing_timeout")}),3e5)),"processing"===n||"registered"===n?"processing"===n?(clearTimeout(a),o?s?(clearTimeout(l),o(p)):(o(p),setTimeout((()=>u()),r)):setTimeout((()=>u()),r)):setTimeout((()=>u()),r):"succeeded"===n?(c(),t(p)):(c(),i(`VIP status failure code: ${_}`,null))}else i("VIP upload ID was not returned",null)})).catch((()=>{i("VIP failure with checking status",null)}))};u()}},531245:(e,t,i)=>{i.d(t,{P7:()=>o,Zx:()=>a,sc:()=>r,ss:()=>s,xl:()=>n});const n=["image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/webp"],o=["bmp","gif","jpg","jpeg","png","tiff","webp"],s=["video/mp4","video/x-m4v","video/quicktime"],r=["mp4","m4v","mov"],a={border:"2px dashed #DADADA",borderRadius:"32px",pointerEvents:"none"}},41703:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(665866),o=i(349700),s=i(299295);const r=(e,t)=>t.nbt(["pixel", "pixel"], e, "pinBuilder.errorMessaging.pixel", true);function a(e,t,i,a){switch(e){case"FILE_UNRECOGNIZED_TYPE":return{dispatchId:i,id:"FILE_UNRECOGNIZED_TYPE",type:"error",message:t.bt("Il caricamento non  riuscito a causa del formato sbagliato.", "Your upload failed because it's the wrong format.", "vip.errorMessaging.message", undefined, true),blocking:!0};case"IMAGE_OVER_MAX_DIMENSIONS":return{dispatchId:i,id:"IMAGE_OVER_MAX_DIMENSIONS",type:"error",message:t.bt("Questa immagine  troppo grande per essere caricata. Carica un'immagine pi piccola.", "This image is too large and can't be uploaded. Please try a smaller image size.", "vip.errorMessaging.message", undefined, true),blocking:!0};case"IMAGE_UNDER_MIN_DIMENSIONS":const[e,l]=n.Z.enabled("pinQuality")?[300,200]:[100,100];return{dispatchId:i,id:"IMAGE_UNDER_MIN_DIMENSIONS",type:"error",message:(0,o.nk)(t.bt("Mmm... L'immagine  troppo piccola. Assicurati che le immagini abbiano dimensioni minime di {{ minWidth }} x {{ minHeight }} {{ pixelString }}.", "Hmm...this image is too small. Make sure your images are at least {{ minWidth }} x {{ minHeight }} {{ pixelString }}.", "vip.errorMessaging.minImageMessage", undefined, true),{minHeight:e,minWidth:l,pixelString:r(l,t)}).join(""),blocking:!0};case"IMAGE_OVER_MAX_FILE_SIZE":const d=20;return{dispatchId:i,id:"IMAGE_OVER_MAX_FILE_SIZE",type:"error",message:(0,o.nk)(t.nbt(["Questa immagine  troppo grande per essere caricata. Le immagini non possono superare {{max_size_mb}} MB", "Questa immagine  troppo grande per essere caricata. Le immagini non possono superare {{max_size_mb}} MB"], d, "vip.errorMessaging.message", true),{max_size_mb:d}).join(""),blocking:!0};case"IMAGE_UNRECOGNIZED_TYPE":return{dispatchId:i,id:"IMAGE_UNRECOGNIZED_TYPE",type:"error",message:t.bt("Questo tipo di immagine non  valido. Assicurati che il formato nativo dell'immagine sia .jpg o .png", "This image type is invalid - please make sure the image is natively .jpg or .png", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_UNDER_MIN_DIMENSIONS":return{dispatchId:i,id:"VIDEO_UNDER_MIN_DIMENSIONS",type:"error",message:(0,o.nk)(t.nbt(["Questo video  troppo piccolo per essere caricato. I video devono avere un'altezza e una larghezza superiori a {{min_size_video}} pixel", "Questo video  troppo piccolo per essere caricato. I video devono avere un'altezza e una larghezza superiori a {{min_size_video}} pixel"], 100, "vip.errorMessaging.message", true),{min_size_video:100}).join(""),blocking:!0};case"VIDEO_BELOW_MIN_DURATION":const c=Math.floor(4);return{dispatchId:i,id:"VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,o.nk)(t.nbt(["Questo video  troppo breve per essere caricato. I video non possono essere pi brevi di {{minVideoLengthSeconds}} secondo.", "Questo video  troppo breve per essere caricato. I video non possono essere pi brevi di {{minVideoLengthSeconds}} secondi."], c, "vip.errorMessaging.message", true),{minVideoLengthSeconds:c}).join(""),blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":const u=s.W_;return{dispatchId:i,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,o.nk)(t.nbt(["Questo video  troppo breve per essere caricato. I video non possono essere pi brevi di {{minStoryPinVideoLengthSeconds}} secondo.", "Questo video  troppo breve per essere caricato. I video non possono essere pi brevi di {{minStoryPinVideoLengthSeconds}} secondi."], u, "vip.errorMessaging.storyPinVideoBelowMin.message", true),{minStoryPinVideoLengthSeconds:u}).join(""),blocking:!0};case"VIDEO_COVER_INVALID_ASPECT_RATIO":return{dispatchId:i,id:"VIDEO_COVER_INVALID_ASPECT_RATIO",type:"error",message:t.bt("L'immagine di copertina del video deve avere le stesse dimensioni del video", "The video's cover image must be of the same dimensions as the video itself", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_GENERAL_UPLOAD_ERROR":return{dispatchId:i,id:"VIDEO_GENERAL_UPLOAD_ERROR",type:"error",message:t.bt("Il caricamento non  andato a buon fine per qualche ragione. Riprova.", "Hmm, your upload failed for some reason. Please try again.", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_OVER_MAX_DURATION":const h=15;return{dispatchId:i,id:"VIDEO_OVER_MAX_DURATION",type:"error",message:(0,o.nk)(t.nbt(["Questo video  troppo lungo per essere caricato. I video non possono essere pi lunghi di {{max_video_length_minutes}} minuto.", "Questo video  troppo lungo per essere caricato. I video non possono essere pi lunghi di {{max_video_length_minutes}} minuti."], h, "vip.errorMessaging.message", true),{max_video_length_minutes:h}).join(""),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_DURATION":return{dispatchId:i,id:"STORY_PIN_VIDEO_OVER_MAX_DURATION",type:"error",message:(0,o.nk)(t.bt("Questo video  troppo lungo per essere caricato. I video non possono durare pi di {{max_video_length_seconds}} secondi.", "This video is too long and can't be uploaded. Videos can't be longer than {{max_video_length_seconds}} seconds.", "vip.errorMessaging.message", undefined, true),{max_video_length_seconds:Math.floor(s.P9)}).join(""),blocking:!0};case"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION":const p=Math.floor(s.FH)/60;return{dispatchId:i,id:"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION",type:"error",message:(0,o.nk)(t.bt("Questo video  troppo lungo per essere caricato. I video non possono essere pi lunghi di {{duration}} minuti.", "This video is too long and can't be uploaded. Videos can't be longer than {{duration}} minutes.", "vip.errorMessaging.storyPinMaxTimeLimit", undefined, true),{duration:p}).join(""),blocking:!0};case"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN":const _=Math.floor(null!=a?a:s.FH)/60;return{dispatchId:i,id:"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN",type:"error",message:(0,o.nk)(t.bt("Questo video  troppo lungo per essere caricato. I video non possono essere pi lunghi di {{duration}} minuti.", "This video is too long and can't be uploaded. Videos can't be longer than {{duration}} minutes.", "vip.errorMessaging.storyPinMaxTimeLimit", undefined, true),{duration:_}).join(""),blocking:!0};case"VIDEO_OVER_MAX_FILE_SIZE":const g=2;return{dispatchId:i,id:"VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,o.nk)(t.nbt(["Questo video  troppo grande per essere caricato. I video non possono superare {{max_video_size_gb}} GB.", "Questo video  troppo grande per essere caricato. I video non possono superare {{max_video_size_gb}} GB."], g, "vip.errorMessaging.message", true),{max_video_size_gb:g}).join(""),blocking:!0};case"VIDEO_UNRECOGNIZED_ENCODING":return{dispatchId:i,id:"VIDEO_UNRECOGNIZED_ENCODING",type:"error",message:t.bt("Questo video non  codificato in H.264", "This video isn't encoded in H.264", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_UNSUPPORTED_RATIO":return{dispatchId:i,id:"VIDEO_UNSUPPORTED_RATIO",type:"error",message:t.bt("Questo video  troppo alto o stretto e non pu essere caricato. I video devono avere proporzioni comprese tra 1:2 e 1:91:1.", "This video is too tall or narrow and can't be uploaded. Videos need to be between 1:2 and 1.91:1 aspect ratio.", "vip.errorMessaging.message", undefined, true),blocking:!0};default:return{dispatchId:i,id:"GENERAL_ERROR",type:"error",message:t.bt("Spiacenti, si  verificato un errore. Riprova.", "Hmm, something went wrong. Please try again.", "vip.errorMessaging.message", undefined, true),blocking:!0}}}},62087:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(41703),o=i(172045);const s=e=>t=>new Promise(((i,s)=>{const r=new Image;r.addEventListener("load",(()=>i({fileSrc:t,height:r.height,id:(0,o.Z)(),name:t.name,size:t.size,src:r.src,type:"localImage",width:r.width}))),r.addEventListener("error",(()=>(e=>t=>t((0,n.Z)("IMAGE_UNRECOGNIZED_TYPE",e)))(e)(s))),r.src=URL.createObjectURL(t)}))},275988:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(41703),o=i(172045);const s=e=>t=>new Promise(((i,s)=>{const r=new FileReader,a=URL.createObjectURL(t);r.addEventListener("load",(()=>{const r=document.createElement("video");r.addEventListener("loadedmetadata",(()=>i({id:(0,o.Z)(),duration:r.duration,fileSrc:t,height:r.videoHeight,name:t.name,size:t.size,src:r.src,thumbnail:0,type:"localVideo",width:r.videoWidth}))),r.addEventListener("error",(()=>(e=>t=>t((0,n.Z)("VIDEO_UNRECOGNIZED_ENCODING",e)))(e)(s))),r.src=a})),r.readAsDataURL(t)}))},471155:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(893446),o=i(214494);const s=[200,201,204];function r(e,t,i=!0,r,a){return new Promise(((l,d)=>{const c={type:t,aux_data:a};o.Z.create("VIPResource",c).callCreate().then((o=>{const{onCancelUpload:a,onFailureUpload:c,onFinishProcessing:u,onFinishUpload:h,onProgress:p,onStartProcessing:_,onStartUpload:g,setXhr:m}=r||{},{upload_id:f,upload_url:x,upload_parameters:b}=o.resource_response.data,y=e.size,v=new Date;g&&g({fileSizeBytes:y,uploadId:f});const P=(e,t)=>{c&&c({failureReason:t,fileSizeBytes:y,message:e,uploadId:f}),d({isError:!0,uploadId:f})},w=new XMLHttpRequest;w.open("POST",x,!0),w.onabort=()=>{a&&a(f),d({isError:!1,uploadId:f})},w.onload=()=>{if(s.includes(w.status)){const e=new Date,o=(e-v)/1e3;if(h){const e=w.getResponseHeader("x-amz-request-id"),t=w.getResponseHeader("x-amz-id-2");h({amzId2:t,amzRequestId:e,statusCode:w.status,uploadId:f,uploadTime:o})}const s=e=>(_&&_({signature:e,uploadId:f}),i?l({signature:e,uploadId:f}):void 0);(0,n.Z)(f,{onProcessingStarted:s,delay:t.includes("image")?2e3:8e3,onError:P,onSuccess:t=>{const i=(new Date-e)/1e3;return u&&u({fileSizeBytes:y,processingTime:i,signature:t,uploadId:f,uploadTime:o}),l({signature:t,uploadId:f})},resolvedAfterProcessingStarted:i})}else P(`XHR failure status code: ${w.status}`,null)},w.onerror=()=>{w.abort()},p&&(w.upload.onprogress=p),m&&m(w);const I=new FormData;Object.keys(b).forEach((e=>{I.append(e,b[e])})),I.append("file",e),w.send(I)})).catch((e=>{d({isError:!0})}))}))}},123463:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(41703),o=i(62087),s=i(665866),r=i(451105);function a(e,t,i,a){return i.size>20971520?Promise.resolve((0,n.Z)("IMAGE_OVER_MAX_FILE_SIZE",e)):(0,o.Z)(e)(i).then((i=>function(e,t,i,n){const[o,a]=s.Z.enabled("pinQuality")?[300,200]:[100,100],l=(null==n?void 0:n.minHeight)||o,d=(null==n?void 0:n.minWidth)||a;return i.height*i.width>89478485?(0,r.ZP)({errorId:"IMAGE_OVER_MAX_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t}):i.height<l||i.width<d?(0,r.ZP)({errorId:"IMAGE_UNDER_MIN_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t}):i}(e,t,i,a))).catch((e=>e))}var l=i(275988),d=i(299295);const c="enabled_min",u="employees_min";function h(e,t,i){const{forStoryPin:o,allowAllAspectRatios:r}=i||{},a=!!o,l=!!r,h=a&&s.Z.enabled("ideaPinExtendVideoLength"),p=h&&s.Z.enabled("ideaPinExtendVideoLengthAboveTwoMin"),_=(()=>{if(p){const e=s.Z.getExperimentGroup("ideaPinExtendVideoLengthAboveTwoMin");if(e){const t=function(e){return e.startsWith(c)&&e.length>c.length?parseInt(e.substring(c.length),10):e.startsWith(u)&&e.length>u.length?parseInt(e.substring(u.length),10):-1}(e);if(t>0)return 60*t+.5}}return h?d.FH:d.P9})(),g=a?d.W_:4,m=a?_:900;if(t.duration<g)return(0,n.Z)(a?"STORY_PIN_VIDEO_BELOW_MIN_DURATION":"VIDEO_BELOW_MIN_DURATION",e);if(t.duration>m){const t=p?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN":h?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION":"STORY_PIN_VIDEO_OVER_MAX_DURATION";return(0,n.Z)(a?t:"VIDEO_OVER_MAX_DURATION",e,void 0,_)}return t.width&&t.height?!l&&(t.width/t.height<.5||t.width/t.height>1.91)?(0,n.Z)("VIDEO_UNSUPPORTED_RATIO",e):t.width<100||t.height<100?(0,n.Z)("VIDEO_UNDER_MIN_DIMENSIONS",e):t:(0,n.Z)("VIDEO_UNRECOGNIZED_ENCODING",e)}var p=i(531245);function _({i18n:e,file:t,options:i,ideaPinRenamingEnabled:o}){const{allowVideo:s,videoOnly:r}=i||{};return p.ss.includes(t.type)&&s?function(e,t,i){const{forStoryPin:o}=i||{},s=o?d.Lr:2147483648;return t.size>s?Promise.resolve((0,n.Z)(o?"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":"VIDEO_OVER_MAX_FILE_SIZE",e)):(0,l.Z)(e)(t).then((t=>h(e,t,i))).catch((e=>e))}(e,t,i):p.xl.includes(t.type)&&!r?a(e,o,t,i):Promise.resolve((0,n.Z)("FILE_UNRECOGNIZED_TYPE",e))}},77891:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(123463);function o({i18n:e,files:t,options:i,ideaPinRenamingEnabled:o}){return Promise.all(t.map((t=>(0,n.Z)({i18n:e,file:t,options:i,ideaPinRenamingEnabled:o}))))}},229428:(e,t,i)=>{function n(e){return e.filter((e=>e.is_stela))}function o(e){return e.filter((e=>!!e.label))}i.d(t,{k:()=>n,m:()=>o})},9034:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{ZP:()=>a,f7:()=>o,y$:()=>s});const o=" > ",s=(e,t)=>t?`${t}${o}${e}`:e,r=(e,t)=>e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0;const a=class{constructor(){n(this,"nodeMap",{}),n(this,"treeRoot",null),n(this,"getNodeMap",(()=>this.nodeMap)),n(this,"getNode",(e=>this.nodeMap[e]||null)),n(this,"getRoot",(()=>this.treeRoot)),n(this,"getPreOrderListTree",(()=>this.preOrderListTree)),n(this,"getRecursivelyOpenTreeFromNode",(e=>{let t=[];if(e.isExpanded){const i=[],n=e.children||[],o=n.filter((e=>e.numChildren>0)),s=n.filter((e=>0===e.numChildren)),a=o.sort(r),l=s.sort(r);[].concat(l,a).forEach((e=>{const t=this.getNode(e.fullyQualifiedPath);t&&i.push(t)}),this),i.forEach(((e,i)=>{t=t.concat([e],this.getRecursivelyOpenTreeFromNode(e))}),this)}return t})),n(this,"collapseAllChildrenNodes",(e=>{var t;e&&(e.isExpanded=!1,null===(t=e.children)||void 0===t||t.forEach((e=>{this.collapseAllChildrenNodes(e)})))})),n(this,"populatePreOrderListTree",(e=>{const t=[],i=e=>{var n;t.push(e),null===(n=e.children)||void 0===n||n.forEach((e=>{i(e)}))};return i(null!=e?e:this.getRoot()),this.preOrderListTree=t,t})),n(this,"constructChildTree",(({displayName:e,curData:t,parent:i,initialSelectedStatus:n="NOT_SELECTED",selectLeaves:o=!1,ordered:r=!1})=>{const a=s(e,i&&i.fullyQualifiedPath),l={displayName:e,fullyQualifiedPath:a,parent:i,children:null,numChildren:0,numFullySelectedChildren:0,numPartiallySelectedChildren:0,selectedStatus:n,isExpanded:!1,level:i?i.level+1:0,expandOnSelect:!1};if(Object.keys(t).length>0){let e=new Map([...Object.entries(t)]);r&&(e=new Map([...Object.entries(t)].sort()));const i=[];for(const[t,s]of e)i.push(this.constructChildTree({displayName:t,curData:s,parent:l,initialSelectedStatus:n,selectLeaves:o}));l.children=i,l.numChildren=i.length}else o&&(l.selectedStatus="FULLY_SELECTED");return this.nodeMap[a]=l,l})),n(this,"partiallySelect",(e=>{if("NOT_SELECTED"===e.selectedStatus){e.selectedStatus="PARTIALLY_SELECTED";const t=e.parent;t&&(t.numPartiallySelectedChildren+=1,this.partiallySelect(t))}})),n(this,"select",((e,t=!1,i=!1,n=!1)=>{if("FULLY_SELECTED"===e.selectedStatus)return e;if(e.children&&!t){const o=n&&!t&&!i;e.children.forEach((e=>this.select(e,!1,!0,o)))}n&&(e.isExpanded=!0);const o=e.parent;return o&&(o.numFullySelectedChildren+=1,"PARTIALLY_SELECTED"===e.selectedStatus&&(o.numPartiallySelectedChildren-=1),i||(o.numFullySelectedChildren===o.numChildren?this.select(o,!0,!1):this.partiallySelect(o))),e.selectedStatus="FULLY_SELECTED",e})),n(this,"partiallyDeselect",(e=>{if("PARTIALLY_SELECTED"!==e.selectedStatus&&"FULLY_SELECTED"===e.selectedStatus){e.selectedStatus="PARTIALLY_SELECTED";const t=e.parent;t&&(t.numFullySelectedChildren-=1,t.numPartiallySelectedChildren+=1,"FULLY_SELECTED"===t.selectedStatus&&this.partiallyDeselect(t))}})),n(this,"deselect",((e,t=!1,i=!1)=>{if("NOT_SELECTED"===e.selectedStatus)return e;e.children&&!t&&e.children.forEach((e=>this.deselect(e,!1,!0)));const n=e.parent;return n&&("FULLY_SELECTED"===e.selectedStatus?n.numFullySelectedChildren-=1:"PARTIALLY_SELECTED"===e.selectedStatus&&(n.numPartiallySelectedChildren-=1),i||(0===n.numFullySelectedChildren&&0===n.numPartiallySelectedChildren?this.deselect(n,!0,!1):"FULLY_SELECTED"===e.selectedStatus&&this.partiallyDeselect(n))),e.selectedStatus="NOT_SELECTED",e})),n(this,"updateFilterTree",((e,{expandChildrenOnSelect:t=!0}={})=>{const i=this.getNode(e);i&&("PARTIALLY_SELECTED"===i.selectedStatus||"FULLY_SELECTED"===i.selectedStatus?this.deselect(i):this.select(i,!1,!1,t))})),n(this,"updateTreeWithAPISelectedFilter",((e,t="")=>{if(e){const i=Object.keys(e);if(i.length>0)i.forEach((i=>{const n=e[i],o=s(i,t);this.updateTreeWithAPISelectedFilter(n,o)}));else{const e=this.getNode(t);e&&this.select(e)}}})),n(this,"createShallowTreeFromAPISelectedFilters",((e,t)=>(this.treeRoot=this.constructChildTree({displayName:e,curData:t,parent:null,initialSelectedStatus:"PARTIALLY_SELECTED",selectLeaves:!0}),this.treeRoot))),n(this,"assignNewTree",((e,t)=>{t&&(this.treeRoot=e),this.nodeMap[e.fullyQualifiedPath]=e,e.children&&e.children.forEach((e=>this.assignNewTree(e,!1)))})),n(this,"createFilterTree",((e,t,i=!1)=>(this.treeRoot=this.constructChildTree({displayName:e,curData:t,parent:null,ordered:i}),this.treeRoot)))}}},306732:(e,t,i)=>{i.d(t,{Be:()=>a,DD:()=>w,EK:()=>l,Eo:()=>_,Gv:()=>le,HK:()=>X,J_:()=>ae,KO:()=>D,MD:()=>O,MU:()=>R,PD:()=>M,Pf:()=>oe,QE:()=>A,QX:()=>U,R0:()=>$,S8:()=>se,V0:()=>m,VO:()=>ie,WH:()=>T,XT:()=>y,Y3:()=>c,aF:()=>N,aZ:()=>n,bS:()=>g,cU:()=>I,cm:()=>V,d0:()=>P,eu:()=>p,g2:()=>E,gd:()=>C,h1:()=>F,h8:()=>s,hh:()=>v,iu:()=>q,j0:()=>ne,j1:()=>B,k7:()=>Y,kc:()=>h,kl:()=>u,kq:()=>f,l5:()=>x,pA:()=>re,pF:()=>L,pM:()=>k,pV:()=>b,ps:()=>r,q9:()=>d,qB:()=>W,qf:()=>ee,r2:()=>S,rC:()=>z,rD:()=>Q,sG:()=>Z,ss:()=>te,t7:()=>J,ul:()=>o,vr:()=>K,wZ:()=>G,yA:()=>H,yq:()=>j});const n=864e5,o={IN_STOCK:"in stock",OUT_OF_STOCK:"out of stock",PREORDER:"preorder"},s={NEW:"new",USED:"used",REFURBISHED:"refurbished"},r={MALE:"male",FEMALE:"female",UNISEX:"unisex"},a={1:"All Products",2:"Best Deals",3:"Most Popular",4:"Top Sellers",5:"Back In Stock",6:"New Arrivals"},l={FEATURED:"FEATURED",CAN_FEATURE:"CAN_FEATURE",FEATURING:"FEATURING",NO_FILTERS:"NO_FILTERS",TOO_FEW_PRODUCTS:"TOO_FEW_PRODUCTS",TOO_FEW_UNIQUE_PRODUCTS:"TOO_FEW_UNIQUE_PRODUCTS",TOO_MANY_PRODUCTS:"TOO_MANY_PRODUCTS",MAX_GROUPS_FEATURED:"MAX_GROUPS_FEATURED",UNFEATUREABLE:"UNFEATUREABLE"},d=[1,2,3,4,5,6,7,8],c=[1,2,3,4,5,6,8],u=[1,2,3,4,5,6,7,0,8],h=90,p=350,_=72,g=450,m=200,f=12,x=114,b={MERCHANT_CREATED:"MERCHANT_CREATED",ALL_PRODUCTS:"ALL_PRODUCTS"},y={FEATUREABLE:1,UNFEATUREABLE_NOT_ENOUGH_PINS:2,UNFEATUREABLE_NOT_ENOUGH_UNIQUE_PINS:3,UNFEATUREABLE_EXCEEDED_PINS_LIMIT:4},v={ITEM_ID:"Item ID",PRODUCT_CATEGORY:"Category",PRODUCT_TYPE:"Product type",BRANDS:"Brands",COST:"Cost",CUSTOM_LABEL:"Custom",CUSTOM_LABEL_0:"Custom label 0",CUSTOM_LABEL_1:"Custom label 1",CUSTOM_LABEL_2:"Custom label 2",CUSTOM_LABEL_3:"Custom label 3",CUSTOM_LABEL_4:"Custom label 4",AVAILABILITY:"Availability",PRICE:"Price",GENDER:"Gender",CONDITION:"Condition",CURRENCY:"Currency",ITEM_GROUP_ID:"Item group ID"},P=[v.PRODUCT_CATEGORY,v.PRODUCT_TYPE,v.BRANDS,v.CUSTOM_LABEL_0,v.CUSTOM_LABEL_1,v.CUSTOM_LABEL_2,v.CUSTOM_LABEL_3,v.CUSTOM_LABEL_4],w={[v.ITEM_ID]:["ITEM_ID"],[v.ITEM_GROUP_ID]:["ITEM_GROUP_ID"],[v.PRODUCT_CATEGORY]:["GOOGLE_PRODUCT_CATEGORY_0"],[v.PRODUCT_TYPE]:["PRODUCT_TYPE_0"],[v.COST]:["MIN_PRICE","MAX_PRICE"],[v.BRANDS]:["BRAND"],[v.CUSTOM_LABEL]:["CUSTOM_LABEL_0","CUSTOM_LABEL_1","CUSTOM_LABEL_2","CUSTOM_LABEL_3","CUSTOM_LABEL_4"],[v.AVAILABILITY]:["AVAILABILITY"],[v.CONDITION]:["CONDITION"],[v.GENDER]:["GENDER"]},I=[v.CUSTOM_LABEL,v.COST,v.CURRENCY],A={1:o.IN_STOCK,2:o.OUT_OF_STOCK,3:o.PREORDER},E={1:s.NEW,2:s.USED,3:s.REFURBISHED},C={1:r.MALE,2:r.FEMALE,3:r.UNISEX},S={1:v.ITEM_ID,5:v.PRODUCT_CATEGORY,12:v.PRODUCT_TYPE,3:v.BRANDS,2:v.AVAILABILITY,17:v.CUSTOM_LABEL_0,18:v.CUSTOM_LABEL_1,19:v.CUSTOM_LABEL_2,20:v.CUSTOM_LABEL_3,21:v.CUSTOM_LABEL_4,4:v.CONDITION,25:v.GENDER,22:v.PRICE,23:v.PRICE,26:v.CURRENCY,24:v.ITEM_GROUP_ID},j={[v.ITEM_ID]:1,[v.PRODUCT_CATEGORY]:5,[v.PRODUCT_TYPE]:12,[v.BRANDS]:3,[v.AVAILABILITY]:2,[v.CUSTOM_LABEL_0]:17,[v.CUSTOM_LABEL_1]:18,[v.CUSTOM_LABEL_2]:19,[v.CUSTOM_LABEL_3]:20,[v.CUSTOM_LABEL_4]:21,[v.CONDITION]:4,[v.GENDER]:25,[v.PRICE]:23,[v.CURRENCY]:26,[v.ITEM_GROUP_ID]:24},T={GREATER_INCLUSION:"0",GREATER_EXCLUSION:"1",LESS_INCLUSION:"2",LESS_EXCLUSION:"3"},D={[T.GREATER_EXCLUSION]:{filterType:22,filterOperator:{negated:!1,inclusion:!1}},[T.GREATER_INCLUSION]:{filterType:22,filterOperator:{negated:!1,inclusion:!0}},[T.LESS_EXCLUSION]:{filterType:23,filterOperator:{negated:!1,inclusion:!1}},[T.LESS_INCLUSION]:{filterType:23,filterOperator:{negated:!1,inclusion:!0}}},k="newlyCreatedPGId",z="storefront",O={campaignId:"createNewCampaign",objectiveType:"CATALOG_SALES",absolutify:!0},R=163,L=350,M={LIST:"LIST",GRID:"GRID"},B="236x",N=23,F=164,Z=256,U=112,V="calc(100vh - 175px)",H=75,G=200,W=40,$={PRODUCT_GROUP_NAME:"PRODUCT_GROUP_NAME",PRODUCT_COUNT:"PRODUCT_COUNT",PRODUCT_AVAILABILITY:"PRODUCT_AVAILABILITY",LAST_UPDATE:"LAST_UPDATE",PRODUCT_GROUP_PROMOTED:"PRODUCT_GROUP_PROMOTED",PRODUCT_GROUP_FEATURED:"PRODUCT_GROUP_FEATURED",PRODUCT_GROUP_ACTIONS:"PRODUCT_GROUP_ACTIONS",PG_METRIC:"PG_METRIC",PRODUCT_GROUP_COUNTRY:"PRODUCT_GROUP_COUNTRY"},q=500,Y=20,X=40,K=100,J=4,Q={DELETE_FAILED:"DELETE_FAILED",DELETE_SUCCESSFULLY:"DELETE_SUCCESSFULLY",REMOVE_SUCCESSFULLY:"REMOVE_SUCCESSFULLY"},ee={ALL:"ALL",MIXED:"MIXED",FEED_PROFILE:"FEED_PROFILE"},te="US",ie="selectedCountryKey",ne="selectedFeedProfileId",oe="NEXT_BUTTON",se="PRODUCT_GROUP_NAME_INPUT",re="APPLY_FILTER_BUTTON",ae="activated",le="SIMILARLY_PRICED_PG_GUIDANCE_ID"},572621:(e,t,i)=>{i.d(t,{Wq:()=>g,WO:()=>A,vO:()=>I,Lq:()=>S,Nh:()=>T,ii:()=>N,bV:()=>F,sq:()=>B,P4:()=>m,yY:()=>j,of:()=>x,_S:()=>z,Iw:()=>R,i9:()=>w,WU:()=>f,LM:()=>D,l_:()=>M,Eh:()=>Z,G6:()=>O,DC:()=>P,RZ:()=>C,$H:()=>E,vC:()=>v,Ei:()=>y,fG:()=>b,VT:()=>L,qF:()=>k});var n=i(458451);const o={ITEM_ID:1,AVAILABILITY:2,BRAND:3,CONDITION:4,GOOGLE_PRODUCT_CATEGORY_0:5,GOOGLE_PRODUCT_CATEGORY_1:6,GOOGLE_PRODUCT_CATEGORY_2:7,GOOGLE_PRODUCT_CATEGORY_3:8,GOOGLE_PRODUCT_CATEGORY_4:9,GOOGLE_PRODUCT_CATEGORY_5:10,GOOGLE_PRODUCT_CATEGORY_6:11,PRODUCT_TYPE_0:12,PRODUCT_TYPE_1:13,PRODUCT_TYPE_2:14,PRODUCT_TYPE_3:15,PRODUCT_TYPE_4:16,CUSTOM_LABEL_0:17,CUSTOM_LABEL_1:18,CUSTOM_LABEL_2:19,CUSTOM_LABEL_3:20,CUSTOM_LABEL_4:21,MIN_PRICE:22,MAX_PRICE:23,ITEM_GROUP_ID:24,GENDER:25,CURRENCY:26,COUNTRY:27};var s=i(150361),r=i.n(s),a=i(618446),l=i.n(a),d=i(170528),c=i(349700),u=i(844974),h=i(306732),p=i(9034);const _=e=>h.DD[e]?h.DD[e].map((e=>o[e])):[],g=(e,t)=>({[h.ul.IN_STOCK]:t.bt("in stock", "in stock", "Catalogs.ProductGroups.availabilityType.inStock", undefined, true),[h.ul.OUT_OF_STOCK]:t.bt("non disponibile", "out of stock", "Catalogs.ProductGroups.availabilityType.outOfStock", undefined, true),[h.ul.PREORDER]:t.bt("preordine", "preorder", "Catalogs.ProductGroups.availabilityType.preorder", undefined, true)}[e]),m=(e,t)=>{switch(e){case h.hh.PRODUCT_CATEGORY:return t.bt("Categoria", "Category", "FilterType.Category.filterType", undefined, true);case h.hh.PRODUCT_TYPE:return t.bt("Tipo di prodotto", "Product type", "FilterType.Product.filterType", undefined, true);case h.hh.COST:return t.bt("Costo", "Cost", "FilterType.Cost.filterType", undefined, true);case h.hh.BRANDS:return t.bt("Brand", "Brands", "FilterType.Brands.filterType", undefined, true);case h.hh.CUSTOM_LABEL:return t.bt("Personalizzato", "Custom", "FilterType.Custom.filterType", undefined, true);case h.hh.ITEM_ID:return t.bt("ID articolo", "Item ID", "FilterType.ItemID.filterType", undefined, true);case h.hh.CUSTOM_LABEL_0:return t.bt("Etichetta personalizzata 0", "Custom label 0", "FilterType.CustomLabel0.filterType", undefined, true);case h.hh.CUSTOM_LABEL_1:return t.bt("Etichetta personalizzata 1", "Custom label 1", "FilterType.CustomLabel1.filterType", undefined, true);case h.hh.CUSTOM_LABEL_2:return t.bt("Etichetta personalizzata 2", "Custom label 2", "FilterType.CustomLabel2.filterType", undefined, true);case h.hh.CUSTOM_LABEL_3:return t.bt("Etichetta personalizzata 3", "Custom label 3", "FilterType.CustomLabel3.filterType", undefined, true);case h.hh.CUSTOM_LABEL_4:return t.bt("Etichetta personalizzata 4", "Custom label 4", "FilterType.CustomLabel4.filterType", undefined, true);case h.hh.AVAILABILITY:return t.bt("Disponibilit", "Availability", "FilterType.Availability.filterType", undefined, true);case h.hh.PRICE:return t.bt("Prezzo", "Price", "FilterType.Price.filterType", undefined, true);case h.hh.GENDER:return t.bt("Genere", "Gender", "FilterType.Gender.filterType", undefined, true);case h.hh.CONDITION:return t.bt("Condizione", "Condition", "FilterType.Condition.filterType", undefined, true);case h.hh.CURRENCY:return t.bt("Valuta", "Currency", "FilterType.Currency.filterType", undefined, true);case h.hh.ITEM_GROUP_ID:return t.bt("ID gruppo di articoli", "Item group ID", "FilterType.ItemGroupID.filterType", undefined, true);default:return t.bt("Tipo sconosciuto", "Unknown Type", "FilterType.Unknown.filterType", undefined, true)}},f=(e,t,i,n)=>{if("number"!=typeof t)return"";const o=((e,t)=>23===e?null!=t&&t.inclusion?"<=":"<":22===e?null!=t&&t.inclusion?">=":">":"")(e,i);return(0,c.Wc)(n.bt("Prezzo ({{operator}} {{price}})", "Price ({{operator}} {{price}})", "catalogs.productGroup.filterValueDropdown.selectedValue", undefined, true),{operator:o,price:"number"==typeof t?`${t}`:""})},x=(e,t,i)=>{var o,s,r;switch(t){case 2:return(0,n.Z)(null!==(o=g(h.QE[Number(e)],i))&&void 0!==o?o:i.bt("Tipo sconosciuto", "Unknown Type", "Catalogs.AvailabilityType.Unknown", undefined, true));case 4:return(0,n.Z)(null!==(s=((e,t)=>({[h.h8.NEW]:t.bt("nuovo", "new", "Catalogs.ProductGroups.contitionType.new", undefined, true),[h.h8.USED]:t.bt("usato", "used", "Catalogs.ProductGroups.contitionType.used", undefined, true),[h.h8.REFURBISHED]:t.bt("ricondizionato", "refurbished", "Catalogs.ProductGroups.contitionType.refurbished", undefined, true)}[e]))(h.g2[Number(e)],i))&&void 0!==s?s:i.bt("Tipo sconosciuto", "Unknown Type", "Catalogs.ProductGroups.conditionType.Unknown", undefined, true));case 25:return(0,n.Z)(null!==(r=((e,t)=>({[h.ps.MALE]:t.bt("maschio", "male", "Catalogs.ProductGroups.genderType.male", undefined, true),[h.ps.FEMALE]:t.bt("female", "female", "Catalogs.ProductGroups.genderType.female", undefined, true),[h.ps.UNISEX]:t.bt("unisex", "unisex", "Catalogs.ProductGroups.genderType.unisex", undefined, true)}[e]))(h.gd[Number(e)],i))&&void 0!==r?r:i.bt("Tipo sconosciuto", "Unknown Type", "Catalogs.ProductGroups.genderType.Unknown", undefined, true));default:return e}},b=(e,t=[])=>e.map(((e,i)=>((e,t=!1,i)=>({displayName:e,checked:t,index:i,key:e}))(e,t.includes(e),i))),y=e=>e?{[h.hh.ITEM_ID]:e[_(h.hh.ITEM_ID)[0]]||[],[h.hh.ITEM_GROUP_ID]:e[_(h.hh.ITEM_GROUP_ID)[0]]||[],[h.hh.PRODUCT_CATEGORY]:e[_(h.hh.PRODUCT_CATEGORY)[0]]||{},[h.hh.PRODUCT_TYPE]:e[_(h.hh.PRODUCT_TYPE)[0]]||{},[h.hh.BRANDS]:e[_(h.hh.BRANDS)[0]]||[],[h.hh.CUSTOM_LABEL_0]:e[_(h.hh.CUSTOM_LABEL)[0]]||[],[h.hh.CUSTOM_LABEL_1]:e[_(h.hh.CUSTOM_LABEL)[1]]||[],[h.hh.CUSTOM_LABEL_2]:e[_(h.hh.CUSTOM_LABEL)[2]]||[],[h.hh.CUSTOM_LABEL_3]:e[_(h.hh.CUSTOM_LABEL)[3]]||[],[h.hh.CUSTOM_LABEL_4]:e[_(h.hh.CUSTOM_LABEL)[4]]||[],[h.hh.AVAILABILITY]:e[_(h.hh.AVAILABILITY)[0]]||[],[h.hh.GENDER]:e[_(h.hh.GENDER)[0]]||[],[h.hh.CONDITION]:e[_(h.hh.CONDITION)[0]]||[]}:{},v=e=>!h.d0.includes(e),P=e=>!h.cU.includes(e),w=e=>{if(!e)return[];const t=[];return h.d0.forEach((i=>{var n,o,s,r,a,l,d;switch(i){case h.hh.PRODUCT_CATEGORY:case h.hh.PRODUCT_TYPE:Object.keys(null!==(n=e[_(i)])&&void 0!==n?n:{}).length>0&&t.push(i);break;case h.hh.CUSTOM_LABEL_0:(null!==(o=e[_(h.hh.CUSTOM_LABEL)[0]])&&void 0!==o?o:[]).length>0&&t.push(i);break;case h.hh.CUSTOM_LABEL_1:(null!==(s=e[_(h.hh.CUSTOM_LABEL)[1]])&&void 0!==s?s:[]).length>0&&t.push(i);break;case h.hh.CUSTOM_LABEL_2:(null!==(r=e[_(h.hh.CUSTOM_LABEL)[2]])&&void 0!==r?r:[]).length>0&&t.push(i);break;case h.hh.CUSTOM_LABEL_3:(null!==(a=e[_(h.hh.CUSTOM_LABEL)[3]])&&void 0!==a?a:[]).length>0&&t.push(i);break;case h.hh.CUSTOM_LABEL_4:(null!==(l=e[_(h.hh.CUSTOM_LABEL)[4]])&&void 0!==l?l:[]).length>0&&t.push(i);break;default:(null!==(d=e[_(i)])&&void 0!==d?d:[]).length>0&&t.push(i)}})),t},I=(e=[],t=null)=>{const i=[];return e.forEach((e=>{if("NOT_SELECTED"!==e.selectedStatus)if("FULLY_SELECTED"!==e.selectedStatus||e!==t&&e.children){if(e.children&&e.children.length){const n=I(e.children,t);n.length&&i.push(...n)}}else i.push(e.fullyQualifiedPath.split(p.f7).slice(1))})),i},A=e=>e.reduce(((e,{displayName:t,checked:i})=>(e.push(...i?[t]:[]),e)),[]),E=e=>[23,22].includes(e),C=e=>[1,24].includes(e),S=({logicalOperator:e,filterOrders:t,filterValueById:i,filterTypeById:n,filterOperatorById:o},s=!1)=>({logical_operator:e,criteria:t.map((e=>{var t,r,a,l,d;return E(n[e])?{key:n[e],values:i[e],negated:!(null===(r=o[e])||void 0===r||!r.negated),inclusion:!(null===(a=o[e])||void 0===a||!a.inclusion)}:26===n[e]?{key:n[e],values:i[e]}:s&&(d=n[e],[12,5].includes(d))&&Array.isArray(i[e])?{key:n[e],values:i[e].map((e=>Array.isArray(e)?e:e.split(">").map((e=>e.trim())))),negated:!(null===(l=o[e])||void 0===l||!l.negated)}:{key:n[e],values:i[e],negated:!(null===(t=o[e])||void 0===t||!t.negated)}}))}),j=({filterValueById:e,filterTypeById:t})=>{const i=Object.keys(t).find((e=>26===t[e]));return i?{id:i,value:"string"==typeof e[i]?e[i]:""}:null},T=e=>{const t=j(e);return e.filterOrders.filter((e=>(null==t?void 0:t.id)!==e)).length},D=({filterValueById:e,filterTypeById:t,filterOrders:i})=>i.filter((e=>E(t[e]))).map((t=>({id:t,value:e[t]}))),k=(e,t,i,{customComparator:n,defaultValue:o}={})=>{const s=null!=n?n:(e,t)=>l()(e[i],t[i]),a=(d=t.id,e.find((e=>d===e.id)));var d,c;return a&&!s(t,a)?{...a,[i]:null!==(c=r()(t[i]))&&void 0!==c?c:o}:null},z=(e,t,{omitProps:i=[]}={})=>{let n=!1;e.length!==t.length&&(n=!0);const o=t.map((t=>{const o=e.find((e=>e.id===t.id));if(!o)return n=!0,{...t};const s=(0,d.Z)(t,i);return l()(s,(0,d.Z)(o,i))?{...o}:(n=!0,{...o,...s})}));return n?o:e},O=()=>["pin.description","pin.dominant_color","pin.grid_title","pin.id","pin.images[170x, 236x, 474x, orig]","pin.price_currency","pin.price_value","pin.rich_metadata()","pin.rich_summary()","pin.title"],R=e=>"badge_"+e,L=e=>{const t=new Date;e.forEach((e=>(0,u.Nh)(R(e),t.getTime()+108e5)))},M=e=>{const t=h.kl.indexOf(e);return-1===t?h.kl.length:t},B=(e,t)=>t.filter((({name:t,id:i})=>t.toLowerCase().includes(e.toLowerCase())||i.toString().includes(e))),N=e=>e.filter((({feedProfileId:e})=>!e)),F=(e,t)=>t.filter((({country:t})=>t&&t===e)),Z=(e,t,i)=>{let n=Object.freeze({});return e&&(n={...n,[h.VO]:e}),t&&(n={...n,[h.j0]:t}),i&&(n={...n,[h.pM]:i}),n}},869899:(e,t,i)=>{i.r(t),i.d(t,{RoleBasedAccessControlProvider:()=>b,useRoleBasedAccessControlContext:()=>x});var n=i(667294),o=i(389643),s=i(784590),r=i(19121),a=i(773285),l=i(425288),d=i(70061);const c=e=>{const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,d.Z)(i)]=e[i]:t[(0,d.Z)(i)]=c(e[i]));return t},u=(e,t)=>{const i=[];for(const s in e)s!==t&&i.push({id:s,...c(e[s])});const n=i.sort((({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t))),o=new Map;for(const s of n)o.set(s.id,s);return o};var h=i(339363);const p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},_=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=e=>{const[t,i]=(0,n.useReducer)(_,p),o=(({dispatch:e,isEnabled:t,state:i})=>{const{orbacVisibility:o,disableProfileChanger:s,headerVisible:r}=i;return{changeProfile:(0,n.useCallback)((i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})}),[t,e]),toggleORBACVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=i?i:!o})}),[t,e,o]),toggleDisableProfileChanger:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=i?i:!s})}),[t,e,s]),toggleHeaderVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=i?i:!r})}),[t,e,r])}})({dispatch:i,isEnabled:e,state:t}),{activeProfile:s,orbacVisibility:r}=t;(0,n.useEffect)((()=>{const e=(0,h.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})}),[]),(0,n.useEffect)((()=>{const e=(0,h.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})}),[]),(0,n.useEffect)((()=>{(0,h.Nh)("orbacVisibility",r)}),[r]),(0,n.useEffect)((()=>{(0,h.Nh)("orbacActiveProfile",s)}),[s]);return{state:t,actions:o,receiveProfiles:(0,n.useCallback)(((e,t)=>{i({type:"LOAD_PROFILES",payload:u(e,t)})}),[i])}};var m=i(785893);const{Provider:f,useMaybeHook:x}=(0,l.Z)("RoleBasedAccessControlContext"),b=({children:e})=>{const{checkExperiment:t}=(0,a.F)(),i=(0,r.Z)(),l=Boolean(i.isAuth&&i.isPartner&&t("web_m10n_business_access_orbac_www").anyEnabled),{state:d,actions:c,receiveProfiles:u}=g(l),{activeProfile:h,headerVisible:p,profiles:_=[]}=d,x=_?Array.from(_.values()):[],b=(0,o.Z)(x),y=!!(i.isAuth&&x.length>0)&&b,v=i.isAuth?i.id:"",P=i.isAuth?i.username:"",{changeProfile:w,toggleORBACVisibility:I,toggleDisableProfileChanger:A,toggleHeaderVisibility:E}=c;(0,n.useEffect)((()=>{l&&("string"!=typeof b?h||w(v):w(b))}),[b,v,l,w,h]),(0,n.useEffect)((()=>{l&&(y&&!p&&E(!0),!y&&p&&E(!1))}),[E,y,l,p,_]);const{data:C}=(0,s.Z)(l?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),S=null==C?void 0:C.profiles;let j;i&&i.isAuth&&d.activeProfile===i.id?j={id:i.id,permissions:["OWNER"],user:{username:P,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:h&&d.profiles&&(j=d.profiles.get(h)),(0,n.useEffect)((()=>{S&&u(S,v)}),[u,S,v]);const T=d.profiles?Array.from(d.profiles.values()):[];return(0,m.jsx)(f,{value:{profiles:T,headerVisible:d.headerVisible,activeProfile:j,changeProfile:w,toggleORBACVisibility:I,toggleDisableProfileChanger:A,toggleHeaderVisibility:E},children:e})}},717615:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(389643),o=i(773285),s=i(869899);const r=()=>{const{checkExperiment:e}=(0,o.F)(),t=(0,s.useRoleBasedAccessControlContext)(),{activeProfile:i}=t||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,a=(0,n.Z)((null==t?void 0:t.profiles)||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return r?l&&!a?Object.freeze({}):i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({}):Object.freeze({})}},389643:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(19121),o=i(773285),s=i(350118),r=i(53987),a=i(616550);const l=e=>{var t,i,l,d;const c=(0,a.useLocation)(),u=(0,n.Z)(),h=(0,s.S6)(),{anyEnabled:p}=(0,o.F)().checkExperiment("web_m10n_business_access_orbac_www"),_=(0,a.useRouteMatch)("/:username"),g=null==_||null===(t=_.params)||void 0===t?void 0:t.username,m=(0,a.useRouteMatch)("/pin/:id"),f=!(null==m||null===(i=m.params)||void 0===i||!i.id)&&(null===(l=h(m.params.id))||void 0===l||null===(d=l.pinner)||void 0===d?void 0:d.id);if((0,r.ej)(c))return!1;if((0,r.RU)(c))return!0;if((0,r.mY)(c))return p;const x=e.concat(u.isAuth?{user:{username:u.username},id:u.id}:{}).find((e=>{const{user:t={},id:i}=e||{},{username:n}=t;return!!(n&&g||f&&i)&&(n===g||f===i)}));return!!x&&x.id}},845772:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(717615),o=i(19121),s=i(231947);const r=()=>{const e=(0,o.Z)(),t=(0,n.Z)();return(0,s.lJ)(e,t)}},231947:(e,t,i)=>{i.d(t,{D3:()=>d,DX:()=>a,KY:()=>c,Ms:()=>n,N1:()=>u,_P:()=>r,lJ:()=>s,nl:()=>o,q6:()=>l});const n=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},o=(e,t)=>Boolean(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",r=(e,t,i)=>{var n;return i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:null===(n=e.advertiser)||void 0===n?void 0:n.merchant_id},a=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,l=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),d=(e,t,i)=>!!(l(e,t,i)||e&&e.isAuth&&t===e.id),c=(e,t,i)=>{const n=t&&t.owner&&t.owner.id||"";return d(e,n,i)};function u(e,t,i){const n=t?t.id:"";return d(e,n,i)}},641692:(e,t,i)=>{i.d(t,{uB:()=>x,re:()=>b,Xc:()=>P,NH:()=>v,Mz:()=>y,Mj:()=>k,LZ:()=>j,Lu:()=>S,es:()=>T,i5:()=>B,QR:()=>H,xV:()=>R,o_:()=>V,d5:()=>E,if:()=>F,xQ:()=>A,O9:()=>w,bq:()=>L,HH:()=>M,Ti:()=>z,cG:()=>I,Hw:()=>D,YA:()=>Z,HC:()=>O,Y8:()=>N,$n:()=>U});var n=i(983722),o=i(689070),s=i(934723),r=i(28543),a=i(251819),l=i(172071),d=i(382891),c=i(709622);const u=({values:e,pin:t,productGroup:i,country:n})=>{const{name:o,destination_url:s,budget:r,duration:a,inclusive_end_date:l,is_ongoing:u,advertiser_id:h,ages:p,interests:_,genders:g,ad_type:m,selected_ocpm_tag:f,isAutoTargeting:x}=e,b=Math.round(r*c.Az),y=(0,d.Z)({ages:p,interests:_,genders:g,country:n}),v={};m===c.Hl.WEB_CONVERSION&&(v.objective_type=c.Hl.WEB_CONVERSION,v.optimization_goal_metadata={conversion_tag_v3_goal_metadata:{conversion_tag_id:f.conversionTagId,conversion_event:f.conversionEvent}});const P={budget_in_micro_currency:b,campaign_name:o&&o.length<64?o:`${(o||"").substr(0,62)}`,destination_url:t?s:null,duration:parseInt(a,10),auto_targeting_enabled:x,is_ongoing:u,start_now:!0,targeting_spec:y,advertiser_id:h,ads_client_type:"quick_promote",pin_id:t?t.id:null,product_group_id:i?i.id:null,...v};return!u&&l&&l.trim().length>0&&(P.inclusive_end_date=l),P};var h=i(966113),p=i(572621),_=i(826067),g=i(867820),m=i(844974),f=i(170168);const x=472,b=364,y={VIEW:"view",SUBMIT:"submit",SUBMIT_SUCCESS:"submit.success",SUBMIT_ERROR:"submit.error"},v={CLICK:"click",DISMISS:"dismiss",RENDER:"render"},P={BIZ_HUB_AD_CREDITS:"biz_hub_ad_credits",BIZ_HUB_EMPTY_STATE_ADS_WIDGET:"biz_hub_empty_state_ads_widget",BIZ_HUB_CREATE_AD:"biz_hub_create_ad",CLOSEUP_PARTNER_MODULE:"closeup_partner_module",NAVBAR_PROMOTE_PIN:"navbar_promote_pin",PIN_CREATE_SUCCESS:"pin_create_success",PIN_CREATE_SUCCESS_PINNER:"pin_create_success_pinner",PIN_REP:"pin_rep",PINANALYTICS:"pinanalytics",TRENDS_HOME_PAGE:"trends_home_page",TRENDS_DETAILS_PAGE:"trends_details_page"},w=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e}),I=e=>{const{isAnalyticsSite:t=!1,isSterlingSite:i=!1,isWwwSite:n=!1,loggingType:o}=e;let s="";t?s=".analytics":n?s=".www":i&&(s=".ads"),l.Z.increment(`sterling.quick_promote.page${s}.${o}`,1)},A=e=>e?c.vX.indexOf(e):-1,E=e=>{if(!(null==e||e<0||e>c.vX.length-1))return c.vX[e]},C=e=>e===c.Gl.BUSINESS_FORM?{element:11213,component:13375}:e===c.Gl.BILLING_FORM?{element:11214,component:13376}:{component:205,element:1223},S=(e,t)=>{const i=E(e),{component:n,element:o}=C(i);t({event_type:101,component:n,element:o,aux_data:{page:"GestaltQuickPromote"}})},j=(e,t)=>{const i=E(e),{component:n}=C(i);i===c.Gl.PIN_SELECTION_MODAL?t({event_type:6358,component:13288,aux_data:{page:"GestaltQuickPromote"}}):i===c.Gl.SUCCESS_MODAL&&t({event_type:6358,component:n,aux_data:{page:"GestaltQuickPromote"}})},T=(e,t)=>{const i=[...new Set(null==e?void 0:e.split("+"))];return t&&i.filter((e=>e in t))},D=(e,t)=>{if(!t||!e)return"";return`${`https://${h.KU}`}/advertiser/${e}/billing/${`?campaign_id=${t.campaign_id}&objective_type=CLICKTHROUGH&is_quick_promote=true`}`},k=(e,t)=>{if(!e)return"";const{ad_group_id:i=""}=e,n=(0,r.default)("adgroup",t,{id:i,showAllEntities:!0});return(0,s.Z)({advertiser:null,isAdsSite:!1,isAnalyticsSite:!1,isTrendsSite:!1,baseUrl:n,adsUrl:null,isQuickPromote:!0})},z=e=>({hasValidBusinessInfo:e.hasBusinessAddress||e.hasBusinessInfo,hasValidBillingInfo:e.hasValidBillingProfile||e.hasBillingInfo}),O=e=>{const{pin:t,productGroup:i,country:n,onSaveSuccess:s,onSaveFailed:r,quickPromoteFormValues:a,advertiserId:l}=e,d=t?`/ads/v4/advertisers/${l}/pins/${(null==t?void 0:t.id)||""}/quick_promote/`:`/ads/v4/advertisers/${l}/product_group/${(null==i?void 0:i.id)||""}/quick_promote/`,c=t?"pin":"product_group";(0,o.Z)({url:d,method:"POST",data:u({values:a,pin:t,productGroup:i,country:n})}).then((({resource_response:e})=>{null!=e&&e.data&&s(e.data)})).catch((e=>{const{httpStatus:t,message_detail:i}=e;let n;n=i?{area:401===t?c:"modal",message:i}:{area:"modal"},r(n)}))},R=e=>{const{hasValidBillingProfile:t,hasBusinessAddress:i,hasBillingInfo:n,hasBusinessInfo:o,serverErrorArea:s,stepIndex:r,isQuickPromotePage:a=!1}=e,{hasValidBusinessInfo:l,hasValidBillingInfo:d}=z({hasValidBillingProfile:t,hasBusinessAddress:i,hasBillingInfo:n,hasBusinessInfo:o});let u=[void 0,null].includes(r)?0:r+1;return E(r)===c.hf&&(s?u="modal"===s?A(c.Gl.ERROR_MODAL):r:l&&d?u=A(c.Gl.SUCCESS_MODAL):l?u=A(c.Gl.BILLING_FORM):a||(u=A(c.Gl.BUSINESS_FORM))),u>c.vX.length-1?void 0:u},L=e=>{let t=c.Pq.WIDE;return e<870?t=c.Pq.NARROW:e>=870&&e<=1275&&(t=c.Pq.MEDIUM),t},M=(e,t,i)=>{var o,s;const{crossSite:r}=(0,_.mB)(e.search);if(null!==(o=null===(s=(0,n.Z)())||void 0===s?void 0:s.experimentsClient.checkExperiment("advertiser_growth_close_modal_window_without_history").anyEnabled)&&void 0!==o&&o&&t.length<=1)window.close();else if(window){const e=i.find((e=>e.location.pathname.includes("pin-builder"))),n=Boolean(e)?3:1;[...Array(n)].forEach((()=>r?window.history.back():t.goBack()))}else t.goBack()},B=e=>{switch(e){case 4:return f.YD;case 3:return h.KU;case 0:return f.Vi;default:return null}},N=(e,t,i)=>{(0,m.Nh)(`quickPromote.${t}.${e}`,JSON.stringify({pin:i.pin,dailyBudget:i.dailyBudget,destinationUrl:i.destinationUrl,duration:i.duration,locale:i.locale,name:i.name,interests:i.interests,ages:i.ages,genders:i.genders,adType:i.adType}))},F=(e,t)=>{if(e&&t){var i;const n=JSON.parse(null!==(i=(0,m.qn)(`quickPromote.${t}.${e}`))&&void 0!==i?i:"{}");return(0,a.Z)(n)?null:n}return null},Z=(e,t)=>{e&&t&&(0,m.L_)(`quickPromote.${t}.${e}`)};function U(e,t){const i=[...e],n=i.indexOf(t);return n>-1?i.splice(n,1):i.push(t),i}async function V(e,t,i){const n=e.filter((e=>e.filter_v2));i(t((await Promise.all(n.map((async e=>{try{var t;(0,g.My)("client.partner.shoppingAds.getProductsForCatalog.success");return{productGroup:e,pins:(null===(t=(await(0,o.Z)({url:`/v3/catalogs/product_groups/products/${e.merchant_id}/${e.feed_profile_id}/`,enabledRouteRefresh:!0,data:{filters:JSON.stringify(e.filter_v2)},field_sets:(0,p.G6)()})).resource_response)||void 0===t?void 0:t.data)||[]}}catch(i){return(0,g.My)("client.partner.shoppingAds.getProductsForCatalog.error"),[]}})))).filter((e=>e.productGroup&&Array.isArray(e.pins)&&e.pins.length>0)).map((e=>({productPin:Array.isArray(e.pins)?e.pins[0]:[],productGroup:Array.isArray(e)?null:e.productGroup})))))}async function H(e,t,i,n){if(!t)return;n(i(await Promise.all(t.map((async t=>{try{var i;const n=(null===(i=(await(0,o.Z)({url:`/ads/v4/advertisers/${e}/product_groups/catalogs/`,enabledRouteRefresh:!0,data:{feed_profile_id:t.id}})).resource_response)||void 0===i?void 0:i.data)||[];return{feed:t,productGroups:n.filter((e=>e.product_count&&e.product_count>0))}}catch(n){return[]}})))))}},719286:(e,t,i)=>{i.d(t,{Jg:()=>m,gf:()=>r,i7:()=>_,in:()=>u,j:()=>g,jz:()=>l,pD:()=>a,p_:()=>s,s5:()=>c,tz:()=>h,uE:()=>p,zY:()=>d});const n="iphone",o="android_mobile",s="ipad",r="android_tablet",a="web_mobile",l=["web",a,n,s,o,r],d=["android_mobile","android_tablet","iphone","ipad","web"],c=["android_mobile","android_tablet","iphone","ipad","web"],u=["android_mobile","iphone"],h=["android_mobile","android_tablet","iphone","ipad"],p=[n,o],_=[n,o],g=[n,o,s,r],m=[n,o]},522679:(e,t,i)=>{i.d(t,{N:()=>h,t:()=>p});var n=i(667294),o=i(904431),s=i(924196),r=i(78714),a=i(214494),l=i(773285),d=i(425288),c=i(785893);const{Provider:u,useHook:h}=(0,d.Z)("LinkedAccount");function p({children:e}){const[t,i]=(0,n.useState)(!1),[d,h]=(0,n.useState)([]),{checkExperiment:p}=(0,l.F)(),_=p("ppm_p_gate").anyEnabled,g=(0,n.useCallback)((({businessName:e,thirdPartyApps:t,thirdPartyMarketingTrackingEnabled:n,nextUrl:l})=>{i(!0);const d={business_name:e,third_party_apps:t};return a.Z.create("BusinessOwnershipResource",d).callCreate({showError:!0}).then((()=>{n&&(e=>{o.Z.reportFacebookConversion(s.Z.FACEBOOK_ADVERTISER_ID,"CompleteRegistration",{content_name:"/business/convert"}),o.Z.reportPinterestConversion("track","lead",{lead_type:"Self-serve"}),o.Z.reportLinkedInConversion(s.Z.LINKEDIN_PARTNER_ID,s.Z.LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT),o.Z.reportGoogleConversion(s.Z.GOOGLE_ADWORDS_ID,s.Z.GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT,"/",e)})(_),i(!1),(e=>{(0,r.Z)(e?`/?next=${encodeURIComponent(e)}`:"/")})(l)})).catch((e=>(i(!1),Promise.reject({error:e}))))}),[i,_]),m=(0,n.useMemo)((()=>({createLinkedBusinessAccount:g,linkedBusinessCreationLoading:t,userAccounts:d,userAccountsRetrieved:h})),[g,t,h,d]);return(0,c.jsx)(u,{value:m,children:e})}},965900:(e,t,i)=>{i.d(t,{g:()=>p,I:()=>h});var n=i(667294),o=i(567450),s=i(150361),r=i.n(s);const a={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},l=(e=a,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){const{payload:i}=t,{pinId:n,isPromoted:o,currentTime:s,inVideoGridAutoplayExp:a}=i,{videosAutoplaying:l}=e,{currentlyPlayingOrganicVideoId:d,promotedVideosAutoplaying:c,organicVideosAutoplaying:u}=l,h=r()(c),p=r()(u);return!o&&d&&a?e:(o?h[n]={pinId:n,currentTime:s,paused:!1}:p[n]={pinId:n,currentTime:s,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:o?d:n,promotedVideosAutoplaying:h,organicVideosAutoplaying:p}})}if("SET_IS_AUTOPLAY"===t.type)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){const{payload:i}=t,{pinId:n,isPromoted:o,currentTime:s}=i,{videosAutoplaying:a}=e,{promotedVideosAutoplaying:l,organicVideosAutoplaying:d}=a,c=r()(l),u=r()(d);return o?c[n]={...c[n],paused:!0,currentTime:s}:u[n]={...u[n],paused:!0,currentTime:s},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:c,organicVideosAutoplaying:u}}}return"SET_APP_FOCUS_STATE"===t.type?{...e,appInFocus:t.payload}:"SET_VIEWPORT_SIZE"===t.type?{...e,viewportSize:t.payload}:"SET_FOOTER_VISIBILITY_STATE"===t.type?{...e,footerPlusButtonVisible:t.payload}:e};var d=i(425288),c=i(785893);const{Provider:u,useHook:h}=(0,d.Z)("AppUI");function p({children:e}){const[t,i]=(0,n.useReducer)(l,a),s=(0,n.useCallback)((e=>i({type:"PAUSE_CURRENT_VIDEO",payload:e})),[]),r=(0,n.useCallback)((e=>i({type:"SET_APP_FOCUS_STATE",payload:e})),[]),d=(0,n.useCallback)((e=>i({type:"SET_CURRENT_VIDEO",payload:e})),[]),h=(0,n.useCallback)((e=>i({type:"SET_FOOTER_VISIBILITY_STATE",payload:e})),[]),p=(0,n.useCallback)((e=>i({type:"SET_IS_AUTOPLAY",payload:e})),[]),_=(0,n.useCallback)((e=>i({type:"SET_VIEWPORT_SIZE",payload:e})),[]),g=(0,n.useCallback)((e=>i({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e})),[]),m=(0,n.useMemo)((()=>({pauseAutoplay:s,setCurrentVideo:d,setFooterPlusButtonVisible:h,setIsAutoplay:p,setViewportSize:_,toggleTypeaheadOverlay:g,setAppFocusState:r,appUI:t})),[s,d,h,p,_,g,r,t]);return(0,n.useEffect)((()=>{o.Z.onSessionResume((()=>{r(!0)})).onSessionPause((()=>{r(!1)}))}),[r]),(0,c.jsx)(u,{value:m,children:e})}},225692:(e,t,i)=>{i.d(t,{X:()=>o,Z:()=>s});var n=i(667294);const o=120;function s(e,t=0,i=o){const[s,r]=(0,n.useState)(e?"active":"inactive");return(0,n.useEffect)((()=>{if(!e){const e=setTimeout((()=>r("inactive")),i);return()=>{clearTimeout(e)}}if(t){const e=setTimeout((()=>r("active")),t);return()=>{clearTimeout(e)}}r("active")}),[e]),s}},697247:(e,t,i)=>{i.d(t,{$:()=>s,B:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("SurfaceContext",{surface:"Unknown"})},841509:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s({children:e,additionalStyles:t={}}){return(0,o.jsx)(n.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",children:e})}},525199:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(225692),s=i(785893);function r(e,t){return{hidden:{opacity:0,transition:t?`opacity ${t}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}}}function a({children:e,fadeInDuration:t=0,fadeOutDuration:i=o.X,visibility:a}){return"none"!==a&&e?(0,s.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:r(t,i)[a]},children:e}):null}},774763:(e,t,i)=>{i.d(t,{Z:()=>T});var n=i(667294),o=i(702664),s=i(121151),r=i(898781),a=i(349700),l=i(780280),d=i(883119),c=i(785893);function u({boardName:e,collaboratorName:t,onCancelTransferRequest:i,onDismiss:n}){const o=(0,r.ZP)(),u=(0,l.B)();return(0,c.jsx)(s.ZP,{accessibilityModalLabel:o.bt("Modalit di trasferimento della propriet della bacheca", "Board ownership transfer modal", "boardCollabOwnershipTransferModal.accessibilityModalLabel", undefined, true),heading:(0,c.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(d.X6,{align:"center",size:"500",children:o.bt("Collaboratori", "Collaborators", "boardCollabOwnershipTransferModal.heading", undefined, true)}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:u.isRTL,right:!u.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:o.bt("Chiudi", "Close", "boardCollabOwnershipTransferModal.iconAccessibilityLabel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:n,size:"md"})})]}),footer:(0,c.jsxs)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,c.jsx)(d.iP,{fullWidth:!1,onTap:i,children:(0,c.jsx)(d.xv,{weight:"bold",children:o.bt("Annulla richiesta", "Cancel request", "boardCollabOwnershipTransferModal.cancelRequest", undefined, true)})}),(0,c.jsx)(d.zx,{color:"red",onClick:n,size:"lg",text:o.bt("Ok", "Got it", "boardCollabOwnershipTransferModal.confirmationButton", undefined, true)})]}),onDismiss:n,children:(0,c.jsx)(d.xu,{paddingX:8,children:(0,c.jsx)(d.xv,{align:"center",children:(0,a.nk)(o.bt("Abbiamo inviato a {{ collaboratorName }} la tua richiesta di possedere {{ boardName }}. Quando accetter potrai comunque aggiungere Pin, ma non potrai gestire collaboratori, modificare il nome, la foto di copertina o la descrizione della bacheca.", "We sent {{ collaboratorName }} your request for them to own {{ boardName }}. When they accept, you can still add Pinsbut you wont be able to manage collaborators, change the name, cover photo, or description of this board.", "boardCollabOwnershipTransferModal.descriptionText", undefined, true),{collaboratorName:t,boardName:(0,c.jsx)(d.xv,{inline:!0,weight:"bold",children:e})})})})})}var h=i(150963),p=i(781165);function _({boardId:e,collaboratorId:t,collaboratorName:i,isAcceptedCollaborator:s,onDelete:a}){const l=(0,o.useDispatch)(),_=(0,r.ZP)(),g=(0,n.useRef)(null),[m,f]=(0,n.useState)(!1),[x,b]=(0,n.useState)(!1),{boardName:y,pendingOwnershipTransfer:v}=(0,h.Z)(),P=()=>{l((0,p.xx)(e,t)),f(!1)},w=function({i18n:e,isAcceptedCollaborator:t,onCancelTransferRequest:i,onDelete:n,onRequestTransfer:o,showCancelRequestOption:s,showRequestTransferOption:r}){const a=[{onSelect:n,option:{value:"Remove from board",label:e.bt("Rimuovi dalla bacheca", "Remove from board", "getCollaboratorDropdownItems.removeText", undefined, true)}}];return t&&(s&&a.push({onSelect:i,option:{value:"Cancel request",label:e.bt("Annulla richiesta", "Cancel request", "getCollaboratorDropdownItems.cancelText", undefined, true)}}),r&&a.push({onSelect:o,option:{value:"Request as board owner",label:e.bt("Richiedi come proprietario della bacheca", "Request as board owner", "getCollaboratorDropdownItems.requestText", undefined, true)}})),a}({i18n:_,isAcceptedCollaborator:s,onCancelTransferRequest:P,onDelete:a,onRequestTransfer:()=>{(async()=>{f(!1),await l((0,p.Cf)(e,t)),b(!0)})()},showCancelRequestOption:v===t,showRequestTransferOption:!v});return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsxs)(d.kC,{justifyContent:"center",children:[(0,c.jsx)(d.hU,{accessibilityLabel:_.bt("Opzioni per collaboratori", "Collaborator options", "boardCollabInviteOverflowButton.accessibilityLabel", undefined, true),bgColor:"transparent",icon:"ellipsis",iconColor:"darkGray",onClick:()=>f(!m),ref:g,selected:m,size:"md"}),m&&(0,c.jsx)(d.Lt,{anchor:g.current,id:"board-collaborator-dropdown",idealDirection:"down",onDismiss:()=>f(!1),zIndex:new d.Ry(1e3),children:(0,c.jsx)(d.Lt.Section,{label:_.bt("Opzioni", "Options", "boardCollabInviteOverflowButton.dropdownSection", undefined, true),children:w.map((e=>(0,c.jsx)(d.Lt.Item,{onSelect:e.onSelect,option:e.option},e.option.value)))})})]}),x&&(0,c.jsx)(u,{boardName:y,collaboratorName:i,onCancelTransferRequest:()=>{P(),b(!1)},onDismiss:()=>{b(!1)}})]})}var g=i(29459),m=i(985913),f=i(19121),x=i(773285);function b({actionsDisabled:e,invite:t,invitedUser:i,isDim:n,onApprove:o,onDelete:s}){const a=(0,r.ZP)(),l=(0,f.Z)(),{access:u,board:p,status:b,invited_by_user:y}=t,{pendingOwnershipTransfer:v,viewerIsOwner:P}=(0,h.Z)(),w=l.isAuth&&i.id===l.id,I=l.isAuth&&y.id===l.id,A=i.id===y.id,E="accepted"===b,C=u.includes("approve"),S=u.includes("delete"),j=a.bt("Approva", "Approve", "[button] approve another pinner's request to join the board as a collaborator", undefined, true),T=((e,t,i)=>e?a.bt("Abbandona", "Leave", "[button] for a collaborator to leave a group board", undefined, true):t&&!i?a.bt("Rifiuta", "Decline", "[button] decline another pinner's request to join board as a collaborator", undefined, true):a.bt("Rimuovi", "Remove", "[button] remove a collaborator from the board]", undefined, true))(w,A,E),D=S&&!C,k=S&&C,z=`/${i.username}/`,{checkExperiment:O}=(0,x.F)(),R=P&&O("web_board_ownership_transfer").anyEnabled,L=R?(0,c.jsx)(_,{boardId:p.id,collaboratorId:i.id,collaboratorName:i.full_name,onDelete:s||(()=>{}),isAcceptedCollaborator:E}):(0,c.jsx)(d.zx,{disabled:e,onClick:s,text:T,size:"lg"}),M=v===i.id,B=R&&(void 0!==n?n:!E);return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(g.Z,{imageUrl:i.image_medium_url||"",name:i.full_name,title:i.full_name,subtitle:((e,i,n,o,s)=>{const r=t.invited_by_user.full_name;let l;return l=i?a.bt("Invito in attesa", "Invitation pending", "boardCollabInviteCell.pendingInvitationText", undefined, true):n?a.bt("Questo sei tu", "That's you", "subtext for current user who requested to join this board", undefined, true):o?a.bt("Invitato da te", "Invited by you", "subtext for a pending collaborator who was invited by the current viewer", undefined, true):s?a.bt("Ha chiesto di unirsi", "Requested to join", "The subtext that identifies a pending collaborator has personally requested to join the board", undefined, true):(0,m.Z)(a.bt("Invitato da {{ user_full_name }}", "Invited by {{ user_full_name }}", "The subtext that identifies a pending collaborator who was invited to collaborate on the board", undefined, true),{user_full_name:r}),e&&(l=l.concat(a.bt("  Propriet in attesa", "  Ownership pending", "boardCollabInviteCell.pendingOwnershipText", undefined, true))),l})(M,B,w,I,A),linkURL:z,isDim:!R&&(void 0!==n?n:!E),accessory:D&&L}),k&&(0,c.jsxs)(d.xu,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,disabled:e,onClick:s,text:T,size:"lg"})}),(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"red",disabled:e,onClick:o,text:j,size:"lg"})})]})]})}var y=i(499128),v=i(717615),P=i(231947),w=i(977558);function I(e){const t=(0,r.ZP)(),{onCancel:i,onRemove:n,useGestaltModal:o}=e,a=t.bt("Vuoi abbandonare questa bacheca di gruppo e rimuoverla dal tuo profilo?", "Are you sure you want to leave this group board and remove it from your profile?", " - ", undefined, true),l=o?d.u_:s.ZP;return(0,c.jsx)(l,{accessibilityModalLabel:t.bt("Abbandonare la bacheca?", "Leave board?", " - ", undefined, true),heading:t.bt("Abbandonare la bacheca?", "Leave board?", " - ", undefined, true),onDismiss:i,size:"sm",footer:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:i,text:t.bt("Annulla", "Cancel", " - ", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:n,text:t.bt("Abbandona", "Leave", " - ", undefined, true)})})]}),children:(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:a})})})}class A extends n.Component{constructor(...e){var t,i,n;super(...e),n={shouldBlock:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}getBlockDescription(e,t){return"declineRequest"===e?t?(0,a.nk)(this.props.i18n.bt("In questo modo non permetterai a {{ invited_user_first_name }} di unirsi a questa bacheca e non potr chiedere di collaborare in futuro.", "This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.", "decline another pinner's request to join board as a collaborator and block them", undefined, true),{invited_user_first_name:t}):this.props.i18n.bt("In questo modo non permetterai a questa persona di unirsi a questa bacheca e non potr chiedere di collaborare in futuro.", "This will decline this person from joining this board and block them from subsequent collaboration requests.", "message that explains consequences of declining a request to join board as a collaborator", undefined, true):t?(0,a.nk)(this.props.i18n.bt("In tal modo, verranno rimossi {{ invited_user_first_name }}, le persone che {{ invited_user_first_name }} ha invitato e tutti i loro Pin.", "This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins.", " - ", undefined, true),{invited_user_first_name:t}):this.props.i18n.bt("In questo modo, rimuoverai questa persona, le persone che ha invitato e tutti i loro Pin.", "This will remove this person, people they invited, and all their Pins.", "message that explains consequences of removing a collaborator", undefined, true)}render(){const{removeType:e,firstName:t,fullName:i,onCancel:o,onRemove:r,onRemoveAndBlock:l,useGestaltModal:u}=this.props,h="declineRequest"===e?(0,a.nk)(this.props.i18n.bt("Rifiutare {{ invited_user_name }}?", "Decline {{ invited_user_name }}?", "[button] to decline a pinner's request to join a board as a collaborator", undefined, true),{invited_user_name:i}).join(""):(0,a.nk)(this.props.i18n.bt("Rimuovere {{ invited_user_name }}?", "Remove {{ invited_user_name }}?", "[button] to remove a pinner as a collaborator from a group board", undefined, true),{invited_user_name:i}).join(""),p=this.props.i18n.bt("In questo modo, non potr pi salvare Pin su questa bacheca. Puoi anche:", "This will keep them from saving Pins to this board. You can also:", "decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.", undefined, true),_=this.getBlockDescription(e,t),g=this.state.shouldBlock?this.props.i18n.bt("Bloccare", "Block", "block another pinner after denying their request to collaborate on a board", undefined, true):this.props.i18n.bt("Rimuovere", "Remove", "decline another pinner's request to collaborate on a board", undefined, true),m=(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:p})}),(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{padding:5,display:"flex",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.XZ,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState((({shouldBlock:e})=>({shouldBlock:!e})))})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsxs)(d.__,{htmlFor:"banUser",children:[(0,c.jsx)(d.xv,{weight:"bold",children:(0,a.nk)(this.props.i18n.bt("Blocca {{ name }}", "Block {{ name }}", " - ", undefined, true),{name:t||""})}),(0,c.jsx)(d.xv,{size:"200",children:_})]})})]})]}),f=u?d.u_:s.ZP;return(0,c.jsx)(f,{accessibilityModalLabel:h,heading:h,onDismiss:o,size:"sm",footer:(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:o,text:this.props.i18n.bt("Annulla", "Cancel", " - ", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:this.state.shouldBlock?l:r,text:g})})]}),children:m})}}function E(e){const t=(0,r.ZP)();return(0,c.jsx)(A,{...e,i18n:t})}var C=i(343341);function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class j extends n.Component{constructor(...e){super(...e),S(this,"state",{currentModal:null,loading:!1}),S(this,"showRemoveSuccessToast",(()=>{const{toastManagerContext:e}=this.props,t=this.props.i18n.bt("Collaboratore rimosso", "Collaborator removed", "BoardCollabInviteCellContainer.toast", undefined, true);e.showOneToast((({hideToast:e})=>(0,c.jsx)(y.ZP,{duration:3e3,onHide:e,text:t})))})),S(this,"onDelete",(()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})})),S(this,"onApprove",(()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),this.props.approveBoardCollabInviteGraphQL?this.props.approveBoardCollabInviteGraphQL(this.props.graphQLParams.boardId,this.props.graphQLParams.invitedUserId):e().then(t).finally((()=>{this.setState({loading:!1})}))})),S(this,"deleteBoardInvite",((e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:i,onInviteDidUpdate:n,orbacSubjectId:o}=this.props,s=this.isViewerInvitedUser;this.setState({currentModal:null,loading:!0}),t(s,e,o).then((()=>{n(),this.showRemoveSuccessToast(),s&&i()})).catch((()=>{})).finally((()=>{this.setState({loading:!1})}))})),S(this,"handleDeleteBoardInvite",(()=>{this.deleteBoardInvite(!1)})),S(this,"handleDeleteBoardInviteAndBan",(()=>{this.deleteBoardInvite(!0)})),S(this,"handleHideModal",(()=>{this.setState({currentModal:null})}))}get isViewerInvitedUser(){const{viewer:e,invitedUser:t}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invitedUser:e,invite:{invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invitedUser:e,useGestaltModal:t=!1}=this.props,{currentModal:i}=this.state;return"delete"===i?this.isViewerInvitedUser?(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:w.fe+1}},children:(0,c.jsx)(I,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})}):(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:w.fe+1}},children:(0,c.jsx)(E,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})}):null}render(){const{invite:e,invitedUser:t,isDim:i}=this.props,{loading:n}=this.state;return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(b,{invite:e,invitedUser:t,isDim:i&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:n}),this.renderCurrentModal()]})}}function T(e){const{invite:t,invitedUser:{id:i},invite:{board:{id:n}}}=e,s=(0,r.ZP)(),a=(0,o.useDispatch)(),l=(0,f.Z)(),d=(0,v.Z)(),{checkExperiment:u}=(0,x.F)(),{anyEnabled:h}=u("web_m10n_business_access_orbac_ga"),_=h?(0,P.lJ)(l,d):void 0,g=u("graphql_migration_board_sgrowth").anyEnabled,m=(0,p.h6)(),b={boardId:n,invitedUserId:i},y=(0,p.yC)();return(0,c.jsx)(j,{...e,approveBoardCollabInvite:()=>a((0,p.q1)(n,i)),approveBoardCollabInviteGraphQL:g?m:void 0,graphQLParams:b,deleteBoardCollabInvite:(e,i)=>a(g?y(t,e,i):(0,p.Jn)(t,e,i,_)),i18n:s,toastManagerContext:(0,C.F9)(),viewer:(0,f.Z)(),orbacSubjectId:_})}},860426:(e,t,i)=>{i.d(t,{ZP:()=>T,zC:()=>j,DK:()=>S});var n,o=i(667294),s=i(116303),r=i(29459),a=i(619415),l=i(936776),d=i(172071),c=i(995228),u=i(730447),h=i(898781),p=i(717615),_=i(19121),g=i(231947),m=i(407043),f=i(773285),x=i(845772),b=i(784590),y=i(883119),v=i(167912),P=i(785893);function w({boardId:e,invitedUserId:t,isInvited:i,onClick:n,buttonSize:s="sm"}){const r=(0,h.ZP)(),{anyEnabled:a}=(0,f.F)().checkExperiment("web_m10n_business_access_orbac_ga"),l=(0,x.Z)(),d=(0,b.Z)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:t,...a&&l?{orbac_subject_id:l}:{}}});(0,o.useEffect)((()=>{d.refresh()}),[]);const c={text:r.bt("Invita", "Invite", "[button] invite someone to collaborate on a board", undefined, true),color:"red",disabled:!1};return d.isFetching&&(c.text=r.bt("Caricamento", "Loading", "[button] disabled button status text when checking if the user has been invited", undefined, true),c.color="gray",c.disabled=!0),(i||d.isLoaded&&d.data)&&(c.text=r.bt("Invitato", "Invited", "[button] disabled button status text when a user has been invited to a board", undefined, true),c.color="gray",c.disabled=!0),(0,P.jsx)(y.zx,{fullWidth:!0,color:c.color,size:s,disabled:c.disabled,onClick:n,text:c.text})}function I({boardId:e,invitedUserId:t,isInvited:s,onClick:r,buttonSize:a="sm"}){var l,d;const u=(0,h.ZP)(),p=void 0!==n?n:n=i(873796),[_,g]=(0,o.useState)(null),m=(0,o.useCallback)((()=>{g((e=>{var t;return{fetchKey:(null!==(t=null==e?void 0:e.fetchKey)&&void 0!==t?t:0)+1,fetchPolicy:"network-only"}}))}),[]),f=(0,v.useLazyLoadQuery)(p,{boardId:e,userId:t},null!=_?_:{});(0,o.useEffect)((()=>{m()}),[m]);const x={text:u.bt("Invita", "Invite", "[button] invite someone to collaborate on a board", undefined, true),color:"red",disabled:!1};return(s||null!==(l=f.v3GetUserBoardInviteQuery)&&void 0!==l&&null!==(d=l.data)&&void 0!==d&&d.status)&&(x.text=u.bt("Invitato", "Invited", "[button] disabled button status text when a user has been invited to a board", undefined, true),x.color="gray",x.disabled=!0),(0,P.jsx)(c.Z,{children:(0,P.jsx)(y.zx,{fullWidth:!0,color:x.color,size:a,disabled:x.disabled,onClick:r,text:x.text})})}var A,E,C=i(781165);const S=()=>{const e=void 0!==A?A:A=i(830075),[t]=(0,v.useMutation)(e);return async(e,i,n)=>{const o={boardId:e,collaboratorIds:i,message:n||""};return await new Promise(((e,i)=>{t({variables:{...o},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}},j=()=>{const e=void 0!==E?E:E=i(611534),[t]=(0,v.useMutation)(e);return async(e,i,n)=>{const o={board:e,emails:i,message:n||""};return await new Promise(((e,i)=>{t({variables:{...o},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}};function T({boardId:e,onInvitesDidUpdate:t,onInviteDidComplete:i,shareSuggestions:n}){const{logContextEvent:x}=(0,m.v)(),b=(0,h.ZP)(),{anyEnabled:v}=(0,f.F)().checkExperiment("web_m10n_business_access_orbac_ga"),A=(0,_.Z)(),E=(0,p.Z)(),T=v?(0,g.lJ)(A,E):"",[D,k]=(0,o.useState)(""),[z,O]=(0,o.useState)([]),[R,L]=(0,o.useState)({}),[M,B]=(0,o.useState)({}),{checkExperiment:N}=(0,f.F)(),F=N("graphql_migration_board_sgrowth").anyEnabled,Z=j(),U=S(),V=F?Z:C.OA,H=F?U:C.pS,G=e=>{switch(e.type){case"user":case"user_share_suggestion":return e.username||b.bt("Su Pinterest", "On Pinterest", "is a user of Pinterest", undefined, true);case"emailcontact":case"email_share_suggestion":return e.email||b.bt("Contatto email", "Email Contact", "invited user has an email", undefined, true)}return""},W=(n,o)=>{const{id:s,full_name:r,debug_reason:a}=n;let l="";a&&(l=a.reason),((t,i)=>{x({event_type:101,component:13029,element:D?1044:1039,object_id_str:e,view_type:5,view_parameter:3059,aux_data:{entered_query:D,result_index:t+1,rs:i}})})(o,l);const d={...R};d[s]=!0,L(d),H(e,[s],T).then((()=>{i(r,!0)})).catch((e=>{i(r,!1,e);const t={...R};t[s]=!1,L(t)})).finally(t)},$=e=>!!R[e];let q=n;return D&&(q=z),(0,P.jsxs)(y.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:0,children:[(0,P.jsx)(y.xu,{paddingY:4,flex:"none",display:"flex",alignItems:"center",children:(0,P.jsx)(y.xu,{flex:"grow",children:(0,P.jsx)(u.Z,{onTypeaheadSuggestionsChange:e=>{d.Z.increment("web_contacts_search",1,{source:"board_invite"}),O(e)},resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25,...T?{orbac_subject_id:T}:Object.freeze({})},value:D,children:(0,P.jsx)(y.xu,{paddingX:4,children:(0,P.jsx)(y.Um,{accessibilityLabel:b.bt("Cerca un nome o un'email", "Search for a name or email", "accessible label for contact search input field", undefined, true),id:"search",onChange:({value:e})=>{k(e),x({event_type:4113,component:13029,element:1043,view_parameter:3059,aux_data:{entered_query:e}})},placeholder:b.bt("Cerca per nome o email", "Search by name or email", "search input field prompt for finding contacts", undefined, true),size:"lg",value:D})})})})}),(0,P.jsxs)(y.xu,{overflow:"scrollY",maxHeight:414,children:[D&&((0,l.Z)(D)?(0,P.jsx)(r.Z,{name:D,title:D,accessory:(Y=!!M[D],X=()=>{const n=D;if(!(0,l.Z)(n))return;const o={...M};o[n]=!0,B(o),V(e,[n],T).then((()=>{i(n,!0),k("")})).catch((e=>{i(n,!1,e);const t={...M};t[n]=!1,B(t)})).finally(t)},K="lg",(0,P.jsx)(y.zx,{fullWidth:!0,color:Y?"gray":"red",disabled:!!Y,size:K,onClick:X,text:Y?b.bt("Invitato", "Invited", "[button] disabled button status text when a user has been invited to a board", undefined, true):b.bt("Invita", "Invite", "[button] invite someone to collaborate on a board", undefined, true)}))}):(0,P.jsx)(a.Z,{iconNode:(0,P.jsx)(s.Z,{name:D,size:"md"}),title:D,subtitle:b.bt("Continua a scrivere!", "Keep typing!", "boardCollabInviterForm.label", undefined, true)})),q.map(((t,i)=>{const n=t.username?`/${t.username}/`:null;return(0,P.jsx)(y.xu,{children:(0,P.jsx)(r.Z,{imageUrl:t.image_medium_url||"",name:t.full_name||t.email,title:t.full_name||t.email,subtitle:G(t),accessory:F?(0,P.jsx)(c.Z,{children:(0,P.jsx)(I,{boardId:e,invitedUserId:t.id,isInvited:$(t.id),onClick:()=>W(t,i),buttonSize:"lg"})}):(0,P.jsx)(w,{boardId:e,invitedUserId:t.id,isInvited:$(t.id),onClick:()=>W(t,i),buttonSize:"lg"}),linkURL:n})},i)}))]})]});var Y,X,K}},741:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(774763),s=i(147836),r=i(898781),a=i(883119),l=i(785893);function d({fetchMore:e,invites:t,isAtEnd:i,isFetching:n,onBoardLeave:o,refreshData:d,renderInvite:c,scroll:u}){const h=(0,r.ZP)();return(0,l.jsxs)(a.xu,{children:[u&&(0,l.jsx)(s.Z,{scrollBuffer:3*u.container.clientHeight,scrollHeight:u.container.scrollHeight,scrollTop:u.top,isAtEnd:i,isFetching:n,fetchMore:e}),t.map(((e,t)=>e&&e.invited_user&&e.invited_user.id?(0,l.jsx)(a.xu,{children:c(e,o,d)},t):null)),n&&!i&&(0,l.jsx)(a.$j,{accessibilityLabel:h.bt("caricamento inviti bacheca", "loading board invites", "accessibility label for board collaborator invites loading spinner", undefined, true),show:!0})]})}var c=i(29459),u=i(425480),h=i(150963),p=i(845772),_=i(784590),g=i(349700),m=i(773285);class f extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{invitesPendingApproval:e,invites:t}=this.props;e.refresh(),t.refresh()},(i="handleInvitesDidUpdate")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}shouldComponentUpdate(e){const{invites:{data:t},pendingOwnershipTransfer:i}=e,{invites:{data:n},pendingOwnershipTransfer:o}=this.props;return!(n&&!(o!==i))||!!t&&n.length!==t.length}render(){var e,t;const{board:i,invites:s,invitesPendingApproval:r,scrollInfo:h,onBoardLeave:p,onModalOpen:_,pendingOwnershipTransfer:m,renderInvite:f}=this.props,{full_name:x,image_medium_url:b,username:y}=i.owner,v=null===(e=(s.data||[]).find((e=>{var t;return(null===(t=e.invited_user)||void 0===t?void 0:t.id)===m})))||void 0===e||null===(t=e.invited_user)||void 0===t?void 0:t.full_name,P=m&&v?(0,g.nk)(this.props.i18n.bt("Hai richiesto a {{ collaboratorName }} di cambiare il proprietario della bacheca", "Requested {{ collaboratorName }} to change to board owner", "boardInviteSheet.CollaboratorList.boardOwner.ownershipRequestSubtitle", undefined, true),{collaboratorName:v}).join(""):this.props.i18n.bt("Proprietario di questa bacheca", "Owner of this board", "boardInviteSheet.CollaboratorList.boardOwner.subtitle", undefined, true);return(0,l.jsx)(n.Fragment,{children:s.isLoaded||r.isLoaded?(0,l.jsx)(u.Z,{fetchMore:s.fetchMore,children:({onScroll:e,setRef:t})=>(0,l.jsxs)(a.xu,{width:"100%",onScroll:e,ref:t,children:[(0,l.jsx)(d,{fetchMore:r.fetchMore,invites:r.data||[],isAtEnd:r.isAtEnd,isFetching:r.isFetching,onBoardLeave:p,refreshData:this.handleInvitesDidUpdate,scroll:h,renderInvite:f}),(r.data||[]).length>0?(0,l.jsx)(a.xu,{paddingY:3,children:(0,l.jsx)(a.iz,{})}):null,(0,l.jsxs)(a.xu,{paddingY:1,children:[(0,l.jsx)(c.Z,{imageUrl:null!=b?b:"",linkURL:`/${y}/`,name:null!=x?x:"",subtitle:P,title:null!=x?x:""}),(s.data||[]).map((e=>e&&e.invited_user&&e.invited_user.id?(0,l.jsx)(o.Z,{invite:e,invitedUser:e.invited_user,onBoardLeave:p,onModalOpen:_,onInviteDidUpdate:s.refresh},e.invited_user.id):null))]})]})}):(0,l.jsx)(a.$j,{show:!0,accessibilityLabel:this.props.i18n.bt("Caricamento", "Loading", "Loading state for showing board collaborators", undefined, true)})})}}function x(e){const t=(0,r.ZP)(),{pendingOwnershipTransfer:i}=(0,h.Z)(),{checkExperiment:n}=(0,m.F)(),{anyEnabled:o}=n("web_m10n_business_access_orbac_ga"),s=(0,p.Z)(),a=(0,_.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1,...o&&s?{orbac_subject_id:s}:{}}}),d=(0,_.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1,...o&&s?{orbac_subject_id:s}:{}}});return(0,l.jsx)(f,{...e,invites:a,invitesPendingApproval:d,i18n:t,pendingOwnershipTransfer:i})}},29459:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(667294),o=i(116303),s=i(149230),r=i(883119),a=i(785893);function l(e){const{imageUrl:t,name:i,title:l,subtitle:d,accessory:c,linkURL:u,isDim:h}=e,p={__style:{opacity:h?.5:1}},_=(0,s.Z)({url:null!=u?u:""})?"nofollow":"none";return(0,a.jsx)(n.Fragment,{children:i&&l&&(0,a.jsxs)(r.xu,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4,children:[(0,a.jsx)(r.xu,{marginEnd:2,dangerouslySetInlineStyle:p,children:(0,a.jsx)(r.iP,{role:"link",rel:_,href:u||"",rounding:"circle",children:(0,a.jsx)(o.Z,{outline:!0,size:"md",name:i,src:t})})}),(0,a.jsxs)(r.xu,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:p,children:[(0,a.jsx)(r.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:(0,a.jsx)(r.rU,{rel:_,href:u||"",children:l})}),(0,a.jsx)(r.xv,{lineClamp:1,size:"100",color:"subtle",children:d})]}),c&&(0,a.jsx)(r.xu,{marginStart:4,children:c})]})})}},619415:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){const{iconNode:t,title:i,subtitle:s,accessory:r,inContactsSearchform:a}=e;return(0,o.jsxs)(n.xu,{display:"flex",alignItems:"center",paddingX:4,paddingY:2,children:[(0,o.jsx)(n.xu,{marginEnd:a?4:2,children:t}),(0,o.jsxs)(n.kC,{alignItems:"start",direction:"column",flex:"grow",justifyContent:"start",children:[(0,o.jsx)(n.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:i}),(0,o.jsx)(n.xv,{lineClamp:1,size:"100",color:"subtle",children:s})]}),r&&(0,o.jsx)(n.xu,{children:r})]})}},150963:(e,t,i)=>{i.d(t,{Z:()=>d,k:()=>l});var n=i(667294),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("BoardOwnershipTransferContext");function l({boardName:e="",children:t,pendingOwnershipTransfer:i=null,viewerIsOwner:o}){const a=(0,n.useMemo)((()=>({boardName:e,pendingOwnershipTransfer:i,viewerIsOwner:o})),[e,i,o]);return(0,s.jsx)(r,{value:a,children:t})}const d=a},333206:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(667294),o=i(702664),s=i(959472),r=i(27255),a=i(717615),l=i(19121),d=i(773285),c=i(109892),u=i(898781),h=i(231947),p=i(860426),_=i(883119),g=i(781165),m=i(785893);function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class x extends n.Component{constructor(...e){super(...e),f(this,"state",{selectedCollaborators:[]}),f(this,"handleSubmit",(e=>{const{advertiserId:t,createBoard:i,onBoardCreate:n,viewer:o,orbacActingAs:s}=this.props,r=(0,h.lJ)(o,s),{name:a,description:l,privacy:d,collab_board_email:c,collaborator_invites_enabled:u}=e;return i({boardCreateOptions:{name:a,description:l,privacy:d,collab_board_email:c,collaborator_invites_enabled:u,...t?{advertiser_id:t}:{},...r?{orbac_subject_id:r}:Object.freeze({})}}).then((e=>{this.inviteSelectedColaborators(e.id),n(e)}))})),f(this,"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:this.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,h.Ms)(this.props.viewer,this.props.orbacActingAs)},pin_count:0})}inviteSelectedColaborators(e){const t=this.state.selectedCollaborators.filter((({type:e})=>"email"===e));t.length>=1&&this.props.InviteEmails(e,t.map((({type:e})=>e)));const i=this.state.selectedCollaborators.filter((({type:e})=>e.startsWith("user")));i.length>=1&&this.props.InviteUsers(e,i.map((({id:e})=>e)))}render(){const{advertiserId:e,isAdAccountOwner:t,onClose:i,privacy:n,useModalWithNoLayer:o}=this.props;return(0,m.jsx)(s.Z,{board:{...this.emptyBoardData,privacy:t?n:r.Z.BoardPrivacy.PROTECTED},currentUserIsOwner:!0,isAdAccount:!!e,isAdAccountOwner:t,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,onClose:i,onSubmit:this.handleSubmit,submitText:this.props.i18n.bt("Crea", "Create", " - ", undefined, true),useModalWithNoLayer:o,title:(0,m.jsx)(_.xu,{paddingY:8,width:"100%",children:(0,m.jsx)(_.X6,{align:"center",size:"500",children:this.props.i18n.bt("Crea bacheca", "Create board", "BoardCreate.BoardCreate", undefined, true)})})})}}function b(e){const t=(0,c.Z)(),i=(0,u.ZP)(),n=(0,l.Z)(),s=(0,o.useSelector)((({advertiser:e})=>e?e.id:void 0)),r=(0,a.Z)(),h=(0,o.useSelector)((({advertiser:e})=>!e||n.isAuth&&e.owner_user_id===n.id)),{checkExperiment:_}=(0,d.F)(),f=_("graphql_migration_board_sgrowth").anyEnabled,b=(0,p.zC)(),y=(0,p.DK)();return(0,m.jsx)(x,{...e,advertiserId:s,createBoard:t,dispatch:(0,o.useDispatch)(),isAdAccountOwner:h,viewer:n,i18n:i,orbacActingAs:r,InviteEmails:f?b:g.OA,InviteUsers:f?y:g.pS})}f(x,"defaultProps",{privacy:r.Z.BoardPrivacy.PUBLIC})},959472:(e,t,i)=>{i.d(t,{Z:()=>G});var n=i(667294),o=i(883119),s=i(785893);const r=({label:e,labelId:t})=>t?(0,s.jsx)(o.__,{htmlFor:t,children:(0,s.jsx)(o.xv,{size:"100",children:e})}):(0,s.jsx)(o.xv,{size:"100",children:e});function a(e){const{children:t,label:i,labelId:a}=e;return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.xu,{marginBottom:2,children:(0,s.jsx)(r,{label:i,labelId:a})}),t]})}var l=i(898781),d=i(780280);const c=138;function u({coverPin:e,handleShowBoardCoverEditModal:t}){const i=(0,l.ZP)(),[r,u]=(0,n.useState)(!1),{isRTL:h}=(0,d.B)();return(0,s.jsx)(a,{label:i.bt("Copertina della bacheca", "Board cover", "BoardForm.BoardFormCoverButton", undefined, true),children:(0,s.jsx)(o.xu,{width:c,position:"relative",children:(0,s.jsx)(o.iP,{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onTap:t,rounding:4,children:null!=e&&e.custom_cover?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.zd,{height:c,rounding:4,width:c,children:(0,s.jsx)(o.Ee,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||c,naturalWidth:e.size&&e.size[0]||c,src:e.image_url})}),(0,s.jsx)(o.xu,{position:"absolute",left:h,right:!h,bottom:!0,padding:2,children:(0,s.jsx)(o.xu,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:r?"white":"rgba(255, 255, 255, 0.8)"}},children:(0,s.jsx)(o.JO,{accessibilityLabel:i.bt("Modifica copertina bacheca", "Edit board cover", "BoardForm.BoardFormBoardCoverButton", undefined, true),icon:"edit",color:"default",size:16})})})]}):(0,s.jsx)(o.xu,{alignItems:"center",color:r?"darkWash":"secondary",display:"flex",height:c,justifyContent:"center",rounding:4,width:c,children:(0,s.jsx)(o.JO,{accessibilityLabel:i.bt("Aggiungi foto di copertina", "Add cover photo", "BoardForm.BoardFormCoverButton", undefined, true),color:"default",icon:"add",size:24})})})})})}function h({children:e,label:t,labelId:i,subtext:r}){return(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"start",paddingY:1,children:[e,(0,s.jsx)(o.xu,{marginStart:2,children:(0,s.jsxs)(o.__,{htmlFor:i,children:[(0,s.jsx)(o.xv,{size:"300",weight:"bold",children:t}),r]})})]})})}function p({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:i}){const n=(0,l.ZP)();return t&&(0,s.jsx)(h,{label:n.bt("Notifiche email", "Email notifications", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true),labelId:"emailNotificationsCheckbox",subtext:(0,s.jsx)(o.xv,{color:"subtle",size:"300",children:n.bt("Ricevi un'email quando qualcuno salva Pin in questa bacheca", "Get an email when someone saves Pins to this board", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true)}),children:(0,s.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(o.xu,{marginEnd:1,children:(0,s.jsx)(o.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:i})})})})}var _=i(960278),g=i(349700);function m({board:e,onCollaboratorInviteClick:t}){var i;const n=(0,l.ZP)(),r=(0,_.Z)({boardId:e.id,ownerName:null!==(i=e.owner.full_name)&&void 0!==i?i:"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""}),a=r.slice(0,3).map((e=>e.name));let d="";switch(r.length){case 3:d=(0,g.Wc)(`${n.bt("{{ first }}, {{ second }} e {{ last }}", "{{ first }}, {{ second }}, and {{ last }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars", undefined, true)}`,{first:`${a[0]}`,second:`${a[1]}`,last:`${a[2]}`});break;case 2:d=(0,g.Wc)(`${n.bt("{{ first }} e {{ second }}", "{{ first }} and {{ second }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars", undefined, true)}`,{first:`${a[0]}`,second:`${a[1]}`});break;default:d=a.join(", ")}const c=r.length>3?(0,g.Wc)(n.nbt(["Collaboratori: {{ userNames }} e {{ leftCount }} altro.", "Collaboratori: {{ userNames }} e altri {{ leftCount }}."], r.length - 3, "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree", true),{userNames:d,leftCount:""+(r.length-3)}):(0,g.Wc)(`${n.bt("Collaboratori: {{ userNames }}.", "Collaborators: {{ userNames }}.", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree", undefined, true)}`,{userNames:d});return(0,s.jsxs)(o.kC,{alignItems:"center",justifyContent:"between",children:[(0,s.jsx)(o.HE,{accessibilityLabel:c,collaborators:r.map((({name:e,src:t})=>({src:null!=t&&t.endsWith("/default_75.png")?void 0:t,name:e}))),size:"md"}),(0,s.jsx)(o.hU,{accessibilityLabel:n.bt("Invita collaboratori", "Invite collaborators", "BoardEdit.BoardCollaboratorsAndInviteSection", undefined, true),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}var f=i(948618);function x({board:e,onCollaboratorInviteClick:t}){const i=(0,l.ZP)(),n=(0,s.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,s.jsx)(o.xv,{size:"100",inline:!0,children:i.bt("Collaboratori", "Collaborators", " - ", undefined, true)}),(0,s.jsx)(f.Z,{}),(0,s.jsx)(o.xv,{inline:!0,size:"100",weight:"bold",children:(0,s.jsx)(o.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",underline:"hover",children:i.bt("Ulteriori informazioni", "Learn more", " - ", undefined, true)})})]});return(0,s.jsx)(a,{label:n,labelId:"collaborators",children:(0,s.jsx)(m,{board:e,onCollaboratorInviteClick:t})})}function b({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:i}){const n=(0,l.ZP)();return t&&(0,s.jsx)(h,{label:n.bt("Consenti ai collaboratori di aggiungere persone", "Let collaborators add people", "BoardForm.BoardFormCollaboratorsInviteToggle", undefined, true),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,s.jsx)(o.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:i})})}function y({description:e,descriptionValidatorErrors:t,onChange:i}){const n=(0,l.ZP)(),r="boardEditDescription";return(0,s.jsx)(a,{label:n.bt("Descrizione", "Description", "BoardForm.BoardFormDescription", undefined, true),labelId:r,children:(0,s.jsx)(o.Kx,{errorMessage:t.join(", "),id:r,name:"description",onChange:i,placeholder:n.bt("Di cosa tratta la tua bacheca?", "What's your board about?", " - ", undefined, true),value:e})})}const v=({children:e})=>(0,s.jsx)(o.xu,{paddingX:8,role:"list",children:n.Children.map(e,((t,i)=>t&&(0,s.jsx)(o.xu,{role:"listitem",marginBottom:i===n.Children.count(e)-1?1:8,children:t},i)))});function P({name:e,nameValidatorErrors:t,onChange:i,disabled:n}){const r=(0,l.ZP)();return(0,s.jsx)(a,{label:r.bt("Nome", "Name", "BoardForm.BoardFormTitleInput", undefined, true),labelId:"boardEditName",children:(0,s.jsx)(o.nv,{disabled:n,errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:i,placeholder:r.bt("Come \"Viaggi\" o \"Ricette\"", "Like \"Places to Go\" or \"Recipes to Make\"", " - ", undefined, true),size:"lg",value:e})})}const w=({board:e,collabBoardEmail:t,collaboratorInvitesEnabled:i,coverPin:n,currentUserIsOwner:r,description:a,descriptionValidatorErrors:d,handleBoardLeave:c,hideCollaboratorsSection:h,isCollaborative:_,showCoverEdit:g,name:m,nameValidatorErrors:f,handleShowBoardCoverEditModal:w,handleChangeName:I,handleChangeDescription:A,handleShowCollaboratorsModal:E,handleChangeCollabBoardEmail:C,handleChangeCollaboratorInvitesEnabled:S})=>{const j=(0,l.ZP)();return(0,s.jsxs)(v,{children:[g&&(0,s.jsx)(u,{coverPin:n,handleShowBoardCoverEditModal:w}),(0,s.jsx)(P,{disabled:!0,name:m,nameValidatorErrors:f,onChange:I}),(0,s.jsx)(y,{description:a,descriptionValidatorErrors:d,onChange:A}),r&&!!c&&!h&&(0,s.jsx)(x,{board:e,onCollaboratorInviteClick:E}),_&&(0,s.jsx)(o.xu,{marginBottom:-7,children:(0,s.jsx)(o.xv,{size:"100",children:j.bt("Impostazioni", "Settings", "BoardForm.BoardForm", undefined, true)})}),(0,s.jsx)(p,{hasCollabBoardEmail:t,isCollaborative:_,onCheckboxChange:C}),(0,s.jsx)(b,{collaboratorInvitesEnabled:i,isCollaborative:_,onCheckboxChange:S})]})};var I=i(902840),A=i(607989),E=i(27255),C=i(19121),S=i(773285);function j({isProtectedToggler:e,isToggleDisable:t,onChange:i,onCheckboxChange:r,privacy:a}){const d=(0,l.ZP)(),c=(0,C.Z)(),{checkExperiment:u}=(0,S.F)();if(c.isPrivateProfile&&u("web_hide_u16_board").anyEnabled)return(0,s.jsxs)(o.kC,{alignItems:"start",direction:"column",gap:2,children:[(0,s.jsx)(o.xv,{size:"100",children:d.bt("Privato", "Private", "BoardForm.BoardFormSecretToggle.text", undefined, true)}),(0,s.jsx)(o.xv,{color:"subtle",size:"100",children:d.bt("Questa bacheca sar visibile solo a te", "This board will only be visible to you", "BoardForm.BoardFormSecretToggle.subText", undefined, true)})]});if(!0===e)return(0,s.jsx)(h,{label:d.bt("Bacheca protetta (non presente nel profilo dell'utente)", "Protected board (not listed on user's profile)", "BoardForm.BoardFormSecretToggle", undefined, true),labelId:"protected",children:(0,s.jsx)(o.xu,{paddingY:2,children:(0,s.jsx)(o.rs,{onChange:i,switched:a===E.Z.BoardPrivacy.PROTECTED,id:"protected",disabled:t})})});if(a!==E.Z.BoardPrivacy.PROTECTED){const e=d.bt("Mantieni segreta la bacheca", "Keep this board secret", "BoardForm.BoardFormSecretToggle", undefined, true),i=(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)(o.xv,{color:"subtle",size:"300",children:[d.bt("Cos solo tu e i tuoi collaboratori potete vederlo.", "So only you and collaborators can see it.", "BoardForm.BoardFormSecretToggle", undefined, true)," ",(0,s.jsx)(o.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",underline:"hover",children:d.bt("Ulteriori informazioni", "Learn more", "BoardForm.BoardFormSecretToggle", undefined, true)})]})});return(0,s.jsx)(h,{label:e,labelId:"secret",subtext:i,children:(0,s.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(o.XZ,{checked:a===E.Z.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:r,disabled:t})})})}return null}function T({allowHomefeedRecommendations:e,onCheckboxChange:t}){const i=(0,l.ZP)();return(0,s.jsx)(h,{label:i.bt("Personalizzazione", "Personalization", "BoardForm.BoardFormRecommendationToggle", undefined, true),labelId:"recommendation",subtext:(0,s.jsx)(o.xv,{color:"subtle",size:"300",children:i.bt("Mostra Pin ispirati a questa bacheca nel tuo feed.", "Show Pins inspired by this board in your home feed.", "BoardForm.BoardFormRecommendationToggle", undefined, true)}),children:(0,s.jsx)(o.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}var D=i(66699),k=i(995228),z=i(50286),O=i(526760),R=i(121151),L=i(343341),M=i(134906);function B(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const N=(0,n.lazy)((()=>i.e(3613).then(i.bind(i,903613)))),F=(e,t)=>(0,M.Gy)({max:e,maxErrorString:(0,D.Z)(t.bt("Inserisci non pi di {{ maxLength }} caratteri.", "Please enter no more than {{ maxLength }} characters.", "Validation error when a string is too long", undefined, true),{maxLength:e})}),Z=e=>[F(E.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],U=e=>[(0,M.aH)({message:e.bt("Non dimenticare di assegnare un nome alla bacheca.", "Don't forget to name your board!", " - ", undefined, true)}),F(E.Z.MAX_CHARS_FOR_BOARD_TITLE,e)],V=({condition:e,children:t})=>e?(0,s.jsx)(o.xu,{position:"absolute",zIndex:R.b7,children:t}):t;class H extends n.Component{constructor(e){super(e),B(this,"handleChangeName",(({value:e})=>{const t=(0,M.FU)(U(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:t})})),B(this,"handleChangeDescription",(({value:e})=>{const t=(0,M.FU)(Z(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:t})})),B(this,"handleChangePrivacyToggle",(({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})})),B(this,"handleEnableSecret",(()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})})),B(this,"handleHideSecretConfirmation",(()=>{this.setState({showSecretConfirmation:!1})})),B(this,"handleChangeRecommendationToggle",(({value:e})=>{this.setState({allowHomefeedRecommendations:e})})),B(this,"handleChangeCollabBoardEmail",(({value:e})=>{this.setState({collab_board_email:e})})),B(this,"handleChangeCollaboratorInvitesEnabled",(({value:e})=>{this.setState({collaboratorInvitesEnabled:e})})),B(this,"handleCheckboxChange",(e=>({event:t,checked:i})=>e({event:t,value:i}))),B(this,"handleSubmit",(e=>{const{onSubmit:t}=this.props,{collab_board_email:i,collaboratorInvitesEnabled:n,description:o,name:s,privacy:r,allowHomefeedRecommendations:a}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const l=s.trim(),d=o.trim();this.setState({submitting:!0,submitError:""}),t({name:l,collab_board_email:i,collaborator_invites_enabled:n,description:d,privacy:r,allow_homefeed_recommendations:a}).then((()=>{this.setState({submitting:!1})})).catch((e=>{let t=this.props.i18n.bt("Ops! Qualcosa  andato storto.", "Uh oh! Something went wrong.", " - ", undefined, true);if(e.message){const{message:i,message_detail:n}=e;t=n?`${i} ${n}`:i}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})}))})),B(this,"handleShowBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!0})})),B(this,"handleHideBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!1})})),B(this,"handleShowCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!0})})),B(this,"handleHideCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!1})})),B(this,"handleSaveBoardCoverEditModal",(e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)}));const{board:{collab_board_email:t,collaborator_invites_enabled:i,description:n,name:o,pin_count:s,privacy:r,allow_homefeed_recommendations:a}}=e;this.state={collab_board_email:t,description:n,name:o,pin_count:s,privacy:r,allowHomefeedRecommendations:a,collaboratorInvitesEnabled:i,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:o,previousDescription:n,previousPrivacy:r}}static getDerivedStateFromProps(e,t){const i={};return e.board.name&&e.board.name!==t.previousName&&(i.previousName=e.board.name,i.nameValidatorErrors=(0,M.FU)(U(e.i18n),e.board.name)),e.board.description&&e.board.description!==t.previousDescription&&(i.previousDescription=e.board.description,i.descriptionValidatorErrors=(0,M.FU)(Z(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==t.previousPrivacy&&(i.previousPrivacy=e.board.privacy),i}getFormFooter(){const{submitText:e}=this.props,{submitError:t}=this.state;return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,s.jsx)(o.xu,{children:(0,s.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",children:(0,s.jsx)(o.xu,{height:48,children:(0,s.jsx)(o.zx,{color:"red",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,s.jsx)(o.xu,{paddingX:1,"aria-live":"polite",tabIndex:"0",children:(0,s.jsx)(o.xv,{color:"error",children:t})})]})}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:i,submitting:n}=this.state;return!t||i.length>0||e.length>0||n}render(){const{board:e,board:{archived_by_me_at:t,cover_pin:i,id:r,is_collaborative:a},coverImageHeight:l,coverImageWidth:d,currentUserIsOwner:c,handleBoardLeave:h,hideCollaboratorsSection:_,isAdAccount:m,isAdAccountOwner:f,isDeletable:E,isDesktop:C,isEditable:S,isNameAndSecretView:D,isSoftDeletedBoardsEnabled:z,onClose:L,onDeleteButtonClick:M,requestContext:B,title:F,useModalWithNoLayer:Z}=this.props,{allowHomefeedRecommendations:U,collab_board_email:H,collaboratorInvitesEnabled:G,description:W,descriptionValidatorErrors:$,name:q,nameValidatorErrors:Y,pin_count:X,privacy:K,showBoardCoverEdit:J,showCollaboratorsModal:Q,showSecretConfirmation:ee}=this.state,te=S&&X>0,ie=e.is_ads_only;let ne=(0,s.jsxs)(v,{children:[te&&(0,s.jsx)(u,{coverPin:i,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,s.jsx)(P,{disabled:ie,name:q,nameValidatorErrors:Y,onChange:this.handleChangeName}),(0,s.jsx)(y,{description:W,descriptionValidatorErrors:$,onChange:this.handleChangeDescription}),c&&!!h&&!_&&(0,s.jsx)(x,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,s.jsx)(o.xu,{marginBottom:-7,children:(0,s.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Impostazioni", "Settings", "BoardForm.BoardForm", undefined, true)})}),(0,s.jsx)(j,{isProtectedToggler:!!m,isToggleDisable:!!m&&!f,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:K}),!t&&(0,s.jsx)(T,{allowHomefeedRecommendations:U,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,s.jsx)(p,{hasCollabBoardEmail:H,isCollaborative:a,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,s.jsx)(b,{collaboratorInvitesEnabled:G,isCollaborative:a,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),E&&(0,s.jsxs)(o.xu,{marginTop:-6,paddingY:4,children:[(0,s.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Azione", "Action", "BoardForm.BoardForm.Action", undefined, true)}),(0,s.jsxs)(o.iP,{onTap:M,children:[(0,s.jsx)(o.xu,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:(0,s.jsx)(o.X6,{size:"400",children:this.props.i18n.bt("Elimina bacheca", "Delete board", "BoardForm.Delete", undefined, true)})}),z?(0,s.jsx)(o.xv,{size:"300",color:"subtle",children:(0,g.nk)(this.props.i18n.bt("Hai {{ MAX_AGE_RECENTLY_DELETED_BOARD }} giorni per ripristinare una bacheca eliminata. Successivamente, verr eliminato definitivamente.", "You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }} days to restore a deleted Board. After that, it will be permanently deleted.", "boardForm.delete.helperText", undefined, true),{MAX_AGE_RECENTLY_DELETED_BOARD:O.Xq})}):(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.xv,{size:"300",color:"subtle",children:this.props.i18n.bt("Elimina per sempre la bacheca e tutti i suoi Pin.", "Delete this board and all its Pins forever.", "BoardForm.BoardForm.Delete.Label", undefined, true)}),(0,s.jsx)(o.xv,{size:"300",color:"subtle",children:this.props.i18n.bt("L'operazione non potr essere annullata.", "You can't undo this!", "BoardForm.BoardForm.Delete.LabelTwo", undefined, true)})]})]})]})]});c?D&&(ne=(0,s.jsxs)(v,{children:[(0,s.jsx)(P,{disabled:ie,name:q,nameValidatorErrors:Y,onChange:this.handleChangeName}),(0,s.jsx)(j,{isProtectedToggler:!!m,isToggleDisable:!!m&&!f,onChange:this.handleChangePrivacyToggle,privacy:K,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)})]})):ne=(0,s.jsxs)(v,{children:[!!h&&(0,s.jsx)(x,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,s.jsx)(p,{hasCollabBoardEmail:H,isCollaborative:a,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&ie&&(0,s.jsx)(T,{allowHomefeedRecommendations:U,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,s.jsx)(o.xv,{color:"subtle",size:"300",children:(0,g.nk)(this.props.i18n.bt("Solo il proprietario della bacheca ({{ boardOwner }}) pu gestire il resto delle funzionalit", "Only the boards owner ({{ boardOwner }}) can manage the rest of its features", "BoardForm.CollaboratorPermissionsCopy", undefined, true),{boardOwner:(0,s.jsx)(o.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});const oe=Z?o.u_:R.ZP,se=this.props.i18n.bt("Modifica copertina della bacheca", "Change board cover", "BoardForm.BoardCoverEdit.heading", undefined, true),re=(0,s.jsxs)(o.xu,{paddingY:8,position:"relative",children:[(0,s.jsx)(o.X6,{align:"center",size:"500",children:se}),(0,s.jsx)(o.xu,{position:"absolute",top:!0,left:B.isRTL,right:!B.isRTL,paddingY:8,paddingX:6,children:(0,s.jsx)(o.hU,{accessibilityLabel:this.props.i18n.bt("Annulla il cambio di copertina della bacheca", "Cancel change board cover", "BoardForm.BoardCoverEdit.cancel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]});return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(V,{condition:!!Z,children:!J&&!Q&&(0,s.jsx)(oe,{accessibilityModalLabel:this.props.i18n.bt("Modulo bacheca", "Board form", "BoardForm.BoardForm", undefined, true),size:"sm",onDismiss:L,footer:this.getFormFooter(),heading:F,children:(0,s.jsx)(o.xu,{marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,s.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!ie&&ne,ie&&(0,s.jsx)(w,{board:e,collabBoardEmail:H,collaboratorInvitesEnabled:G,coverPin:i,currentUserIsOwner:c,description:W,descriptionValidatorErrors:$,handleBoardLeave:h,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleChangeName:this.handleChangeName,handleChangeDescription:this.handleChangeDescription,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),hideCollaboratorsSection:_,isCollaborative:a,showCoverEdit:te,name:q,nameValidatorErrors:Y})]})})})}),J&&C&&(0,s.jsx)(k.Z,{children:(0,s.jsx)(N,{boardId:r,boardName:q,coverPinId:null==i?void 0:i.pin_id,frameHeight:l,frameWidth:d,heading:re,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),ee&&(0,s.jsx)(A.Z,{confirmButtonLabel:this.props.i18n.bt("Rendi segreta", "Make secret", "Setting the boards visibility to secret", undefined, true),heading:this.props.i18n.bt("Confermi?", "Are you sure?", "Warning label asking users to be sure of their action", undefined, true),message:this.props.i18n.bt("Se rendi segreta questa bacheca, alcuni annunci attivi non verranno pi proposti", "If you make this board secret, some active ads will stop running", "Explicitly warning users of the board visibility action they are doing", undefined, true),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),Q&&(0,s.jsx)(I.Z,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})]})}}function G(e){const t=(0,l.ZP)(),i="desktop"===(0,z.ZP)(),n=(0,C.Z)(),{checkExperiment:o}=(0,S.F)(),{anyEnabled:r}=o("web_board_soft_deletion"),a=!!n.isPrivateProfile&&o("web_hide_u16_board").anyEnabled&&!o("web_hide_u16_group_board_v2").anyEnabled;return(0,s.jsx)(H,{...e,hideCollaboratorsSection:a,isDesktop:i,i18n:t,isSoftDeletedBoardsEnabled:r,requestContext:(0,d.B)(),toastManagerContext:(0,L.F9)()})}B(H,"defaultProps",{isNameAndSecretView:!1})},313951:(e,t,i)=>{i.d(t,{i5:()=>b,sX:()=>P,aX:()=>y,Z5:()=>x,NG:()=>v,MT:()=>w,iu:()=>I});var n=i(667294),o=i(214494),s=i(682492),r=i.n(s);const a=(e,t)=>e.data[t]&&e.data[t].messages||[];function l(e,t){const i={};return e.filter((e=>!!e)).reduce(((e,n)=>{const o=t(n);return i[o]?(r()(i[o],n),e):(i[o]=n,e.concat([n]))}),[])}function d(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function c(e,t,i){return d(l(a(e,t).concat(i),(e=>e.id)))}const u={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function h(e=u,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const i={...e,data:{...e.data}},{id:n}=t.payload;return delete i.data[n],i}if("FETCH_COMPLETE"===t.type){const{options:i,resource:n,response:o}=t.payload,s=o.resource_response.data;if("ConversationMessagesResource"===n){const t=s||[],n=(null==i?void 0:i.conversation_id)||"",o=c(e,n,t),r=o[o.length-1];return{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:o,unread:0,last_message:r}}}}if("ConversationsResource"===n){const t=s||[],i={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:n,name:o,board:s,emails:r,unread:a,users:l,last_message:d}=e,u=c(i,t,[d]);i.data[t]={...i.data[t],id:t,created_at:n,name:o,board:s,emails:r||[],unread:a||0,users:l||[],last_message:d,messages:u}})),i}if("ConversationResource"===n){const t=s||{},{id:i}=t,n={...e,data:{...e.data}};return i&&(n.data[i]={...n.data[i],...t}),n}if("NewsHubBadgeResource"===n){if(s){const t=s.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:i,message:n}=t.payload;return e.data[i]?{...e,data:{...e.data,[i]:{...e.data[i],id:i,messages:[...e.data[i].messages,n]}}}:e}if("MESSAGE_SEND_PENDING_SUCCESS"===t.type){const{id:i,tempMessage:n,newMessage:o}=t.payload;if(e.data[i]){if(a(e,i).find((e=>e.id===n.id&&e.created_ms===n.created_ms))){const t=d(l(a(e,i).filter((e=>e.id!==n.id)).concat([o]),(e=>e.id)));return{...e,data:{...e.data,[i]:{...e.data[i],last_message:o,messages:t}}}}}return e}if("MESSAGE_SEND_PENDING_FAILURE"===t.type){const{id:i,tempMessageId:n}=t.payload;if(e.data[i]){const t=a(e,i).filter((e=>e.id!==n));return{...e,data:{...e.data,[i]:{...e.data[i],messages:t}}}}return e}if("OPEN_NEW_MESSAGE"===t.type){const{objectAttachment:i}=t.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:i}}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload};if("CLEAR_MESSAGE_BADGE"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],unread:0}}}}if("CONVERSATION_SAVE_POSITION"===t.type){const{id:i,position:n}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],position:n}}}}if("CONVERSATION_RESET_POSITION"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],position:null}}}}if("SET_OBJECT_ATTACHMENT"===t.type){const{objectAttachment:i}=t.payload;return{...e,objectAttachment:i}}if("REMOVE_OBJECT_ATTACHMENT"===t.type)return{...e,objectAttachment:null}}return e}var p=i(425288),_=i(505920),g=i(785893);const m=(()=>{let e=0;return()=>e++})(),{Provider:f,useHook:x}=(0,p.Z)("Conversations");function b({children:e}){const[t,i]=(0,n.useReducer)(h,u),s=(0,n.useCallback)((e=>i({type:"FETCH_COMPLETE",payload:e})),[]);(0,_.Z8)("ConversationMessagesResource",s),(0,_.my)("ConversationMessagesResource",s),(0,_.Z8)("ConversationsResource",s),(0,_.Z8)("ConversationResource",s),(0,_.Z8)("NewsHubBadgeResource",s);const r=(0,n.useCallback)(((e,t=!1,n="")=>i({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:n}})),[]),a=(0,n.useCallback)(((e,t="",n=!1)=>i({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:n}})),[]),l=(0,n.useCallback)((e=>i({type:"CONVERSATION_CREATE",payload:e})),[]),d=(0,n.useCallback)((e=>i({type:"CONVERSATION_DELETE",payload:{id:e}})),[]),c=(0,n.useCallback)(((e,t)=>i({type:"CONVERSATION_SAVE_POSITION",payload:{id:e,position:t}})),[]),p=(0,n.useCallback)((e=>i({type:"CONVERSATION_RESET_POSITION",payload:{id:e}})),[]),m=(0,n.useCallback)(((e,t,n)=>{o.Z.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;i({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";n(t)}))}),[]),x=(0,n.useCallback)((()=>{i({type:"CLOSE_DROPDOWN"})}),[]),b=(0,n.useCallback)((()=>{i({type:"OPEN_DROPDOWN"})}),[]),y=(0,n.useCallback)((e=>{i({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})}),[]),v=(0,n.useCallback)(((e,t)=>i({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}})),[]),P=(0,n.useCallback)(((e,t,n)=>i({type:"MESSAGE_SEND_PENDING_SUCCESS",payload:{id:e,tempMessage:t,newMessage:n}})),[]),w=(0,n.useCallback)(((e,t)=>i({type:"MESSAGE_SEND_PENDING_FAILURE",payload:{id:e,tempMessageId:t}})),[]),I=(0,n.useCallback)((e=>i({type:"UPDATE_NEWSHUB_COUNT",payload:e})),[]),A=(0,n.useCallback)((e=>i({type:"UPDATE_UNREAD_COUNT",payload:e})),[]),E=(0,n.useCallback)((e=>i({type:"CLEAR_MESSAGE_BADGE",payload:{id:e}})),[]),C=(0,n.useCallback)((e=>i({type:"SET_OBJECT_ATTACHMENT",payload:{objectAttachment:e}})),[]),S=(0,n.useCallback)((()=>i({type:"REMOVE_OBJECT_ATTACHMENT"})),[]),j=(0,n.useMemo)((()=>({clearMessageBadge:E,conversationOpen:r,conversationClose:a,conversationCreate:l,conversationDelete:d,conversationGet:m,saveConversationPosition:c,resetConversationPosition:p,dropdownClose:x,dropdownOpen:b,newMessageOpen:y,pendingMessageSend:v,pendingMessageSuccess:P,pendingMessageFailure:w,updateNewsHubCount:I,updateUnreadCount:A,conversations:t,setObjectAttachment:C,removeObjectAttachment:S})),[E,r,a,l,d,m,c,p,x,b,y,v,P,w,I,A,t,C,S]);return(0,g.jsx)(f,{value:j,children:e})}function y(){const{conversationCreate:e}=x();return async t=>{let i;const n=o.Z.create("ConversationsResource",t);try{var s;const t=null===(s=(await n.callCreate()).resource_response)||void 0===s?void 0:s.data;t&&(e(t),i=t)}catch(r){throw new Error(r.message)}return i}}function v(){const{conversations:e,conversationCreate:t,pendingMessageSend:i,pendingMessageSuccess:n,pendingMessageFailure:s}=x();return async(r,a,l,d)=>{const{text:c,pinId:u,boardId:h,userId:p,didItId:_}=a;async function g(){const e=o.Z.create("ConversationMessagesResource",{conversation_id:r,text:c,pin:u,board:h,user:p,user_did_it_data:_,source:l}),t=`${m()}`,a={text:c,sender:d,created_at:(new Date).toString(),created_ms:Date.now(),id:t,type:"tempMessage"};i(r,a);try{var g;const t=null===(g=(await e.callCreate()).resource_response)||void 0===g?void 0:g.data;t&&n(r,a,t)}catch(f){throw s(r,t),new Error(f.message)}}if(e.data[r])await g();else{const e=o.Z.create("ConversationResource",{conversation_id:r});try{var f;const i=null===(f=(await e.callGet()).resource_response)||void 0===f?void 0:f.data;i&&(t(i),await g())}catch(x){throw new Error(x.message)}}}}function P(e){const{conversations:t}=x();return t.data[e]}function w(e){const{conversations:t}=x();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}function I(){const{conversations:{data:e}}=x(),t=(i=e,Object.keys(i).map((e=>i[e]))).filter((e=>e.users&&e.last_message));var i,n;return n=t,Array.from(n).sort(((e,t)=>new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)))}},312918:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var n=i(667294),o=i(116303),s=i(985913),r=i(954931),a=i(694379),l=i(883561),d=i(941646),c=i(327476),u=i(898781),h=i(777906),p=i(215292),_=i(349700),g=i(773285),m=i(202870),f=i(883119),x=i(785893);const b=function(e){const t=(0,u.ZP)(),{followerCount:i,fullName:b,hasVerifiedIdentity:y,imageUrl:v,isPromoted:P,isVerifiedMerchant:w,profileUrl:I,sponsorName:A,sponsorshipStatus:E,sponsorUsername:C="",verified:S,color:j="default",onAvatarClick:T,onNavigateClick:D,onNavigateSponsorClick:k,openNewTab:z,isLeadPin:O=!1}=e,R=(0,g.F)().checkExperiment("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled,L=(0,c.Z)(),M=(0,s.Z)(t.bt("Link all'avatar di {{ fullName }}", "{{ fullName }} avatar link", "creatorCardProfile.avatar.accessibilityLabel", undefined, true),{fullName:null!=b?b:""}),B=(0,x.jsx)(p.q,{children:({active:e,focused:t,hovered:i,onBlur:n,onFocus:s,onMouseEnter:r,onMouseLeave:a})=>(0,x.jsx)(f.xu,{onBlur:n,onFocus:s,onMouseEnter:r,onMouseLeave:a,onMouseDown:()=>{T&&T()},children:(0,x.jsx)(f.zd,{rounding:"circle",wash:i||e||t,children:(0,x.jsx)(o.Z,{accessibilityLabel:M,name:null!=b?b:"",size:"md",src:null!=v?v:"",verified:S})})})}),N=(0,l.ZP)(b,70),F=(0,x.jsxs)(n.Fragment,{children:[P&&(0,x.jsx)(f.xv,{size:"200",lineClamp:1,weight:"bold",children:L(t.bt("Sponsorizzato da", "Promoted by", "indicating the username of the person who promoted the pin", undefined, true))}),(0,x.jsx)(d.Z,{id:"creator-profile-name",children:(0,x.jsx)(f.xu,{maxWidth:270,children:(0,x.jsx)(f.xv,{color:j,size:"200",weight:O?"normal":"bold",children:y||w?(0,x.jsx)(h.Z,{badgeSize:"xs",badgeSpacing:2,fullName:N,identityIsVerified:y,isVerifiedMerchant:w}):b})})})]}),Z=C&&A||m.j.includes(E)&&R,U=`/${null!=C?C:""}/`;return(0,x.jsxs)(f.xu,{alignItems:"center",display:"flex",marginEnd:-1,marginStart:-1,dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"creator-card-profile",children:[(0,x.jsx)(f.xu,{"data-test-id":"creator-avatar",flex:"none",paddingX:1,children:I?(0,x.jsx)(f.iP,{role:"link",rel:(0,r.Z)(I)?"none":"nofollow",target:z?"blank":null,onTap:D,href:I,children:B}):B}),(0,x.jsxs)(f.xu,{children:[(0,x.jsx)(f.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingX:1,children:I?(0,x.jsx)(f.rU,{underline:"none",href:I,onClick:D,rel:(0,r.Z)(I)?"none":"nofollow",target:z?"blank":null,children:F}):F}),Z?(0,x.jsx)(f.xu,{"data-test-id":"sponsor-title",display:"flex",paddingX:1,children:(0,x.jsx)(m.Z,{href:U,isPromoted:P,sponsorName:A,sponsorUsername:C,sponsorshipStatus:E,onNavigateSponsorClick:k})}):!!i&&(0,x.jsx)(f.xu,{"data-test-id":"follower-count",display:"flex",paddingX:1,children:(0,x.jsx)(f.xv,{color:j,size:"200",children:(0,_.nk)(t.nbt(["{{ followerCount }} follower", "{{ followerCount }} follower"], i, "closeup.creator.followerCount", true),{followerCount:(0,x.jsx)(a.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:i},i)})})})]})]})}},329900:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(172071),o=i(826067);const s="http://play.google.com/store/apps/details?id=com.pinterest",r=["access_token","new_password","new_password_confirm","password","next"],a=(e,t)=>t?(0,o.ru)(e,{invite_code:t}):e,l=(e,t,i)=>{if("ios"===t&&"string"==typeof e&&e.startsWith("discover/article/")){const t=e.split("/")[2];e=`discover_article/${t}/?is_deeplink=1`}return"string"==typeof e&&"shopping/"===e&&(e="?is_deeplink=1"),"string"==typeof e?a(e,i):"ios"===t||"ipad"===t?a(e.iOS,i):"android"===t?a(e.android,i):null},d=({deeplinkUri:e,fallbackUrl:t,invite_code:i,logContextEvent:a,platform:d,redirectToLite:c,unauthId:u,userAgent:h,within:p})=>{if(null==a||a({component:14347,element:13582,event_type:703,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:p}}),e){const _=(({deeplinkUri:e,invite_code:t,platform:i,fallbackUrl:n,unauthId:s})=>({deeplink_path:l(e,i,t),current_page_url:(0,o.Gw)("undefined"!=typeof window?window.location.href:"",r),install_id:s,utm_source:140,utm_medium:2152,...n?{af_r:n}:null}))({deeplinkUri:e,fallbackUrl:t,invite_code:i,platform:d,unauthId:u,userAgent:h});if(n.Z.increment("mweb.deeplink",1,{platform:d}),i&&n.Z.increment("mweb.deeplink.invite_code",1),n.Z.increment("mweb.deeplink.unauthId",1,{withUnauthId:Boolean(u)}),c){n.Z.increment("mweb.deeplink.lite_link",1),null==a||a({component:14347,element:13582,event_type:14540,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:p}});const e=(({unauthId:e})=>{const t=(0,o.XP)({utm_source:"mweb",utm_medium:"upsell",utm_campaign:"twa",utm_content:e});return{referrer:encodeURI(t)}})({unauthId:u});window.location.href=(0,o.ru)("http://play.google.com/store/apps/details?id=com.pinterest.twa",e)}else if("android"===d){const t=(({deeplinkUri:e,invite_code:t,platform:i,unauthId:n})=>{const s=JSON.stringify({deeplink_path:l(e,i,t),current_page_url:(0,o.Gw)("undefined"!=typeof window?window.location.href:"",r),install_id:n});return{referrer:(0,o.XP)({utm_source:"mweb",utm_medium:"upsell",utm_content:s})}})({deeplinkUri:e,invite_code:i,platform:d,unauthId:u});"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then((e=>{if(e.length>0){null==a||a({component:14347,element:13582,event_type:700,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:p}});const e=(0,o.ru)(window.location.href,_);window.open(e)}else null==a||a({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:p}}),window.location.href=(0,o.ru)(s,t)})).catch((()=>{n.Z.increment("mweb_android.deeplink.playStore.error",1)})):(null==a||a({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:p}}),window.location.href=(0,o.ru)(s,t))}else{if(n.Z.increment("mweb.deeplink.appsflyer_link",1),"ios"===d&&"undefined"!=typeof window&&window.location.href.includes("show_yip_modal"))return void(window.location.href=(0,o.ru)("https://pinterest.com/pinterest-predicts",_));null==a||a({component:14347,element:13582,event_type:14539,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:p}}),window.location.href=(0,o.ru)("https://pinterest.onelink.me/TVSr/21e04bfd",_)}}};var c=i(619277),u=i(948376),h=i(407043),p=i(780280),_=i(785893);function g({children:e,invite_code:t}){const{unauthId:i,userAgent:{platform:n,raw:o}}=(0,p.B)(),{logContextEvent:s}=(0,h.v)();return e((async(e,r,a)=>{s({component:14347,element:13582,event_type:3830,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:r}}),d({deeplinkUri:e,fallbackUrl:a,invite_code:t,logContextEvent:s,platform:n,redirectToLite:(0,u.Rp)({platform:n,userAgent:o}),unauthId:i,userAgent:o,within:r})}))}const m=e=>(0,_.jsx)(c.ty,{children:t=>(0,_.jsx)(g,{...e,invite_code:t})});m.displayName="DeepLinkNavigator";const f=m},857752:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(194249),o=i(240684),s=i(785893);const r=(0,o.ZP)({resolved:{},chunkName:()=>"EditorWithMentionsInternal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(72586),i.e(46888),i.e(35978)]).then(i.bind(i,400049)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 400049}});function a(e){return(0,s.jsx)(r,{...e,fallback:(0,s.jsx)(n.Z,{})})}},194249:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(898781),o=i(883119),s=i(785893);function r(){const e=(0,n.ZP)();return(0,s.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(o.$j,{accessibilityLabel:e.bt("Caricamento editor in corso", "Loading editor", "EditorWithMentionsFallback.loading", undefined, true),show:!0})})}},634449:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(676553);function s({children:e}){return e((0,n.useContext)(o.Z))}},676553:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(667294).createContext)([null,()=>{}])},495794:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(667294),o=i(121151),s=i(316271),r=i(883119),a=i(785893);const l={backgroundColor:"transparent",border:0,borderRadius:"8px",bottom:0,cursor:"pointer",height:"100%",left:0,padding:0,position:"relative",right:0,top:0,width:"100%"};function d({activeColor:e="#a3081a",delay:t=0,disabledTimer:i=!1,duration:o,height:d,hoverColor:c="#ad081b",onClick:u,text:h}){const[p,_]=(0,n.useState)(0),[g,m]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),b=(0,n.useCallback)((()=>m(!1)),[]),y=(0,n.useCallback)((()=>m(!0)),[]),v=(0,n.useCallback)((()=>x(!0)),[]),P=(0,n.useCallback)((()=>x(!1)),[]),w=(0,n.useRef)(null),I=(0,n.useRef)(null),A=(0,n.useCallback)((()=>{clearTimeout(w.current),clearTimeout(I.current),w.current=null,I.current=null})),E=(0,n.useCallback)((()=>{A(),u(),x(!1),_(0)}),[u]);return(0,n.useEffect)((()=>{i||(I.current=setTimeout((()=>_(100)),t),w.current=setTimeout(E,t+o))}),[i]),(0,n.useEffect)((()=>A),[]),(0,a.jsx)(r.xu,{color:"primary","data-test-id":"timed-button",height:d,minWidth:100,onBlur:P,onFocus:v,onMouseEnter:y,onMouseLeave:b,overflow:"hidden",position:"relative",rounding:5,children:(0,a.jsxs)("button",{style:l,onClick:E,children:[(0,a.jsx)(r.xu,{color:"selected",dangerouslySetInlineStyle:{__style:{backgroundColor:i?"transparent":e,borderRadius:"8px 0px 0px 8px",transition:i?void 0:(0,s.Z)({duration:o,property:"width",timingFunction:"linear"})}},"data-test-id":"timed-button-progress-bar",position:"absolute",top:!0,left:!0,right:!0,bottom:!0,width:`${p}%`}),(0,a.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:f||g?c:void 0}},display:"flex",justifyContent:"center",height:"100%",position:"relative",rounding:2,children:(0,a.jsx)(r.xu,{paddingX:2,children:(0,a.jsx)(r.xv,{color:"inverse",overflow:"normal",weight:"bold",children:h})})})]})})}var c=i(898781),u=i(349700),h=i(407043),p=i(780280);const _={delay:700,duration:600,property:"opacity",timingFunction:"easeInOut"},g={delay:800,duration:600,property:"opacity",timingFunction:"easeInOut"},m={property:"opacity",duration:500,timingFunction:"easeIn",delay:3300};function f({autoAdvance:e=!0,completionButtonText:t,containsHlsVideoComponent:i,isDismissable:l=!0,onComplete:f,onDismiss:x,steps:b}){const{logContextEvent:y}=(0,h.v)(),v=(0,c.ZP)(),[P,w]=(0,n.useState)(0),[I,A]=(0,n.useState)(0),[E,C]=(0,n.useState)(!1),{isRTL:S}=(0,p.B)(),j=(0,n.useCallback)((()=>{C(!0)}),[]),T=()=>{y({event_type:101,component:13473,element:11556,aux_data:{education_active_step_id:b[P]&&b[P].id}}),f()},D=()=>{y({event_type:101,component:13473,element:11557,aux_data:{education_active_step_id:b[P]&&b[P].id}}),x()},k=(0,n.useCallback)((()=>{P<b.length-1?(y({event_type:101,component:13472,element:11559}),w(P+1),C(!1)):T()}),[y,b,P,T]);return(0,n.useEffect)((()=>{E&&A(1)}),[P,E]),(0,a.jsx)(o.ZP,{accessibilityModalLabel:v.bt("Modalit istruzioni sul prodotto", "In-product education modal", "EducationModal.accessibilityModalLabel", undefined, true),allowMediaPlay:i,heading:(0,a.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{opacity:I,transition:(0,s.Z)(_)}},height:474,width:"100%",children:[(0,n.cloneElement)(b[P].element,{onStart:j}),(0,a.jsx)(r.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:I,transition:e?(0,s.Z)(m):void 0}},display:"flex",left:!0,marginBottom:5,padding:2,position:"absolute",right:!0,children:(0,a.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:[b.length>1&&(0,a.jsx)(r.xv,{color:"subtle",size:"200",weight:"bold",children:(0,u.nk)(v.bt("{{ index }} di {{totalSteps}}", "{{ index }} of {{totalSteps}}", "Footer text indicating position in guide screen (e.g. 1 of 3)", undefined, true),{index:P+1,totalSteps:b.length})}),(0,a.jsx)(r.xu,{bottom:!0,marginEnd:5,position:"absolute",right:!S,left:S,children:(0,a.jsx)(d,{disabledTimer:!e||P===b.length-1||!E,delay:0===P?3300:void 0,duration:9e3,height:36,onClick:k,text:P<b.length-1?v.bt("Avanti", "Next", "Button text to go to next step in education", undefined, true):t||v.bt("Inizia il tour", "Take Tour", "Button text to start tour", undefined, true)})})]})}),l&&(0,a.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{opacity:I,transition:(0,s.Z)(g)}},position:"absolute",marginEnd:4,marginTop:4,right:!S,left:S,top:!0,children:(0,a.jsx)(r.hU,{accessibilityLabel:v.bt("Annulla", "Cancel", "Icon Button text to Cancel", undefined, true),icon:"cancel",onClick:D,iconColor:"gray",size:"md"})})]}),onDismiss:D,role:"alertdialog",size:"lg"})}},537339:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(667294),o=i(23279),s=i.n(o),r=i(898781),a=i(883119),l=i(785893);function d({anchor:e,children:t,footer:i,onDismiss:n,size:o="lg",idealDirection:s}){const d=(0,r.ZP)();return(0,l.jsx)(a.J2,{anchor:e,onDismiss:()=>{},positionRelativeToAnchor:!1,size:o,idealDirection:s,children:(0,l.jsxs)(a.xu,{direction:"column",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,l.jsx)(a.xu,{position:"absolute",right:!0,top:!0,margin:4,children:(0,l.jsx)(a.hU,{accessibilityLabel:d.bt("Termina il tour", "End tour", "Icon button to end the education tour", undefined, true),icon:"cancel",iconColor:"gray",onClick:n,size:"xs"})}),(0,l.jsx)(a.xu,{display:"flex",padding:2,marginTop:2,children:t}),(0,l.jsx)(a.xu,{children:i})]})})}var c=i(755742);function u(e,{duration:t=660,offset:i,callback:n}){const o=window.pageYOffset,s=function(e,t=0){return e.getBoundingClientRect().top+window.pageYOffset+t}(e,i),r=performance.now(),a=()=>{const i=performance.now()-r,l=function(e,t,i,n){return i>n?t:e+(t-e)*((o=i/n)<.5?2*o*o:(4-2*o)*o-1);var o}(o,s,i,t);window.scroll(0,l),i>t?"function"==typeof n&&n(e):window.requestAnimationFrame(a)};a()}var h=i(792182);const p={__style:{color:"#000"}};function _({padding:e=16,bottomMargin:t=0,targetLeft:i,targetTop:n,targetWidth:o,targetHeight:s,showMask:r=!0}){const{width:d,height:c}=(0,h.Z)()||{width:0,height:0},u=n-e,_=i-e,g=s+2*e+t,m=o+2*e;return u<0?null:(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:p,position:"fixed",left:!0,top:!0,width:"100%",height:"100%",opacity:.7,children:(0,l.jsxs)("svg",{width:d,height:c,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("mask",{id:"mask-main",children:[(0,l.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"white"}),(0,l.jsx)("rect",{x:_,y:u,width:m,height:g,fill:"black",rx:8,ry:8})]}),(0,l.jsxs)("clipPath",{id:"clip-path",children:[(0,l.jsx)("rect",{x:0,y:0,width:d,height:u}),(0,l.jsx)("rect",{x:0,y:u,width:_,height:g}),(0,l.jsx)("rect",{x:_+m,y:u,width:d-m-_,height:g}),(0,l.jsx)("rect",{x:0,y:u+g,width:d,height:c-g-u})]})]}),(0,l.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"currentColor",mask:"url(#mask-main)"}),r&&(0,l.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"currentColor",clipPath:"url(#clip-path)",pointerEvents:"auto"}),(0,l.jsx)("rect",{x:i,y:n,width:o,height:s,pointerEvents:"auto",fill:"transparent",display:"block"})]})})}var g=i(829407);function m({keyCode:e,handler:t}){(0,n.useEffect)((()=>{function i(i){i.keyCode===e&&t()}return window.addEventListener("keyup",i),()=>window.removeEventListener("keyup",i)}),[e,t])}var f=i(464657),x=i(349700),b=i(407043);const y={content:null,selector:null,index:-1,left:0,right:0,bottom:0,top:0,width:0,height:0,status:"INIT"};function v(e=y,t){switch(t.type){case"START_TOUR":{const{content:i,selector:n}=t.payload;return{...e,selector:n,content:i,status:"IN_PROGRESS",index:0}}case"NEXT_STEP":{const{content:i,index:n,selector:o}=t.payload;return{...e,content:i,selector:o,index:n}}case"UPDATE_RECT":return{...e,...t.payload};case"UPDATE_STATUS":{const{status:i}=t.payload;return{...e,status:i}}default:return e}}function P(e){return{type:"UPDATE_STATUS",payload:{status:e}}}function w({onComplete:e,onDismiss:t,scrollOffset:i,steps:o,zIndex:p}){const{logContextEvent:w}=(0,b.v)(),I=(0,r.ZP)(),[A,E]=(0,f.Z)(),[C,S]=(0,n.useReducer)(v,y),[j,T]=(0,n.useState)(null),{width:D,height:k}=(0,h.Z)()||{width:0,height:0},z=e=>o[C.index]&&o[C.index].height?o[C.index].height:e,O=e=>{const t=e=>{const t=e.getBoundingClientRect();S(P("IN_PROGRESS")),T(e);const{bottom:i,left:n,right:o,top:s,width:r,height:a}=t,l=z(a);S({type:"UPDATE_RECT",payload:{bottom:i,left:n,right:o,top:s,width:r,height:l}})};if(e){const n=e.getBoundingClientRect();if(function({top:e,right:t,bottom:i,left:n,windowHeight:o,windowWidth:s,threshold:r=0}){return e>=0+r&&n>=0+r&&i<=o-r&&t<=s-r}({left:n.left,right:n.right,top:n.top,bottom:n.bottom,windowHeight:k,windowWidth:D,threshold:25}))t(e);else{const o=i||(z(n.height)>k?-25:-k/2+z(n.height)/2);S(P("SCROLLING")),u(e,{offset:o,callback:t})}}},R=()=>{w({event_type:101,component:13472,element:11556,aux_data:{education_active_guide_id:o[C.index]&&o[C.index].id}}),E(),e()},L=()=>{w({event_type:101,component:13472,element:11557,aux_data:{education_active_guide_id:o[C.index]&&o[C.index].id}}),E(),t()},M=(0,n.useCallback)((()=>{const{onNext:e}=o[C.index]||{};e&&e();const{content:t,selector:i}=o[C.index+1]||{};C.index<o.length-1?(w({event_type:101,component:13472,element:11559}),S(function(e,t,i){return{type:"NEXT_STEP",payload:{content:e,selector:t,index:i}}}(t,i,C.index+1))):R()}),[w,o,C.index,R]);m({keyCode:c.Z.RIGHT,handler:M}),m({keyCode:c.Z.ESCAPE,handler:L}),(0,g.Z)((()=>{A();const{content:e,selector:t}=o[0]||{};S(function(e,t){return{type:"START_TOUR",payload:{content:e,selector:t}}}(e,t))})),(0,n.useLayoutEffect)((()=>{const e="string"==typeof C.selector?document.querySelector(C.selector):C.selector;O(e);const t=s()((()=>O(e)),25);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[C.index,C.selector]);const{left:B,top:N,height:F,width:Z}=C,U=z(F);return(0,l.jsxs)(a.mh,{children:[(0,l.jsxs)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{zIndex:p||999}},left:!0,position:"absolute",right:!0,top:!0,children:[(0,l.jsx)(_,{padding:o[C.index]&&o[C.index].padding,bottomMargin:o[C.index]&&o[C.index].bottomMargin,targetLeft:B,targetTop:N,targetWidth:Z,targetHeight:U,showMask:"IN_PROGRESS"===C.status}),"IN_PROGRESS"===C.status&&(0,l.jsx)(d,{idealDirection:o[C.index]?o[C.index].idealDirection:void 0,anchor:j,size:o[C.index]&&o[C.index].size,footer:(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(a.xu,{display:"flex",flex:"grow",paddingX:2,children:(0,l.jsx)(a.xv,{color:"subtle",size:"200",weight:"bold",children:(0,x.nk)(I.bt("{{ index }} di {{totalSteps}}", "{{ index }} of {{totalSteps}}", "Footer text indicating position in tour (e.g. 1 of 3)", undefined, true),{index:C.index+1,totalSteps:o.length})})}),(0,l.jsx)(a.xu,{"data-test-id":"guide-next-button",children:(0,l.jsx)(a.zx,{fullWidth:!0,color:"gray",onClick:M,text:C.index<o.length-1?I.bt("Avanti", "Next", "Button text to go to next guide", undefined, true):I.bt("Fine", "Done", "Button text to end education tour", undefined, true)})})]}),onDismiss:L,children:C.content})]}),(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{left:B-20,top:N-20}},height:U+40,position:"absolute",width:Z+40})]})}},939853:(e,t,i)=>{i.d(t,{I:()=>n});const n="completed-in-product-education"},43898:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){const{htmlFor:t,errorMessage:i}=e;return(0,o.jsx)(n.__,{htmlFor:t,children:(0,o.jsx)(n.xu,{marginTop:1,children:(0,o.jsx)(n.xv,{color:"error",size:"200",children:i})})})}},142103:(e,t,i)=>{i.d(t,{Z:()=>A});var n=i(667294),o=i(702664),s=i(694379),r=i(898781),a=i(349700),l=i(883119),d=i(785893);const c=({followText:e,followerCount:t,userFollowed:i})=>{const n=(0,r.ZP)();return(0,a.nk)(n.bt("{{ followCount }} {{ followText }}", "{{ followCount }} {{ followText }}", " - ", undefined, true),{followCount:(0,d.jsx)(l.xu,{"data-test-id":"followCount",paddingX:1,opacity:i?void 0:.8,children:(0,d.jsx)(l.xv,{color:i?"subtle":"inverse",children:(0,d.jsx)(s.Z,{value:t,shortform:!0,shortformMaximumFractionDigits:0})})},"followCount"),followText:(0,d.jsx)(l.xu,{"data-test-id":"followText",paddingX:1,children:(0,d.jsx)(l.xv,{color:i?"default":"inverse",weight:"bold",children:e})},"followText")})};var u=i(957161),h=i(829407),p=i(201155),_=i(11363),g=i(584595),m=i(407043),f=i(918301),x=i(698330),b=i(807532),y=i(946984),v=i(343341),P=i(461773);function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class I extends n.PureComponent{constructor(...e){super(...e),w(this,"handleButtonClick",(({event:e})=>{const{requireAuth:t,i18n:i,userFollowed:n}=this.props;if(t)return e.stopPropagation(),void t({loginModalHeader:(0,_.N4)({i18n:i,toFollow:!n})});const{shouldStopEventPropagation:o,loggingData:s}=this.props;o&&(e.preventDefault(),e.stopPropagation()),this.props.logContextEvent({event_type:101,component:13672,element:11951,object_id_str:this.props.id,view_type:this.props.viewType,view_parameter:this.props.viewParameter,...s||Object.freeze({})}),this.toggleFollowUnfollow()})),w(this,"handleClick",(({event:e})=>{const{requireAuth:t}=this.props;(t||this.props.shouldStopEventPropagation)&&e.stopPropagation(),t?t():this.toggleFollowUnfollow()})),w(this,"toggleFollowUnfollow",(()=>{const{id:e,mostRecentPinId:t,loggingData:i,userFollowed:n,viewType:o,viewParameter:s}=this.props;n?(this.props.logContextEvent({event_type:46,object_id_str:e,view_type:o,view_parameter:s,aux_data:{pin_id:t},...i||Object.freeze({})}),this.unfollow()):(this.props.logContextEvent({event_type:45,object_id_str:e,view_type:o,view_parameter:s,aux_data:{pin_id:t},...i||Object.freeze({})}),this.follow())})),w(this,"follow",(()=>{const{follow:e,id:t,onUserFollow:i,mostRecentPinId:n,setMostRecentPinId:o}=this.props;e(t,n,this.showConfirmation,this.showError),i&&i(!0),o(null)})),w(this,"showToast",(e=>{const{id:t,imageUrl:i,profileUrl:n,toastManagerContext:o,suppressToasts:s}=this.props;s||o.showOneToast((({hideToast:o})=>(0,d.jsx)(p.Z,{href:n,userId:t,imageUrl:i,handleHide:o,text:e})))})),w(this,"showConfirmation",(()=>{const e=(0,d.jsx)(l.xv,{children:this.props.i18n.bt("Segui! I Pin che crea saranno mostrati nel tuo feed!", "Following! Their created Pins will show up in your home feed!", "userFollowButton.informationalToastText2", undefined, true)});this.showToast(e)})),w(this,"showError",(e=>{const{fullName:t,userFollowed:i,showEmailVerificationReminderModal:n}=this.props,o=i?this.props.i18n.bt("Si  verificato un errore quando hai smesso di seguire {{ usernameComponent }}.", "Error unfollowing {{ usernameComponent }}.", "UserFollowButton.error.unfollowing", undefined, true):this.props.i18n.bt("Si  verificato un errore quando hai iniziato a seguire {{ usernameComponent }}.", "Error following {{ usernameComponent }}.", "UserFollowButton.error.following", undefined, true);if(e&&e.api_error_code===g.H9)return void n();const s=(0,d.jsx)(l.xv,{children:(0,a.nk)(o,{usernameComponent:(0,d.jsx)(l.xv,{weight:"bold",inline:!0,children:t})})});this.showToast(s)})),w(this,"unfollow",(()=>{const{id:e,onUserFollow:t,unfollow:i,mostRecentPinId:n,setMostRecentPinId:o}=this.props;i(e,n,(()=>{}),this.showError),t&&t(!1),o(null)}))}renderButton(){const{button:e,followerCount:t,inline:i=!1,isOwnProfile:n,invertButtonColor:o,isSecondaryButton:s,size:r,showFollowerCount:a,userFollowed:u}=this.props,h=u?this.props.i18n.bt("Segui gi", "Following", "User follow button", undefined, true):this.props.i18n.bt("Segui", "Follow", "User follow button", undefined, true);if(e)return e({followText:h,onClick:this.handleButtonClick,userFollowed:u});if(n)return(0,d.jsx)(l.zx,{fullWidth:!0,disabled:!0,text:this.props.i18n.bt("Questo sei tu", "This is you", "Button label to note that this is your Profile", undefined, true)});if(a){const e="number"==typeof t?(0,d.jsx)(c,{followerCount:t,userFollowed:u,followText:h}):h;return(0,d.jsx)(l.iP,{onTap:this.handleClick,children:(0,d.jsx)(l.xu,{color:u?"secondary":"primary",rounding:2,paddingX:3,paddingY:3,children:(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:e})})})}return(0,d.jsx)(l.xu,{display:"inlineBlock","data-test-id":`user-${u?"unfollow":"follow"}-button`,children:(0,d.jsx)(l.zx,{accessibilityLabel:u?this.props.i18n.bt("Smetti di seguire", "Unfollow", "userUnfollowButton.button.accessibilityLabel", undefined, true):this.props.i18n.bt("Segui", "Follow", "userFollowButton.button.accessibilityLabel", undefined, true),color:s||u?"gray":"red",selected:o?!u:!!u,fullWidth:i,onClick:this.handleButtonClick,size:null!=r?r:void 0,text:h})})}render(){const{showPulsar:e,userFollowed:t}=this.props;return(0,d.jsxs)(l.xu,{position:"relative",display:"flex",children:[this.renderButton(),e&&(0,d.jsx)(l.iP,{onTap:this.handleClick,children:(0,d.jsx)(l.xu,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},children:(0,d.jsx)(l.o3,{paused:t||!1})})})]})}}function A(e){const{logContextEvent:t}=(0,m.v)(),i=(0,r.ZP)(),{id:n,setMostRecentPinId:s}=(0,b.f)(),a=(0,y.Z)(),l=(0,o.useDispatch)(),{showEmailVerificationReminderModal:c}=(0,f.y9)(),p=(0,x.mN)()(e.id),_=null==p?void 0:p.follower_count,g=p?p.explicitly_followed_by_me:e.userFollowed;return(0,h.Z)((()=>{const{id:t}=e,i=u.Z.getItem("unauthDesktopFollowId")||"";i&&i===t&&(u.Z.removeItem("unauthDesktopFollowId"),l((0,P.ZN)(i)))})),(0,d.jsx)(I,{...e,follow:(e,t,i,n)=>{l((0,P.yA)(e,t)).then(i).catch((e=>{n(e)}))},followerCount:_,i18n:i,logContextEvent:t,mostRecentPinId:n,requireAuth:a,setMostRecentPinId:s,showEmailVerificationReminderModal:c,toastManagerContext:(0,v.F9)(),unfollow:(e,t,i,n)=>{l((0,P.KF)(e,t)).then(i,n)},userFollowed:g})}},833991:(e,t,i)=>{i.d(t,{HW:()=>r,YW:()=>u,i3:()=>h,o2:()=>c});var n=i(667294),o=i(425288),s=i(785893);const r=660,a={educationId:null,paddingRight:0,zIndex:r};function l(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":const{educationId:i}=t.payload;return{...e,educationId:i};case"FOOTER_SET_PADDING_RIGHT":const{paddingRight:n}=t.payload;return{...e,paddingRight:n};case"FOOTER_SET_Z_INDEX":const{zIndex:o}=t.payload;return{...e,zIndex:o};default:return e}}const{Provider:d,Consumer:c,useHook:u}=(0,o.Z)("footerContext");function h({children:e}){const[t,i]=(0,n.useReducer)(l,a),o=(0,n.useCallback)((e=>i({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}})),[]),r=(0,n.useCallback)((e=>i({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}})),[]),c=(0,n.useCallback)((e=>i({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}})),[]),u=(0,n.useMemo)((()=>({...t,setEducationId:r,setPaddingRight:o,setZIndex:c})),[t,r,o,c]);return(0,s.jsx)(d,{value:u,children:e})}},697335:(e,t,i)=>{i.d(t,{c:()=>o,t:()=>s});var n=i(883521);function o({children:e}){const{height:t}=(0,n.J)();return e(t)}function s(){const{height:e}=(0,n.J)();return e}},883521:(e,t,i)=>{i.d(t,{J:()=>d,Z:()=>p});var n=i(667294),o=i(522679),s=i(425288),r=i(977558),a=i(785893);const{Provider:l,useHook:d}=(0,s.Z)("Header"),c={childList:!0,attributes:!0,subtree:!0},u={height:r.cI,isInBiznuxFullscreen:!1,repinPinId:null,repinStartAnimation:!1,showAccountMenuFlyout:!1};function h(e,t){switch(t.type){case"showAccountMenuFlyout":return{...e,showAccountMenuFlyout:!0};case"hideAccountMenuFlyout":return{...e,showAccountMenuFlyout:!1};case"showRepinAnimation":return{...e,repinStartAnimation:!0,repinPinId:t.payload};case"hideRepinAnimation":return{...e,repinStartAnimation:!1,repinPinId:null};case"updateHeight":return{...e,height:t.payload};case"updateIsInBiznuxFullscreen":return{...e,isInBiznuxFullscreen:t.payload};default:throw new Error("action type not supported")}}function p({children:e}){const t=(0,n.useRef)(null),[{height:i,isInBiznuxFullscreen:s,repinPinId:d,repinStartAnimation:p,showAccountMenuFlyout:_},g]=(0,n.useReducer)(h,u);(0,n.useEffect)((()=>{const e=document.getElementById(r.WZ),i=()=>{e&&g({type:"updateHeight",payload:e.clientHeight})};return e&&"undefined"!=typeof MutationObserver&&(t.current=new MutationObserver(i),t.current.observe(e,c)),()=>{var e;null===(e=t.current)||void 0===e||e.disconnect()}}));const m=(0,n.useMemo)((()=>({height:i,isInBiznuxFullscreen:s,repinPinId:d,repinStartAnimation:p,showAccountMenuFlyout:_,updateHeaderState:g})),[g,i,s,d,p,_]);return(0,a.jsx)(l,{value:m,children:(0,a.jsx)(o.t,{children:e})})}},977558:(e,t,i)=>{i.d(t,{L1:()=>s,Rz:()=>l,WZ:()=>r,cI:()=>o,fe:()=>a,hu:()=>n});const n=64,o=80,s=22,r="HeaderContent",a=671,l={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},500985:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(980968),o=i(829407),s=i(898781),r=i(237056),a=i(616550),l=i(785893);function d(){const e=(0,a.useHistory)(),t=(0,a.useRouteMatch)(),i=(0,s.ZP)(),d=(0,r.Z)();return(0,o.Z)((()=>{"/story-pin-invite/"===t.url&&e.push("/idea-pin-invite/")})),(0,l.jsx)(n.Z,{titleText:d?i.bt("Scarica l'app per creare Pin", "Get the app to create Pins", "inviteLandingPageV2.appUpsellPage.heading.sce", undefined, true):i.bt("Scarica l'app per creare Pin Idea", "Get the app to create Idea Pins", "inviteLandingPageV2.appUpsellPage.heading", undefined, true),bodyText:d?i.bt("L'app di Pinterest contiene gli strumenti necessari per pubblicare il tuo primo Pin. Scarica, lasciati ispirare e inizia a creare.", "The Pinterest app has the tools you need to publish your first Pin. Download, get inspired, then start creating.", "inviteLandingPageV2.appUpsellPage.description.sce", undefined, true):i.bt("L'app di Pinterest possiede gli strumenti necessari per pubblicare il tuo primo Pin Idea. Scarica, lasciati ispirare e inizia a creare.", "The Pinterest app has the tools you need to publish your first Idea Pin. Download, get inspired, then start creating.", "inviteLandingPageV2.appUpsellPage.description", undefined, true),buttonText:i.bt("Scarica l'app", "Get the app", "inviteLandingPageV2.appUpsellPage.cta", undefined, true),deeplink:"/idea-pin-builder/"})}},807532:(e,t,i)=>{i.d(t,{C:()=>l,f:()=>a});var n=i(667294),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("MostRecentPin");function l({children:e}){const[t,i]=(0,n.useState)(),[o,a]=(0,n.useState)(),l=(0,n.useCallback)((e=>{const t=o?o.slice(0,10):[],i=[e].concat(t.filter((t=>t!==e)));a(i)}),[o]),d=(0,n.useMemo)((()=>({id:t,plpImageSignatures:o,setMostRecentPinId:i,setMostRecentPinImage:l})),[t,o,l]);return(0,s.jsx)(r,{value:d,children:e})}},131555:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(784590);function o({children:e,fieldSetKey:t,pinId:i}){const{data:o,error:s,isLoaded:r}=(0,n.Z)({name:"PinResource",options:{id:i,field_set_key:t}});return e({pin:o,loading:!r,error:(s||{}).message})}},350118:(e,t,i)=>{i.d(t,{AF:()=>a,H0:()=>l,S6:()=>d,_S:()=>c});var n=i(702664),o=i(425288),s=i(785893);const{Provider:r,useHook:a,useMaybeHook:l}=(0,o.Z)("Pins");function d(){const e=a();return t=>e[t]}function c({children:e}){const t=(0,n.useSelector)((({pins:e})=>e),n.shallowEqual);return(0,s.jsx)(r,{value:t,children:e})}},698330:(e,t,i)=>{i.d(t,{Tt:()=>u,cm:()=>c,kW:()=>l,kY:()=>h,mN:()=>d});var n=i(702664),o=i(19121),s=i(425288),r=i(785893);const{Provider:a,useHook:l}=(0,s.Z)("Users");function d(){const e=l();return t=>e[t]}function c(){const e=l();return t=>{const i=Object.keys(e).find((i=>e[i].username===t));return e[null!=i?i:""]}}function u(){const{id:e}=(0,o.Z)();return l()[null!=e?e:""]}function h({children:e}){const t=(0,n.useSelector)((({users:e})=>e),n.shallowEqual);return(0,r.jsx)(a,{value:t,children:e})}},2396:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(482981),s=i(827021),r=i(121151),a=i(750869),l=i(946984),d=i(883119),c=i(785893);function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=new d.Ry(1),p=({children:e})=>e((0,l.Z)());class _ extends n.Component{constructor(...e){super(...e),u(this,"handleDismiss",(()=>{const{onFlyoutDismiss:e}=this.props;e()})),u(this,"onHide",(()=>{this.props.onClick(),this.handleDismiss()})),u(this,"flyoutProps",(()=>{var e;const{gridDescription:t,idealDirection:i,imageSrc:n,pinId:r,userId:l,board:d,sendType:u,fullName:h,profileUrl:p,element:_,viewParameter:g,component:m,viewType:f,onExternalSend:x,showCaret:b,todayArticle:y,ownerId:v}=this.props;let P={description:t,id:r,imageUrl:n,name:"",type:a.d.PIN,url:`/pin/${r}/`,ownerId:v},w=a.d.PIN;switch(u){case"user":P={description:t,id:l,imageUrl:n,name:h,type:a.d.PINNER,url:p},w=a.d.USER;break;case"board":P=d&&{description:d.description,id:d.id,imageUrl:d.imageUrl,name:d.name,type:a.d.BOARD,url:d.url,ownerId:null===(e=d.owner)||void 0===e?void 0:e.id},w=a.d.BOARD;break;case"today_article":P=y&&{description:y.subtitle||"",id:y.id,imageUrl:n,name:y.title,type:a.d.TODAY_ARTICLE,url:(0,o.Z)(y)},w=a.d.TODAY_ARTICLE}const I={element:_,component:m,onHide:this.onHide,onExternalSend:x,sendType:w,sharedObject:P,viewParameter:g,viewType:f};return{anchor:this.flyoutAnchor,idealDirection:i,onDismiss:this.handleDismiss,showCaret:b,children:(0,c.jsx)(s.default,{...I})}}))}toggle(){const{isOwnProfile:e,onToggleFlyout:t,sendType:i,userId:n,logContextEvent:o}=this.props;"user"===i&&o({event_type:101,component:13675,element:1079,object_id_str:n,view_type:4,view_parameter:e?3106:3107}),t()}render(){const{Subject:e,inModal:t,isFlyoutOpen:i,shownWithinMasonry:n,shownWithinProfileHeader:o}=this.props,{anchor:s,idealDirection:a,showCaret:l,children:u}=this.flyoutProps(),_=(0,c.jsx)(d.xu,{children:(0,c.jsx)(p,{children:t=>(0,c.jsx)(e,{handleSendShareFlyoutButtonClick:e=>{t?t():(null!=e&&e.stopPropagation&&e.stopPropagation(),this.toggle())},...this.props})})}),g=i&&(n||o?(0,c.jsx)(d.mh,{zIndex:o?h:void 0,children:(0,c.jsx)(d.xu,{zIndex:t?r.b7:void 0,position:t?"absolute":void 0,top:!!t||void 0,children:(0,c.jsx)(d.J2,{anchor:s,idealDirection:a,onDismiss:()=>{this.handleDismiss()},showCaret:l,size:"flexible",positionRelativeToAnchor:!1,children:u})})}):(0,c.jsx)(d.J2,{anchor:s,idealDirection:a,onDismiss:()=>{this.handleDismiss()},showCaret:l,size:"flexible",children:u}));return(0,c.jsxs)(d.xu,{ref:e=>{e&&(this.flyoutAnchor=e)},dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[_," ",g]})}}u(_,"defaultProps",{idealDirection:"down",onClick:()=>{}});var g=i(112690);function m(e){return t=>{const i=(0,g.Z)();return(0,c.jsx)(_,{Subject:e,logContextEvent:i,...t})}}},17676:(e,t,i)=>{i.d(t,{l:()=>c,E:()=>d});var n=i(667294),o=i(425288);function s(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:o}=t;if("ShareSuggestionsResource"===o.resource){var i;const n=t.payload.response.resource_response.data||[],{term:s=""}=null!==(i=o.options)&&void 0!==i?i:{};return{...e,[s]:n}}if("ShareSuggestionsTypeaheadResource"===o.resource){var n;const i=(t.payload.response.resource_response.data||{}).items||[],{term:s=""}=null!==(n=o.options)&&void 0!==n?n:{};return{...e,[s]:i}}}return e}var r=i(505920),a=i(785893);const{Provider:l,useHook:d}=(0,o.Z)("ShareSuggestions");function c({children:e}){const[t,i]=(0,n.useReducer)(s,{}),o=e=>{i({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};(0,r.Z8)("ShareSuggestionsResource",o),(0,r.Z8)("ShareSuggestionsTypeaheadResource",o);const d=(0,n.useMemo)((()=>({shareSuggestions:t})),[t]);return(0,a.jsx)(l,{value:d,children:e})}},327096:(e,t,i)=>{i.d(t,{j:()=>c,f:()=>d});var n=i(667294),o=i(425288);const s={currentPinDraftId:null,mostRecentTaggedObjectId:null,selectedStlItemId:null,stlCallout:{showCallout:!1},stlTaggedCoords:null,stlHoveredTaggedObjectId:null},r=(e=s,t)=>{switch(t.type){case"STL_SELECT":return{...e,selectedStlItemId:t.payload.selectedStlItemId};case"STL_SHEET":return{...e,currentPinDraftId:t.payload.currentPinDraftId};case"STL_TAGGED_PIN":return{...e,stlTaggedCoords:t.payload.stlTaggedCoords};case"STL_ERROR_STATE":return{...e,stlCallout:{showCallout:t.payload.stlCallout.showCallout,type:t.payload.stlCallout.type}};case"STL_MOST_RECENT_TAGGED_OBJECT_ID":return{...e,mostRecentTaggedObjectId:t.payload.mostRecentTaggedObjectId};case"SET_STL_HOVERED_TAGGED_OBJECT_ID":return{...e,stlHoveredTaggedObjectId:t.payload.stlHoveredTaggedObjectId};default:return e}};var a=i(785893);const{Provider:l,useHook:d}=(0,o.Z)("ShopTheLook");function c({children:e}){const[t,i]=(0,n.useReducer)(r,s),o=(0,n.useMemo)((()=>({shopTheLook:t,setStlSelection:e=>{i({type:"STL_SELECT",payload:{selectedStlItemId:e}})},setCurrentPinDraftId:e=>{i({type:"STL_SHEET",payload:{currentPinDraftId:e}})},setStlTaggedCoord:e=>{i({type:"STL_TAGGED_PIN",payload:{stlTaggedCoords:e}})},setStlCallout:({showCallout:e,type:t})=>{i({type:"STL_ERROR_STATE",payload:{stlCallout:{showCallout:e,type:t}}})},setMostRecentTaggedObjectId:e=>{i({type:"STL_MOST_RECENT_TAGGED_OBJECT_ID",payload:{mostRecentTaggedObjectId:e}})},setStlHoveredTaggedObjectId:e=>{i({type:"SET_STL_HOVERED_TAGGED_OBJECT_ID",payload:{stlHoveredTaggedObjectId:e}})}})),[t]);return(0,a.jsx)(l,{value:o,children:e})}},202870:(e,t,i)=>{i.d(t,{Z:()=>d,j:()=>l});var n=i(898781),o=i(349700),s=i(773285),r=i(883119),a=i(785893);const l=[0,2,3];function d({hasAffiliateProducts:e,href:t,isPromoted:i,onNavigateSponsorClick:d,sponsorName:c,sponsorUsername:u,sponsorshipStatus:h,textWeight:p="bold"}){const _=(0,n.ZP)(),g=(0,s.F)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled,m=(0,s.F)().checkExperiment("web_remove_paid_partnership_in_rejected_state").anyEnabled,f=t||(u?`/${u}/`:null),x=f&&c?(0,a.jsx)(r.rU,{href:f,onClick:d,children:(0,a.jsx)(r.xv,{weight:p,size:"200",children:c})},c):void 0;let b;i?b=(0,o.nk)(_.bt("Sponsorizzato da {{ name }}", "Promoted by {{ name }}", "sponsorship.sponsorshipText.promotedByBrand", undefined, true),{name:x}):h||0===h?c&&!l.includes(h)?b=(0,o.nk)(_.bt("Partnership a pagamento con {{ name }}", "Paid partnership with {{ name }}", "closeup.creator.sponsoredPinTitle", undefined, true),{name:x}):m&&2===h||(b=_.bt("Partnership a pagamento", "Paid partnership", "closeup.creator.sponsoredPinTitle", undefined, true)):e&&(b=_.bt("Include prodotti sponsorizzati", "Includes sponsored products", "sponsorship.sponsorshipText.affiliatedProducts", undefined, true));const y=g&&!i?"Ad  ":"";return(0,a.jsxs)(r.xv,{inline:!0,size:"200",lineClamp:2,children:[y,b]})}},777906:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(865607),s=i(883119),r=i(785893);const a=function({badgeSize:e,badgeSpacing:t,fullName:i,identityIsVerified:a,isVerifiedMerchant:l,truncate:d=!1}){const c=i.split(" "),u=c.slice(0,c.length-1).join(" "),h=" ".concat(c[c.length-1]);return d?(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,r.jsx)(s.xv,{lineClamp:1,weight:"bold",children:i}),(0,r.jsx)(s.xu,{flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},paddingX:1,children:(0,r.jsx)(o.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]}):(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("span",{children:u}),(0,r.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[h,"",(0,r.jsx)(s.xu,{display:"inlineBlock",flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},children:(0,r.jsx)(o.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]})]})}},526760:(e,t,i)=>{i.d(t,{FC:()=>a,FP:()=>s,M0:()=>o,Xq:()=>l,s0:()=>n,z9:()=>r});const n=44,o=236,s=157,r=320,a=213,l=7},607989:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(121151),o=i(898781),s=i(883119),r=i(785893);function a({cancelButtonLabel:e,confirmButtonLabel:t,heading:i,message:a,onCancel:l,onConfirm:d}){const c=(0,o.ZP)(),u=i||c.bt("Confermi?", "Are you sure?", " - ", undefined, true),h=e||c.bt("Annulla", "Cancel", " - ", undefined, true);return(0,r.jsx)(n.ZP,{accessibilityModalLabel:u,footer:(0,r.jsxs)(s.xu,{marginEnd:-1,marginStart:-1,children:[(0,r.jsx)(s.xu,{"data-test-id":"cancel-button",padding:1,children:(0,r.jsx)(s.zx,{fullWidth:!0,onClick:l,size:"lg",text:h})}),(0,r.jsx)(s.xu,{"data-test-id":"confirm-button",padding:1,children:(0,r.jsx)(s.zx,{fullWidth:!0,color:"red",onClick:d,size:"lg",text:t})})]}),heading:u,onDismiss:l,role:"alertdialog",children:(0,r.jsx)(s.xu,{padding:4,children:(0,r.jsx)(s.xv,{children:a})})})}},147836:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);class o extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n=()=>{const{isAtEnd:e,isFetching:t,fetchMore:i,scrollBuffer:n,scrollHeight:o,scrollTop:s}=this.props;e||t||s+n>o&&i()},(i="check")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},92261:(e,t,i)=>{i.d(t,{$T:()=>m,CI:()=>s,Ch:()=>a,Gb:()=>l,Gg:()=>n,Ie:()=>h,KP:()=>p,Kn:()=>r,Uj:()=>d,bx:()=>_,d2:()=>u,g9:()=>g,iB:()=>f,u6:()=>o,zT:()=>c});const n=508,o=2*n,s=488,r=992,a=672,l=1176,d=.6,c=.84,u=40,h=72,p=740,_=912,g=32,m=24,f={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},814197:(e,t,i)=>{i.d(t,{Cq:()=>u,Dk:()=>p,Fk:()=>s,fS:()=>c,km:()=>h,lI:()=>a,lJ:()=>r,mS:()=>d,qW:()=>l,t5:()=>_});var n=i(883119),o=i(977558);const s=new n.Ry(1),r=3,a=new n.Ry(r),l=2,d=new n.Ry(l),c=3,u=4,h=new n.Ry(5),p=new n.Ry(100),_=new n.Ry(o.fe+1)},361115:(e,t,i)=>{i.d(t,{J:()=>r,U:()=>s});var n=i(50286),o=i(780280);const s=({isDesktop:e,viewerType:t})=>"bot"===t?"seo_graphql_pin_page":"auth"===t?e?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page":e?"unauth_dweb_graphql_pin_page":"unauth_mweb_graphql_pin_page",r=()=>{const e=(0,n.HG)(),t=(()=>{const{isAuthenticated:e,isBot:t}=(0,o.B)();return t?"bot":e?"auth":"unauth"})();return s({isDesktop:e,viewerType:t})}},846760:(e,t,i)=>{i.d(t,{xH:()=>q,uC:()=>W,sR:()=>$,DR:()=>G});var n=i(667294),o=i(702664),s=i(24886),r=i(898781),a=i(883119),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.Component{constructor(...e){super(...e),d(this,"state",{hovered:!1}),d(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),d(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),d(this,"handleTouch",(()=>{const{board:e,onClick:t,section:i}=this.props;t(i,e)})),d(this,"handleButtonClick",(({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()})),d(this,"tapAreaRef",(0,n.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){var e,t,i,n,o,r;const{hovered:d}=this.state,{buttonText:c,section:u,showSectionSaveButton:h,useLegoLayout:p}=this.props;return(0,l.jsx)(a.iP,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:(0,l.jsxs)(a.xu,{color:d?"secondary":"default","data-test-id":`section-row-${u.title||""}`,display:"flex",alignItems:"center",height:p?64:52,marginStart:p?2:0,marginEnd:p?2:0,padding:p?2:0,marginTop:p?0:1,rounding:3,dangerouslySetInlineStyle:{__style:p?{}:{marginLeft:53,marginRight:11}},children:[p&&!(null===(e=u.preview_pins)||void 0===e||!e.length)&&(0,l.jsx)(s.Z,{image_url:null!==(t=u.preview_pins[0].image_square_url)&&void 0!==t?t:"",naturalHeight:null!==(i=null===(n=u.preview_pins[0].image_square_size_pixels)||void 0===n?void 0:n.height)&&void 0!==i?i:1,naturalWidth:null!==(o=null===(r=u.preview_pins[0].image_square_size_pixels)||void 0===r?void 0:r.width)&&void 0!==o?o:1}),(0,l.jsx)(a.xu,{flex:"grow",paddingY:1,marginStart:p?0:4,children:(0,l.jsx)(a.xv,{lineClamp:1,weight:p?"bold":"normal",children:u.title})}),d&&h&&(0,l.jsx)(a.xu,{marginEnd:p?0:2,flex:"none",children:(0,l.jsx)(a.zx,{accessibilityLabel:"save button",color:"red",text:c||this.props.i18n.bt("Salva", "Save", "save button", undefined, true),onClick:this.handleButtonClick})})]})})}}function u(e){const t=(0,r.ZP)();return(0,l.jsx)(c,{...e,i18n:t})}d(c,"defaultProps",{showSectionSaveButton:!0});var h=i(717615),p=i(784590),_=i(19121),g=i(231947);function m(e){const t=(0,r.ZP)(),{board:i,buttonText:n,onClick:o,onButtonClick:s,showSectionSaveButton:d,useLegoLayout:c}=e,m=(0,h.Z)(),f=(0,_.Z)(),x=(0,g.lJ)(f,m),b=(0,p.Z)({name:"BoardSectionsRepinResource",options:{board_id:i.id,orbac_subject_id:x},noCache:!0}),y=b&&b.data||[];return(0,l.jsxs)(a.xu,{children:[!b.isLoaded&&(0,l.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,l.jsx)(a.$j,{accessibilityLabel:t.bt("caricamento raccoglitore bacheche", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),b.isLoaded&&(0,l.jsxs)(a.xu,{children:[c&&(0,l.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,l.jsx)(a.xv,{size:"100",children:t.bt("Sezione", "Section", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),y.map((e=>(0,l.jsx)(u,{board:i,buttonText:n,onButtonClick:s,onClick:o,section:e,showSectionSaveButton:d,useLegoLayout:c},e.id)))]})]})}function f({onClick:e,title:t,showIcon:i}){const o=(0,r.ZP)(),[s,d]=(0,n.useState)(!1);return(0,l.jsx)(a.iP,{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onTap:()=>{e({title:t})},children:(0,l.jsxs)(a.xu,{color:s?"secondary":"default",display:"flex",alignItems:"center",height:i?64:52,marginStart:3,marginEnd:3,marginBottom:1,rounding:3,children:[(0,l.jsx)(a.xu,{flex:"none",marginBottom:1,marginStart:i?1:2,marginEnd:3,marginTop:1,overflow:"hidden",width:i?48:36,height:i?48:36,rounding:i?2:1,children:(0,l.jsx)(a.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,l.jsx)(a.JO,{icon:"add",color:"default",size:20,accessibilityLabel:o.bt("Crea icona bacheca", "Create board icon", "BoardSuggestionRow.AccessibilityLabel.Text", undefined, true)})})}),(0,l.jsx)(a.xu,{flex:"grow",paddingY:1,children:(0,l.jsx)(a.xv,{lineClamp:1,weight:"bold",children:t})}),s&&(0,l.jsx)(a.xu,{marginEnd:2,children:(0,l.jsx)(a.zx,{accessibilityLabel:"create button",color:"red",text:o.bt("Crea", "Create", "create button to create a new board", undefined, true)})})]})})}function x(e){const t=(0,r.ZP)(),{suggestionsResource:i,onClick:o,pinBuilderSuggestions:s,inWebRepinFlowExp:d}=e,c=s||i&&i.data||[],u=(0,l.jsxs)(n.Fragment,{children:[d&&(0,l.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,l.jsx)(a.xv,{size:"100",children:t.bt("Suggerimenti", "Suggestions", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),c.map(((e,t)=>(0,l.jsx)(f,{title:e.title,onClick:o,showIcon:d},t)))]});return(0,l.jsx)(n.Fragment,{children:c?u:(0,l.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,l.jsx)(a.$j,{accessibilityLabel:t.bt("caricamento suggerimenti bacheca", "loading board suggestions", "accessibility text for loading spinner", undefined, true),show:!0})})})}function b({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:i}){const o=(0,r.ZP)(),[s,d]=(0,n.useState)(!1);return(0,l.jsx)(a.xu,{"data-test-id":"create-board",height:"100%",display:"flex",children:(0,l.jsx)(a.iP,{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onTap:t,rounding:2,children:(0,l.jsxs)(a.xu,{display:"flex",alignItems:"center",padding:i?4:2,color:s?"secondary":"default",width:"100%",height:"100%",children:[(0,l.jsx)(a.xu,{rounding:i?2:0,dangerouslySetInlineStyle:{__style:i?{padding:"14px"}:{}},marginStart:i?0:4,marginEnd:i?2:5,color:i?"secondary":"transparent",children:(0,l.jsx)(a.JO,{accessibilityLabel:"",size:i?20:28,icon:i?"add":"add-circle",color:i?"default":"error"})}),e?(0,l.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:o.bt("Crea bacheca", "Create board", " - ", undefined, true)}):(0,l.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:o.bt("Crea sezione", "Create section", " - ", undefined, true)})]})})})}var y=i(217641),v=i(391254),P=i(214494),w=i(984206),I=i(941646),A=i(615298),E=i(814197),C=i(414327),S=i(407043),j=i(773285),T=i(486746),D=i(27255);function k(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class z extends n.Component{constructor(...e){super(...e),k(this,"state",{hovered:!1}),k(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),k(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),k(this,"handleTouch",(()=>{const{board:e,onClick:t}=this.props;t(e)})),k(this,"handleButtonClick",(({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()})),k(this,"tapAreaRef",(0,n.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){const{hovered:e}=this.state,{accessibilityLabelText:t,board:i,buttonText:n,displayAlreadySavedMsg:o,i18n:s,isSectionOpen:r,shouldOpenSections:d,showSaveToProfile:c,showFlyoutSaveButton:u,useLegoLayout:h}=this.props,p=!!i.section_count&&i.section_count>0,_=p?"boardWithSection":"boardWithoutSection",{images:g,image_cover_url:m}=i||{},f=!(null!=m&&m.includes("custom"))&&g&&g["75x75"]&&g["75x75"][g["75x75"].length-1].url,x=f||m;return(0,l.jsx)(I.Z,{id:_,children:(0,l.jsx)(a.iP,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:(0,l.jsxs)(a.xu,{alignItems:"center",color:e?"secondary":"default","data-test-id":`board-row-${i.name||""}`,display:"flex",height:h?64:52,marginStart:h?2:3,marginEnd:h?2:3,marginBottom:h?0:1,marginTop:h?0:1,padding:h?2:0,rounding:3,children:[(0,l.jsxs)(a.xu,{"aria-hidden":"true",flex:"none",height:h?48:36,marginBottom:h?0:1,marginStart:h?0:2,marginEnd:h?2:3,marginTop:h?0:1,overflow:"hidden",width:h?48:36,children:[c&&"boardless"===i.type&&(0,l.jsx)(a.zd,{rounding:2,width:48,height:48,children:(0,l.jsx)(a.xu,{color:e?"default":"secondary",display:"flex",height:"100%",width:"100%",children:(0,l.jsx)(a.xu,{padding:3,children:(0,l.jsx)(a.JO,{accessibilityLabel:this.props.i18n.bt("Salva nell'icona del profilo", "Save to profile icon", "BoardRow.TapArea.Icon", undefined, true),color:"default",icon:"history",size:24})})})}),x&&!d&&(0,l.jsx)(a.zd,{height:h?48:36,rounding:2,wash:!0,width:h?48:36,children:(0,l.jsx)(a.Ee,{src:x,alt:"",naturalHeight:h?48:36,naturalWidth:h?48:36,fit:"cover"})}),x&&d?(0,l.jsx)(a.zd,{rounding:2,wash:!0,width:h?48:36,height:h?48:36,children:(0,l.jsx)(a.Ee,{src:x,alt:"",naturalHeight:h?48:36,naturalWidth:h?48:36,fit:"cover"})}):(0,l.jsx)(a.xu,{color:d?"secondary":"transparent",width:"100%",height:"100%"})]}),(0,l.jsxs)(a.xu,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:h?0:1,children:[(0,l.jsx)(a.xv,{lineClamp:1,weight:d||!d?"bold":"normal",children:i.name}),o&&(0,l.jsx)(a.xu,{marginTop:1,children:(0,l.jsx)(a.xv,{align:"start",color:"default",size:"100",children:s.bt("Gi salvato qui", "Saved here already", "BoardFlyout.AlreadySaved.Message", undefined, true)})})]}),i&&(!e||e&&p&&!r)?(0,l.jsx)(a.xu,{children:(0,l.jsx)(T.Z,{board:i,isOpen:i.isOpen,showCollaborativeIcon:!!i.is_collaborative,showPrivateIcon:i.privacy===D.Z.BoardPrivacy.SECRET,showProtectedIcon:i.privacy===D.Z.BoardPrivacy.PROTECTED,showSectionsIcon:p&&d,useLegoLayout:h})}):null,e&&(0===i.section_count||!d)&&u&&(0,l.jsx)(a.xu,{marginEnd:h?0:2,flex:"none",children:(0,l.jsx)(a.zx,{accessibilityLabel:t||this.props.i18n.bt("pulsante salva", "save button", "boardRow.saveButton", undefined, true),color:"red",onClick:this.handleButtonClick,text:n||this.props.i18n.bt("Salva", "Save", "save button", undefined, true)})})]})})})}}k(z,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});const O=(0,n.forwardRef)(((e,t)=>{const i=(0,r.ZP)();return(0,l.jsx)(z,{...e,ref:t,i18n:i})}));var R=i(780280),L=i(129291);function M(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const B=e=>e?498:439,N=360,F=e=>e?80:52;class Z extends n.PureComponent{constructor(...e){var t;super(...e),t=this,M(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),M(this,"getItems",(e=>{const{boardResource:t,changeBoardModal:i,showSaveToProfile:n}=this.props;if(null==t||!t.data)return[];const{all_boards:o}=t.data,s=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n.bt("Profilo", "Profile", "pinBetterSave.initialSelection.boardlessPinsOption", undefined, true),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],r=this.getAllBoards().map((e=>this.mapBoards(e,"allBoards",0))),a=this.getShortlist().map(((e,t)=>this.mapBoards(e,"shortlist",t+1))),{checkExperiment:l}=this.props,{group:d}=l("board_picker_holdout"),c="enabled_no_profile"===d,u=n&&!i&&o.length>=3&&!c?[...s,...a.slice(0,2)]:a,{searchQuery:h}=this.state;return h.length>=w.Z?[...(0,A.j)(r,h)]:[...o.length<3&&n&&!c?[{type:"header",title:this.props.i18n.bt("Salva rapidamente e organizza le idee pi tardi", "Quick save and organize later", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle", undefined, true)},...s]:[],...o.length>=3&&u&&u.length?[{type:"header",title:e?this.props.i18n.bt("Le pi scelte", "Top choices", "PinBetterSave.BoardFlyout.TopChoicesSectionTitle", undefined, true):this.props.i18n.bt("Suggerimenti bacheche migliori", "Top board suggestions", "Header for top suggesions in board picker", undefined, true)},...u]:[],...o.length>0?[{type:"header",title:o.length<3&&n?this.props.i18n.bt("Salva in una bacheca", "Save to board", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle", undefined, true):this.props.i18n.bt("Tutte le bacheche", "All boards", "Header for all boards in board picker", undefined, true)},...r]:[]]})),M(this,"mapBoards",((e,t,i)=>{const{selectedBoardId:n,selectedBoardCategory:o}=this.state,s=e.id===n&&t===o;return{...e,category:t,isOpen:s,gridIndex:i}})),M(this,"handleBack",(()=>{const{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)})),M(this,"handleSectionClick",((e,t)=>{const{onItemChosen:i,logContextEvent:n,pin:o}=this.props,{searchQuery:s}=this.state,r=this.getSuggestedBoardsIds();n({event_type:101,component:13282,element:36,object_id_str:t.id,view_type:91,aux_data:{board_id:t.id,grid_index:t.gridIndex,is_profile_save:!1,pin_id:null==o?void 0:o.id,search_query:s,section_id:e.id,suggested_boards:r}}),i({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url,ownerUsername:t.owner&&t.owner.username||""})})),M(this,"getPinBuilderSuggestions",(async function(){const{pin:e}=t.props;if(e){var i;const n=P.Z.create("BoardTitleSuggestionsResource",{pin_id:e.id}),o=await n.callGet({showError:!1});if(null!==(i=o.resource_response)&&void 0!==i&&i.data){const e=o.resource_response.data.map((e=>({title:e.title})))||[];t.setState({boardSuggestions:e})}}})),M(this,"getAllBoards",(()=>{var e;const{boardResource:t,advertiser_id:i}=this.props;return((null==t||null===(e=t.data)||void 0===e?void 0:e.all_boards)||[]).filter((e=>!i||"secret"!==e.privacy))})),M(this,"getShortlist",(()=>{var e;const{suggestedBoardsShortListResource:t,displayShortlistMostRecentBoard:i,boardResource:n}=this.props,o=(null==n||null===(e=n.data)||void 0===e?void 0:e.boards_shortlist)||[];return i?o:(null==t?void 0:t.data)||[]})),M(this,"getBoards",(e=>"allBoards"===e?this.getAllBoards():"shortlist"===e?this.getShortlist():[])),M(this,"getSuggestedBoardsIds",(()=>{const{showSaveToProfile:e}=this.props,t=(e?this.getShortlist().slice(0,2):this.getShortlist()).map((e=>e.id));return e&&t.unshift("PROFILE_PINS"),t})),M(this,"handleBoardWithSectionsClick",(e=>{const{setBoardWithSection:t}=this.props,{selectedBoardId:i,selectedBoardCategory:n}=this.state,o=this.getBoards(e.category).find((({id:t})=>t===e.id)),s=i===e.id&&n===e.category;o&&t&&t(o),this.setState({isSectionOpen:!0,selectedBoardId:s?"":e.id,selectedBoardCategory:s?"":e.category})})),M(this,"handleBoardClick",(({board:e,toggleSections:t})=>{const{onItemChosen:i,logContextEvent:n,pin:o}=this.props,{searchQuery:s}=this.state,r=this.getSuggestedBoardsIds();this.setState({searchBoxFocused:!1}),t?this.handleBoardWithSectionsClick({id:e.id,category:e.category}):(n({event_type:101,component:13282,element:36,object_id_str:e.id,view_type:91,aux_data:{board_id:e.id,grid_index:e.gridIndex,is_profile_save:"boardless"===e.type,pin_id:null==o?void 0:o.id,search_query:s,suggested_boards:r}}),i({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url,privacy:e.privacy}))})),M(this,"handleSearchQueryUpdate",(e=>{this.setState((t=>({...t,searchQuery:e})))})),M(this,"handleCreateBoardClick",(()=>{const{logContextEvent:e,onBoardCreate:t}=this.props,{searchQuery:i}=this.state;e({event_type:101,component:13282,element:249,view_type:91,aux_data:{search_query:i}}),t({title:i})})),M(this,"handleBoardSuggestionClick",(e=>{const{logContextEvent:t,onBoardCreate:i}=this.props;t({event_type:101,component:13282,element:23,view_type:91}),i(e)})),M(this,"boardSectionsHeaderRef",(0,n.createRef)())}componentDidMount(){var e;(this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.props.setBoardWithSection&&this.props.setBoardWithSection(null),this.props.showSaveToProfile)&&this.props.logContextEvent({event_type:13,component:13282,element:11933,aux_data:{pin_id:null===(e=this.props.pin)||void 0===e?void 0:e.id}})}componentDidUpdate(e,t){var i,n;if(e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.state.isSectionOpen&&!t.isSectionOpen&&this.boardSectionsHeaderRef.current&&this.boardSectionsHeaderRef.current.focus(),(null===(i=e.suggestedBoardsShortListResource)||void 0===i||!i.isLoaded)&&null!==(n=this.props.suggestedBoardsShortListResource)&&void 0!==n&&n.isLoaded){const e=this.getSuggestedBoardsIds();var o;if(e.length>0)this.props.logContextEvent({event_type:13,component:13282,element:1001,aux_data:{pin_id:null===(o=this.props.pin)||void 0===o?void 0:o.id,suggested_boards:e}})}}setPWTLoadingEnd(){const{boardResource:e,boardPickerStopwatch:t}=this.props;t&&(!e||e.error?t.error():t.stop())}render(){const{accessibilityLabelText:e,boardResource:t,buttonText:i,changeBoardModal:o,customItem:s,onButtonClick:r,paneHeight:d,paneWidth:c,requestContext:u,showSaveToProfile:h,showCreateBoardButton:p,showFlyoutSaveButton:_,showSections:g,showSectionSaveButton:f,suggestedBoardsShortListResource:P,pinAlreadySavedBoard:w,useStoryboardStyle:A,useLegoLayout:C}=this.props,{boardSuggestions:S,isSectionOpen:j,searchBoxFocused:T,searchQuery:D}=this.state;if(!t)return null;const{isLoaded:k,error:z}=t;let R=[];(k&&!z||P&&P.data&&!P.error)&&(R=this.getItems(!!C));const L=R.filter((e=>e&&"allBoards"===e.category)).length;L<=3&&0===S.length&&this.getPinBuilderSuggestions();const M=A?200:322,Z=A?214:334,U=d||290,V=u.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft";let H="";null!==j&&(H=u.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");const G=e=>(0,l.jsxs)(n.Fragment,{children:[!C&&(0,l.jsx)(a.iz,{}),(0,l.jsx)(a.xu,{overflow:"hidden",height:F(C),borderStyle:C&&L>=3&&R.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},children:(0,l.jsx)(b,{onCreateBoardClick:this.handleCreateBoardClick,isBoardCreate:e,useLegoLayout:C})})]});return(0,l.jsxs)(a.xu,{width:C&&!o?"100%":c,rounding:2,overflow:"hidden",height:A||o?"100%":B(C),color:"default",zIndex:E.lI,children:[(0,l.jsx)(v.Z,{unsafeCSS:"\n.BoardsSlideLeft {\n  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRight {\n  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideLeftRTL {\n  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRightRTL {\n  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n@keyframes boardFlyoutSlideLeft {\n  from {\n    margin-left: 0%;\n  }\n\n  to {\n    margin-left: -100%;\n  }\n}\n\n@keyframes boardFlyoutSlideRight {\n  from {\n    margin-left: -100%;\n  }\n\n  to {\n    margin-left: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideLeftRTL {\n  from {\n    margin-right: -100%;\n  }\n\n  to {\n    margin-right: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideRightRTL {\n  from {\n    margin-right: 0%;\n  }\n\n  to {\n    margin-right: -100%;\n  }\n}\n"}),k?null:(0,l.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:C&&!o?N:c,children:(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n.bt("caricamento raccoglitore bacheche", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),(0,l.jsx)(a.kC,{direction:"row",children:k&&(0,l.jsx)("div",{className:j?V:H,children:(0,l.jsx)(a.xu,{position:"relative",children:(0,l.jsxs)(a.xu,{display:"flex",direction:"row",width:C&&!o?720:2*(null!=c?c:0),zIndex:new a.Ry(0),children:[(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:C&&!o?N:c,children:[C&&!o&&(0,l.jsx)(a.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,l.jsx)(a.xv,{align:"center",size:"300",weight:"bold",children:h?this.props.i18n.bt("Salva", "Save", "PinBetterSave.BoardFlyout.SavePlaceholder", undefined, true):this.props.i18n.bt("Salva in una bacheca", "Save to board", "PinBetterSave.BoardFlyout.SaveToBoardPlaceholder", undefined, true)})}),!o&&(0,l.jsx)(a.xu,{padding:C?0:3,paddingX:C?4:3,height:C?64:"auto",children:(0,l.jsx)(y.Z,{accessibilityLabel:this.props.i18n.bt("Cerca tra le tue bacheche", "Search through your boards", "search bar placeholder text", undefined, true),focused:T,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n.bt("Cerca", "Search", "search bar placeholder text", undefined, true),value:D})}),(0,l.jsxs)(a.xu,{minHeight:C?290:M,maxHeight:C?U:M,overflow:"scrollY",children:[P&&!P.isLoaded?(0,l.jsx)(I.Z,{id:"suggestedBoardsContainer",children:(0,l.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n.bt("caricamento raccoglitore bacheche", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})})}):null,s,R.map(((t,n)=>"header"===t.type?(0,l.jsx)(a.xu,{paddingX:C?4:3,paddingY:1,marginTop:n>0?2:1,children:(0,l.jsx)(a.xv,{size:C?"100":"200",children:t.title})},t.title):(0,l.jsx)(a.xu,{children:(0,l.jsx)(O,{accessibilityLabelText:e,board:t,buttonText:i,displayAlreadySavedMsg:w&&w.id===t.id,onClick:e=>{this.handleBoardClick({board:e,toggleSections:g&&!!e.section_count})},onButtonClick:r,shouldOpenSections:g,showFlyoutSaveButton:_,showSaveToProfile:h,useLegoLayout:C})},`${t.category}-${t.id}`))),L<=3&&(0,l.jsx)(x,{onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:S,inWebRepinFlowExp:C})]}),p&&G(!0)]}),j&&(0,l.jsxs)(a.xu,{display:"flex",direction:"column",width:C&&!o?N:c,marginBottom:C?2:0,children:[(0,l.jsxs)(a.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,l.jsx)(a.sg,{span:2,children:(0,l.jsx)(a.xu,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3,children:(0,l.jsx)(a.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,l.jsx)(a.sg,{span:8,children:(0,l.jsx)(a.kC,{alignItems:"center",height:C?64:52,justifyContent:"center",children:(0,l.jsx)(a.xv,{weight:"bold",children:C?this.props.i18n.bt("Salva Pin in", "Save Pin to", "PinBetterSave.BoardFlyout.SectionHeader", undefined, true):this.props.i18n.bt("Scegli sezione", "Choose section", "Header for section header", undefined, true)})})}),(0,l.jsx)(a.sg,{span:2,children:(0,l.jsx)(a.xu,{})})]}),!C&&(0,l.jsx)(a.iz,{}),(0,l.jsx)(a.xu,{minHeight:C?354:Z,maxHeight:C?U:Z,overflow:"scrollY",children:R?(0,l.jsx)(n.Fragment,{children:R&&R.map((e=>"header"===e.type?null:(0,l.jsx)(a.xu,{children:e.isOpen&&(0,l.jsxs)(n.Fragment,{children:[C&&(0,l.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,l.jsx)(a.xv,{size:"100",children:this.props.i18n.bt("Bacheca", "Board", "PinBetterSave.BoardFlyout.BoardPickerTitle", undefined, true)})}),(0,l.jsx)(O,{board:e,buttonText:i,displayAlreadySavedMsg:w&&w.id===e.id,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:r,shouldOpenSections:!1,showFlyoutSaveButton:_,ref:this.boardSectionsHeaderRef,useLegoLayout:C}),(0,l.jsx)(m,{board:e,buttonText:i,onClick:this.handleSectionClick,onButtonClick:r,showSectionSaveButton:f,useLegoLayout:C})]})},`${e.category}-${e.id}`)))}):null}),p&&!o&&G(!1)]})]})})})})]})}}function U(e){const{logContextEvent:t}=(0,S.v)(),i=(0,r.ZP)(),{checkExperiment:n}=(0,j.F)();return(0,l.jsx)(Z,{...e,boardPickerStopwatch:(0,L.iN)(),checkExperiment:n,requestContext:(0,R.B)(),i18n:i,logContextEvent:t})}function V(e,t,i){const{advertiser:n}=e;let o;if(i&&i.user&&i.user.username&&(o=i.user.username),t&&n){const i=e.advertiser;if(t.isAuth&&i.is_impersonation)return{hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id};if(t.isAuth&&i.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id};if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,username:o}}function H(e){const{advertiser_id:t,hasMUA:i}=e,{username:n}=e;let o={field_set_key:"board_picker",filter:i?"protected":"all",...n?{username:n}:Object.freeze({}),...t?{advertiser_id:t}:{}};return(!e.useStoryboardStyle||e.isORBACBeta)&&e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(o={...o,username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id}),o}function G(e,t){return(i,n)=>i((0,C.jB)("BoardPickerBoardsResource",H(V(n(),e,t))))}function W(e){const t=(0,_.Z)(),i={...e,...(0,o.useSelector)((e=>V(e,t)))},n=(0,p.Z)({name:"BoardPickerBoardsResource",options:H(i)});return(0,l.jsx)(U,{...i,boardResource:n})}function $(e){const t=(0,h.Z)(),i=(0,_.Z)(),n=(0,g.lJ)(i,t),{anyEnabled:o}=(0,j.F)().checkExperiment("web_m10n_business_access_orbac_www");return(0,l.jsx)(W,{...e,orbacActingAs:n?t:void 0,isORBACBeta:o})}function q(e){const t=(0,p.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3}}),{data:i}=(0,p.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.pin.id}/`,field_sets:["pin.pinned_to_board()"]},noCache:!0});return(0,l.jsx)(U,{...e,suggestedBoardsShortListResource:t,pinAlreadySavedBoard:null==i?void 0:i.pinned_to_board})}M(Z,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},970576:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(499128),o=i(898781),s=i(349700),r=i(883119),a=i(785893);function l({boardName:e,boardUrl:t,isBoardlessPin:i,isFromPinBuilder:l,newPin:d,onChangeButtonClick:c,onVisitButtonClick:u=(()=>{}),onHide:h,onUndo:p,pinImageUrl:_}){const g=(0,o.ZP)();let m;return l?m={accessibilityLabel:g.bt("Visita il Pin", "Visit Pin", "PostSavedPinToast.a11yVisitButton", undefined, true),label:g.bt("Visita", "Visit", "PostSavedPinToast.VisitButton", undefined, true),size:"lg",onClick:u}:(c||p)&&(m={accessibilityLabel:d&&i&&c?g.bt("Modifica la destinazione del Pin", "Change Pin destination", "PostSavedPinToast.a11yChangeButton", undefined, true):g.bt("Annulla Pin salvato", "Undo Saved Pin", "PostSavedPinToast.a11yUndoButton", undefined, true),label:d&&i&&c?g.bt("Cambia", "Change", "PostSavedPinToast.ChangeButton", undefined, true):g.bt("Annulla", "Undo", "PostSavedPinToast.UndoButton", undefined, true),size:"lg",onClick:d&&i&&c?()=>c(d):p}),(0,a.jsx)(n.ZP,{primaryAction:m,duration:i?6e3:3e3,thumbnail:i?{icon:(0,a.jsx)(r.JO,{accessibilityLabel:g.bt("Salvato nella miniatura del profilo", "Saved to profile thumbnail", "PostSavedPinToast.thumbnail.accessibilityLabel", undefined, true),color:"default",icon:"history",size:24})}:void 0,imageUrl:_,onHide:h,text:(0,a.jsx)(r.xv,{size:"200",overflow:"normal",children:(0,s.nk)(g.bt("Salvato in {{ destination }}", "Saved to {{ destination }}", "PostSavedPinToast.SavedToBoardLabel", undefined, true),{destination:(0,a.jsx)(r.rU,{href:i?"/me/":null!=t?t:"",children:(0,a.jsx)(r.xv,{size:"200",weight:"bold",lineClamp:1,children:e},"PostSavedPinToastBoardName")})})})})}},274495:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(785893);const s={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function r(){return(0,o.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:s,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function a({disabled:e,name:t,onClick:i,size:s,submitting:a,text:l}){return(0,o.jsxs)(n.xu,{display:"flex",position:"relative",children:[a&&(0,o.jsx)(r,{}),(0,o.jsx)(n.zx,{color:"red",disabled:e||a,name:t,onClick:i,size:s,type:"submit",text:l})]})}},865607:(e,t,i)=>{i.d(t,{O:()=>d,Z:()=>c});var n=i(667294),o=i(898781),s=i(966113),r=i(883119),a=i(785893);const l={xs:12,sm:16,md:20,lg:24};function d({children:e}){const t=(0,o.ZP)();return(0,a.jsx)(r.u,{link:(0,a.jsx)(r.rU,{href:s.vB,target:"blank",children:(0,a.jsx)(r.xv,{color:"inverse",size:"100",weight:"bold",children:t.bt("Ulteriori informazioni", "Learn more", "verifiedBadge.tooltip.link", undefined, true)})}),text:t.bt("Questo rivenditore soddisfa le Linee guida per i commercianti di Pinterest", "This retailer meets Pinterest's Merchant Guidelines", "merchantVerification.badge.tooltip", undefined, true),children:e})}function c({hasVerifiedIdentity:e,iconOnly:t,isVerifiedMerchant:i,showText:s,size:c}){const u=(0,o.ZP)(),h=(0,a.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(r.JO,{accessibilityLabel:u.bt("Icona del badge di verifica del venditore", "Merchant verification badge icon", "merchantVerification.badge.icon", undefined, true),color:"shopping",icon:"workflow-status-ok",inline:!0,size:l[c]}),s&&(0,a.jsx)(r.xu,{marginStart:2,children:(0,a.jsx)(r.xv,{color:"shopping",inline:!0,weight:"bold",children:u.bt("Commerciante verificato", "Verified merchant", "creator.header.verifiedMerchant", undefined, true)})})]});return(0,a.jsxs)(n.Fragment,{children:[i&&!t&&(0,a.jsx)(d,{children:h}),i&&t&&h,e&&!i&&(0,a.jsx)(r.JO,{accessibilityLabel:u.bt("Icona di verifica del dominio", "Domain verification icon", "domainVerification.badge.icon", undefined, true),color:"error",icon:"check-circle",size:l[c]})]})}},948376:(e,t,i)=>{i.d(t,{G3:()=>c,Rp:()=>d,kp:()=>l});var n=i(339363),o=i(202139),s=i(844974);const r=14*o.F4;function a(e,t,i){return e-t>i}const l=e=>{const t=function(){const e=Date.now(),t=Number((0,s.qn)("appUpsell"));return{currentTime:e,firstUpsellTime:Number((0,s.qn)("firstUpsellTime")),lastUpsellTime:t,showedAppUpsellCurrentSession:Boolean((0,n.qn)("showedAppUpsellCurrentSession"))}}();return e?function(e,t,i){const{currentTime:n,firstUpsellTime:o,lastUpsellTime:l,showedAppUpsellCurrentSession:d}=e;return i=i||r,!o||function(e,t,i){return e<t+i}(n,o,t)?!d:!!a(n,l,i)&&((0,s.L_)("firstUpsellTime"),!0)}(t,o.F4):function(e,t){const{currentTime:i,lastUpsellTime:n}=e;return t=t||r,!n||a(i,n,t)}(t)},d=({platform:e,userAgent:t})=>{try{return"android"===e&&parseFloat((e=>{const t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(t))<7}catch(i){return!1}},c=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},987318:(e,t,i)=>{i.d(t,{H:()=>s,o:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("LimitedLogin")},843940:(e,t,i)=>{i.d(t,{Z:()=>D});var n=i(667294),o=i(376030),s=i(883119),r=i(785893);const a=37.8,l=277.1569,d=()=>(0,r.jsxs)("svg",{width:440,height:316,style:{opacity:1,overflow:"visible",transform:"scale(.95)"},viewBox:"0 0 440 316",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,r.jsxs)("defs",{children:[(0,r.jsx)("path",{d:"M15.9508 11.963c-2.2026 0-3.9877 1.7852-3.9877 3.9878 0 2.2025 1.7851 3.9877 3.9877 3.9877 2.2025 0 3.9877-1.7852 3.9877-3.9877 0-2.2026-1.7852-3.9877-3.9877-3.9877m-11.9631 0c2.2025 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7852 3.9877-3.9877 3.9877C1.7852 19.9385 0 18.1533 0 15.9508c0-2.2026 1.7852-3.9877 3.9877-3.9877zm23.9261 0c2.2026 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7851 3.9877-3.9877 3.9877-2.2025 0-3.9876-1.7852-3.9876-3.9877 0-2.2026 1.7851-3.9877 3.9876-3.9877z",id:"a"}),(0,r.jsx)("path",{d:"M8.4456.6691l1.3182 4.3182h4.3945c.8974 0 1.2824 1.153.569 1.705L11.133 9.4709l1.3475 4.4165c.2699.8827-.7398 1.5963-1.4654 1.0349l-3.466-2.6794-3.4659 2.6794c-.7266.5614-1.7363-.1522-1.4664-1.035L3.9653 9.471.37 6.6923c-.7124-.552-.3274-1.705.57-1.705h4.3935L6.6527.6691c.2727-.8921 1.5202-.8921 1.7929 0",id:"b"}),(0,r.jsx)("path",{d:"M8.0882 12.9614c-2.6756 0-4.853-2.1808-4.853-4.8606 0-2.6797 2.1774-4.8605 4.853-4.8605 2.6756 0 4.853 2.1808 4.853 4.8605 0 2.6798-2.1774 4.8606-4.853 4.8606m10.6126 2.3314l-3.444-3.4486c.5848-1.1203.9197-2.3921.9197-3.7434C16.1765 3.6268 12.5554 0 8.0882 0 3.6211 0 0 3.6267 0 8.1008s3.6211 8.1009 8.0882 8.1009c1.3492 0 2.619-.3354 3.7376-.921L15.269 18.73c.948.9494 2.4839.9494 3.4318 0 .948-.9486.948-2.4878 0-3.4372",id:"c"}),(0,r.jsx)("path",{d:"M0 39.5562c0 16.8872 10.5846 31.3054 25.4808 36.9784-.3626-3.0887-.7483-8.1815.0824-11.7548.7153-3.0722 4.6182-19.5737 4.6182-19.5737s-1.1768-2.3569-1.1768-5.8477c0-5.472 3.171-9.5594 7.1234-9.5594 3.3622 0 4.984 2.5217 4.984 5.5444 0 3.3788-2.1525 8.4288-3.2633 13.113-.9263 3.9193 1.9679 7.1167 5.8312 7.1167 6.9982 0 12.381-7.3805 12.381-18.0343 0-9.4308-6.7772-16.0202-16.452-16.0202-11.201 0-17.7772 8.4023-17.7772 17.0882 0 3.3854 1.302 7.0114 2.9305 8.9859.3197.3922.3692.7318.2736 1.1306-.3 1.246-.9659 3.9194-1.0944 4.4666-.1747.7186-.5703.8735-1.3186.524-4.9181-2.2876-7.9903-9.477-7.9903-15.2521 0-12.424 9.022-23.8293 26.0148-23.8293 13.66 0 24.2776 9.7341 24.2776 22.7415 0 13.571-8.554 24.4952-20.434 24.4952-3.992 0-7.74-2.0767-9.0255-4.526 0 0-1.9745 7.5223-2.4525 9.3617-.9295 3.5732-3.5073 8.0958-5.106 10.6637 3.6853 1.134 7.5948 1.7437 11.6493 1.7437 21.8449 0 39.5561-17.7112 39.5561-39.5561C79.1123 17.7112 61.4011 0 39.5562 0 17.7112 0 0 17.7113 0 39.5562",id:"d"})]}),(0,r.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,r.jsx)("path",{d:"M15.12 33.6034c-7.6878 0-13.92 6.2322-13.92 13.92V300.88c0 7.6878 6.2322 13.92 13.92 13.92h409.76c7.6878 0 13.92-6.2322 13.92-13.92V47.5234c0-7.6878-6.2322-13.92-13.92-13.92H15.12z",stroke:"#DEDEDE",strokeWidth:"2.4",fill:"#FFF"}),(0,r.jsxs)("g",{transform:"translate(0 32.441)",children:[(0,r.jsx)("path",{d:"M15.12 0h409.76C433.2305 0 440 6.7695 440 15.12v48.6067H0V15.12C0 6.7695 6.7695 0 15.12 0z",fill:"#DEDEDE"}),(0,r.jsx)("rect",{fill:"#FFF",x:"15.5858",y:"12.0152",width:"218.9216",height:"38.8841",rx:"19.442"}),(0,r.jsx)("use",{fill:"#FFF",xlinkHref:"#a",transform:"translate(384.8501 15.6198)"}),(0,r.jsx)("use",{fill:"#DEDEDE",xlinkHref:"#b",transform:"translate(206.2125 24.0304)"}),(0,r.jsx)("use",{fill:"#DEDEDE",xlinkHref:"#c",transform:"translate(26.376 21.6274)"})]}),(0,r.jsxs)("g",{fill:"#DEDEDE",children:[(0,r.jsx)("rect",{id:"content-morph",x:31,y:139,width:"230.7843",height:"126.3732"}),(0,r.jsx)("rect",{className:"content-bar",x:"281.4706",y:"139.3346",width:"126.1765",height:"14.0415"}),(0,r.jsx)("rect",{className:"content-bar",x:"281.4706",y:"164.1772",width:"85.1961",height:"14.0415"})]}),(0,r.jsx)("ellipse",{fill:"#FFF",fillOpacity:"0.49",cx:38,cy:38,rx:38,ry:37.8,id:"pinterest-logo-pop-bg"}),(0,r.jsxs)("g",{id:"pinterest-logo",transform:"translate(277.1569) scale(1)",children:[(0,r.jsx)("ellipse",{fill:"#FFF",cx:"37.8",cy:"37.8479",rx:a,ry:a}),(0,r.jsxs)("g",{transform:"translate(0 .0493)",children:[(0,r.jsx)("mask",{id:"e",fill:"#fff",children:(0,r.jsx)("use",{xlinkHref:"#d"})}),(0,r.jsx)("g",{mask:"url(#e)",fill:"#E60023",children:(0,r.jsx)("rect",{width:"80.1649",height:"80.1649"})})]})]})]})]});const c=(e,t,i)=>e-t/2*(i-1),u=30,h=c(l,75.6,1.4),p=c(0,75.6,1.4),_=c(279,76,2.1),g=c(2,75.6,2.1),m={targets:".simplePopExtensionContent",opacity:[0,1],duration:500,easing:"easeInOutQuad"},f={targets:["#content-morph",".content-bar"],opacity:[0,1]},x={targets:"#content-morph",width:u,height:u,x:220,y:203,rx:20},b={targets:".content-bar",width:0,height:0,x:215,y:218},y={targets:"#content-morph",x:301,y:24},v={targets:"#pinterest-logo",translateX:[l,h],translateY:p,scale:1.4,direction:"alternate"},P={targets:"#pinterest-logo",translateX:[h,l],translateY:0,scale:1,direction:"alternate"},w={targets:"#pinterest-logo-pop-bg",translateX:[279,_],translateY:[2,g],scale:2.1,direction:"alternate"},I={targets:"#pinterest-logo-pop-bg",translateX:[_,279],translateY:[g,2],scale:1};class A extends n.PureComponent{componentDidMount(){const{isLooping:e}=this.props;window.requestAnimationFrame((()=>{const t=(e=>{const t=500+(e?0:750),i=t+300,n=i,s=i+280,r=n+210,a=o.Z.timeline({easing:"easeInOutQuad",loop:e,direction:"normal",autoplay:!1});return a.add({...f,duration:500}),e||a.add({duration:750}),a.add({...x,duration:300},t).add({...b,duration:300},t).add({...y,duration:300},i).add({...v,duration:280},i).add({...w,duration:210},n).add({...P,duration:190,easing:"cubicBezier(0, 0, 0.23, 0.8)"},s).add({...I,duration:300},r).add({duration:1400}),a})(e);(0,o.Z)(m).finished.then((()=>t.play()))}))}render(){return(0,r.jsx)(s.xu,{display:"flex",flex:"grow",justifyContent:"center",alignItems:"center",marginTop:8,children:(0,r.jsx)(d,{})})}}var E,C,S;S={isLooping:!1},(C="defaultProps")in(E=A)?Object.defineProperty(E,C,{value:S,enumerable:!0,configurable:!0,writable:!0}):E[C]=S;const j=A;var T=i(898781);const D=({header:e,installClick:t,isExtensionInstalled:i=!1,isFromPinBuilder:o,skipClick:a,subheader:l})=>{const d=(0,T.ZP)(),c=d.bt("Installa il pulsante Pinterest", "Get the Pinterest browser button", "extensionUpsell.modal.defaultHeader", undefined, true),u=d.bt("Salva idee creative da tutto il Web", "Save creative ideas from around the web", "extensionUpsell.modal.defaultSubheader", undefined, true),h=d.bt("Con il pulsante Salva di Pinterest puoi salvare le tue idee preferite senza dover lasciare la pagina su cui ti trovi.", "With the Pinterest Save Button you can save your favorite ideas without ever leaving the page you're on.", "extensionUpsell.modal.defaultHeader", undefined, true),p=d.bt("Salva le tue idee preferite con un solo clic", "Save your favorite ideas with just one click", "extensionUpsell.modal.defaultSubheader", undefined, true);return o?(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.Ee,{src:"https://i.pinimg.com/originals/d4/d9/89/d4d9897b5d404678fa38c9cad904fc85.png",alt:d.bt("Estensione del browser di Pinterest", "Pinterest Browser Extension", "extensionUpsell.graphicAltText", undefined, true),naturalHeight:258,naturalWidth:540,children:(0,r.jsx)(s.xu,{display:"block",height:40,marginEnd:4,marginStart:4,marginTop:4,position:"absolute",right:!0,top:!0,width:40,children:(0,r.jsx)(s.hU,{accessibilityLabel:d.bt("Chiudi", "Close", "extensionUpsell.cancelLabel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:a,size:"md"})})}),(0,r.jsxs)(s.xu,{display:"flex",direction:"column",margin:"auto",width:360,children:[(0,r.jsx)(s.xu,{marginTop:8,children:(0,r.jsx)(s.X6,{size:"500",align:"center",children:e||p})}),(0,r.jsx)(s.xu,{marginTop:4,children:(0,r.jsx)(s.xv,{align:"center",children:l||h})}),(0,r.jsx)(s.xu,{display:"flex",direction:"row",marginTop:8,marginBottom:8,children:i?(0,r.jsx)(s.zx,{accessibilityLabel:d.bt("Ok", "Got it", "extensionUpsell.button.gotItLabel", undefined, true),color:"red",onClick:a,text:d.bt("Ok", "Got it", "extensionUpsell.button.gotIt", undefined, true),size:"lg"}):(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(s.xu,{"data-test-id":"cancel-extension-upsell",display:"inlineBlock",marginStart:12,children:(0,r.jsx)(s.zx,{fullWidth:!0,accessibilityLabel:d.bt("Forse pi tardi", "Maybe Later", "extensionUpsell.button.maybeLaterLabel", undefined, true),onClick:a,text:d.bt("Forse pi tardi", "Maybe Later", "extensionUpsell.button.maybeLaterLabel", undefined, true),size:"lg"})}),(0,r.jsx)(s.xu,{display:"inlineBlock",marginStart:2,children:(0,r.jsx)(s.zx,{accessibilityLabel:d.bt("Installa l'estensione del browser per Pinterest", "Get the Pinterest browser extension", "extensionUpsell.button.getItNowLabel", undefined, true),color:"red",onClick:t,text:d.bt("Prova ora", "Get it now", "extensionUpsell.button.getItNow", undefined, true),size:"lg"})})]})})]})]}):(0,r.jsxs)(s.xu,{padding:8,children:[(0,r.jsx)(s.X6,{align:"center",size:"500",children:e||u}),(0,r.jsx)(s.xu,{marginTop:4,children:(0,r.jsx)(s.xv,{align:"center",children:l||c})}),(0,r.jsx)(s.xu,{display:"flex",flex:"grow",marginTop:8,paddingY:8,children:(0,r.jsx)(j,{isLooping:!0})}),(0,r.jsx)(s.kC,{alignItems:"stretch",justifyContent:"end",children:i?(0,r.jsx)(s.zx,{accessibilityLabel:d.bt("Ok", "Got it", "extensionUpsell.button.gotItLabel", undefined, true),color:"red",onClick:a,text:d.bt("Ok", "Got it", "extensionUpsell.button.gotIt", undefined, true),size:"lg"}):(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(s.xu,{"data-test-id":"cancel-extension-upsell",display:"inlineBlock",marginEnd:2,children:(0,r.jsx)(s.zx,{fullWidth:!0,accessibilityLabel:d.bt("Annulla", "Cancel", "extensionUpsell.button.cancelLabel", undefined, true),onClick:a,text:d.bt("Annulla", "Cancel", "extensionUpsell.button.cancel", undefined, true),size:"lg"})}),(0,r.jsx)(s.zx,{accessibilityLabel:d.bt("Installa l'estensione del browser per Pinterest", "Get the Pinterest browser extension", "extensionUpsell.button.getItNowLabel", undefined, true),color:"red",onClick:t,text:d.bt("Prova ora", "Get it now", "extensionUpsell.button.getItNow", undefined, true),size:"lg"})]})})]})}},310147:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(500985),o=i(586061),s=i(449656),r=i(50286),a=i(780280),l=i(785893);function d(){const{isAuthenticated:e,userAgent:t}=(0,a.B)(),i=(0,r.HG)(),{isTablet:d}=t;return!e||d?(0,l.jsx)(s.l_,{to:"/"}):i?(0,l.jsx)(o.Z,{}):(0,l.jsx)(n.Z,{})}},586061:(e,t,i)=>{i.d(t,{Z:()=>Qt});var n=i(667294),o=i(702664);var s=i(319915),r=i(451820),a=i(773515),l=(i(6663),i(448994)),d=i(537929);function c(e){return[{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-title-and-description"]',id:"guide-pin-builder-title",heading:e.bt("Titolo e descrizione", "Title & description", "Heading text describing the title and description step when creating Pins", undefined, true),description:e.bt("Aggiungi un titolo e una descrizione per raccontare la tua storia. Le persone li vedranno nel feed, nei risultati di ricerca e quando toccano il Pin.", "Add a title and description to help tell your story. People see this in their home feed, on search and when they tap on your Pin.", "Text describing the reason to add title and description to Pins when creating them", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-destination-link"]',id:"guide-pin-builder-link",heading:e.bt("Link di destinazione", "Destination link", "Heading text describing the destination link step when creating Pins", undefined, true),description:e.bt("Scegli dove indirizzare le persone che toccano il Pin. Assicurati che sia rilevante!", "Pick where people land when they tap on your Pin. Make sure its relevant!", "Text describing the reason to add a destination link to Pins when creating them", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-media-draft-view"]',id:"guide-pin-builder-media-draft-view",heading:e.bt("Modifiche", "Edits", "Heading text describing the ability to edit Pins while creating them", undefined, true),description:e.bt("Carica un'immagine o un video, quindi personalizzali tagliandoli o aggiungendo loghi e testo", "Upload an image or video, then personalize it by cropping, trimming or adding logos and text", "Text describing the ability to edit images and videos when creating Pins", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-batch-create"]',id:"guide-pin-builder-batch-create",heading:e.bt("Creazione batch", "Batch create", "Heading text describing the ability to create multipe Pins at once", undefined, true),description:e.bt("Hai tanto da raccontare? Aggiungi altre immagini e video per creare pi Pin contemporaneamente.", "Lots to say? Add more images and videos to create multiple Pins at once.", "Text describing the ability to create multiple Pins at once", undefined, true),padding:0}]}var u=i(919974),h=i(367139),p=i.n(h),_=i(825444),g=i.n(_),m=i(844889),f=i.n(m),x=i(998499),b=i(316271),y=i(898781),v=i(66743),P=i(309256),w=i(883119),I=i(785893);const A={property:"opacity",duration:1600,timingFunction:"easeInOut",delay:500},E={opacity:1},C={opacity:0},S=[{property:"height",duration:400,timingFunction:"easeInOut",delay:500},{property:"width",duration:400,timingFunction:"easeInOut",delay:500},{property:"left",duration:400,timingFunction:"easeInOut",delay:500},{property:"top",duration:400,timingFunction:"easeInOut",delay:500},{property:"box-shadow",duration:500,timingFunction:"easeInOut",delay:900}],j={boxShadow:"0 0 0 500px rgba(197, 226, 238, 0)",top:"0%",left:"0%",height:"100%",width:"100%"},T={boxShadow:"0 0 0 500px rgba(197, 226, 238, 1)",left:"8%",top:"8%",height:"84%",width:"84%"},D=[{property:"opacity",duration:200,timingFunction:"easeInOut",delay:1500},{property:"left",duration:800,timingFunction:"easeInOut",delay:2e3}],k={opacity:0,left:"0px"},z={left:"164px",opacity:1},O={property:"background-color",duration:"medium",timingFunction:"easeIn",delay:4200},R={backgroundColor:"rgba(17, 82, 194, 0)",marginLeft:"8px"},L={backgroundColor:"rgba(17, 82, 194, 1)"};function M({onStart:e}){const t=(0,y.ZP)(),i=(0,n.useRef)(null),o=(0,n.useRef)(0),s=(0,n.useRef)(null),[r,a]=(0,n.useState)({cropper:!1,font:!1,image:!1,logo:!1}),[l,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(!1),[h,_]=(0,n.useState)(j),[m,M]=(0,n.useState)(k),[B,N]=(0,n.useState)(E),[F,Z]=(0,n.useState)(R),[U,V]=(0,n.useState)(" "),H=t.bt("Sedute da esterno perfette per le foto", "Picture-perfect outdoor seating", "Sample text describing an image of visually-appealing outdoor seating", undefined, true);(0,n.useEffect)((()=>{r.font||(0,P.a2)().then((()=>{d(P.Wt[v.WK]),a({...r,font:!0})})),Object.keys(r).reduce(((e,t)=>e&&r[t]),!0)&&u(!0)}),[r]),(0,n.useEffect)((()=>{if(c){_(T),M(z),N(C),Z(L),e&&e();const t=setTimeout((()=>setInterval((()=>function(e){const t=o.current;V(e.substr(0,t)),t>H.length&&(clearInterval(s.current),s.current=null),o.current=t+1}(H)),500/H.length)),3200);i.current=t}return()=>{clearTimeout(i.current),clearInterval(s.current),i.current=null,s.current=null}}),[c,e]);const G=[t.bt("Ritaglia le immagini o usa una dimensione preimpostata", "Crop images or use a preset size", "Text describing editing images", undefined, true),t.bt("Aggiungi un logo per mettere in mostra il tuo brand", "Add a logo to showcase your brand", "Text describing adding a logo to images", undefined, true),t.bt("Usa caratteri e colori per far risaltare il testo", "Use fonts and colors to make text pop", "Text describing the text overlay feature in Pin creation", undefined, true)];return(0,I.jsxs)(w.xu,{bottom:!0,"data-test-id":"pinbuilder-education-editing-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,I.jsx)(w.xu,{alignItems:"center",minWidth:342,dangerouslySetInlineStyle:{__style:{backgroundColor:"#c5e2ee"}},display:"flex",justifyContent:"center",padding:8,position:"relative",width:342,children:(0,I.jsxs)(w.xu,{height:"100%",overflow:"hidden",position:"relative",width:"100%",rounding:2,children:[(0,I.jsx)(w.xu,{left:!0,right:!0,bottom:!0,top:!0,position:"absolute",rounding:2,children:(0,I.jsx)(w.Ee,{alt:t.bt("Esempio di immagine di un Pin per arredamenti da esterno", "Sample image of a Pin of outdoor furniture", "Alt text describing image of outdoor furniture", undefined, true),fit:"contain",onLoad:()=>{a({...r,image:!0})},src:g(),naturalHeight:568,naturalWidth:804})}),(0,I.jsxs)(w.xu,{dangerouslySetInlineStyle:{__style:{...h,transition:(0,x.Z)(S,{execution:"parallel"})}},position:"absolute",right:!0,bottom:!0,rounding:2,children:[(0,I.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:{...B,transition:(0,b.Z)(A)}},left:!0,right:!0,bottom:!0,top:!0,position:"absolute",children:(0,I.jsx)(w.Ee,{alt:"Cropper",fit:"contain",onLoad:()=>{a({...r,cropper:!0})},src:p(),naturalWidth:568,naturalHeight:804})}),(0,I.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:{...m,transition:(0,x.Z)(D,{execution:"parallel"})}},margin:4,position:"relative",top:!0,width:36,height:36,children:(0,I.jsx)(w.Ee,{onLoad:()=>{a({...r,logo:!0})},alt:t.bt("Esempio di logo su un'immagine per indicare gli strumenti di modifica su Pinterest", "A sample logo on an image to demonstrate editing on Pinterest", "A sample logo on an image to demonstrate image editing features on Pinterest", undefined, true),color:"transparent",fit:"contain",src:f(),naturalWidth:60,naturalHeight:70})}),(0,I.jsx)(w.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...F,borderRadius:"0 0 8px 8px",transition:(0,b.Z)(O)}},display:"flex",position:"absolute",bottom:!0,justifyContent:"center",left:!0,right:!0,padding:4,children:(0,I.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:{...l,color:"white",fontSize:"21px",textAlign:"center"}},children:U})})]})]})}),(0,I.jsx)(w.xu,{flex:"grow",display:"flex",alignItems:"center",paddingX:10,children:(0,I.jsxs)(w.xu,{children:[(0,I.jsx)(w.X6,{children:t.bt("Nuovi modi per modificare", "New ways to edit", "Heading for describing ways to edit Pins", undefined, true)}),(0,I.jsx)(w.xu,{paddingY:4,children:G.map(((e,t)=>(0,I.jsxs)(w.xu,{alignItems:"center",display:"flex",flex:"none",paddingY:1,children:[(0,I.jsx)(w.xu,{color:"selected",display:"flex",rounding:"circle",width:8,height:8}),(0,I.jsx)(w.xu,{paddingX:2,children:(0,I.jsx)(w.xv,{overflow:"normal",children:(0,I.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`editing-screen-point-${t}`)))})]})})]})}var B=i(495794),N=i(725108),F=i(70943),Z=i(323716),U=i(388619),V=i(456463),H=i(954931),G=i(562559),W=i(944546),$=i(965900);function q({onStart:e}){const t=(0,y.ZP)(),[i,o]=(0,n.useState)(!1),{appUI:{appInFocus:s}}=(0,$.I)();(0,n.useEffect)((()=>{i&&e&&e()}),[i,e]);const r=[t.bt("Combina fino a 5 immagini", "Combine up to 5 images", "Text describing maximum images can be combined", undefined, true),t.bt("Riordina le immagini per renderle tue", "Reorder images to make it yours", "Text describing reordering images", undefined, true),t.bt("Scegli le dimensioni migliori dei Pin per i tuoi contenuti", "Pick the best Pin size for your content", "Text describing changing Pin size", undefined, true)];return(0,I.jsxs)(w.xu,{bottom:!0,"data-test-id":"pinbuilder-education-layouts-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,I.jsx)(w.xu,{color:"secondary",position:"relative",width:342,children:(0,I.jsx)(G.Z,{accessibilityMaximizeLabel:"",accessibilityMinimizeLabel:"",accessibilityMuteLabel:"",accessibilityPauseLabel:"",accessibilityPlayLabel:"",accessibilityProgressBarLabel:t.bt("Barra di avanzamento", "Progress bar", "LayoutsScreen.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:"",aspectRatio:i?342/474:0,appInFocus:s,captions:"",hlsConfig:{startLevel:W.VS},isAutoPlay:!0,loop:!0,onReady:()=>o(!0),playing:!0,onPlay:()=>{},onPlayError:()=>{},src:"https://v1.pinimg.com/videos/mc/hls/7f/20/86/7f20869b2522dca00ebf1f745313b90b.m3u8",volume:0})}),(0,I.jsx)(w.xu,{flex:"grow",display:"flex",alignItems:"center",paddingX:10,children:(0,I.jsxs)(w.xu,{children:[(0,I.jsx)(w.X6,{children:t.bt("Crea un collage", "Create a collage", "A heading text for creating a collage Pin", undefined, true)}),(0,I.jsx)(w.xu,{paddingY:4,children:r.map(((e,t)=>(0,I.jsxs)(w.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,I.jsx)(w.xu,{color:"selected",display:"flex",flex:"none",rounding:"circle",width:8,height:8}),(0,I.jsx)(w.xu,{paddingX:2,children:(0,I.jsx)(w.xv,{children:(0,I.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`layouts-screen-point-${t}`)))})]})})]})}var Y=i(508847);function X(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const K={checked:{__style:{border:"solid 2px #e60023"}},unchecked:{__style:{border:"dashed 2px #767676"}}};class J extends n.Component{constructor(...e){super(...e),X(this,"state",{isHovering:!1}),X(this,"handleMouseEnter",(()=>{this.setState({isHovering:!0})})),X(this,"handleMouseLeave",(()=>{this.setState({isHovering:!1})}))}render(){const{checked:e,onClick:t}=this.props,{isHovering:i}=this.state;return(0,I.jsx)(w.xu,{rounding:"circle",color:e?"primary":"transparent",dangerouslySetInlineStyle:e?K.checked:K.unchecked,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:(0,I.jsx)(w.hU,{accessibilityLabel:e?this.props.i18n.bt("Deseleziona Pin", "Deselect Pin", "Button to deselect Pin from bulk editing", undefined, true):this.props.i18n.bt("Seleziona Pin", "Select Pin", "Button to select Pin from bulk editing", undefined, true),bgColor:"transparent",icon:e||i?"check":void 0,iconColor:e?"white":"gray",onClick:t,size:"md"})})}}function Q(e){const t=(0,y.ZP)();return(0,I.jsx)(J,{...e,i18n:t})}var ee=i(553558),te=i(938999),ie=i(665866),ne=i(407043),oe=i(327096),se=i(474394),re=i(299295),ae=i(780280);function le(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const de=new w.H3([new w.Ry(re.v9)]);class ce extends n.Component{constructor(...e){super(...e),le(this,"pinDraftRef",(0,n.createRef)()),le(this,"handleSelectPinDraft",(()=>{const{selectPinDraft:e,logContextEvent:t}=this.props;t({event_type:101,component:13308,element:11332}),e()})),le(this,"getCallout",(()=>({error:{title:this.props.i18n.bt("Hai raggiunto il limite di prodotti taggati", "Product tagging limit reached", "pinbuilder.productTagging.error", undefined, true),message:this.props.i18n.bt("Per aggiungere un altro articolo, rimuovi uno o pi prodotti taggati", "To add another item, remove one or more tagged products", "pinbuilder.productTagging.error.instructions", undefined, true)},warning:{title:this.props.i18n.bt("I prodotti verranno eliminati", "Products will be deleted", "pinbuilder.carousel.warningHeader", undefined, true),message:this.props.i18n.bt("I prodotti taggati verranno eliminati se aggiungerai un'immagine carosello", "Your tagged products will be deleted if you add a carousel image", "pinbuilder.carousel.warning", undefined, true)}}))),le(this,"handleClick",(()=>{const{deselectPinDraft:e,pinDraftId:t,selectedPinDraftIds:i,status:n}=this.props,o=!re.x1.includes(n);i.includes(t)?e():o&&this.handleSelectPinDraft()}))}componentDidMount(){this.pinDraftRef.current&&!this.props.skipScrolling&&this.pinDraftRef.current.scrollIntoView({behavior:"smooth",block:"start"})}render(){const{numPinDrafts:e,pinDraftId:t,selectedPinDraftIds:i,status:n,setStlCallout:o,stlCallout:s,requestContext:{isRTL:r}}=this.props,{showCallout:a,type:l}=s||{},d=i.includes(t),c=i.length,u=r?{left:"-60px",transformOrigin:"right center"}:{right:"-60px",transformOrigin:"left center"},h={__style:{top:"20px",opacity:d?void 0:.6,transition:`transform 250ms ${re.rc}`,transform:c>0?"scale(2)":void 0,...u}},p={backgroundColor:"rgba(255,255,255,0.7)",borderRadius:16,height:"100%",width:"100%",zIndex:"publishing"===n?re.v9:void 0},_="publishing"===n||"uploading"===n&&1===e,g=!re.x1.includes(n),m=this.getCallout();return(0,I.jsxs)(w.xu,{paddingY:3,ref:this.pinDraftRef,"data-group-id":"pin-builder-pin-draft","data-test-id":`pin-builder-pin-draft-${t}`,children:[(0,I.jsxs)(w.xu,{position:"relative",children:[(0,I.jsx)(ee.ZP,{pinDraftId:t}),e>1&&g&&(ie.Z.enabled("multi_pin")||ie.Z.enabled("multi_pin_pinner"))&&(0,I.jsx)(w.xu,{position:"absolute",dangerouslySetInlineStyle:h,"data-test-id":"pin-draft-select",children:(0,I.jsx)(Q,{checked:d,onClick:this.handleClick})}),(c>0||_)&&(0,I.jsx)(w.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,zIndex:de,children:(0,I.jsx)(te.Z,{selected:d,onClick:this.handleClick,style:p,children:_&&(0,I.jsx)(w.kC,{alignItems:"center",height:"100%",justifyContent:"center",children:(0,I.jsx)(w.$j,{show:!0,accessibilityLabel:this.props.i18n.bt("Salvataggio Pin in corso...", "Saving Pin...", "Spinner accessibility label when saving the pin", undefined, true)})})})})]}),a&&l&&(0,I.jsx)(w.xu,{position:"absolute",bottom:!0,width:re.of,dangerouslySetInlineStyle:{__style:{marginBottom:"30px"}},children:(0,I.jsx)(w.UW,{dismissButton:{accessibilityLabel:this.props.i18n.bt("Ignora il banner", "Dismiss banner", "pinbuilder.error.dismissButton", undefined, true),onDismiss:o},iconAccessibilityLabel:this.props.i18n.bt("Icona di errore", "Error icon", "pinBuilder.taggedObjects.error", undefined, true),type:l,title:m[l].title,message:m[l].message})})]})}}function ue(e){const{logContextEvent:t}=(0,ne.v)(),i=(0,y.ZP)(),{shopTheLook:n,setStlCallout:s}=(0,oe.f)(),{pinDraftId:r,skipScrolling:a}=e,l=(0,o.useDispatch)(),{pinDraftIds:d,pinDrafts:c,selectedPinDraftIds:u}=(0,o.useSelector)((({pinbuilder:e})=>e)),{stlCallout:h}=n;return(0,I.jsx)(ce,{...e,deselectPinDraft:()=>l((0,se.deselectPinBuilderPinDraft)(r)),numPinDrafts:d.length,selectedPinDraftIds:u,status:c[r].status,stlCallout:h,requestContext:(0,ae.B)(),selectPinDraft:()=>l((0,se.selectPinBuilderPinDraft)(r)),setStlCallout:()=>s({showCallout:!1}),skipScrolling:a,i18n:i,logContextEvent:t})}var he=i(869636);function pe({setPinDraftRef:e}){(0,he.Z)(1000287),(0,he.Z)(1000288);const t=(0,o.useSelector)((({pinbuilder:e})=>e.pinDraftIds)),i=(0,o.useSelector)((({pinbuilder:e})=>e.selectedPinDraftIds.length>0)),n={__style:{transformOrigin:"top center",transition:`transform 250ms ${re.rc}, height 250ms ${re.rc}`,transform:i?"scale(0.5)":void 0,height:i?"50%":"100%"}};return(0,I.jsx)(w.xu,{dangerouslySetInlineStyle:n,children:(0,I.jsx)(w.xu,{display:"flex",direction:"column",alignItems:"center",paddingY:7,children:(0,I.jsx)(w.xu,{children:(0,I.jsx)(w.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:(0,I.jsx)(w.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:t.map((i=>(0,I.jsx)(w.xu,{ref:t=>e(i,t),children:(0,I.jsx)(ue,{pinDraftId:i,skipScrolling:1===t.length})},i)))})})})})})}var _e=i(430957),ge=i(19121),me=i(172045),fe=i(616550);const xe={__style:{borderRadius:2}};class be extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{addPinDraft:e,location:t,logContextEvent:i}=this.props;i({event_type:101,component:13395,element:11329});const{board:n,boardSection:o}=t.state||{};e(n?{selectedItem:{boardId:n.id,title:o?o.title:n.name,...o?{sectionId:o.id}:{}}}:{})},(i="handleAddDraftClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{disabled:e,isAddPinDraftRemoved:t,pinDraftIds:i,pinDraftRefs:n,scrollPosition:o,requestContext:{isRTL:s}}=this.props,r=i.length,a={backgroundColor:"#fff",border:0,borderRadius:8,boxSizing:"border-box",cursor:e?"default":"pointer",height:60,outline:"none",opacity:e?.5:void 0,padding:0,width:40};return(0,I.jsxs)(w.xu,{height:"100%",display:"flex",direction:"column","data-test-id":"pin-builder-controls",children:[!t&&(0,I.jsx)(w.xu,{"data-tutorial-id":"pin-builder-batch-create",flex:"none",padding:4,children:(0,I.jsx)("button",{onClick:this.handleAddDraftClick,disabled:e,style:a,children:(0,I.jsx)(w.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center","data-test-id":"pin-builder-add-draft",children:(0,I.jsx)(w.JO,{accessibilityLabel:this.props.i18n.bt("Crea un nuovo Pin", "Create new Pin", "Button to add another Pin draft", undefined, true),icon:"add",color:e?"subtle":"default"})})})}),(0,I.jsx)(w.xu,{height:1,color:"lightWash",marginStart:2,marginEnd:2}),(0,I.jsx)(w.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",overflow:"auto",children:(0,I.jsx)(w.xu,{marginTop:3,children:i.map(((e,t)=>(0,I.jsxs)(w.xu,{paddingX:4,paddingY:1,position:"relative",children:[(0,I.jsx)(_e.Z,{pinDraftId:e,pinDraftRefs:n}),Math.min(Math.floor(o*r),r-1)===t&&(0,I.jsx)(w.xu,{position:"absolute",top:!0,bottom:!0,left:!s,right:s,marginTop:1,marginBottom:1,color:"dark",width:4,dangerouslySetInlineStyle:xe})]},e)))})})]})}}function ye(e){const{isAddPinDraftRemoved:t}=e,{logContextEvent:i}=(0,ne.v)(),s=(0,y.ZP)(),r=(0,ge.Z)(),a=r.isAuth&&r.isEmployee,d=(0,o.useDispatch)(),{pinDrafts:c,pinDraftIds:u,selectedPinDraftIds:h}=(0,o.useSelector)((({pinbuilder:e})=>e));return(0,I.jsx)(be,{...e,addPinDraft:(0,n.useCallback)((e=>d((0,l.Z)({i18n:s,isEmployee:a,pinDraft:e,pinDraftId:(0,me.Z)(),storyPinPublishStopwatch:void 0}))),[]),disabled:h.length>0||u.filter((e=>"succeeded"!==c[e].status)).length>=re.TK,isAddPinDraftRemoved:t,location:(0,fe.useLocation)(),pinDraftIds:u,requestContext:(0,ae.B)(),i18n:s,logContextEvent:i})}function ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Pe extends n.Component{constructor(...e){super(...e),ve(this,"state",{checked:!1}),ve(this,"handleChange",(({checked:e})=>{this.setState({checked:e})})),ve(this,"handleButtonClick",(({event:e})=>{const{onButtonClick:t}=this.props,{checked:i}=this.state;t({event:e,checked:i})}))}render(){const{alertText:e,buttonText:t,headingText:i,id:n,onDismiss:o}=this.props,{checked:s}=this.state;return(0,I.jsx)(w.u_,{accessibilityModalLabel:this.props.i18n.bt("Modalit avviso", "Alert modal", "Alert modal to confirm action", undefined, true),heading:(0,I.jsx)(w.xu,{display:"flex",alignItems:"center",justifyContent:"center",marginTop:6,children:(0,I.jsx)(w.X6,{size:"500",children:i})}),onDismiss:o,footer:(0,I.jsxs)(w.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[(0,I.jsx)(w.xu,{flex:"grow",paddingX:1,children:(0,I.jsx)(w.zx,{fullWidth:!0,text:this.props.i18n.bt("Annulla", "Cancel", "Button to close alert modal", undefined, true),onClick:o,size:"lg"})}),(0,I.jsx)(w.xu,{flex:"grow",paddingX:1,children:(0,I.jsx)(w.zx,{fullWidth:!0,text:t,onClick:this.handleButtonClick,color:"red",size:"lg"})})]}),size:"sm",role:"alertdialog",children:(0,I.jsxs)(w.xu,{children:[(0,I.jsx)(w.xv,{align:"center",children:e}),(0,I.jsxs)(w.xu,{alignItems:"center",justifyContent:"center",display:"flex",marginTop:4,children:[(0,I.jsx)(w.XZ,{checked:s,id:n,size:"sm",onChange:this.handleChange}),(0,I.jsx)(w.__,{htmlFor:n,children:(0,I.jsx)(w.xu,{paddingX:2,children:(0,I.jsx)(w.xv,{children:this.props.i18n.bt("Non mostrare di nuovo questo messaggio", "Do not show this message again", "Checkbox option to never show alert modal again", undefined, true)})})})]})]})})}}function we(e){const t=(0,y.ZP)();return(0,I.jsx)(Pe,{...e,i18n:t})}var Ie=i(395024),Ae=i(957161);function Ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ce="pin-builder-delete-menu-alert-modal";class Se extends n.Component{constructor(...e){super(...e),Ee(this,"state",{showModal:!1}),Ee(this,"handleShowModal",(()=>{this.setState({showModal:!0})})),Ee(this,"handleHideModal",(()=>{this.setState({showModal:!1})})),Ee(this,"handleButtonClick",(()=>{const{onClickDelete:e,logContextEvent:t}=this.props,i=Ae.Z.getItem(Ce);t({event_type:101,component:13208,element:11327}),i?e():this.handleShowModal()})),Ee(this,"handleAlertButtonClick",(({checked:e})=>{const{onClickDelete:t}=this.props;e&&Ae.Z.setItem(Ce,!0),t()}))}render(){const{showModal:e}=this.state;return(0,I.jsxs)(n.Fragment,{children:[(0,I.jsx)(w.hU,{accessibilityLabel:this.props.i18n.bt("Elimina", "Delete", "Button to bulk delete selected Pin drafts", undefined, true),bgColor:"transparent",icon:"trash-can",onClick:this.handleButtonClick,iconColor:"gray",size:"md"}),e&&(0,I.jsx)(we,{alertText:this.props.i18n.bt("In questo modo eliminerai tutte le bozze dei Pin. Questa azione non pu essere annullata", "This will delete your entire Pin canvas. This action cannot be undone", "Warning message shown before Pin drafts are deleted", undefined, true),buttonText:this.props.i18n.bt("Elimina", "Delete", "Button to bulk delete selected Pin drafts", undefined, true),headingText:this.props.i18n.bt("Confermi?", "Are you sure?", "Alert modal to confirm action", undefined, true),id:Ce,onButtonClick:this.handleAlertButtonClick,onDismiss:this.handleHideModal})]})}}function je(e){const{logContextEvent:t}=(0,ne.v)(),i=(0,y.ZP)(),n=(0,o.useDispatch)(),s=(0,ge.Z)(),r=s.isAuth&&s.isEmployee;return(0,I.jsx)(Se,{...e,onClickDelete:()=>n((0,Ie.Z)({i18n:i,isEmployee:r})),i18n:i,logContextEvent:t})}var Te=i(915206),De=i(121151),ke=i(237056),ze=i(346360),Oe=i(349700),Re=i(106331);function Le(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Me extends n.Component{constructor(...e){super(...e),Le(this,"state",{description:this.props.initialDescription,descriptionFocused:!1,dirtyFields:new Set,link:this.props.initialLink,linkError:null,publishOption:this.props.initialPublishOption,scheduledDate:this.props.initialScheduledDate,scheduledTime:this.props.initialScheduledTime,selectedItem:this.props.initialSelectedItem,title:this.props.initialTitle,titleFocused:!1}),Le(this,"mounted",!1),Le(this,"handleDescriptionFocus",(()=>{this.setState({descriptionFocused:!0})})),Le(this,"handleDescriptionBlur",(()=>{this.setState({descriptionFocused:!1})})),Le(this,"handleTitleFocus",(()=>{this.setState({titleFocused:!0})})),Le(this,"handleTitleBlur",(()=>{this.setState({titleFocused:!1})})),Le(this,"handleLinkBlur",(({value:e})=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props;(0,ze.qi)({i18n:t,ideaPinRenamingEnabled:i,link:e}).then((e=>{if(e&&e.length>0&&this.mounted){const{message:t}=e[0];this.setState({linkError:t})}}))})),Le(this,"handleDescriptionChange",(({value:e})=>{this.setState((t=>({description:e.substring(0,re.JO),dirtyFields:t.dirtyFields.add("description")})))})),Le(this,"handleLinkChange",(({value:e})=>{this.setState((t=>({link:e,linkError:null,dirtyFields:t.dirtyFields.add("link")})))})),Le(this,"handleTitleChange",(({value:e})=>{this.setState((t=>({title:e.substring(0,re.Ke),dirtyFields:t.dirtyFields.add("title")})))})),Le(this,"handleBoardItemChosen",(e=>{this.setState((t=>({selectedItem:e,dirtyFields:t.dirtyFields.add("board")})))})),Le(this,"handleSubmitClick",(()=>{const{i18n:e,ideaPinRenamingEnabled:t,onDismiss:i,onSubmit:n}=this.props,{description:o,link:s,publishOption:r,scheduledDate:a,scheduledTime:l,selectedItem:d,title:c}=this.state;this.props.logContextEvent({event_type:101,component:13396,element:11331}),(0,ze.qi)({i18n:e,ideaPinRenamingEnabled:t,link:s}).then((e=>{if(!e||e&&0===e.length)n({...null!=o?{description:o}:Object.freeze({}),...null!=s?{link:s}:Object.freeze({}),...null!=r?{publishOption:r}:Object.freeze({}),...void 0!==a?{scheduledDate:a}:Object.freeze({}),...void 0!==l?{scheduledTime:l}:Object.freeze({}),...void 0!==d?{selectedItem:d}:Object.freeze({}),...null!=c?{title:c}:Object.freeze({})}),i();else if(e&&this.mounted){const{message:t}=e[0];this.setState({linkError:t})}}))}))}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{numPins:e,onDismiss:t}=this.props,{description:i,descriptionFocused:n,dirtyFields:o,link:s,linkError:r,selectedItem:a,title:l,titleFocused:d}=this.state,c=this.props.i18n.bt("Campo aggiornato", "Field updated", "Icon symbolizing that the value for a field will be updated", undefined, true);return(0,I.jsx)(De.ZP,{accessibilityModalLabel:this.props.i18n.bt("Modifica informazioni sul Pin", "Edit Pin info", "Label to describe the bulk Pin edit modal", undefined, true),footer:(0,I.jsxs)(w.xu,{padding:1,display:"flex",justifyContent:"between",alignItems:"center",children:[(0,I.jsx)(w.xu,{paddingX:3,children:(0,I.jsx)(w.xv,{size:"200",color:"subtle",children:(0,Oe.nk)(this.props.i18n.nbt(["Modifica informazioni per {{ numPins }} Pin in corso", "Modifica informazioni per {{ numPins }} Pin in corso"], e, "Number of Pins selected for bulk edit", true),{numPins:e})})}),(0,I.jsx)(w.xu,{"data-test-id":"pin-builder-edit-modal-save-button",children:(0,I.jsx)(w.zx,{text:this.props.i18n.bt("Aggiorna informazioni", "Update info", "Button to save info to selected Pins", undefined, true),color:"red",disabled:0===o.size,onClick:this.handleSubmitClick})})]}),heading:this.props.i18n.bt("Modifica informazioni", "Edit info", "Heading for the bulk Pin info edit modal", undefined, true),onDismiss:t,size:"md",children:(0,I.jsxs)(w.xu,{column:12,paddingX:8,paddingY:6,"data-test-id":"pinbuilder-bulk-edit-modal",children:[(0,I.jsxs)(w.xu,{marginBottom:6,children:[(0,I.jsx)(w.__,{htmlFor:"pin-builder-edit-modal-board",children:(0,I.jsxs)(w.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,I.jsx)(w.xv,{children:this.props.i18n.bt("Bacheca", "Board", "Label for bulk apply board dropdown", undefined, true)}),o.has("board")&&(0,I.jsx)(w.xu,{paddingX:1,children:(0,I.jsx)(w.JO,{icon:"check-circle",accessibilityLabel:c,color:"success",size:12})})]})}),(0,I.jsx)(Te.Z,{flyoutSize:480,onItemChosen:this.handleBoardItemChosen,placeholder:void 0===a?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for board dropdown with multiple boards", undefined, true):this.props.i18n.bt("Seleziona", "Select", "Placeholder text for board dropdown to select board", undefined, true),selectedItem:a,showButton:!1,showCreateBoardButton:!1,showFlyoutSaveButton:!1,showSectionSaveButton:!1,useLayer:!1})]}),(0,I.jsxs)(w.xu,{marginBottom:6,children:[(0,I.jsx)(w.__,{htmlFor:"pin-builder-edit-modal-title",children:(0,I.jsxs)(w.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,I.jsx)(w.xv,{children:this.props.i18n.bt("Titolo", "Title", "Label for bulk apply title text field", undefined, true)}),o.has("title")&&(0,I.jsx)(w.xu,{paddingX:1,children:(0,I.jsx)(w.JO,{icon:"check-circle",accessibilityLabel:c,color:"success",size:12})})]})}),(0,I.jsx)(w.nv,{id:"pin-builder-edit-modal-title",onBlur:this.handleTitleBlur,onChange:this.handleTitleChange,onFocus:this.handleTitleFocus,onKeyDown:this.handleTitleChange,placeholder:void 0===l?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for title field with multiple titles", undefined, true):void 0,size:"lg",value:l||""}),(0,I.jsx)(w.xu,{column:12,marginTop:1,minHeight:15,children:d&&(0,I.jsxs)(w.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,I.jsx)(w.xu,{flex:"grow",children:(0,I.jsx)(w.xv,{size:"100",color:"subtle",children:this.props.i18n.bt("I primi 40 caratteri vengono normalmente mostrati nei feed", "Your first 40 characters are what usually show up in feeds", "pinbuilder.header.editModal.title.helper", undefined, true)})}),(0,I.jsx)(w.xu,{flex:"none",children:(0,I.jsx)(w.xv,{size:"100",color:"default",children:re.Ke-(l||"").length})})]})})]}),(0,I.jsxs)(w.xu,{marginBottom:6,children:[(0,I.jsx)(w.__,{htmlFor:"pin-builder-edit-modal-description",children:(0,I.jsxs)(w.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,I.jsx)(w.xv,{children:this.props.i18n.bt("Descrizione", "Description", "Label for bulk apply description text field", undefined, true)}),o.has("description")&&(0,I.jsx)(w.xu,{paddingX:1,children:(0,I.jsx)(w.JO,{icon:"check-circle",accessibilityLabel:c,color:"success",size:12})})]})}),(0,I.jsx)(w.Kx,{id:"pin-builder-edit-modal-description",onChange:this.handleDescriptionChange,onKeyDown:this.handleDescriptionChange,onFocus:this.handleDescriptionFocus,onBlur:this.handleDescriptionBlur,placeholder:void 0===i?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for description field with multiple descriptions", undefined, true):void 0,rows:4,value:i||""}),(0,I.jsx)(w.xu,{column:12,marginTop:1,minHeight:15,children:n&&(0,I.jsxs)(w.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,I.jsx)(w.xu,{flex:"grow",children:(0,I.jsx)(w.xv,{size:"100",color:"subtle",children:this.props.i18n.bt("Di solito, quando cliccano sul tuo Pin, le persone visualizzano i primi 50 caratteri", "People will usually see the first 50 characters when they click on your Pin", "pinbuilder.header.editModal.description.helper", undefined, true)})}),(0,I.jsx)(w.xu,{flex:"none",children:(0,I.jsx)(w.xv,{size:"100",color:"default",children:re.JO-(i||"").length})})]})})]}),(0,I.jsxs)(w.xu,{children:[(0,I.jsx)(w.__,{htmlFor:"pin-builder-edit-modal-link",children:(0,I.jsxs)(w.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,I.jsx)(w.xv,{children:this.props.i18n.bt("Link", "Link", "Label for bulk apply link text field", undefined, true)}),(o.has("link")||!!r)&&(0,I.jsx)(w.xu,{paddingX:1,children:(0,I.jsx)(w.JO,{icon:r?"alert":"check-circle",accessibilityLabel:c,color:r?"error":"success",size:12})})]})}),(0,I.jsx)(w.nv,{hasError:!!r,id:"pin-builder-edit-modal-link",onBlur:this.handleLinkBlur,onChange:this.handleLinkChange,onKeyDown:this.handleLinkChange,placeholder:void 0===s?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for link field with multiple links", undefined, true):void 0,size:"lg",value:s||""}),(0,I.jsx)(w.xu,{column:12,marginTop:1,minHeight:15,children:!!r&&(0,I.jsx)(w.xu,{column:12,display:"flex",justifyContent:"between",children:(0,I.jsx)(w.xv,{size:"100",color:"error",children:r})})})]})]})})}}function Be(e){const{logContextEvent:t}=(0,ne.v)(),i=(0,y.ZP)(),n=(0,ke.Z)(),s=(0,o.useSelector)(Re.p),r=(0,o.useSelector)((e=>(0,Re.xA)(e).length)),a=(0,o.useDispatch)();return(0,I.jsx)(Me,{...e,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,...s,numPins:r,onSubmit:e=>a((0,se.setPinBuilderSharedData)(e))})}function Ne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Fe extends n.Component{constructor(...e){super(...e),Ne(this,"state",{showModal:!1}),Ne(this,"handleShowModal",(()=>{this.props.logContextEvent({event_type:101,component:13208,element:11325}),this.setState({showModal:!0})})),Ne(this,"handleHideModal",(()=>{this.setState({showModal:!1})}))}render(){const{showModal:e}=this.state;return(0,I.jsxs)(n.Fragment,{children:[(0,I.jsx)(w.hU,{accessibilityLabel:this.props.i18n.bt("Modifica", "Edit", "Button to bulk edit Pin images", undefined, true),icon:"edit",onClick:this.handleShowModal,iconColor:"gray",size:"md"}),e&&(0,I.jsx)(Be,{onDismiss:this.handleHideModal})]})}}function Ze(e){const{logContextEvent:t}=(0,ne.v)(),i=(0,y.ZP)();return(0,I.jsx)(Fe,{...e,i18n:i,logContextEvent:t})}var Ue=i(264938),Ve=i(717615),He=i(231947);function Ge(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class We extends n.Component{constructor(...e){super(...e),Ge(this,"handleSelectAllClick",(()=>{const{onSelectAll:e,logContextEvent:t}=this.props;t({event_type:101,component:13208,element:11323}),e()})),Ge(this,"handleClearAllClick",(()=>{const{onClickClear:e,logContextEvent:t}=this.props;t({event_type:101,component:13208,element:11324}),e()})),Ge(this,"handlePublishClick",(()=>{const{numSelected:e,onClickPublish:t,logContextEvent:i}=this.props;i({event_type:101,component:13208,element:11328,aux_data:{pin_builder_data:JSON.stringify({publish_count:e})}}),t()}))}render(){const{allSelected:e,numSelected:t}=this.props;return(0,I.jsxs)(w.xu,{display:"flex",color:"default",justifyContent:"between",alignItems:"center",height:"100%",children:[(0,I.jsxs)(w.kC,{alignItems:"center",justifyContent:"start",children:[(0,I.jsx)(w.xu,{paddingX:6,children:(0,I.jsx)(w.xv,{color:"default",children:(0,Oe.nk)(this.props.i18n.nbt(["{{ numSelected }} Pin selezionato", "{{ numSelected }} Pin selezionati"], t, "Number of Pins selected for bulk edit or save", true),{numSelected:t})})}),(0,I.jsx)(w.xu,{width:1,height:32,color:"secondary"}),(0,I.jsx)(w.xu,{paddingX:4,"data-test-id":"pin-builder-select-all",children:(0,I.jsx)(w.zx,{text:e?this.props.i18n.bt("Deseleziona tutto", "Deselect all", "Button to deselect all Pin drafts for bulk actions", undefined, true):this.props.i18n.bt("Seleziona tutto", "Select all", "Button to select all Pin drafts for bulk actions", undefined, true),color:"white",onClick:e?this.handleClearAllClick:this.handleSelectAllClick})})]}),(0,I.jsxs)(w.kC,{alignItems:"center",justifyContent:"start",children:[(0,I.jsxs)(w.xu,{display:"flex",alignItems:"center",paddingX:5,children:[(0,I.jsx)(w.xu,{paddingX:1,"data-test-id":"pin-builder-edit-selected",children:(0,I.jsx)(Ze,{})}),(0,I.jsx)(w.xu,{paddingX:1,"data-test-id":"pin-builder-delete-selected",children:(0,I.jsx)(je,{})}),(0,I.jsx)(w.xu,{paddingX:1,"data-test-id":"pin-builder-publish-all",children:(0,I.jsx)(w.zx,{color:"red",name:"publish",onClick:this.handlePublishClick,text:this.props.i18n.bt("Pubblica", "Publish", "Button to publish all selected Pins", undefined, true)})})]}),(0,I.jsx)(w.xu,{width:1,height:32,color:"secondary"}),(0,I.jsx)(w.xu,{paddingX:6,children:(0,I.jsx)(w.hU,{accessibilityLabel:this.props.i18n.bt("Annulla modifiche", "Cancel changes", "Button to deselect all Pins", undefined, true),bgColor:"transparent",icon:"cancel",onClick:this.handleClearAllClick,iconColor:"gray",size:"md"})})]})]})}}function $e(e){const{logContextEvent:t}=(0,ne.v)(),i=(0,y.ZP)(),n=(0,o.useDispatch)(),s=(0,ge.Z)(),r=(0,Ve.Z)(),a=(0,He.lJ)(s,r),l=s.isAuth?s.id:"",d=s.isAuth?s.country:"",c=s.isAuth&&s.isPartner,u=(0,o.useSelector)((({pinbuilder:e})=>e.selectedPinDraftIds.length)),h=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinDraftIds:t,selectedPinDraftIds:i}})=>t.filter((t=>!re.x1.includes(e[t].status))).length===i.length));return(0,I.jsx)(We,{...e,allSelected:h,i18n:i,logContextEvent:t,numSelected:u,onClickClear:()=>n((0,se.clearSelectedPinBuilderPinDrafts)()),onClickPublish:()=>n((0,Ue.Z)(l,d,c,i,t,a)),onSelectAll:()=>n((0,se.selectAllPinBuilderPinDrafts)())})}var qe=i(454074),Ye=i(121313),Xe=i.n(Ye);const Ke={top:474},Je={top:-276},Qe={property:"top",duration:8e3,timingFunction:"easeOut",delay:250};function et({onStart:e}){const t=(0,y.ZP)(),[i,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),[a,l]=(0,n.useState)(Ke);(0,n.useEffect)((()=>{s&&(o(!0),e&&e()),i&&l(Je)}),[i,s,e]);const d=[t.bt("Crea pi Pin contemporaneamente", "Make multiple Pins at a time", "Text describing that multiple Pins can be at once", undefined, true),t.bt("Crea qualsiasi formato, dal video al Pin carosello", "Create any format, from video to carousel", "Text describing the different Pin formats that can be used", undefined, true),t.bt("Controlla i Pin prima di pubblicarli", "See how Pins look before you publish", "Text describing the Pin preview feature", undefined, true)];return(0,I.jsxs)(w.xu,{bottom:!0,"data-test-id":"pinbuilder-education-publish-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,I.jsx)(w.xu,{minWidth:342,dangerouslySetInlineStyle:{__style:{backgroundColor:"#fbcccd"}},position:"relative",width:342,children:(0,I.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:{...a,transition:(0,b.Z)(Qe)}},height:"100%",paddingX:8,position:"relative",width:"100%",children:(0,I.jsx)(w.Ee,{alt:t.bt("Pin di esempio", "Example Pins", "Alt text for an image showing example Pins", undefined, true),onLoad:()=>r(!0),src:Xe(),naturalHeight:1660,naturalWidth:606})})}),(0,I.jsx)(w.xu,{flex:"grow",display:"flex",alignItems:"center",paddingX:10,children:(0,I.jsxs)(w.xu,{children:[(0,I.jsx)(w.X6,{children:t.bt("Perch fermarsi a uno?", "Why stop at one?", "A heading text for describing creating multiple Pins at once", undefined, true)}),(0,I.jsx)(w.xu,{paddingY:4,children:d.map(((e,t)=>(0,I.jsxs)(w.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,I.jsx)(w.xu,{color:"selected",display:"flex",flex:"none",rounding:"circle",width:8,height:8}),(0,I.jsx)(w.xu,{paddingX:2,children:(0,I.jsx)(w.xv,{children:(0,I.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`publish-screen-point-${t}`)))})]})})]})}var tt=i(537339),it=i(829407),nt=i(784590),ot=i(77891),st=i(566101),rt=i(556213),at=i.n(rt),lt=i(530137),dt=i.n(lt),ct=i(226474),ut=i.n(ct),ht=i(326880),pt=i.n(ht),_t=i(351267),gt=i.n(_t);const mt={property:"top",timingFunction:"easeInOut",duration:3700,delay:1725},ft=[{property:"opacity",duration:500,timingFunction:"easeInOut",delay:4200},{property:"margin-top",duration:500,timingFunction:"easeInOut",delay:4200}],xt=[{src:at(),keyframe:{start:{top:-77},end:{top:-663}},naturalHeight:1684,naturalWidth:360},{src:dt(),keyframe:{start:{top:-1},end:{top:-636}},naturalHeight:1684,naturalWidth:360},{src:ut(),keyframe:{start:{top:-121},end:{top:-654}},naturalHeight:1684,naturalWidth:360},{src:pt(),keyframe:{start:{top:-5},end:{top:-646}},naturalHeight:1684,naturalWidth:360},{src:gt(),keyframe:{start:{top:-142},end:{top:-650}},naturalHeight:1684,naturalWidth:360}],bt={marginTop:24,maxWidth:500,opacity:0},yt={marginTop:0,maxWidth:500,opacity:1};function vt({onStart:e}){const t=(0,y.ZP)(),[i,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)([]),[a,l]=(0,n.useState)(bt),[d,c]=(0,n.useState)(xt.reduce(((e,t)=>[...e,t.keyframe.start]),[]));return(0,n.useEffect)((()=>{const e=xt.map((()=>!0));r(e)}),[]),(0,n.useEffect)((()=>{0===s.filter((e=>e)).length&&(o(!0),e&&e()),i&&(l(yt),c(xt.reduce(((e,t)=>[...e,t.keyframe.end]),[])))}),[i,s,e]),(0,I.jsxs)(w.xu,{bottom:!0,"data-test-id":"pinbuilder-welcome-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[xt.map(((e,i)=>{const{src:n,naturalHeight:o,naturalWidth:a}=xt[i],l=i>xt.length/2?4:void 0,c=i<xt.length/2-1?4:void 0;return(0,I.jsx)(w.xu,{dangerouslySetInlineStyle:{__style:{...d[i],transition:(0,b.Z)(mt)}},height:240,marginStart:l,marginEnd:c,width:164,position:"relative",children:(0,I.jsx)(w.Ee,{alt:t.bt("Colonna di Pin di esempio", "Column of example Pins", "Image alt text describing a column of example Pins", undefined, true),color:"transparent",onLoad:()=>{const e=[...s];e[i]=!1,r(e)},naturalHeight:o,naturalWidth:a,src:n})},`education-image-strip-${i}`)})),(0,I.jsx)(w.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,I.jsxs)(w.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...a,transition:`${(0,x.Z)(ft,{execution:"parallel"})}`}},direction:"column",display:"flex",justifyContent:"center",padding:12,children:[(0,I.jsx)(w.X6,{children:t.bt("Creare Pin fantastici  ancora pi semplice", "Great Pins made easy", "In-product education heading text for creating Pins", undefined, true)}),(0,I.jsx)(w.xu,{paddingY:4,children:(0,I.jsx)(w.xv,{align:"center",children:(0,I.jsx)("span",{className:"deprecatedTextSizeXL",children:t.bt("Aggiungi testo e loghi, crea pi Pin contemporaneamente e modificali come un professionista. I nuovi strumenti ti permettono di creare i Pin a modo tuo.", "Add text and logos, make multiple Pins at once and edit like a pro. New tools let you create Pins your way.", "Text describing how to make Pins on Pinterest", undefined, true)})})})]})})]})}var Pt=i(676553);var wt=i(939853),It=i(977558),At=i(490072),Et=i(826067),Ct=i(584595),St=i(918301),jt=i(773285),Tt=i(558068),Dt=i(332611),kt=i(305782),zt=i(377184),Ot=i(833991);function Rt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Lt=new w.H3([new w.Ry(It.fe)]),Mt=1000135,Bt=501657;class Nt extends n.Component{constructor(...e){super(...e),Rt(this,"pinDraftRefs",new Map),Rt(this,"setPinDraftRef",((e,t)=>{this.pinDraftRefs.set(e,t)}))}componentDidUpdate(){const{footerContext:{zIndex:e,setZIndex:t},showInProductEducationExperience:i,viewEducation:n}=this.props,[o,s]=this.context;"number"==typeof e&&o&&o!==wt.I&&t(null),i&&!o&&(s(re.Lc),n())}render(){const{children:e}=this.props,[t,i]=this.context;return e({educationId:{value:t,set:i},pinDraftRefs:{set:this.setPinDraftRef,value:this.pinDraftRefs}})}}function Ft({advertiser:e,externalButtonQuery:t,headerHeight:i,inStlToolingExp:s,pinDraftType:r,requestContext:a,providerClassChildrenContext:{educationId:{value:h,set:p},pinDraftRefs:{value:_,set:g}}}){const m=(0,n.useRef)(null),{previous:f}=(0,Tt.Hv)(),[x,b]=(0,n.useState)(!1),[v,P]=(0,n.useState)(0),A=(0,Ot.YW)(),E=(0,y.ZP)(),C=(0,ke.Z)(),{logContextEvent:S}=(0,ne.v)(),j=(0,ge.Z)(),T=(0,o.useDispatch)(),D=(0,fe.useHistory)(),k=(0,fe.useLocation)(),z=(0,nt.Z)({name:"UserResource",options:{username:j.isAuth&&j.username,field_set_key:"profile"}}),{showEmailVerificationReminderModal:O}=(0,St.y9)(),{checkExperiment:R}=(0,jt.F)(),{closeupImageSignature:L,entryPoint:G,pinDraftIds:W,pinDrafts:$,showDisabledPinCreationBanner:X}=(0,o.useSelector)((e=>e.pinbuilder)),K=W[0],J=K?$[K]:null,Q=null==J?void 0:J.type,ee=j.isAuth&&j.isEmployee,{isRTL:te}=a;(0,n.useEffect)((()=>{W.some((e=>$[e].apiErrorCode===Ct.H9))&&R("require_email_verification_pin_create").anyEnabled&&(O(),W.forEach((e=>T((0,kt.lT)(e,null)))))})),(0,he.Z)(1000161);const oe=(0,o.useSelector)((e=>{var t;const i=K?(0,At.nL)()(e,{pinDraftId:K}):null;if(null===i)return null;const n=("story"===Q?e.pinbuilder.storyPinItems:e.pinbuilder.pinItems)[i];return n&&(null===(t=n.media)||void 0===t?void 0:t.type)})),{setExtraContext:ae}=(0,he.Z)(1000135,{format_type:Q,media_type:oe}),le=(0,n.useRef)(oe);(0,n.useEffect)((()=>{le.current!==oe&&(le.current=oe,ae({firstPinDraftMediaType:oe}))}));const de=(0,Ve.Z)(),ce=de&&de.id,ue=(0,n.useRef)("not_set");(0,n.useEffect)((()=>{let i;"story"===r?i="story_pin":t&&(i="offsite_pin_creation"),ie.Z.initialize({user:z.isLoaded?z.data:null,requestContext:a,viewer:j,location:k,advertiser:e,scenario:i,orbacActingAs:de})}),[z.isLoaded]),(0,n.useEffect)((()=>{if(ue.current!==ce){var e,i,n,o;ue.current=ce;const s=null===(e=k.state)||void 0===e?void 0:e.disableAddPinDraft;if(W.length>0||s)return;const a=null===(i=k.state)||void 0===i?void 0:i.board,d=null===(n=k.state)||void 0===n?void 0:n.boardSection,c=a||r?{selectedItem:a?{boardId:a.id,title:d?d.title:a.name,...d?{sectionId:d.id}:Object.freeze({}),ownerUsername:null==a||null===(o=a.owner)||void 0===o?void 0:o.username}:void 0,...r?{type:r}:{}}:void 0,u=(0,me.Z)();T((0,l.Z)({i18n:E,isEmployee:ee,pinDraft:c,pinDraftId:u,storyPinPublishStopwatch:void 0}));const{tab:h,url:p}=(0,U.Z)({url:(0,Z.Z)()});if(R("web_bizhub_create_pin_from_website").anyEnabled&&p&&(T((0,kt.c8)(u,"scrape")),T((0,kt.f9)(u,p,null,""))),t){T((0,kt.c8)(u,"external")),T((0,kt.e5)(u,t.method));const e={height:1,width:1,id:(0,me.Z)(),sourceURL:t.url,src:t.media,type:"webImage"};T((0,kt.dj)(u,e)),ie.Z.enabled("offsite_pin_creation_multi_select")?T((0,kt.f9)(u,t.url,null,t.media)):T((0,kt.q0)(u,"external",h===re.ro?"IDEA_PIN":"PIN"))}}})),(0,it.Z)((()=>(s&&S({event_type:13,component:13308,view_type:212,aux_data:{...L?{image_signature:L}:{},entry_point_source:G}}),"story"===r&&S({event_type:13,view_type:226,view_parameter:3228}),t&&(window.opener||"bookmarklet"===t.method)&&(window.innerHeight<zt.CX||window.innerWidth<zt.N$)&&window.resizeTo(zt.N$,zt.CX),()=>{T((0,se.clearPinBuilderPinDrafts)())}))),(0,it.Z)((()=>{const{tab:e}=(0,U.Z)({url:(0,Z.Z)()});if(e===re.ro){const e=(0,me.Z)();T((0,se.clearPinBuilderPinDrafts)()),T((0,l.Z)({i18n:E,isEmployee:ee,pinDraft:void 0,pinDraftId:e,storyPinPublishStopwatch:void 0})),T((0,kt.c8)(e,"scrape"))}}));const _e=0===f.length,xe=W.length>0,be=(0,n.useRef)(xe);(0,n.useEffect)((()=>{if(be.current!==xe&&(be.current=xe,!xe)){const{crossSite:e,redirUrl:t}=(0,Et.mB)(k.search);e?window.history.back():t&&(0,st.Z)({url:t})&&(0,H.Z)(t)?D.push((0,Y.Z)({url:t})):_e?D.push("/"):D.goBack()}}));const ve=(0,o.useSelector)((e=>e.pinbuilder.selectedPinDraftIds.length>0)),Pe=ie.Z.enabled("multi_pin")||ie.Z.enabled("multi_pin_pinner"),we=W.reduce(((e,t)=>null!=e?e:$[t].apiError),null),{tab:Ie}="undefined"!=typeof window&&(0,U.Z)({url:(0,Z.Z)()})||{};return(0,I.jsxs)(n.Fragment,{children:[ve&&(0,I.jsx)(w.xu,{height:i,top:!0,left:!0,right:!0,position:"fixed",zIndex:Lt,children:(0,I.jsx)($e,{})}),(0,I.jsxs)(w.xu,{position:"fixed",left:!0,right:!0,bottom:!0,display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{top:i}},children:[null,(0,I.jsx)(w.xu,{flex:"none",children:we?(0,I.jsx)(N.Z,{errorMessage:we,primaryAction:(0,I.jsx)(w.hU,{accessibilityLabel:E.bt("Chiudi banner di errore", "Close Error Banner", "Accessibility label to close the error banner", undefined, true),icon:"cancel",iconColor:"white",onClick:()=>T((0,kt.lT)(W[0],null)),size:"sm"})}):(0,I.jsx)(F.default,{placementId:1000161})}),(0,I.jsxs)(w.xu,{color:"secondary","data-test-id":"pin-builder",flex:"grow",height:"100%",onDragEnter:()=>{(ie.Z.enabled("multi_pin")||ie.Z.enabled("multi_pin_pinner"))&&b(!0)},onDragLeave:()=>b(!1),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),b(!1),ie.Z.enabled("multi_pin")||ie.Z.enabled("multi_pin_pinner")){const t=(0,qe.Z)(e.dataTransfer);(0,ot.Z)({i18n:E,ideaPinRenamingEnabled:C,files:t,options:{allowVideo:ie.Z.enabled("video")}}).then((e=>{const t=e.reduce(((e,t)=>("error"!==t.type&&e.push(t),e)),[]);if(t.length>0){const e=j.isAuth?j.id:"",i=j.isAuth?j.country:"";T((0,d.Z)({assets:t,checkExperiment:R,country:i,i18n:E,ideaPinRenamingEnabled:C,isEmployee:ee,logContextEvent:S,userId:e}))}}))}},position:"relative",children:[(0,I.jsx)(w.xu,{display:"visuallyHidden",children:(0,I.jsx)(w.X6,{accessibilityLevel:1,children:E.bt("Generatore di Pin", "Pin Builder", "pinBuilder.heading", undefined, true)})}),X&&(0,I.jsx)(w.xu,{"data-test-id":"disable-banner",marginStart:7,marginTop:5,paddingX:3,children:(0,I.jsx)(u.Z,{})}),(0,I.jsx)(w.xu,{height:"100%",overflow:"auto",ref:m,dangerouslySetInlineStyle:{__style:{border:"4px solid "+(x?"#0074e8":"transparent")}},onScroll:e=>{const{clientHeight:t,scrollHeight:i,scrollTop:n}=e.currentTarget;P(n/(i-t))},children:(0,I.jsx)(pe,{setPinDraftRef:g})}),Pe&&(0,I.jsx)(w.xu,{position:"absolute",top:!0,left:!te,right:te,bottom:!0,children:(0,I.jsx)(ye,{isAddPinDraftRemoved:Ie===re.ro,pinDraftRefs:_,scrollPosition:v})})]})]}),h===re.Lc&&(0,I.jsx)(B.Z,{containsHlsVideoComponent:!!ie.Z.enabled("layouts"),onComplete:()=>{var e;null===(e=m.current)||void 0===e||e.scroll(0,0),p(re.aD)},onDismiss:()=>{p(wt.I),A.setZIndex(Ot.HW),T((0,Dt.Qu)(Mt,Bt))},steps:[{id:"pinbuilder-welcome",element:(0,I.jsx)(vt,{})},{id:"pinbuilder-editing",element:(0,I.jsx)(M,{})},...ie.Z.enabled("layouts")?[{id:"pinbuilder-layout",element:(0,I.jsx)(q,{})}]:[],{id:"pinbuilder-publish",element:(0,I.jsx)(et,{})}]}),h===re.aD&&(0,I.jsx)(tt.Z,{steps:(0,V.Z)(c(E)),onComplete:()=>{p(wt.I),A.setZIndex(Ot.HW),T((0,Dt.CK)(Mt,Bt))},onDismiss:()=>{p(wt.I),A.setZIndex(Ot.HW),T((0,Dt.Qu)(Mt,Bt))}})]})}function Zt(e){const t=(0,o.useDispatch)(),i=(0,Ot.YW)(),{search:n}=(0,fe.useLocation)(),{tab:s}=(0,Et.mB)(n),r=(0,o.useSelector)((({experiences:e,pinbuilder:{pinDraftIds:t,pinDrafts:i}})=>{const n=t[0],o=n?i[n]:null,r=e&&e[1000135];return"story"!==(null==o?void 0:o.type)&&s!==re.ro&&501657===(null==r?void 0:r.experience_id)}));return(0,I.jsx)(Nt,{showInProductEducationExperience:r,footerContext:i,viewEducation:()=>t((0,Dt.UT)(Mt,Bt)),children:t=>(0,I.jsx)(Ft,{...e,providerClassChildrenContext:t})})}Rt(Nt,"contextType",Pt.Z);var Ut=i(798477),Vt=i(947599),Ht=i(499128),Gt=i(418614),Wt=i(782534),$t=i(248327),qt=i(858416),Yt=i(697335),Xt=i(343341),Kt=i(81636);const Jt=(0,n.lazy)((()=>Promise.all([i.e(72586),i.e(86352),i.e(16708)]).then(i.bind(i,616641))));function Qt(){const e=(0,fe.useHistory)(),t=(0,y.ZP)(),i=(0,fe.useLocation)(),n=(0,ge.Z)(),l=(0,o.useSelector)(Re.vd),d=(0,o.useDispatch)(),{checkExperiment:c}=(0,jt.F)(),u=(0,Xt.F9)(),h=(0,Yt.t)(),p=(0,ae.B)(),_=i.pathname.startsWith("/story-pin-builder")||i.pathname.startsWith("/idea-pin-builder")||i.pathname.startsWith("/pin-creation-tool")?"story":null;(0,Kt.Q)({view_type:212}),(0,Gt.Z)({name:"UserResource",getOptions:({advertiser:e,user:t})=>({field_set_key:"grid_item",user_id:(null==e?void 0:e.owner_user_id)||t.id||""})}),(0,Gt.Z)({name:"UserResource",getOptions:({user:e})=>({field_set_key:"profile",username:e.username||""})}),(0,Gt.Z)({name:"PinResource",getOptions:({routeData:e})=>({field_set_key:"detailed",id:e.params.pin_id}),disableFetch:({routeData:e})=>!e.params.pin_id});const g=(0,Ve.Z)(),{anyEnabled:m}=c("web_m10n_business_access_orbac_www"),f=(0,o.useSelector)((({feeds:e})=>e)),x=(0,He.nl)(n,g)&&"ad_creation"!==ie.Z.scenario()&&c("web_stl_tooling").anyEnabled,b=(0,Et.mB)(i.search);let v=null;try{v=(0,a.Z)(b)?{...b,media:decodeURIComponent(b.media),url:decodeURIComponent(b.url)}:null}catch(E){}const P=n.isAuth?n.id:null,w=m?(0,He.lJ)(n,g):"",A=w||P;return"story"===_?(0,I.jsx)(s.Z,{name:"SafeSuspense_PinBuilderPage_StoryboardComponent",children:(0,I.jsx)(Vt.Z,{children:(0,I.jsx)(Jt,{advertiser:p.advertiser,headerHeight:h,requestContext:p,userId:A,onDismiss:({draftStage:e,pinDraftId:t})=>{const i=(()=>{const e=A?f[`storyPinData:${A}`]:[];return(null!=e?e:[]).map((({id:e})=>e))})();"upload"===e&&i.length>1||0===i.length?d((0,Ut.Z)(t)):setTimeout((()=>{d((0,$t.U)("StoryPinDraftsResource",{options:{redux_normalize_feed:!0,userId:A,orbacSubjectId:w}})),window.location.reload()}),2e3)},onSuccess:(i,o,s)=>{if(l.length>0&&d({type:"PIN_BUILDER_DELETE_PIN_DRAFT",payload:{pinDraftId:l[0]}}),o&&s){const i=new Date(o.getFullYear(),o.getMonth(),o.getDate(),s.getHours(),s.getMinutes(),s.getSeconds());e.replace(n.isAuth?`/${n.username}/scheduled-pins/`:"/"),u.showToast((({hideToast:e})=>(0,I.jsx)(Ht.ZP,{duration:5e3,onHide:e,text:(0,Oe.nk)(t.bt("Programmato per il giorno {{ date }} alle ore {{ scheduledTime }}", "Scheduled for {{ date }} at {{ scheduledTime }}", "schedulePinConfirmation.toast.description", undefined, true),{date:(0,r.Z)(p.locale,o,Wt.k.SHORT_MONTH_DAY,!1),scheduledTime:i.toLocaleTimeString([p.locale],{hour:"2-digit",minute:"2-digit"})}).join("")})))}else e.replace(`/pin/${i}`)},orbacSubjectId:w})})}):(0,I.jsx)(qt.Wr,{children:(0,I.jsx)(Zt,{advertiser:p.advertiser,headerHeight:h,inStlToolingExp:x,pinDraftType:_,requestContext:p,externalButtonQuery:v})})}},709622:(e,t,i)=>{i.d(t,{Az:()=>m,DI:()=>y,Gl:()=>w,Hl:()=>T,Kb:()=>z,NA:()=>n,NG:()=>d,OC:()=>S,Pq:()=>E,QM:()=>_,Sk:()=>P,UF:()=>x,Uo:()=>C,WF:()=>a,Xm:()=>c,Zf:()=>s,_D:()=>k,_N:()=>p,ac:()=>r,e_:()=>h,gf:()=>f,hf:()=>I,i_:()=>l,jY:()=>b,ni:()=>v,qg:()=>u,rX:()=>o,vX:()=>A,wO:()=>D,yG:()=>g,yq:()=>j});const n="10",o=1,s=365,r=64,a=8,l=9,d=11,c=15,u=16,h=17,p=18,_=19,g=20,m=1e6,f=m,x="US";function b(e){let t="USD",i="$";switch(e){case"AT":t="EUR",i="";break;case"AU":t="AUD",i="$";break;case"BE":t="EUR",i="";break;case"CA":t="CAD",i="$";break;case"CH":t="CHF",i="CHF";break;case"DE":t="EUR",i="";break;case"DK":t="DKK",i="kr";break;case"ES":case"FI":case"FR":t="EUR",i="";break;case"GB":t="GBP",i="";break;case"IE":case"IT":case"NL":t="EUR",i="";break;case"NO":t="NOK",i="kr";break;case"NZ":t="NZD",i="$";break;case"PT":t="EUR",i="";break;case"SE":t="SEK",i="kr"}return[t,i]}const y={AU:{budget:1,duration:"10"},CA:{budget:1,duration:"10"},CZ:{budget:80,duration:"10"},FR:{budget:1,duration:"10"},GB:{budget:1,duration:"10"},IE:{budget:1,duration:"10"},NZ:{budget:1,duration:"10"},US:{budget:3,duration:"10"},AT:{budget:1,duration:"10"},DE:{budget:1,duration:"10"},IT:{budget:1,duration:"10"},ES:{budget:1,duration:"10"},NL:{budget:1,duration:"10"},PT:{budget:1,duration:"10"},BE:{budget:1,duration:"10"},CH:{budget:1,duration:"10"},SE:{budget:10,duration:"30"},NO:{budget:10,duration:"30"},DK:{budget:10,duration:"30"},FI:{budget:1,duration:"10"}},v={AU:{budget:9,duration:"10"},CA:{budget:8,duration:"10"},CZ:{budget:80,duration:"10"},FR:{budget:8,duration:"10"},GB:{budget:5,duration:"10"},IE:{budget:8,duration:"10"},NZ:{budget:9,duration:"10"},US:{budget:8,duration:"10"},AT:{budget:8,duration:"10"},DE:{budget:8,duration:"10"},IT:{budget:8,duration:"10"},ES:{budget:8,duration:"10"},NL:{budget:8,duration:"10"},PT:{budget:8,duration:"10"},BE:{budget:8,duration:"10"},CH:{budget:8,duration:"10"},SE:{budget:10,duration:"30"},NO:{budget:10,duration:"30"},DK:{budget:10,duration:"30"},FI:{budget:8,duration:"10"}},P={AT:1,AU:1,BE:1,CA:1,CH:1,CZ:11,DE:1,ES:1,DK:1,FI:1,FR:1,GB:1,IE:1,IT:1,NO:1,NZ:1,NL:1,PT:1,SE:1,US:1},w={PIN_SELECTION_MODAL:"PIN_SELECTION_MODAL",BUSINESS_FORM:"QUICK_PROMOTE_BUSINESS_FORM",BILLING_FORM:"QUICK_PROMOTE_BILLING_FORM",SUCCESS_MODAL:"SUCCESS_MODAL",ERROR_MODAL:"ERROR_MODAL",TAG_MODAL:"TAG_MODAL",GDPR_MODAL:"GDPR_MODAL"},I="QUICK_PROMOTE_PAGE",A=[w.GDPR_MODAL,w.PIN_SELECTION_MODAL,I,w.BUSINESS_FORM,w.BILLING_FORM,w.SUCCESS_MODAL,w.ERROR_MODAL],E={NARROW:"NARROW",MEDIUM:"MEDIUM",WIDE:"WIDE"},C=e=>e>=1&&e<=2,S="qp-fac-education-id",j="qp-fac-modal-education-id",T={CONSIDERATION:"CONSIDERATION",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES"},D={PINS:0,PRODUCT_GROUPS:1,BOARDS:2,SELECTED:3,SEARCH_RESULTS:4},k={MOST_RECENT:"RECENT",PROMOTED_PINS:"PROMOTED"},z=300},596505:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(294184),s=i.n(o),r=i(883119),a=i(898781),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=()=>{};class u extends n.Component{constructor(e){super(e),d(this,"setValue",(e=>{const t={selected:e};this.fireChangeEvent(t),this.setState(t),this.handleClose()})),d(this,"handleMouseDown",(e=>{"mousedown"===e.type&&0!==e.button||(this.isOpen?this.handleClose():this.handleOpen())})),d(this,"handleOpen",(()=>{this._shouldManageOwnState?this.setState({isOpen:!0}):this.props.onOpen()})),d(this,"handleClose",(()=>{this._shouldManageOwnState?this.setState({isOpen:!1}):this.props.onClose()})),this._shouldManageOwnState=e.onOpen===c&&e.onClose===c,this.state={selected:e.value,isOpen:!1},this.mounted=!0}static getDerivedStateFromProps(e,t){return e.value&&e.value!==t.selected?{selected:e.value}:null}componentDidUpdate(){this.mounted&&this.isOpen&&this.scrollItemIntoView(this.selectedOption)}get isOpen(){return this._shouldManageOwnState?Boolean(this.state.isOpen):Boolean(this.props.isOpen)}scrollItemIntoView(e){const t=this.menu,i=e;t&&i&&(i.offsetTop>t.scrollTop+t.offsetHeight||i.offsetTop<t.scrollTop)&&(t.scrollTop=i.offsetTop-t.offsetTop)}fireChangeEvent(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}renderOption(e){const t=e===this.state.selected,i=s()({ReactDropdown__option:!0,"ReactDropdown__option--selected":t});return(0,l.jsx)("div",{className:i,onClick:()=>this.setValue(e),onMouseDown:()=>this.setValue(e),ref:t?e=>{this.selectedOption=e}:null,role:"button",tabIndex:"0",children:e.label},e.value)}renderMenu(e=[]){const t=e.map((e=>{if("group"===e.type){var t;const i=(0,l.jsx)("div",{className:"title",children:e.name});return(0,l.jsxs)("div",{className:"group",children:[i,null===(t=e.items)||void 0===t?void 0:t.map((e=>this.renderOption(e)))]},e.name)}return this.renderOption(e)}));return t.length?t:(0,l.jsx)("div",{className:"ReactDropdown--noresults",children:this.props.i18n.bt("Nessuna opzione trovata", "No options found", " - ", undefined, true)})}render(){const e=this.isOpen,t=s()({ReactDropdown:!0,"ReactDropdown--open":e}),i=s()({ReactDropdown__control:!0,"ReactDropdown__control--advertiserDropdown":this.props.isAdvertiserDropdown});let n=null;return e&&(n=(0,l.jsx)("div",{className:"ReactDropdown__menu",ref:e=>{this.menu=e},children:this.renderMenu(this.props.options)})),(0,l.jsxs)("div",{className:t,children:[(0,l.jsx)("div",{className:i,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown,children:(0,l.jsxs)("div",{className:"ReactDropdown__placeholder",children:[this.state.selected.label,(0,l.jsx)("span",{className:"caret",children:(0,l.jsx)(r.JO,{accessibilityLabel:this.props.i18n.bt("visualizza opzioni", "see options", "accessible label for dropdown arrow", undefined, true),color:"default",icon:"arrow-down",size:18})})]})}),n]})}}d(u,"defaultProps",{isAdvertiserDropdown:!1,isOpen:!1,onChange:c,onClose:c,onOpen:c,options:[],value:{label:"Select...",value:""}});const h=function(e){const t=(0,a.ZP)();return(0,l.jsx)(u,{...e,i18n:t})}},580189:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(170168);const o={0:n.C0,3:n.vI,4:n.YD};function s({currentSiteType:e,destinationSiteType:t,inputPath:i}){const n=Object.keys(o).includes(String(e))&&Object.keys(o).includes(String(t)),s="/"===i[0]?i:`/${i}`;return n&&t!==e?`${o[t]}${s}`:s}},151416:(e,t,i)=>{i.d(t,{V3:()=>r,e_:()=>o,lE:()=>s});var n=i(425288);const{Provider:o,Consumer:s,useHook:r}=(0,n.Z)("pinBuilderContext",{shouldRenderPinEditorStandalone:!1,openHelpTextInNewWindow:!1,allowMultiplePins:!0,allowCarouselPin:!0})},916655:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(281139),s=i(454074),r=i(898781),a=i(407043),l=i(883119),d=i(531245),c=i(785893);const u={default:{backgroundImage:"linear-gradient(to left, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.03) 50%, rgba(0, 0, 0, 0))"},drag:{backgroundImage:"linear-gradient(to left, rgba(74, 144, 226, 0), rgba(74, 144, 226, 0.03) 50%, rgba(74, 144, 226, 0))"},error:{backgroundImage:"linear-gradient(to left, rgba(230, 0, 35, 0), rgba(230, 0, 35, 0.03) 50%, rgba(230, 0, 35, 0))"}};function h({addAssets:e,errorMessage:t,imageOnly:i,isDeprecateCoverExpEnabled:h=!1}){const{logContextEvent:p}=(0,a.v)(),_=(0,r.ZP)(),[g,m]=(0,n.useState)(!1),f=(0,n.useRef)(!1);(0,n.useEffect)((()=>(f.current=!0,()=>{f.current=!1})));const x=h?(0,c.jsx)(l.xu,{padding:5,children:(0,c.jsx)(l.xv,{color:"subtle",size:"100",children:_.bt("Supporta PNG, JPG e GIF fino a 10 MB", "Supports PNG, JPG, GIF up to 10MB", "emptyPane.fileTypeText", undefined, true)})}):(0,c.jsxs)(n.Fragment,{children:[(0,c.jsxs)(l.xu,{display:"flex",padding:5,children:[(0,c.jsx)(l.xu,{alignItems:"center",display:"flex",marginEnd:3,children:(0,c.jsx)(l.JO,{accessibilityLabel:_.bt("Icona immagine", "Image icon", "accessibilitiy label for image icon", undefined, true),icon:"camera-roll",size:22})}),(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:_.bt("Immagini ad alta risoluzione", "High resolution images", "Text description of image that can be uploaded", undefined, true)}),(0,c.jsx)(l.xv,{color:"subtle",size:"100",children:_.bt("PNG, JPG, GIF fino a 10 MB", "PNG, JPG, GIF up to 10MB", "Image type and limits that can be uploaded", undefined, true)})]})]}),!i&&(0,c.jsxs)(l.xu,{display:"flex",padding:5,children:[(0,c.jsx)(l.xu,{alignItems:"center",display:"flex",marginEnd:3,children:(0,c.jsx)(l.JO,{accessibilityLabel:_.bt("Icona video", "Video icon", "accessibilitiy label for video icon", undefined, true),icon:"video-camera",size:24})}),(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:_.bt("Video di alta qualit", "High-quality video", "Text description of image that can be uploaded", undefined, true)}),(0,c.jsx)(l.xv,{color:"subtle",size:"100",children:_.bt("MOV, MP4 fino a 2 GB, 5 min.", "MOV, MP4, up to 2GB, 5min.", "Video type and limits that can be uploaded", undefined, true)})]})]})]});return(0,c.jsx)(o.Z,{accept:[...d.xl,...i?[]:d.ss].join(","),allowMultipleFiles:!0,color:"white",hasError:!!t,id:"asset-picker-upload",onChange:t=>{m(!0);const i=Array.from(t.target.files);m(!0),p({event_type:101,component:13392,element:11265}),e(i).then((()=>{f.current&&m(!1)}))},onDrop:t=>{m(!0);const i=(0,s.Z)(t.dataTransfer);m(!0),p({event_type:3502,component:13392,element:11265}),e(i).then((()=>{f.current&&m(!1)}))},children:e=>(0,c.jsxs)(l.xu,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},"data-test-id":"asset-picker-empty-pane",direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"relative",children:[g?(0,c.jsx)(l.$j,{accessibilityLabel:_.bt("Caricamento in corso...", "Loading...", "Loading assets", undefined, true),show:!0}):(0,c.jsx)(l.xu,{padding:2,children:(0,c.jsxs)(l.kC,{alignItems:"center",direction:"column",gap:{row:0,column:4},justifyContent:"center",children:[(0,c.jsx)(l.JO,{color:h?"default":"subtle",icon:h?"camera-roll":"arrow-circle-up",accessibilityLabel:i?_.bt("Aggiungi un'immagine", "Add an image", "uploadCoverSourceModal.emptyPane.addIconAccessibilityLabel", undefined, true):_.bt("Aggiungi un'immagine o un video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),size:h?22:32}),(0,c.jsx)(l.xv,{children:h?_.bt("Trascina un'immagine, oppure sfoglia dal tuo computer", "Drag and drop an image, or browse from your computer", "emptyPane.dragAndDropText", undefined, true):_.bt("Trascina e rilascia risorse", "Drag and drop assets", "A drag and drop prompt for adding assets", undefined, true)}),(0,c.jsx)(l.zx,{color:h?"gray":"red",text:h?_.bt("Naviga", "Browse", "emptyPane.button", undefined, true):_.bt("Carica dal computer", "Upload from your computer", "Button text on asset picker to upload image from a computer", undefined, true)})]})}),(0,c.jsx)(l.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:h?void 0:{__style:u[e?"drag":t?"error":"default"]},display:"flex",justifyContent:"center",left:!0,right:!0,position:"absolute",children:t?(0,c.jsx)(l.xu,{padding:5,maxWidth:468,children:(0,c.jsx)(l.xv,{align:"center",color:"error",size:"200",children:t})}):x})]})})}},725108:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(898781),o=i(883119),s=i(785893);function r({errorMessage:e,primaryAction:t,secondaryAction:i}){const r=(0,n.ZP)();return(0,s.jsxs)(o.xu,{alignItems:"center",color:"errorBase","data-test-id":"error-banner",display:"flex",height:64,paddingX:3,position:"relative",children:[(0,s.jsx)(o.xu,{paddingX:2,children:(0,s.jsx)(o.JO,{accessibilityLabel:r.bt("Avviso di errore", "Error Alert", "Alert icon for error banner", undefined, true),color:"inverse",icon:"alert",size:24})}),(0,s.jsx)(o.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"start",paddingX:1,children:(0,s.jsx)(o.xv,{align:"center",color:"inverse",weight:"bold",children:e})}),(!!t||!!i)&&(0,s.jsxs)(o.kC,{alignItems:"end",justifyContent:"start",children:[!!i&&(0,s.jsx)(o.xu,{height:"100%",padding:1,children:i}),!!t&&(0,s.jsx)(o.xu,{height:"100%",padding:1,children:t})]})]})}},841064:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(294184),s=i.n(o),r=i(665866),a=i(717615),l=i(19121),d=i(231947),c=i(780280),u=i(883119),h=i(785893);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _={__style:{pointerEvents:"none"}};class g extends n.Component{constructor(...e){super(...e),p(this,"state",{focused:!1}),p(this,"setTextAreaRef",(e=>{this.textArea=e})),p(this,"setTextAreaHeight",(()=>{this.textArea&&(this.textArea.style.height="auto",this.textArea.style.height=`${this.textArea.scrollHeight}px`)})),p(this,"handleChange",(e=>{const{onChange:t}=this.props;t({event:e,value:e.target.value})})),p(this,"handleInput",(()=>{this.setTextAreaHeight()})),p(this,"handleBlur",(e=>{this.setState({focused:!1},this.setTextAreaHeight);const{onBlur:t}=this.props;t&&t({event:e,value:e.currentTarget.value})})),p(this,"handleFocus",(e=>{this.setState({focused:!0},this.setTextAreaHeight);const{onFocus:t}=this.props;t&&t({event:e,value:e.currentTarget.value})})),p(this,"getColor",(()=>{const{errorMessage:e,warningMessage:t,showOnBlur:i,showWarningOnBlur:n,value:o}=this.props,{focused:s}=this.state;return e?"#e60023":s||n&&t?"#0074e8":o&&!i?"transparent":"rgba(142, 142, 142, 0.5)"}))}componentDidMount(){this.setTextAreaHeight(),this.props.shouldFocusOnRender&&this.textArea&&this.textArea.focus()}componentDidUpdate(){this.setTextAreaHeight()}render(){const{bold:e,muted:t,italic:i,disabled:n,errorMessage:o,warningMessage:a,height:l,helperMessage:c,hideScrollbars:p,id:g,maxLength:m,placeholder:f,requestContext:x,size:b,spellCheck:y,showOnBlur:v,showWarningOnBlur:P,value:w="",viewer:I,wrap:A,orbacActingAs:E}=this.props,{focused:C}=this.state,S={__style:{boxShadow:`0 ${C||!!o||P&&!!a?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}},j=(0,d.nl)(I,E)&&"ad_creation"!==r.Z.scenario()&&x.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,h.jsxs)(u.xu,{column:12,display:"flex",direction:"column",children:[(0,h.jsxs)(u.xu,{column:12,position:"relative",children:[(0,h.jsx)("textarea",{className:s()("TextArea__"+(j?"experimentalTextArea":"textArea"),{TextArea__bold:e,TextArea__dark:null==m&&!n,TextArea__hide_scrollbars:p,TextArea__disabled:n,TextArea__enabled:!n,TextArea__small:"sm"===b,TextArea__large:"lg"===b,TextArea__medium:"md"===b,TextArea__wrap:A,TextArea__nowrap:!A,TextArea__sm:!A,TextArea__smHeight:"sm"===l,TextArea__mdHeight:"md"===l,TextArea__muted:!j&&t,TextArea__italic:!j&&w&&i}),disabled:n,id:g,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onInput:this.handleInput,placeholder:f,spellCheck:y,ref:this.setTextAreaRef,rows:1,value:null==m||C?w:w.substring(0,m)}),null!=m&&!n&&(0,h.jsx)(u.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:_,children:(0,h.jsx)("div",{className:s()("TextArea__"+(j?"ghostTextArea":"textArea"),"TextArea__dark",{TextArea__bold:e,TextArea__muted:!j&&t,TextArea__italic:!j&&i,TextArea__large:"lg"===b,TextArea__medium:"md"===b,TextArea__small:"sm"===b,TextArea__wrap:A,TextArea__nowrap:!A}),children:w.substring(0,m)})})]}),(0,h.jsxs)("div",{className:C||v||o||P&&a||!w?"":"TextArea__hidden",children:[!j&&(0,h.jsx)(u.xu,{column:12,dangerouslySetInlineStyle:S}),(0,h.jsx)(u.xu,{column:12,marginTop:j?0:1,minHeight:15,children:(C||v||!!o||P&&!!a)&&(0,h.jsxs)(u.xu,{column:12,display:"flex",justifyContent:"between",children:[!!o&&(0,h.jsx)(u.xu,{flex:"grow","data-test-id":"text-area-error",children:(0,h.jsx)(u.xv,{size:"100",color:"error",children:o})}),(P||C)&&!o&&!!a&&(0,h.jsx)(u.xu,{flex:"grow","data-test-id":"text-area-warning",children:(0,h.jsx)(u.xv,{size:"100",color:"subtle",children:a})}),(v||C)&&!o&&!a&&(0,h.jsx)(u.xu,{flex:"grow","data-test-id":"text-area-helper",children:(0,h.jsx)(u.xv,{size:"100",color:"subtle",children:c})}),C&&null!=m&&(0,h.jsx)(u.xu,{flex:"none",children:(0,h.jsx)(u.xv,{size:"100",color:o?"error":"subtle",children:m-w.length})})]})})]})]})}}function m(e){return(0,h.jsx)(g,{...e,requestContext:(0,c.B)(),viewer:(0,l.Z)(),orbacActingAs:(0,a.Z)()})}p(g,"defaultProps",{italic:!1,muted:!1,bold:!1,disabled:!1,size:"md",wrap:!0,hideScrollbars:!1,shouldFocusOnRender:!1,orbacActingAs:{}})},415480:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(755742),s=i(898781),r=i(780280),a=i(883119),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.Component{constructor(e){var t;super(e),d(this,"state",{currentValue:this.props.value,hovered:!1}),d(this,"addStep",(e=>{if(e&&"keyup"===e.type&&e.charCode!==o.Z.SPACE&&e.charCode!==o.Z.ENTER)return;const{maxValue:t,onChange:i,value:n,step:s=0}=this.props,r=this._roundToStepDecimalDigits(Math.min(t,n+s));i(r),this.setState({currentValue:r})})),d(this,"minusStep",(e=>{if(e&&"keyup"===e.type&&e.charCode!==o.Z.SPACE&&e.charCode!==o.Z.ENTER)return;const{minValue:t,onChange:i,value:n,step:s=0}=this.props,r=this._roundToStepDecimalDigits(Math.max(t,n-s));i(r),this.setState({currentValue:r})})),d(this,"onChange",(e=>{const t=Number(e.target.value);this.setState({currentValue:t})})),d(this,"onKeyUp",(e=>{const{onChange:t}=this.props,{currentValue:i}=this.state;e&&[o.Z.ENTER,o.Z.UP,o.Z.DOWN].includes(e.keyCode)&&t(Number(i))})),d(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),d(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),d(this,"onBlur",(()=>{const{minValue:e,maxValue:t,onChange:i,value:n}=this.props,o=parseFloat(this.state.currentValue),s=isNaN(o)?n:o,r=this._roundToStepDecimalDigits(Math.min(Math.max(s,e),t));i(r),this.setState({currentValue:r})}));const i=(null!==(t=e.step)&&void 0!==t?t:0).toString().split(".");this._shiftBy=i[1]?10**i[1].length:1}componentDidUpdate(e){e.textBlockId!==this.props.textBlockId&&this.setState({currentValue:this.props.value})}_roundToStepDecimalDigits(e){return Math.round(e*this._shiftBy)/this._shiftBy}render(){const{disableOnBlur:e,iconName:t,id:i,requestContext:n,useLegoStyle:o}=this.props,{currentValue:s,hovered:r}=this.state,{isRTL:d}=n,c=[{iconName:"arrow-up",accessibilityLabel:this.props.i18n.bt("Aumenta del passo specificato, ad esempio 1 o 0,1", "Increase by the step specified, for example 1 or 0.1", " - ", undefined, true),onClick:this.addStep},{iconName:"arrow-down",accessibilityLabel:this.props.i18n.bt("Diminuisci del passo specificato, ad esempio 1 o 0,1", "Decrease by the step specified, for example 1 or 0.1", " - ", undefined, true),onClick:this.minusStep}],u={input:{border:"solid 2px #efefef",borderRadius:o?16:8,boxSizing:"border-box",fontSize:"16px",outline:"none",padding:"10px 16px",width:"100%",WebkitAppearance:"textfield",MozAppearance:"textfield"},buttonContainer:{__style:{borderRadius:d?o?"14px 0px 0px 14px":"6px 0px 0px 6px":o?"0px 14px 14px 0px":"0px 6px 6px 0px",left:d?"2px":"auto",right:d?"auto":"2px"}},button:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"50%",cursor:"pointer",userSelect:"none",outline:"none"}};return(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:40,width:"100%",children:(0,l.jsxs)(a.xu,{display:"flex",position:"relative",justifyContent:"center",alignItems:"center",column:12,height:"100%",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,rounding:2,children:[(0,l.jsx)("input",{autoComplete:"off","data-test-id":i,id:i,onBlur:e?void 0:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,size:"20",style:u.input,type:"number",value:s}),r?(0,l.jsx)(a.xu,{position:"absolute",display:"flex",direction:"column",justifyContent:"center",alignItems:"center",color:"secondary",width:28,height:"100%",overflow:"hidden",dangerouslySetInlineStyle:u.buttonContainer,children:c.map((e=>(0,l.jsx)("div",{"data-test-id":e.iconName,onKeyUp:e.onClick,onClick:e.onClick,role:"button",tabIndex:"0",style:u.button,children:(0,l.jsx)(a.JO,{icon:e.iconName,accessibilityLabel:e.accessibilityLabel,size:8,color:"default"})},e.iconName)))}):(0,l.jsx)(a.xu,{position:"absolute",right:!d,left:d,marginEnd:3,children:(0,l.jsx)(a.JO,{icon:t,accessibilityLabel:t,size:16})})]})})}}function u(e){const t=(0,s.ZP)();return(0,l.jsx)(c,{...e,i18n:t,requestContext:(0,r.B)()})}d(c,"defaultProps",{step:1})},783879:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({fillColor:e="rgba(0, 0, 0, 0.06)",size:t=8}){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",style:{display:"flex"},preserveAspectRatio:"none",children:[(0,n.jsxs)("pattern",{id:"pattern",x:0,y:0,width:2*t,height:2*t,patternUnits:"userSpaceOnUse",children:[(0,n.jsx)("rect",{fill:e,x:0,width:t,height:t,y:0}),(0,n.jsx)("rect",{fill:e,x:t,width:t,height:t,y:t})]}),(0,n.jsx)("rect",{fill:"url(#pattern)",x:0,y:0,width:"100%",height:"100%"})]})}},815542:(e,t,i)=>{i.d(t,{kw:()=>x,ZP:()=>v});var n=i(667294),o=i(783879),s=i(755742),r=i(883119),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.Component{constructor(...e){super(...e),l(this,"handleClick",(()=>{const{color:e,onClick:t}=this.props;t({value:e})})),l(this,"handleKeyPress",(e=>{const{onClick:t}=this.props;!t||e.charCode!==s.Z.SPACE&&e.charCode!==s.Z.ENTER||(e.preventDefault(),this.handleClick())}))}render(){const{size:e,color:t,isSelected:i,dataTestId:n}=this.props;return(0,a.jsx)(r.iP,{rounding:"circle",onTap:this.handleClick,children:(0,a.jsx)(r.xu,{"data-test-id":n,role:"button",height:e,onKeyPress:this.handleKeyPress,overflow:"hidden",rounding:"circle",width:e,dangerouslySetInlineStyle:{__style:{boxSizing:"border-box",cursor:"pointer",border:"solid 2px #F0F0F0",backgroundColor:""===t?void 0:t,boxShadow:i?"0 0 0 2px #f35e5f":"none",outline:"none"}},tabIndex:0,children:""===t&&(0,a.jsx)(o.Z,{size:6})})})}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u={input:{minWidth:0,flex:1,fontSize:"16px",color:"#333",border:"0px",outline:"none",boxSizing:"border-box",padding:0}};class h extends n.Component{constructor(...e){super(...e),c(this,"state",{color:this.props.color}),c(this,"isValidHex",(e=>!!e&&/^#([0-9a-f]{6})$/i.test(e))),c(this,"startsWithValidHex",(e=>!!e&&/^#([0-9a-f]{0,6})$/i.test(e))),c(this,"handleInputChange",(e=>{const{onChange:t}=this.props,i="#"+e.target.value.toUpperCase();this.startsWithValidHex(i)&&(this.setState({color:i}),this.isValidHex(i)&&t(i))}))}render(){const{id:e,width:t,height:i,color:n}=this.props,{color:o}=this.state,s=this.input===document.activeElement?o:n.toUpperCase();return(0,a.jsxs)(r.xu,{width:t,height:i,paddingX:2,rounding:2,display:"flex",alignItems:"center",borderStyle:"lg",children:[(0,a.jsx)(r.xv,{color:"subtle",children:"#"}),(0,a.jsx)("input",{id:e,ref:e=>this.input=e,style:u.input,value:s.replace("#",""),onChange:this.handleInputChange})]})}}const p=h;var _=i(407043),g=i(898781);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const f=["#ffffff","#f15758","#e60023","#e37325","#f8b917","#0ba573","#096a56","#558dca","#0f4d8f","#7c499d","#73295E","#843922","#555555","#000000"],x=["#FFFFFF","#FCE2CF","#F7F2BB","#D8F0A8","#BEF4EE","#DCD4F7","#F9B8F2","#F65E55","#F69855","#F6E955","#79DD3C","#25E4F4","#AA6AFB","#F655C9","#C20000","#B85C00","#807500","#02882A","#0045CC","#8000BD","#97026D","#5E031A","#573700","#363F03","#01564C","#00205C","#370052","#111111"],b={container:{__style:{boxShadow:"0 0 0 2px #efefef inset"}}};class y extends n.Component{constructor(...e){super(...e),m(this,"state",{isOpen:!1}),m(this,"setAnchorRef",(e=>{this.anchor=e})),m(this,"handleClick",(()=>{this.setState((e=>({isOpen:!e.isOpen})))})),m(this,"handleDismiss",(()=>{this.setState({isOpen:!1})})),m(this,"onNoColorFillChange",(({checked:e})=>{this.props.onSelectColor({value:e?"":"#ffffff"}),this.props.logContextEvent({event_type:101,component:13780,element:12165,aux_data:{value:e}})})),m(this,"onColorClick",(({value:e})=>{this.props.onSelectColor({value:e}),this.props.logContextEvent({event_type:101,component:13780,element:12166,aux_data:{value:e}})})),m(this,"onHexColorChange",(e=>{this.props.onSelectColor({value:e}),this.props.logContextEvent({event_type:7472,component:13780,element:12167,aux_data:{value:e}})}))}renderTransparencyControl(){const{showTransparencyControl:e,transparencyIndex:t,onSelectTransparency:i}=this.props;if(!e||void 0===t||!i)return null;const n=this.props.i18n.bt("Opacit piena", "Full opacity", "Adjust the transparency to opaque,", undefined, true),o=this.props.i18n.bt("Semitrasparente", "Semi-transparent", "Adjust the transparency to 75%.", undefined, true),s=[(0,a.jsx)(r.xu,{"data-group-id":"pinbuilder-editor-logo-transparency-button","data-test-id":"pinbuilder-editor-fill-opaque-button",children:(0,a.jsx)(r.u,{text:n,children:(0,a.jsx)(r.JO,{accessibilityLabel:n,icon:"fill-opaque",color:0===t?"default":"subtle",size:20})})}),(0,a.jsx)(r.xu,{"data-group-id":"pinbuilder-editor-logo-transparency-button","data-test-id":"pinbuilder-editor-fill-transparent-button",children:(0,a.jsx)(r.u,{text:o,children:(0,a.jsx)(r.JO,{accessibilityLabel:o,icon:"fill-transparent",color:1===t?"default":"subtle",size:20})})})];return(0,a.jsx)(r.xu,{marginStart:4,children:(0,a.jsx)(r.sY,{selectedItemIndex:t,onChange:i,items:s})})}renderFlyout(){const{showNoFillControl:e,showTransparencyControl:t,colorSelected:i,imagePalette:o,showExpanded:s}=this.props,l=s?x:f;return(0,a.jsx)(r.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.handleDismiss,size:"md",showCaret:!0,children:(0,a.jsxs)(r.xu,{direction:"column",display:"flex",justifyContent:"center",paddingY:4,width:"100%",children:[e&&(0,a.jsxs)(r.xu,{marginBottom:4,children:[(0,a.jsxs)(r.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,paddingX:4,children:[(0,a.jsx)(r.XZ,{checked:!i,id:"no-color-fill",name:"no-color-fill",onChange:this.onNoColorFillChange,size:"sm"}),(0,a.jsx)(r.__,{htmlFor:"no-color-fill",children:(0,a.jsx)(r.xu,{paddingX:2,children:(0,a.jsx)(r.xv,{size:"200",children:this.props.i18n.bt("Nessun riempimento dello sfondo", "No background fill", "Don't fill any background color", undefined, true)})})})]}),(0,a.jsx)(r.iz,{})]}),(0,a.jsxs)(r.xu,{paddingX:4,children:[o&&o.length>0&&(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(r.xu,{paddingX:1,children:(0,a.jsx)(r.xv,{size:"100",children:this.props.i18n.bt("I colori delle tue immagini", "Your image colors", "Colors from the image being added", undefined, true)})}),(0,a.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:o.map(((e,t)=>(0,a.jsx)(r.xu,{"data-group-id":"pinbuilder-editor-palette-color-picker-button",padding:1,children:(0,a.jsx)(d,{color:e,dataTestId:`pinbuilder-editor-palette-${t}-color-picker-button`,isSelected:i.toLowerCase()===e,onClick:this.onColorClick,size:28})},e)))}),(0,a.jsx)(r.xu,{paddingX:1,marginTop:2,children:(0,a.jsx)(r.xv,{size:"100",children:this.props.i18n.bt("Altre opzioni", "More options", "Default colors", undefined, true)})})]}),(0,a.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",wrap:!0,children:l.map(((e,t)=>(0,a.jsx)(r.xu,{"data-group-id":"pinbuilder-editor-color-picker-button",padding:1,children:(0,a.jsx)(d,{color:e,dataTestId:`pinbuilder-editor-${t}-color-picker-button`,isSelected:i.toLowerCase()===e,onClick:this.onColorClick,size:28})},e)))}),(0,a.jsxs)(r.xu,{display:"flex",alignItems:"center",marginTop:3,children:[(0,a.jsx)(p,{onChange:this.onHexColorChange,color:i,width:94,height:40}),t&&this.renderTransparencyControl()]})]})]})})}render(){const{id:e,width:t,showTransparencyControl:i,transparencyIndex:n,colorSelected:s}=this.props,{isOpen:l}=this.state,d={__style:{border:s&&"#ffffff"!==s.toLowerCase()?"none":"solid 2px #efefef",borderRadius:"16px 0 0 16px",background:s||"linear-gradient(to bottom right, white 48.5%, #e600234d 48.5%, #e600234d 51.5%, white 51.5%)"}};return(0,a.jsxs)(r.xu,{"data-test-id":e,width:t,children:[(0,a.jsx)(r.iP,{fullHeight:!0,onTap:this.handleClick,rounding:4,children:(0,a.jsxs)(r.xu,{rounding:4,overflow:"hidden",height:40,display:"flex",justifyContent:"end",color:"secondary",dangerouslySetInlineStyle:b.container,ref:this.setAnchorRef,children:[(0,a.jsx)(r.xu,{flex:"grow",dangerouslySetInlineStyle:d,children:s&&i&&1===n&&(0,a.jsx)(o.Z,{})}),(0,a.jsx)(r.xu,{alignItems:"center",color:"secondary","data-test-id":"storyboard-editor-details-layout-color-picker-icon",display:"flex",flex:"none",justifyContent:"center",width:28,children:(0,a.jsx)(r.JO,{accessibilityLabel:this.props.i18n.bt("Apri menu a discesa dello strumento di selezione del colore", "Open dropdown color picker", "Open the color picker in a dropdown flyout", undefined, true),color:"default",icon:"arrow-down",size:8})})]})}),l&&this.renderFlyout()]})}}function v(e){const{logContextEvent:t}=(0,_.v)(),i=(0,g.ZP)();return(0,a.jsx)(y,{...e,i18n:i,logContextEvent:t})}m(y,"defaultProps",{showNoFillControl:!1,showTransparencyControl:!1,width:84})},456463:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){return e.reduce(((e,t)=>[...e,{selector:t.selector,content:(0,o.jsxs)(n.xu,{"data-test-id":`${t.id||""}`,paddingY:2,children:[t.heading&&(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.X6,{size:"400",children:t.heading})}),(0,o.jsx)(n.xu,{paddingY:2,children:(0,o.jsx)(n.xv,{children:t.description})})]}),id:t.id,padding:t.padding,onNext:t.onNext}]),[])}},451105:(e,t,i)=>{i.d(t,{GB:()=>h,ZP:()=>u,q0:()=>c});var n=i(540794),o=i(41703),s=i(966113),r=i(349700),a=i(299295),l=i(883119),d=i(785893);const c=e=>e.bt("URL non valido.", "Not a valid URL.", "storyPinBuilder.errorMessaging.message", undefined, true);function u({dispatchId:e,errorId:t,i18n:i,ideaPinRenamingEnabled:n}){const u=(0,o.Z)(t,i,e);if("GENERAL_ERROR"!==u.id)return u;switch(t){case"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i.bt("Ops! Questa descrizione  troppo lunga. Prova ad accorciarla.", "Ooops! This description is getting long. Try trimming it down.", "storyPinBuilder.errorMessaging.message", undefined, true)};case"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",type:"error",message:i.bt("Ops! Troppe menzioni di utenti. Puoi menzionare al massimo 5 utenti.", "Ooops! Too many user mentions. Try keeping it to 5 max.", "pinBuilder.errorMessaging.descriptionMentionLimit", undefined, true)};case"TITLE_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"TITLE_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i.bt("Ops! Questo titolo  troppo lungo. Prova ad accorciarlo.", "Ooops! This title is getting long. Try trimming it down.", "storyPinBuilder.errorMessaging.message", undefined, true)};case"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO":return{dispatchId:e,id:"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO",type:"error",message:i.bt("L'immagine non ha il formato consigliato.", "This image does not have the recommended aspect ratio.", "storyPinBuilder.errorMessaging.message", undefined, true)};case"TAG_SAME_PRODUCT_LINK":return{dispatchId:e,id:"TAG_SAME_PRODUCT_LINK",type:"error",message:i.bt("Non puoi taggare la pagina due volte.", "You can't tag from the same page twice.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TAG_OVER_MAX_PRODUCTS_LIMIT":return{dispatchId:e,id:"TAG_OVER_MAX_PRODUCTS_LIMIT",type:"error",message:i.bt("Hai raggiunto il numero massimo di prodotti per un tag.", "You've reached the maximum number of products for a tag.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"BOARD_MISSING":return{dispatchId:e,id:"BOARD_MISSING",type:"error",message:i.bt(" necessaria una bacheca per poter creare un Pin.", "A board is required to create a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DATE_IN_PAST":return{dispatchId:e,id:"DATE_IN_PAST",type:"error",message:i.bt("Per programmare un Pin  necessario inserire una data futura.", "A future date is required to schedule a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DATE_TOO_FAR_IN_FUTURE":return{dispatchId:e,id:"DATE_TOO_FAR_IN_FUTURE",type:"error",message:i.bt("Assicurati di programmare la pubblicazione di un Pin entro un massimo di 14 giorni.", "Make sure you schedule a Pin less than 14 days in the future.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DATE_TOO_FAR_IN_FUTURE_EXTENDED":return{dispatchId:e,id:"DATE_TOO_FAR_IN_FUTURE_EXTENDED",type:"error",message:i.bt("Assicurati di programmare il Pin entro al massimo 30 giorni.", "Make sure you schedule a Pin less than 30 days in the future.", "storyPinBuilder.errorMessaging.30DayMessage", undefined, true),blocking:!0};case"DATE_MISSING":return{dispatchId:e,id:"DATE_MISSING",type:"error",message:i.bt("Per programmare un Pin  necessario inserire una data.", "A date is required to schedule a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DESCRIPTION_INVALID":return{dispatchId:e,id:"DESCRIPTION_INVALID",type:"error",message:i.bt("La descrizione non  valida.", "The description is invalid.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"MEDIA_MISSING":return{dispatchId:e,id:"MEDIA_MISSING",type:"error",message:i.bt(" necessaria un'immagine per poter creare un Pin.", "An image is required to create a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TAG_INVALID":return{dispatchId:e,id:"TAG_INVALID",type:"error",message:i.bt("Puoi taggare solo le immagini che conducono al tuo sito web verificato.", "You can only tag images linking to your claimed website.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TIME_MISSING":return{dispatchId:e,id:"TIME_MISSING",type:"error",message:i.bt("Per programmare un Pin  necessario inserire un orario.", "A time is required to schedule a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TITLE_INVALID":return{dispatchId:e,id:"TITLE_INVALID",type:"error",message:i.bt("Il titolo non  valido.", "The title is invalid.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_INVALID":return{dispatchId:e,id:"URL_INVALID",type:"error",message:c(i),blocking:!0};case"URL_MISSING":return{dispatchId:e,id:"URL_MISSING",type:"error",message:i.bt("L'URL  obbligatorio.", "URL is required.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_CONTAINS_PORN_DOMAIN":return{dispatchId:e,id:"URL_CONTAINS_PORN_DOMAIN",type:"error",message:(0,r.nk)(i.bt("Alcune immagini di nudo sono accettabili su Pinterest, altre no. Accertati di aver compreso le {{ policy_link }}", "Some nudity is okay for Pinterest, some isn't. Make sure you understand {{ policy_link }}", "storyPinBuilder.errorMessaging.message", undefined, true),{policy_link:(0,d.jsx)(l.rU,{href:s.Ms,display:"inlineBlock",target:"blank",underline:"hover",children:(0,d.jsx)(l.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:i.bt("le nostre norme", "our policies", "Link to policy page", undefined, true)})},0)}),blocking:!0};case"CAROUSEL_DIFFERENT_RATIOS":return{dispatchId:e,id:"CAROUSEL_DIFFERENT_RATIOS",type:"error",message:i.bt("Le immagini carosello devono avere la stessa altezza e la stessa larghezza", "Carousel images must have the same height and width", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"CAROUSEL_INVALID_FORMAT":return{dispatchId:e,id:"CAROUSEL_INVALID_FORMAT",type:"error",message:i.bt("I Pin carosello possono contenere soltanto immagini", "Carousels can only contain images", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_IS_REDIRECT":return{dispatchId:e,id:"URL_IS_REDIRECT",type:"error",message:i.bt("L'URL  un reindirizzamento. Inserisci un URL senza reindirizzamento.", "URL is a redirect. Please enter a URL without a redirect.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_UNREACHABLE":return{dispatchId:e,id:"URL_UNREACHABLE",type:"error",message:i.bt("L'URL  irraggiungibile. Verifica che sia corretto.", "URL is unreachable. Please check that it is correct.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO",type:"error",message:i.bt("Modifica l'immagine nella pagina di copertina per avere proporzioni di 9:16", "Edit the image on the cover page to have a 9:16 ratio", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_COVER_PAGE_IMAGE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_IMAGE_MISSING",type:"error",message:n?i.bt("Aggiungi un'immagine per la pagina di copertina del tuo Pin", "Please provide an image for the cover page of your Pin", "storyPinBuilder.errorMessaging.storypinCoverPageImageMissing", undefined, true):i.bt("Aggiungi un'immagine per la pagina di copertina del tuo Pin Idea", "Please provide an image for the cover page of your Idea Pin", "storyPinBuilder.errorMessaging.message", undefined, true)};case"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING",type:"error",message:n?i.bt("Impossibile salvare il Pin senza il set di firme sulla copertina", "Cannot save Pin without signature set on cover", "storyPinBuilder.errorMessaging.storyPinCoverPageSignatureMissing", undefined, true):i.bt("Impossibile salvare il Pin Idea senza l'immagine della copertina", "Cannot save Idea Pin without signature set on cover", "storyPinBuilder.errorMessaging.message", undefined, true)};case"STORY_PIN_COVER_PAGE_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_TITLE_MISSING",type:"error",message:n?i.bt("Inserisci un titolo per il Pin prima di pubblicarlo", "Give your Pin a title before you publish", "storyPinBuilder.errorMessaging.storyPinCoverPageTittleMissing", undefined, true):i.bt("Inserisci un titolo per il Pin Idea prima di pubblicarlo", "Give your Idea Pin a title before you publish", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_MEDIA_SIGNATURES_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_MEDIA_SIGNATURES_MISSING",type:"error",message:n?i.bt("Impossibile salvare il Pin Idea senza le immagini su tutti i blocchi/elementi multimediali", "Cannot save Pin without signatures set on all media blocks/items", "storyPinBuilder.errorMessaging.storyPinMediaSignatureMissing", undefined, true):i.bt("Impossibile salvare il Pin Idea senza le immagini su tutti i blocchi/elementi multimediali", "Cannot save Idea Pin without signatures set on all media blocks/items", "storyPinBuilder.errorMessaging.message", undefined, true)};case"STORY_PIN_NOT_ENOUGH_PAGES":return{dispatchId:e,id:"STORY_PIN_NOT_ENOUGH_PAGES",type:"error",message:n?i.bt("Per pubblicare un Pin, crea almeno 2 pagine", "Create at least 2 pages to publish a Pin", "storyPinBuilder.errorMessaging.storyPinNotEnoughPages", undefined, true):i.bt("Per pubblicare un Pin Idea, crea almeno 2 pagine", "Create at least 2 pages to publish an Idea Pin", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_TOO_MANY_PAGES":return{dispatchId:e,id:"STORY_PIN_TOO_MANY_PAGES",type:"error",message:(0,r.nk)(i.nbt(["Non pu essere aggiunta pi di {{max_pages}} pagina", "Non possono essere aggiunte pi di {{max_pages}} pagine"], a.yX, "storyPinBuilder.errorMessaging.message", true),{max_pages:a.yX}).join(""),blocking:!0};case"STORY_PIN_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_TITLE_MISSING",type:"error",message:n?i.bt("Inserisci un titolo per il Pin prima di pubblicarlo", "Give your Pin a title before you publish", "storyPinBuilder.errorMessaging.storyPinTitleMissing", undefined, true):i.bt("Inserisci un titolo per il Pin Idea prima di pubblicarlo", "Give your Idea Pin a title before you publish", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":{const t=Math.floor(a.W_);return{dispatchId:e,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,r.nk)(i.nbt(["Questo video  troppo breve per essere caricato. I video non possono essere pi brevi di {{minVideoLengthSeconds}} secondo.", "Questo video  troppo breve per essere caricato. I video non possono essere pi brevi di {{minVideoLengthSeconds}} secondi."], t, "storyPinBuilder.errorMessaging.message", true),{minVideoLengthSeconds:t}).join(""),blocking:!0}}case"STORY_PIN_VIDEO_ON_COVER":return{dispatchId:e,id:"STORY_PIN_VIDEO_ON_COVER",type:"error",message:i.bt("La pagina di copertina non pu contenere video", "The cover page cannot contain a video", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":{const t=a.Lr/1024/1024;return{dispatchId:e,id:"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,r.nk)(i.nbt(["Questo video  troppo grande per essere caricato. I video non possono superare {{maxVideoFileSize}} MB.", "Questo video  troppo grande per essere caricato. I video non possono superare {{maxVideoFileSize}} MB."], t, "storyPinBuilder.errorMessaging.message", true),{maxVideoFileSize:t}).join(""),blocking:!0}}case"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i.bt("Ops! Questo testo alternativo  troppo lungo. Prova ad accorciarlo.", "Ooops! This alt text is getting long. Try trimming it down.", "pinBuilder.errorMessaging.message", undefined, true)};default:return{dispatchId:e,id:"GENERAL_ERROR",type:"error",message:i.bt("Spiacenti, si  verificato un errore. Riprova.", "Hmm, something went wrong. Please try again.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0}}}function h(e,t,i){i({event_type:7564,view_type:212,component:(0,n.Z)().includes("create")?13762:13308,aux_data:{error_message:t,error_id:e}})}},596284:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(702664),s=i(451105),r=i(665866),a=i(841064),l=i(898781),d=i(237056),c=i(717615),u=i(19121),h=i(299295),p=i(231947),_=i(773285),g=i(305782),m=i(883119),f=i(785893);function x({pinDraftId:e}){const t=(0,l.ZP)(),i=(0,d.Z)(),x=(0,u.Z)(),{checkExperiment:b}=(0,_.F)(),y=(0,c.Z)(),v=(0,p.nl)(x,y)&&"ad_creation"!==r.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,[P,w]=(0,n.useState)(!1),I=(0,o.useDispatch)(),A=(0,o.useSelector)((t=>{var i;return null===(i=t.pinbuilder.pinDrafts[e])||void 0===i?void 0:i.altText})),E=(0,o.useSelector)((t=>{var i;return null===(i=t.pinbuilder.pinDrafts[e])||void 0===i?void 0:i.altTextError}))||"",{anyEnabled:C}=b("aid_exp_error_handling_pin_builder");return(0,f.jsxs)(m.xu,{marginTop:C?0:2,children:[!P&&(0,f.jsx)(m.xu,{"data-test-id":"pin-draft-alt-text-button",flex:"grow",children:(0,f.jsx)(m.zx,{onClick:()=>w(!0),text:t.bt("Aggiungi testo alternativo", "Add alt text", "pinbuilder.alt_text.button", undefined, true),size:C?"lg":"md"})}),P&&(0,f.jsxs)(m.xu,{children:[(0,f.jsx)(m.xu,{marginStart:1,marginBottom:1,children:v&&(0,f.jsx)(m.xv,{size:"100",color:"default",children:t.bt("Testo alternativo", "Alt text", "pinbuilder.altText.title", undefined, true)})}),(0,f.jsx)(a.Z,{height:v?"md":void 0,size:"sm",helperMessage:t.bt("Questo testo verr letto ad alta voce dagli screen reader", "This text will be read aloud by screen readers", "web.altText.helperMessage", undefined, true),id:`pin-draft-alttext-${e}`,maxLength:h.lx,onChange:({value:n})=>{I((0,g.DL)(e,n)),n&&n.length>h.lx&&I((0,g.KN)(e,(0,s.ZP)({errorId:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",i18n:t,ideaPinRenamingEnabled:i}).message)),E&&(!n||n.length<=h.lx)&&I((0,g.KN)(e,""))},onBlur:()=>{},placeholder:t.bt("Descrivi ci che le persone possono vedere nel Pin", "Explain what people can see in the Pin", "web.altText.placeholder", undefined, true),value:A||"",viewer:x,errorMessage:E,muted:!0,italic:!0,shouldFocusOnRender:!0})]})]})}},956069:(e,t,i)=>{i.d(t,{Py:()=>r,VX:()=>n,i9:()=>s,op:()=>a,tN:()=>o});const n=8,o=24,s=4,r=148,a=16},353428:(e,t,i)=>{function n(e){const t=e.split("/");return t[t.length-1].split(".")[0]}i.d(t,{Z:()=>n})},875108:(e,t,i)=>{function n({x:e,y:t}){return e>0&&e<=100&&t>0&&t<=100}i.d(t,{Z:()=>n})},940765:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(702664),o=i(794843),s=i(667294),r=i(941646),a=i(299295),l=i(407043),d=i(883119),c=i(785893);function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h={__style:{zIndex:a.v9}};class p extends s.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"buttonRef",(0,s.createRef)()),u(this,"handleShowFlyout",(()=>{this.setState({showFlyout:!0}),this.props.logContextEvent({event_type:101,component:13308,element:12123})})),u(this,"handleHideFlyout",(()=>{this.setState({showFlyout:!1})}))}render(){const{accessibilityLabel:e,icon:t,items:i,size:n}=this.props,{showFlyout:o}=this.state;return(0,c.jsxs)(d.xu,{position:"relative",dangerouslySetInlineStyle:o?h:void 0,children:[(0,c.jsx)(d.xu,{ref:this.buttonRef,children:(0,c.jsx)(d.hU,{accessibilityLabel:e,icon:t,onClick:this.handleShowFlyout,size:null!=n?n:"md",iconColor:"gray"})}),o&&(0,c.jsx)(d.Lt,{id:"icon-button-menu",anchor:this.buttonRef.current,idealDirection:"down",onDismiss:this.handleHideFlyout,children:i.map((({onClick:e,legend:t,dataTestId:i})=>(0,c.jsx)(d.Lt.Item,{onSelect:()=>{this.handleHideFlyout(),e()},option:{label:t,value:t},children:(0,c.jsx)(r.Z,{id:i,children:(0,c.jsx)(d.xv,{weight:"bold",children:t})})},`${t.toLocaleLowerCase()}`)))})]})}}function _(e){const{logContextEvent:t}=(0,l.v)();return(0,c.jsx)(p,{...e,logContextEvent:t})}var g=i(898781),m=i(19121),f=i(474394);const x=(e,t)=>{t({event_type:101,component:13308,element:12124,aux_data:{value:e}})};function b({pinDraftId:e}){const t=(0,g.ZP)(),{logContextEvent:i}=(0,l.v)(),s=(0,m.Z)(),r=s.isAuth&&s.isEmployee,a=(0,n.useDispatch)();return(0,c.jsx)(d.xu,{paddingX:3,"data-test-id":"pindraft-option-menu",children:(0,c.jsx)(_,{accessibilityLabel:t.bt("Opzioni", "Options", "Button to open options menu for this Pin", undefined, true),icon:"ellipsis",items:[{legend:t.bt("Elimina", "Delete", "Button to delete Pin draft", undefined, true),dataTestId:"delete-pin-draft",onClick:()=>{a((0,o.Z)({i18n:t,isEmployee:r,pinDraftId:e})),x("delete",i)}},{legend:t.bt("Duplica", "Duplicate", "Button to duplicate Pin draft to another", undefined, true),dataTestId:"duplicate-pin-draft",onClick:()=>{a((0,f.duplicatePinDraft)(e)),x("duplicate",i)}}]})})}},984268:(e,t,i)=>{i.d(t,{BE:()=>u,mt:()=>h,ir:()=>c,VX:()=>d,Bc:()=>l});const n=({url:e})=>{if(!e||0===e.length)return!1;const t=new RegExp("itunes\\.apple\\.com\\/(?:.*\\/)?app\\/(?:.*\\/)?id([0-9]+)"),i=new RegExp("play.google.com/store/apps/details");return t.test(e)||i.test(e)};var o=i(883561),s=i(566101),r=i(35495),a=i(623568);function l(e){if(e){if(e.carousel_data&&e.carousel_data.carousel_slots&&e.carousel_data.carousel_slots.length>1)return!1;if(e.videos&&(0,a.iR)(e.videos))return!1;if((0,r.nn)(e)||e.aggregated_pin_data&&e.aggregated_pin_data.is_shop_the_look)return!1;if(e.story_pin_data_id&&e.story_pin_data_id.length>0)return!1;const t=e.link?e.link.trim():"";if(!(t.length>0&&(0,s.Z)({url:t}))||t.length>0&&n({url:t}))return!1;if("pin"===e.type)return!0}return!1}function d(e){return!!(e&&l(e)&&(e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products.length>0&&e.rich_metadata.products[0].offer_summary&&e.rich_metadata.products[0].offer_summary.price||e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0&&e.rich_summary.products[0].offer_summary&&e.rich_summary.products[0].offer_summary.price))}function c(e,t){if(e){const i=t.toLowerCase();if(!t||t&&t.length<=3||e.title&&e.title.toLowerCase().includes(i)||e.grid_title&&e.grid_title.toLowerCase().includes(i)||e.closeup_description&&e.closeup_description.toLowerCase().includes(i)||e.description&&e.description.toLowerCase().includes(i))return!0}return!1}function u(e){if(!e)return"";const{grid_title:t,rich_summary:i,rich_metadata:n,title:s}=e,r=i&&"mobile application"!==i.type_name,a=s||t||r&&i.display_name||(null==n?void 0:n.title);return a?(0,o.ZP)(a.trim(),30):""}function h(e){var t,i,n,o,s,r;if(!e)return"";const{rich_summary:a,rich_metadata:l}=e,d=null==a||null===(t=a.products)||void 0===t||null===(i=t[0])||void 0===i||null===(n=i.offer_summary)||void 0===n?void 0:n.price,c=null==l||null===(o=l.products)||void 0===o||null===(s=o[0])||void 0===s||null===(r=s.offer_summary)||void 0===r?void 0:r.price;return d||c}},699109:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(265696),o=i(955625);function s(e,t,i){return(0,n.Z)().then((n=>{const s=e[0],{media:r}=t[s]||{},{width:a}=r||{},l=e.every((e=>{const{media:i}=t[e]||{};if(!i)return!0;const{width:n}=i||{};return n===a}))?a:o.IU,d=e.map((e=>{const o=new n(document.createElement("div")),{canvasJson:s,media:r}=t[e]||{};if(!r)return t[e];const a=()=>(o.setAspectRatio(i),{...t[e],canvasJson:o.toJSON(),media:{...r,...o.getCanvasOutput({width:l})}});return s?o.loadFromJSON(s).then(a):o.setImage(r.src).then(a)}));return Promise.all(d)}))}},801815:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(724565);function o(e,t){const{layout:i}=t||{},{sections:o}=i||{},s=o&&1===o.length?o[0]:{},{media:r}=s||{},{viewbox:a,angle:l,width:d,height:c}=r||{};let u={},h=!1;if(a){const t=Math.round(a.width*d),i=Math.round(a.height*c),o=Math.round(a.left*d-t/2),s=Math.round(a.top*c-i/2),r=l||0;u={origin_x:o,origin_y:s,width:t,height:i,rotation:r},h=o>Number.EPSILON||s>Number.EPSILON||1-a.width>Number.EPSILON||1-a.height>Number.EPSILON||0!==r;const p=e.duration?e.duration:0,_=e.trimmedStartTime?e.trimmedStartTime:0,g=e.trimmedEndTime?e.trimmedEndTime:p;return u={...u,time_start:(0,n.TA)(_),time_end:(0,n.TA)(g)},h=h||_>Number.EPSILON||p-g>.01,h?u:null}return null}},69183:(e,t,i)=>{i.d(t,{B:()=>s,v:()=>o});var n=i(172071);function o(e,t,i){return new Promise((o=>{const s=document.createElement("video");let r;const a=()=>{const e=s.seekable.length;e&&s.seekable.end(e-1)>=t&&(window.clearInterval(r),s.currentTime=t)};let l=0;const d=()=>{r=window.setInterval(a,50)};const c=()=>{s.removeEventListener("loadedmetadata",d);const{x:r,y:a,width:u,height:h}=i||{x:0,y:0,width:s.videoWidth,height:s.videoHeight},p=document.createElement("canvas");p.height=h,p.width=u;if(p.getContext("2d").drawImage(s,r,a,p.width,p.height,0,0,p.width,p.height),function(e){const{height:t,width:i}=e,n=e.getContext("2d");return new Uint32Array(n.getImageData(0,0,i,t).data.buffer).filter((e=>4294967295!==e)).length/(i*t)<.005}(p)&&l<5)return l+=1,s.addEventListener("loadedmetadata",d),s.src=e.src,void s.load();if(l>0){const{duration:i,id:o,name:s,signature:r,size:a}=e;n.Z.increment("storypin.publish.thumbnail.isblank",1,{duration:i,id:o,name:s,signature:r,size:a,time:t,retrySeekNumber:l})}s.removeEventListener("seeked",c),s.remove(),o(p.toDataURL("image/jpeg",1))};s.addEventListener("loadedmetadata",d),s.addEventListener("seeked",c),s.src=e.src}))}function s(e,t){return new Promise((i=>{const n=document.createElement("img");n.onload=function(){const{x:e,y:o,width:s,height:r}=t||{x:0,y:0,width:n.width,height:n.height},a=document.createElement("canvas");a.height=r,a.width=s;a.getContext("2d").drawImage(n,e,o,a.width,a.height,0,0,a.width,a.height),i(a.toDataURL("image/jpeg",1))},n.src=e}))}},623320:(e,t,i)=>{i.d(t,{Ch:()=>v,Fv:()=>p,GV:()=>x,Ix:()=>m,Mi:()=>c,Yv:()=>f,f:()=>u,iX:()=>_,wL:()=>y,xc:()=>b,zp:()=>h});var n=i(567831),o=i(893446),s=i(214494),r=i(66699),a=i(840839),l=i(628551),d=i(471155);function c(e,t=512){const i=e.split(";"),n=i[0].split(":")[1],o=i[1].split(",")[1],s=atob(o),r=[];for(let a=0;a<s.length;a+=t){const e=s.slice(a,a+t),i=new Array(e.length);for(let t=0;t<e.length;t+=1)i[t]=e.charCodeAt(t);const n=new Uint8Array(i);r.push(n)}return new Blob(r,{type:n})}const u=e=>{const[t,i,n]=[e.substring(0,2),e.substring(2,4),e.substring(4,6)];return e?`https://i.pinimg.com/736x/${t}/${i}/${n}/${e}.jpg`:""};function h(e){return new Promise((t=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=()=>{if(200===i.status){const e=i.response,n=new FileReader;n.onloadend=()=>{const e="string"==typeof n.result?n.result:"";t(e)},n.readAsDataURL(e)}},i.send()}))}function p(e){return s.Z.create("VisualLinkBoardResource",e?{orbacSubjectId:e}:{}).callCreate().then((e=>e.resource_response.data))}function _(e){return s.Z.create("PinResource",e).callCreate().then((e=>e.resource_response.data))}function g(e,t){return new Promise(((i,o)=>{const s=new FormData;s.append("img",e);const a=new XMLHttpRequest;a.open("POST",(0,n.Z)("/upload-image/"),!0),a.setRequestHeader("x-CSRFToken",(0,l.getCsrfToken)()),a.onload=()=>{if(200===a.status){const e=JSON.parse(a.responseText);e.success?i(e):o(new Error(e.error))}else 413===a.status?o(new Error(t.bt("Ops! Si  verificato un errore durante il caricamento dell'immagine. Prova a caricare un'immagine pi piccola.", "Oops! Something went wrong while uploading your image. Try uploading a smaller image.", "pinBuilderResource.uploadImage.error.smallerImage", undefined, true))):o(new Error((0,r.Z)(t.bt("Ops! Si  verificato un errore durante il caricamento dell'immagine (Codice stato {{statusCode}})", "Oops! Something went wrong while uploading your image (Status code {{statusCode}})", "pinBuilderResource.uploadImage.genericError", undefined, true),{statusCode:a.status})))},a.send(s)}))}function m(e,t){return"string"==typeof e?e.startsWith("data")?g(c(e),t):h(e).then((e=>g(c(e),t))):g(e,t)}function f(e,t,i,n){return new Promise(((r,a)=>{s.Z.create("VIPEditResource",{type:t,video_signature:e,...i}).callCreate().then((e=>{const{onStartEdits:t,onFinishEdits:i}=n||{},{tracking_id:s}=e.resource_response.data,l=new Date;t&&t(s),(0,o.Z)(s,{delay:8e3,onError:e=>a(e),onProcessingStarted:e=>r({signature:e,uploadId:s}),onSuccess:e=>{const t=(new Date-l)/1e3;i&&i(s,t,e),r({signature:e,uploadId:s})},resolvedAfterProcessingStarted:!0})})).catch((()=>{a()}))}))}function x(e,t,i){return"string"==typeof e?e.startsWith("data")?(0,d.Z)(c(e),t,!1,i):h(e).then((e=>(0,d.Z)(c(e),t,!1,i))):(0,d.Z)(e,t,!1,i)}function b(e,t,i,n){return x(e,3===n?"ads-builder-pinimage":"pinimage",{onFailureUpload:({fileSizeBytes:e,uploadId:n})=>function({fileSizeBytes:e,pinDraftId:t,uploadId:i},n){(0,a.Z)(n,{event_type:8785,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:i,pin_draft_id:t}})}({pinDraftId:t,uploadId:n,fileSizeBytes:e},i),onFinishProcessing:({fileSizeBytes:e,processingTime:n,signature:o,uploadId:s,uploadTime:r})=>function({fileSizeBytes:e,imageSignature:t,pinDraftId:i,uploadId:n,uploadTimeSec:o},s){(0,a.Z)(s,{event_type:8781,aux_data:{file_size_mb:e/Math.pow(1024,2),image_signature:t,media_upload_id:n,pin_draft_id:i,upload_time:o}})}({fileSizeBytes:e,imageSignature:o,pinDraftId:t,uploadId:s,uploadTimeSec:n+r},i),onStartUpload:({fileSizeBytes:e,uploadId:n})=>function({fileSizeBytes:e,pinDraftId:t,uploadId:i},n){(0,a.Z)(n,{event_type:8780,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:i,pin_draft_id:t}})}({pinDraftId:t,uploadId:n,fileSizeBytes:e},i)})}function y(e,t,i,n,o){return function(e,t,i,n){return b(e,t,i,n).then((({signature:e})=>{if(!e)throw new Error;return{image_url:u(e),success:!0}}))}(e,t,i,o).then((e=>new Promise(((t,i)=>{const o=e.image_url;s.Z.create("ScheduledPinResource",{image_url:o,method:"upload",...n?{orbac_subject_id:n}:{}}).callCreate().then((e=>{const{data:{image_signature:i}}=e.resource_response;t(i)})).catch((()=>{i(new Error("Cannot schedule the Pin."))}))})))).catch((e=>{throw e}))}function v(e,t,i){const n=e.filter((e=>!!e.media));return Promise.all(n.map((e=>{var n,o;return b(null!==(n=null===(o=e.media)||void 0===o?void 0:o.src)&&void 0!==n?n:"",t,i).then((({signature:e,uploadId:t})=>{if(!e)throw new Error;return{signature:e,uploadId:t}}))}))).then((e=>{var t,i,o,s;const r=n.findIndex(((t,i)=>!!e[i].signature)),{description:a}=null!==(t=n.find((e=>!!e.description)))&&void 0!==t?t:{},{link:l}=null!==(i=n.find((e=>!!e.link)))&&void 0!==i?i:{},{title:d}=null!==(o=n.find((e=>!!e.title)))&&void 0!==o?o:{};return{metadata:{description:null!=a?a:"",title:null!=d?d:"",link:null!=l?l:"",image_signature:null!==(s=e[r].signature)&&void 0!==s?s:""},slots:n.map(((t,i)=>{const{description:n,title:o,link:s}=t,{signature:r,uploadId:a}=e[i];return{title:o,description:n,link:s,image_signature:r,tracking_id:a}}))}})).catch((e=>{throw e}))}},346360:(e,t,i)=>{i.d(t,{DY:()=>w,J6:()=>B,Oc:()=>P,f5:()=>N,qi:()=>v,x:()=>M});var n=i(969759),o=i(886858),s=i(214494),r=i(665866),a=i(414327),l=i(122668),d=i(134906),c=i(502890),u=i(172045),h=i(451105),p=i(490072),_=i(299295);const g=e=>e.reduce(((e,t)=>e.concat(t)),[]);function m(e,t){const{pinItemIds:i,pinItemIndex:n}=e.pinbuilder.pinDrafts[t];return i[n]}function f(e,t){const{pinbuilder:{pinItems:i}}=e;return i[m(e,t)]}function x(e,t,i){if(e){const n=Object.keys(e),o=[];return n.forEach((n=>{const s=Object.keys(e[n]),r=e=>(0,h.ZP)({errorId:e,i18n:t,ideaPinRenamingEnabled:i,dispatchId:n});s.length>0&&s.forEach((e=>{switch(parseInt(e,10)){case 1:o.push(r("URL_UNREACHABLE"));break;case 2:o.push(r("URL_CONTAINS_PORN_DOMAIN"));break;case 304:o.push(r("IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO"));break;case 301:o.push(r("IMAGE_UNDER_MIN_DIMENSIONS"));break;case 9:o.push(r("LINK_LOADS_SLOWLY"));break;case 10:o.push(r("LINK_IS_AGGREGATOR"));break;case 305:o.push(r("IMAGE_IS_SCREENSHOT"));break;case 306:o.push(r("IMAGE_IS_BLURRY"))}}))})),o}return[]}function b(e,t){return(i,n)=>{const o=n(),{pinItems:s}=o.pinbuilder,r={},{signals:a}=s[e];switch(t){case"link_url":Object.prototype.hasOwnProperty.call(a,"URL_CONTAINS_PORN_DOMAIN")&&(r.URL_CONTAINS_PORN_DOMAIN=!1),Object.prototype.hasOwnProperty.call(a,"URL_UNREACHABLE")&&(r.URL_UNREACHABLE=!1);break;case"image_signature":Object.prototype.hasOwnProperty.call(a,"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO")&&(r.IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO=!1),Object.prototype.hasOwnProperty.call(a,"IMAGE_UNDER_MIN_DIMENSIONS")&&(r.IMAGE_UNDER_MIN_DIMENSIONS=!1)}Object.keys(r).length>0&&i((0,c.nh)(e,{signals:r}))}}function y(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{selectedItem:o,pinIsAdsOnly:r}=s.pinbuilder.pinDrafts[e];n(r||o?null:(0,h.ZP)({errorId:"BOARD_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}}function v({i18n:e,ideaPinRenamingEnabled:t,link:i,pinItemId:n,resources:o,dispatch:l}){return new Promise((c=>{const p=n||(0,u.Z)();if(i)if((0,d.CB)(i))if(r.Z.enabled("linkStatusValidation")){const n="PinCreationQualitySignalResource",r={pin_items:{[p]:{link_url:i}}};if(o&&o[n]&&o[n][i]){const s={[p]:o[n][i]};c(x(s,e,t))}else s.Z.create(n,r).callGet().then((s=>{const{data:d}=s.resource_response;!function(e,t,i){if(t){const n=i[Object.keys(i)[0]];e&&(e.PinCreationQualitySignalResource={...e.PinCreationQualitySignalResource,[t]:n})}}(o,i,d),l&&l((0,a.Sr)(n,r,s)),c(x(d,e,t))})).catch((()=>c(null)))}else c(null);else c([(0,h.ZP)({errorId:"URL_INVALID",i18n:e,ideaPinRenamingEnabled:t,dispatchId:p})]);else r.Z.enabled("requireLink")?c([(0,h.ZP)({errorId:"URL_MISSING",i18n:e,ideaPinRenamingEnabled:t,dispatchId:p})]):c(null)}))}function P(e,t,i){return(n,o)=>{const s=o(),{pinbuilder:r,resources:a}=s,{pinDrafts:l,pinItems:d,storyPinItems:c}=r,{pinItemIds:u,type:h}=l[e];return u.filter((e=>"carousel"!==h||!!d[e].media)).map((e=>("story"!==h&&n(b(e,"link_url")),v({i18n:t,ideaPinRenamingEnabled:i,link:"story"===h?c[e].linkBlock&&c[e].linkBlock.srcUrl:d[e].link,pinItemId:e,resources:a,dispatch:n}))))}}function w(e,t,i,n){return(r,l)=>{const d=l(),{pinbuilder:c,resources:u}=d,{pinDrafts:h,pinItems:p,storyPinItems:_}=c,{pinItemIds:g,type:m}=h[e],f="PinCreationQualitySignalResource";if("story"===m)return Promise.resolve([]);const y={pin_items:g.reduce(((e,t)=>{const n="story"===m,{title:o,description:s,media:r}=n?_[t]:p[t],a=n?_[t].linkBlock.srcUrl:p[t].link;return{...e,[t]:{title:o,description:s,image_signature:r&&"localImage"===r.type?r.signature:"",link_url:a,fields_to_check:[i]}}}),{})},v=(0,o.Z)(y);if(u&&u[f]&&u[f][v]){const{data:e}=u[f][v];return g.map((e=>r(b(e,i)))),Promise.resolve(x(e,t,n))}return new Promise((e=>{s.Z.create(f,y).callGet().then((o=>{const{data:s}=o.resource_response;return g.map((e=>r(b(e,i)))),r((0,a.Sr)(f,y,o)),e(x(s,t,n))})).catch((()=>e([])))}))}}function I(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{(0,p.q7)(s,{pinDraftId:e}).filter((e=>null!==e.media)).length<_.fk?n((0,h.ZP)({errorId:"STORY_PIN_NOT_ENOUGH_PAGES",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):n(null)}))}}function A(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=(0,p.q7)(s,{pinDraftId:e}).filter((e=>!!e.blockIds.length));0===o.length?n((0,h.ZP)({errorId:"STORY_PIN_NOT_ENOUGH_PAGES",i18n:t,ideaPinRenamingEnabled:i})):o.length>_.yX?n((0,h.ZP)({errorId:"STORY_PIN_TOO_MANY_PAGES",i18n:t,ideaPinRenamingEnabled:i})):n(null)}))}}function E(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=(0,p.pq)(s,{pinDraftId:e});return 1!==(0,l.yp)(s,{pinItemId:o[0]}).filter((e=>("story_pin_image_block"===e.type||"story_pin_video_block"===e.type)&&!!e.media)).length?n((0,h.ZP)({errorId:"STORY_PIN_COVER_PAGE_IMAGE_MISSING",i18n:t,ideaPinRenamingEnabled:i})):n(null)}))}}function C(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>n((0,p.pc)(s,{pinDraftId:e})?null:(0,h.ZP)({errorId:"STORY_PIN_TITLE_MISSING",i18n:t,ideaPinRenamingEnabled:i}))))}}const S=[y,P,function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{type:o}=s.pinbuilder.pinDrafts[e],{media:r}=f(s,e);n("carousel"===o||r?null:(0,h.ZP)({errorId:"MEDIA_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{isTaggable:o,pinTagIds:r}=f(s,e),a=r.filter((e=>"deleted"!==s.pinbuilder.pinTags[e].status));n(!o&&a.length>0?(0,h.ZP)({errorId:"TAG_INVALID",i18n:t,ideaPinRenamingEnabled:i,dispatchId:m(s,e)}):null)}))}},function(e,t,i){return(o,s)=>{const a=s();return new Promise((o=>{const{publishOption:s,scheduledDate:l}=a.pinbuilder.pinDrafts[e],d=r.Z.enabled("ideaPinScheduling"),c=d?_.$K:_.TZ,u=d?"DATE_TOO_FAR_IN_FUTURE_EXTENDED":"DATE_TOO_FAR_IN_FUTURE",p=new Date;p.setHours(0,0,0,0),"publish-immediately"!==s&&(l?l<p?o((0,h.ZP)({errorId:"DATE_IN_PAST",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):l>(0,n.Z)(new Date,c)&&o((0,h.ZP)({errorId:u,i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):o((0,h.ZP)({errorId:"DATE_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))),o(null)}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{publishOption:o,scheduledTime:r}=s.pinbuilder.pinDrafts[e];n("publish-immediately"===o||r?null:(0,h.ZP)({errorId:"TIME_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}}],j=[y,P,function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{pinItemIds:o}=s.pinbuilder.pinDrafts[e],{canvasJson:r}=s.pinbuilder.storyPinItems[o[0]];r&&r.aspectRatio&&9===r.aspectRatio.w&&16===r.aspectRatio.h?n(null):n((0,h.ZP)({errorId:"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{pinItemIds:o}=s.pinbuilder.pinDrafts[e],{media:r}=s.pinbuilder.storyPinItems[o[0]];r&&"localVideo"===r.type?n((0,h.ZP)({errorId:"STORY_PIN_VIDEO_ON_COVER",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):n(null)}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{pinItemIds:o}=s.pinbuilder.pinDrafts[e],{title:r}=s.pinbuilder.storyPinItems[o[0]];r||n((0,h.ZP)({errorId:"STORY_PIN_COVER_PAGE_TITLE_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})),n(null)}))}},I],T=[y,E,A,C],D=(e,t)=>{const{pinItemIds:i}=e.pinbuilder.pinDrafts[t];return(i.length?e.pinbuilder.storyPinItems[i[0]]:{}).blockIds.length?T:j},k=[y,P,I],z=[y,E,A,C],O=(e,t)=>{const{pinItemIds:i}=e.pinbuilder.pinDrafts[t];return(i.length?e.pinbuilder.storyPinItems[i[0]]:{}).blockIds.length?z:k},R=[function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=(0,p.uO)(s,{pinDraftId:e});let r=!1;for(let e=0;e<o.length;e+=1){var a;if(null!==(a=o[e].media)&&void 0!==a&&a.type){const{media:t}=o[e];let i;switch(t.type){case"localImage":i=t.signatureEdited;break;case"localVideo":i=void 0===t.trimmedEndTime||void 0===t.trimmedStartTime||0===t.trimmedStartTime&&t.trimmedEndTime===t.duration?t.signature:t.signatureEdited;break;case"webImage":case"webVideo":i=t.signature}if(!i){r=!0;break}}}return n(r?(0,h.ZP)({errorId:"STORY_PIN_MEDIA_SIGNATURES_MISSING",i18n:t,ideaPinRenamingEnabled:i}):null)}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=s.pinbuilder.pinDrafts[e].pinItemIds[0];return s.pinbuilder.storyPinItems[o].coverImgSignature?n(null):n((0,h.ZP)({errorId:"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING",i18n:t,ideaPinRenamingEnabled:i}))}))}}],L=(e,t)=>{const{pinItemIds:i}=e.pinbuilder.pinDrafts[t];return(i.length?e.pinbuilder.storyPinItems[i[0]]:{}).blockIds.length?R:[]};function M(e,t,i){return(n,o)=>{const s=o(),{type:r}=s.pinbuilder.pinDrafts[e],a=g([..."story"===r?D(s,e):S].map((o=>n(o(e,t,i)))));return Promise.all(a).then((e=>g(e.filter(Boolean))))}}function B(e,t,i){return(n,o)=>{const s=o(),{type:r}=s.pinbuilder.pinDrafts[e],a=g([..."story"===r?O(s,e):S].map((o=>n(o(e,t,i)))));return Promise.all(a).then((e=>g(e.filter(Boolean))))}}function N(e,t,i){return(n,o)=>{const s=o(),r=s.pinbuilder.pinDrafts[e],a=s.pinbuilder.storyPinItems[r.pinItemIds[0]].blockIds.length>0,l=g([...a?L(s,e):[]].map((o=>n(o(e,t,i)))));return Promise.all(l).then((e=>g(e.filter(Boolean))))}}},382964:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(319915),s=i(947599),r=i(898781),a=i(883119),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=(0,n.lazy)((()=>Promise.all([i.e(32777),i.e(17621),i.e(19790),i.e(9977)]).then(i.bind(i,382210))));class u extends n.Component{constructor(...e){super(...e),d(this,"loaded",!1),d(this,"setRef",(e=>{const{onLoaded:t}=this.props;!this.loaded&&t&&t(e),this.loaded=!0}))}render(){const{borderRadius:e,height:t,width:i}=this.props;return(0,l.jsx)(o.Z,{name:"SafeSuspense_PinCanvasLoader_PinCanvas",children:(0,l.jsx)(s.Z,{fallback:(0,l.jsx)(a.kC,{alignItems:"center",justifyContent:"center",children:(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n.bt("Caricamento editor immagini", "Loading image editor", "accessibility label for loading spinner", undefined, true),show:!0})}),children:(0,l.jsx)(c,{borderRadius:e,width:i,height:t,ref:this.setRef})})})}}function h(e){const t=(0,r.ZP)();return(0,l.jsx)(u,{...e,i18n:t})}},265696:(e,t,i)=>{function n(){return Promise.all([i.e(32777),i.e(17621),i.e(19790)]).then(i.bind(i,237403)).then((({default:e})=>e))}i.d(t,{Z:()=>n})},955625:(e,t,i)=>{i.d(t,{$R:()=>k,AW:()=>s,De:()=>F,Dp:()=>T,Hv:()=>I,IU:()=>a,IW:()=>A,Ir:()=>P,J6:()=>l,JK:()=>B,Nv:()=>m,QS:()=>V,SX:()=>z,VC:()=>C,Vv:()=>u,Wx:()=>d,ZT:()=>Z,_y:()=>o,as:()=>N,bg:()=>S,f5:()=>g,fD:()=>h,fI:()=>j,fQ:()=>n,g6:()=>b,hp:()=>L,it:()=>p,ln:()=>x,oH:()=>v,pg:()=>U,qs:()=>c,re:()=>y,rh:()=>D,sT:()=>w,uN:()=>E,uO:()=>H,vF:()=>M,xZ:()=>r,z2:()=>_,zA:()=>f,zU:()=>O,zs:()=>R});const n=600,o=64,s=600,r=150,a=750,l="jpeg",d=.92,c="#efefef",u=.7,h=2,p=16,_="#e60023",g=8,m="#e60023",f=1,x="white",b="#efefef",y=.7,v=2,P=8,w="#ffb3be",I=1,A=16,E="#ffb3be",C=1,S="white",j=50,T="#e60023",D="#e60023",k=4,z="black",O=58,R="#0074e8",L=.94,M=8,B="white",N="bold 16px sans-serif",F=.1,Z={w:2,h:3},U=5,V={1:[{viewbox:{top:0,left:0,width:1,height:1},roundedCorners:{tl:!0,tr:!0,bl:!0,br:!0},internalEdges:{mt:!1,mb:!1,ml:!1,mr:!1}}],2:[{viewbox:{top:0,left:0,width:1,height:2/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[0]}}],3:[{viewbox:{top:0,left:0,width:1,height:1/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:1/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!1,mr:!1},alignedSections:{mt:[],mb:[]},againstSections:{mt:[0],mb:[2]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[1]}}],4:[{viewbox:{top:0,left:0,width:.5,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[2],mr:[1]},againstSections:{mb:[1,3],mr:[2,3]}},{viewbox:{top:.5,left:0,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[3],mr:[0]},againstSections:{mt:[0,2],mr:[2,3]}},{viewbox:{top:0,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[0],ml:[3]},againstSections:{mb:[1,3],ml:[0,1]}},{viewbox:{top:.5,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[1],ml:[2]},againstSections:{mt:[0,2],ml:[0,1]}}],5:[{viewbox:{top:0,left:0,width:.6,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[],mr:[1]},againstSections:{mb:[1],mr:[2,3,4]}},{viewbox:{top:.5,left:0,width:.6,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[],mr:[0]},againstSections:{mt:[0],mr:[2,3,4]}},{viewbox:{top:0,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[],ml:[3,4]},againstSections:{mb:[3],ml:[0,1]}},{viewbox:{top:1/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!0,mr:!1},alignedSections:{mt:[],mb:[],ml:[2,4]},againstSections:{mt:[2],mb:[4],ml:[0,1]}},{viewbox:{top:2/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[],ml:[2,3]},againstSections:{mt:[3],ml:[0,1]}}]},H={sm:20,md:30,lg:40}},505132:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(553751),o=i(121151),s=i(898781),r=i(780280),a=i(883119),l=i(785893);function d(e){const t=(0,s.ZP)(),{onSectionCreate:i,onClose:d,selectedBoard:c,useLayer:u=!0}=e,{isRTL:h}=(0,r.B)(),p=u?o.ZP:a.u_,_=(0,l.jsx)(a.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"center",children:[(0,l.jsx)(a.xu,{maxWidth:400,children:(0,l.jsx)(a.X6,{align:"center",size:"500",children:t.bt("Aggiungi sezione", "Add section", "Modal header for adding a section", undefined, true)})}),(0,l.jsx)(a.xu,{left:h,paddingX:6,paddingY:5,position:"absolute",right:!h,top:!0,children:(0,l.jsx)(a.hU,{icon:"cancel",iconColor:"darkGray",size:"lg",accessibilityLabel:t.bt("Chiudi", "Close", "CreateSection.Modal.Icon", undefined, true),onClick:d})})]})});return(0,l.jsx)(p,{accessibilityModalLabel:t.bt("Aggiungi una sezione alla bacheca", "Add a section to the board", "modal to add a section to a board", undefined, true),heading:_,onDismiss:d,size:"sm",children:(0,l.jsx)(a.xu,{display:"flex",color:"default",rounding:2,children:(0,l.jsx)(n.Z,{board:c,completeCreateSectionAction:i,onClearModal:d,positionRelative:!0,showTitle:!1})})})}},59644:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>`${e}:${t||""}`},781165:(e,t,i)=>{i.d(t,{A8:()=>b,CQ:()=>E,Cf:()=>f,GJ:()=>A,Jn:()=>m,OA:()=>h,RZ:()=>y,SD:()=>v,h6:()=>_,pS:()=>p,q1:()=>g,sJ:()=>I,tV:()=>w,xx:()=>x,yC:()=>C});var n,o,s,r,a,l=i(702664),d=i(689070),c=i(214494),u=i(167912);function h(e,t,i){return c.Z.create("BoardEmailInviteResource",{board_id:e,emails:t,...i?{orbac_subject_id:i}:Object.freeze({})}).callCreate()}function p(e,t,i){return c.Z.create("BoardInviteResource",{board_id:e,invited_user_ids:t,...i?{orbac_subject_id:i}:Object.freeze({})}).callCreate()}const _=()=>{const e=void 0!==n?n:n=i(847902),[t]=(0,u.useMutation)(e);return async(e,i)=>{const n={boardId:e,userId:i};return await new Promise(((e,i)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}};function g(e,t){return()=>c.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().catch((()=>{}))}function m(e,t,i,n){return async()=>{const{invited_user:t,status:o,board:{id:s}}=e;t&&await c.Z.create("accepted"===o?"BoardCollaboratorResource":"BoardInviteResource",{ban:i,board_id:s,field_set_key:"boardEdit",invited_user_id:t.id,...n?{orbac_subject_id:n}:{}}).callDelete({showError:!1})}}function f(e,t){return async i=>{await(0,d.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"POST",data:{collaborator:t}}),i(function(e,t){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}}}(e,t))}}function x(e,t){return async i=>{await(0,d.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"DELETE",data:{collaborator:t}}),i(function(e){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}}}(e))}}const b=(e,t)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:t}}),y=()=>{const e=void 0!==o?o:o=i(758395),[t]=(0,u.useMutation)(e);return async e=>{const i={boardId:e};return await new Promise(((e,n)=>{t({variables:{...i},onCompleted:(t,i)=>{i&&n(i[0]),e(t)},onError:e=>n(e)})}))}},v=(e,t)=>i=>{i(b(e,t)),c.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t.id}).callUpdate()};function P(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}const w=()=>{const e=void 0!==s?s:s=i(526075),[t]=(0,u.useMutation)(e),n=(0,l.useDispatch)();return async(e,i)=>{const o={boardId:e,message:i||""};return await new Promise(((i,s)=>{t({variables:{...o},onCompleted:(t,o)=>{o&&(n(P(e,!1)),s(o[0])),n(P(e,!0)),i(t)},onError:t=>{n(P(e,!1)),s(t)}})}))}};function I(e){return t=>{(0,d.Z)({url:`/v3/boards/${e}/collaborators/request/`,method:"POST",data:{board:e}}).catch((()=>{t(P(e,!1))})),t(P(e,!0))}}function A(e,t){return i=>{(0,d.Z)({url:`/v3/boards/${e}/collaborators/request/${t}/`,method:"DELETE",data:{board:e,user:t}}).catch((()=>{i(P(e,!0))})),i(P(e,!1))}}const E=()=>{const e=void 0!==r?r:r=i(266970),[t]=(0,u.useMutation)(e);return async(e,i,n)=>{const o={boardId:e,userId:i,ban:n||!1};return await new Promise(((e,i)=>{t({variables:{...o},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}},C=()=>{const e=E(),t=(()=>{const e=void 0!==a?a:a=i(767656),[t]=(0,u.useMutation)(e);return async(e,i)=>{const n={board:e,collaboratorIds:[i]};return await new Promise(((e,i)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}})();return(i,n,o)=>async()=>{const{invited_user:n,status:s,board:{id:r}}=i;n&&("accepted"===s?t(r,n.id):e(r,n.id,o))}}},576028:(e,t,i)=>{i.d(t,{V:()=>r,u:()=>s});var n=i(214494),o=i(254176);const s=e=>t=>{const i={board_id:e};return n.Z.create("BoardResource",i).callGet().then((e=>{const i=e&&e.resource_response&&e.resource_response.data;return i&&t((0,o.yT)(i)),e}))};function r(e,t,i){return(s,r)=>{const{boards:a}=r(),l=a[e],d=void 0===t.collaborator_requests_enabled||null===t.collaborator_requests_enabled?Object.freeze({}):{collaborator_requests_enabled:t.collaborator_requests_enabled},c={allow_homefeed_recommendations:t.allow_homefeed_recommendations,category:t.category,collab_board_email:t.collab_board_email,collaborator_invites_enabled:t.collaborator_invites_enabled,collaborator_permissions_setting:t.collaborator_permissions_setting,description:t.description,name:t.name,privacy:t.privacy,sensitivity:t.sensitivity||null,...i?{orbac_subject_id:i}:Object.freeze({}),...d};return s((0,o.yT)({...c,id:e})),n.Z.create("BoardResource",{...c,board_id:e}).callUpdate().then((e=>{const i=e&&e.resource_response&&e.resource_response.data||t;return s((0,o.yT)(i)),e})).catch((e=>{throw l&&s((0,o.yT)(l)),e}))}}},956800:(e,t,i)=>{function n(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function o(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>r,N8:()=>o,Qv:()=>s,_f:()=>n,vX:()=>a});const s=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function r(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function a(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},314123:(e,t,i)=>{function n(e,t){return{type:"PIN_BUILDER_REMOVE_PIN_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t}}}function o(e){return{type:"PIN_BUILDER_REMOVE_PIN_DRAFT_UPLOAD",payload:{pinDraftId:e}}}function s(e,t){return(i,s)=>{const r=s(),{pinDraftIdUploadStatusMap:a}=r.pinbuilder,l=a[e];l&&l.items[t]&&l.items[t].xhr&&(l.items[t].xhr.abort(),Object.keys(l.items).length<=1?i(o(e)):i(n(e,t)))}}i.d(t,{$Z:()=>s,su:()=>n,y2:()=>o})},761218:(e,t,i)=>{function n(e){return{type:"PIN_BUILDER_ADD_CREATED_PIN_ID",payload:{pinId:e}}}i.d(t,{F:()=>n})},205474:(e,t,i)=>{function n(e,t,i){return{type:"PIN_BUILDER_ADD_PIN_DRAFT",payload:{pinDraftId:e,pinDraft:t,options:i}}}i.d(t,{Z:()=>n})},174807:(e,t,i)=>{function n(e,t,i,n){return{type:"PIN_DRAFT_ADD_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:i,options:n}}}i.d(t,{Z:()=>n})},622296:(e,t,i)=>{function n(e,t,i){return{type:"PIN_ITEM_ADD_PIN_TAG",payload:{pinItemId:e,pinTagId:t,pinTag:i}}}i.d(t,{Z:()=>n})},347619:(e,t,i)=>{function n(e,t,i){return{type:"PIN_TAG_ADD_TAGGED_OBJECT",payload:{pinTagId:e,taggedObjectId:t,taggedObject:i}}}i.d(t,{Z:()=>n})},448994:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(205474),o=i(174807),s=i(748254),r=i(690374),a=i(172045);function l({i18n:e,isEmployee:t,pinDraft:i,pinDraftId:l,storyPinPublishStopwatch:d,multipageDeprecationBackendSignalsEnabled:c=!1}){return u=>{if(!i||!i.pinItemIds){const e=(0,a.Z)();u((i&&"story"===i.type?s.Z:o.Z)(l,e))}"story"===(null==i?void 0:i.type)&&u((0,r.Z)({i18n:e,isEmployee:t,pinDraftId:l,storyPinPublishStopwatch:d,multipageDeprecationBackendSignalsEnabled:c})),u((0,n.Z)(l,i))}}},537929:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(174807),o=i(448994),s=i(798477),r=i(474394),a=i(923490),l=i(172045);function d({assets:e,checkExperiment:t,country:i,i18n:d,ideaPinRenamingEnabled:c,isEmployee:u,logContextEvent:h,userId:p,isShowcase:_,parentPinId:g,isQuizAd:m=!1}){return(f,x)=>{const b=x(),{pinDraftIds:y}=b.pinbuilder;e.concat().reverse().reduce(((e,s)=>e.then((()=>{const e=(0,l.Z)(),r=(0,l.Z)();"localImage"!==s.type&&"webImage"!==s.type&&"localVideo"!==s.type||(f((0,n.Z)(e,r,{media:s,..."webImage"===s.type?{link:s.sourceURL}:{}})),"localVideo"===s.type&&f((0,a.dG)({pinDraftId:e,pinItemId:r,userId:p,country:i,i18n:d,logContextEvent:h,checkExperiment:t,ideaPinRenamingEnabled:c}))),f((0,o.Z)({i18n:d,isEmployee:u,pinDraft:{pinItemIds:[r],isShowcase:_,parentPinId:g,isQuizAd:m},pinDraftId:e,storyPinPublishStopwatch:void 0}))}))),Promise.resolve()).then((()=>{const e=y.findIndex((e=>!(0,r._isPristine)(b,e)));y.slice(0,e>=0?e:void 0).forEach((e=>f((0,s.Z)(e))))}))}}},794843:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(448994),o=i(798477),s=i(172045);function r({i18n:e,isEmployee:t,pinDraftId:i}){return(r,a)=>{const l=a(),{pinDraftIds:d}=l.pinbuilder;r((0,o.Z)(i)),d.length<=1&&r((0,n.Z)({i18n:e,isEmployee:t,pinDraft:void 0,pinDraftId:(0,s.Z)(),storyPinPublishStopwatch:void 0}))}}},395024:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(448994),o=i(798477),s=i(474394),r=i(172045);function a({i18n:e,isEmployee:t}){return(i,a)=>{const{pinbuilder:l}=a(),{pinDraftIds:d,selectedPinDraftIds:c}=l;c.forEach((e=>{i((0,s.deselectPinBuilderPinDraft)(e)),i((0,o.Z)(e))})),c.length===d.length&&i((0,n.Z)({i18n:e,isEmployee:t,pinDraft:void 0,pinDraftId:(0,r.Z)(),storyPinPublishStopwatch:void 0}))}}},474394:(e,t,i)=>{i.r(t),i.d(t,{_isPristine:()=>f,addPinBuilderAsset:()=>m,addPinBuilderPinDraftItemUpload:()=>v,clearCreatedPinIds:()=>A,clearPinBuilderPinDrafts:()=>l,clearSelectedPinBuilderPinDrafts:()=>h,deselectAllPinBuilderPinDrafts:()=>_,deselectPinBuilderPinDraft:()=>u,duplicatePinDraft:()=>d,removeCreatedPinId:()=>I,selectAllPinBuilderPinDrafts:()=>p,selectPinBuilderPinDraft:()=>c,setCloseupImageSignature:()=>E,setPinBuilderBatchEditMode:()=>b,setPinBuilderEntryPoint:()=>C,setPinBuilderFailureErrorLogged:()=>x,setPinBuilderPinItemUploadStatus:()=>P,setPinBuilderPinItemUploadXhr:()=>w,setPinBuilderSharedData:()=>g,setPinEditorPinDraft:()=>y,setShowDisabledPinCreationBanner:()=>j,setShowFeedbackModal:()=>S});var n=i(205474),o=i(174807),s=i(299295),r=i(172045),a=i(305782);function l(){return{type:"PIN_BUILDER_CLEAR_PIN_DRAFTS"}}function d(e){return(t,i)=>{const s=i(),{pinDrafts:a,pinItems:l}=s.pinbuilder,d=a[e],c=(0,r.Z)(),u=d.pinItemIds.map((e=>{const i=(0,r.Z)();return t((0,o.Z)(c,i,l[e])),i}));t((0,n.Z)(c,{...d,pinItemIds:u},{insertBefore:e}))}}function c(e){return{type:"PIN_BUILDER_SELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function u(e){return{type:"PIN_BUILDER_DESELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function h(){return{type:"PIN_BUILDER_CLEAR_SELECTED_PIN_DRAFTS"}}function p(){return(e,t)=>{const{pinbuilder:i}=t(),{selectedPinDraftIds:n,pinDrafts:o,pinDraftIds:r}=i;r.forEach((t=>{const{status:i}=o[t];n.includes(t)||s.x1.includes(i)||e(c(t))}))}}function _(){return(e,t)=>{const{pinbuilder:i}=t(),{selectedPinDraftIds:n}=i;n.forEach((t=>{e(u(t))}))}}function g(e){return(t,i)=>{const n=i(),{selectedPinDraftIds:o}=n.pinbuilder,{publishOption:s,scheduledDate:l,scheduledTime:d,selectedItem:c,...u}=e;o.forEach((e=>{t((0,a.NA)(e,{...null!=s?{publishOption:s}:Object.freeze({}),...void 0!==c?{selectedItem:c}:Object.freeze({}),...void 0!==l?{scheduledDate:l}:Object.freeze({}),...void 0!==d?{scheduledTime:d}:{}})),u.editorInstanceId=(0,r.Z)(),t((0,a.to)(e,u))}))}}function m(e){return{type:"PIN_BUILDER_ADD_ASSET",payload:{asset:e}}}function f(e,t){const{pinDrafts:i,pinItems:n}=e.pinbuilder,{selectedItem:o,pinItemIds:s,publishOption:r}=i[t];return!o&&"publish-immediately"===r&&s.every((e=>{const{description:t,link:i,media:o,title:s}=n[e];return!(t||i||s||o)}))}function x(e){return{type:"PIN_BUILDER_SET_FAILURE_ERROR_LOGGED",payload:{failureErrorLogged:e}}}function b(e){return{type:"PIN_BUILDER_SET_BATCH_EDIT_MODE",payload:{isBatchEditMode:e}}}function y(e){return{type:"PIN_EDITOR_SET_PIN_DRAFT",payload:{editedPinDraftId:e}}}function v(e,t,i){return{type:"PIN_BUILDER_ADD_PIN_DRAFT_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t,upload:i}}}function P(e,t,i){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_STATUS",payload:{pinDraftId:e,pinItemId:t,status:i}}}function w(e,t,i){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_XHR",payload:{pinDraftId:e,pinItemId:t,xhr:i}}}function I(e){return{type:"PIN_BUILDER_REMOVE_CREATED_PIN_ID",payload:{pinId:e}}}function A(){return{type:"PIN_BUILDER_CLEAR_CREATED_PIN_IDS"}}function E(e){return{type:"PIN_BUILDER_SET_CLOSEUP_IMAGE_SIGNATURE",payload:{closeupImageSignature:e}}}function C(e){return{type:"PIN_BUILDER_ENTRY_POINT",payload:{entryPoint:e}}}function S(e){return{type:"PIN_BUILDER_SHOW_FEEDBACK_MODAL",payload:{showFeedbackModal:e}}}function j(e){return{type:"PIN_BUILDER_SHOW_DISABLE_PIN_CREATION_BANNER",payload:{showDisabledPinCreationBanner:e}}}},305782:(e,t,i)=>{i.d(t,{$K:()=>G,BG:()=>k,By:()=>be,Cj:()=>X,DL:()=>me,Fu:()=>Ze,Fz:()=>te,GX:()=>re,I0:()=>V,Jr:()=>ze,KF:()=>Ne,KN:()=>fe,KT:()=>q,N$:()=>K,NA:()=>ve,Nv:()=>N,QZ:()=>$,Qc:()=>ne,R6:()=>J,RR:()=>U,Si:()=>Oe,TD:()=>M,Ug:()=>pe,Ve:()=>W,WE:()=>je,WT:()=>Ce,Wo:()=>Q,X3:()=>le,XB:()=>oe,YN:()=>he,YY:()=>ue,Yr:()=>H,_B:()=>Y,_e:()=>Pe,c8:()=>z,c_:()=>_e,dI:()=>ie,dj:()=>ce,e5:()=>O,ej:()=>ee,f9:()=>de,hb:()=>ge,iX:()=>Me,kp:()=>ye,lT:()=>B,m_:()=>Fe,n6:()=>L,p3:()=>R,q0:()=>xe,qF:()=>se,rS:()=>F,th:()=>Be,to:()=>Ie,u9:()=>we,vS:()=>Ee,xb:()=>Z,z0:()=>ke});var n=i(205474),o=i(174807),s=i(492583),r=i(573545),a=i(801815),l=i(451105),d=i(798477),c=i(214494),u=i(665866),h=i(840839),p=i(314123),_=i(761218),g=i(254176),m=i(52925),f=i(414327),x=i(956800),b=i(31100),y=i(458253),v=i(172045),P=i(827628),w=i(554410),I=i(299295),A=i(502890),E=i(472278),C=i(623320),S=i(923490),j=i(69183),T=i(90326);function D(e,t,i,n){return(0,l.ZP)({errorId:e,i18n:t,ideaPinRenamingEnabled:n,dispatchId:i})}function k(){return{type:"PIN_DRAFT_CLEAR_STATE"}}function z(e,t){return{type:"PIN_DRAFT_SET_VIEW",payload:{pinDraftId:e,view:t}}}function O(e,t){return{type:"PIN_DRAFT_SET_CREATE_METHOD",payload:{pinDraftId:e,createMethod:t}}}function R(e,t){return{type:"PIN_DRAFT_SET_STATUS",payload:{pinDraftId:e,status:t}}}function L(e,t){return{type:"PIN_DRAFT_SET_PUBLISHING_STATUS",payload:{pinDraftId:e,publishingStatus:t}}}function M(e,t){return{type:"PIN_DRAFT_SET_IS_AD_INELIGIBLE",payload:{pinDraftId:e,isAdIneligible:t}}}function B(e,t,i){return{type:"PIN_DRAFT_SET_API_ERROR",payload:{pinDraftId:e,apiError:t,apiErrorCode:i}}}function N(e,t){return{type:"PIN_DRAFT_SET_SELECTED_ITEM",payload:{pinDraftId:e,selectedItem:t}}}function F(e,t){return{type:"PIN_DRAFT_SET_ADS_ONLY_STATUS",payload:{pinDraftId:e,pinIsAdsOnly:t}}}function Z(e,t){return{type:"PIN_DRAFT_SET_BOARD_ERROR",payload:{pinDraftId:e,boardError:t}}}function U(e,t){return{type:"PIN_DRAFT_SET_PUBLISH_OPTION",payload:{pinDraftId:e,publishOption:t}}}function V(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_DATE",payload:{pinDraftId:e,scheduledDate:t}}}function H(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_DATE_ERROR",payload:{pinDraftId:e,scheduledDateError:t}}}function G(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_TIME",payload:{pinDraftId:e,scheduledTime:t}}}function W(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_TIME_ERROR",payload:{pinDraftId:e,scheduledTimeError:t}}}function $(e,t){return{type:"PIN_DRAFT_SET_LAST_EDITED_TIME",payload:{pinDraftId:e,lastEditedTime:t}}}function q(e,t){return{type:"PIN_DRAFT_SET_LAST_SAVED_TIME",payload:{pinDraftId:e,lastSavedTime:t}}}function Y(e,t){return{type:"PIN_DRAFT_SET_MEDIA_ERROR",payload:{pinDraftId:e,mediaError:t}}}function X(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_INDEX",payload:{pinDraftId:e,pinItemIndex:t}}}function K(e,t){return{type:"PIN_DRAFT_SET_PIN_ID",payload:{pinDraftId:e,pinId:t}}}function J(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_PIN",payload:{pinDraftId:e,scheduledPin:t}}}function Q(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN",payload:{pinDraftId:e,storyPin:t}}}function ee(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_DRAFT_ID",payload:{pinDraftId:e,storyPinDraftId:t}}}function te(e,t){return{type:"PIN_DRAFT_UPDATE_STORY_PIN_METADATA",payload:{pinDraftId:e,storyPinMetadata:t}}}function ie(e,t){return{type:"PIN_DRAFT_SET_IS_COMMENTS_ALLOWED",payload:{pinDraftId:e,isCommentsAllowed:t}}}function ne(e,t){return{type:"PIN_DRAFT_SET_IS_SHOPPING_REC_ALLOWED",payload:{pinDraftId:e,isShoppingRecAllowed:t}}}function oe(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_IDS",payload:{pinDraftId:e,pinItemIds:t}}}function se(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_SELECTED_PIN_ITEM_IDS",payload:{pinDraftId:e,pinItemIds:t}}}function re(e){return{type:"PIN_DRAFT_RESET_STORY_PIN_SELECTED_PIN_ITEM_IDS",payload:{pinDraftId:e}}}function ae(e,t){return{type:"PIN_DRAFT_SET_URL_CREATION_SOURCE",payload:{pinDraftId:e,urlCreationSource:t}}}function le(e,t){return{type:"PIN_DRAFT_REMOVE_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t}}}function de(e,t,i,n){return{type:"PIN_DRAFT_SET_WEBSITE_LINK",payload:{pinDraftId:e,websiteLink:t,websiteDefaultImageUrl:n,error:i}}}function ce(e,t){return{type:"PIN_DRAFT_ADD_WEBSITE_MEDIA",payload:{pinDraftId:e,media:t}}}function ue(e,t){return{type:"PIN_DRAFT_REMOVE_WEBSITE_MEDIA",payload:{pinDraftId:e,mediaUrl:t}}}function he(e,t){return{type:"PIN_DRAFT_ADD_INTEREST_TAG",payload:{pinDraftId:e,tag:t}}}function pe(e,t){return{type:"PIN_DRAFT_REMOVE_INTEREST_TAG",payload:{pinDraftId:e,id:t}}}function _e(e){return{type:"PIN_DRAFT_CLEAR_INTEREST_TAGS",payload:{pinDraftId:e}}}function ge(e){return{type:"PIN_DRAFT_CLEAR_WEBSITE_MEDIA",payload:{pinDraftId:e}}}function me(e,t){return{type:"PIN_DRAFT_SET_ALT_TEXT",payload:{pinDraftId:e,altText:t}}}function fe(e,t){return{type:"PIN_DRAFT_SET_ALT_TEXT_ERROR",payload:{pinDraftId:e,altTextError:t}}}function xe(e,t="upload",i){return(s,r)=>{const{pinbuilder:{pinDrafts:a}}=r(),{pinItemIds:l,pinItemIndex:d,websiteLink:c,websiteMedia:h}=a[e];if(h.length>0){const t=l[d];s((0,A.mO)(t,h[0])),s((0,A.PF)(t,"webImage"===h[0].type&&h[0].sourceURL?h[0].sourceURL:c)),s((0,A.lZ)(t,null)),s(ae(e,i))}h.length>1&&(u.Z.enabled("multi_pin")||u.Z.enabled("multi_pin_pinner")?h.slice(1).forEach((e=>{const t=(0,v.Z)();s((0,n.Z)(t));const r=(0,v.Z)();s((0,o.Z)(t,r,{media:e,link:"webImage"===e.type?e.sourceURL:c})),s(ae(t,i))})):h.slice(1).forEach((t=>{const n=(0,v.Z)();s((0,o.Z)(e,n,{media:t,link:c})),s(ae(n,i))}))),s(ge(e)),s(de(e,"")),s(z(e,t))}}function be(e){return(t,i)=>{const n=i(),{pinItemIds:o,pinItemIndex:s,websiteLink:r,websiteMedia:a}=n.pinbuilder.pinDrafts[e],l=[];if(a.length>0){const e=o[s];t((0,A.mO)(e,a[0])),t((0,A.PF)(e,"webImage"===a[0].type&&a[0].sourceURL?a[0].sourceURL:r)),t((0,A.lZ)(e,null)),a.forEach((e=>{l.push(e)}))}return t(z(e,"board")),l}}function ye(e,t){return(i,n)=>{const s=n(),{pinDrafts:r,pinItems:a,storyPinItems:l}=s.pinbuilder,{pinItemIds:d,type:c}=r[e],u=d.indexOf(t),h=d.length-1,_="story"===c?E.hC:A.mO;if(u===h){const{media:n}="story"===c?l[t]:a[t];n&&"webImage"===n.type&&i((0,A.PF)(t,"")),n&&"localVideo"===n.type&&i((0,p.$Z)(e,t)),i(_(t,null))}else i(le(e,t)),"carousel"===c&&a[d[h]].media&&i((0,o.Z)(e,(0,v.Z)(),null,{saveIndex:!0}))}}function ve(e,t){return{type:"PIN_DRAFT_UPDATE_DATA",payload:{pinDraftId:e,pinDraft:t}}}function Pe(e,t){return{type:"PIN_DRAFT_SET_UPLOAD_START_TIME",payload:{pinDraftId:e,uploadStartTime:t}}}function we(e,t){return(i,n)=>{const o=n(),{pinItemIds:s,pinItemIndex:r}=o.pinbuilder.pinDrafts[e];if(i(function(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_SHAREABLE",payload:{pinDraftId:e,pinItemShareable:t}}}(e,t)),t){const e=s[r],{description:t,descriptionError:n,link:a,linkError:l,title:d,titleError:c}=o.pinbuilder.pinItems[e];s.forEach((e=>i((0,A.nh)(e,{description:t,descriptionError:n,link:a,linkError:l,title:d,titleError:c}))))}}}function Ie(e,t){return(i,n)=>{const o=n(),{pinItemIds:s,pinItemIndex:r,pinItemShareable:a}=o.pinbuilder.pinDrafts[e];(a?s:[s[r]]).forEach((e=>i((0,A.nh)(e,t))))}}function Ae(e,t){const i=t?(0,a.Z)(e,t):null;if(e.customCoverImg){if(i){const{origin_x:t=0,origin_y:n=0,width:o=e.width,height:s=e.height}=i;return(0,j.B)(e.customCoverImg.src,{x:t,y:n,width:o,height:s})}return Promise.resolve(e.customCoverImg.src)}if(i){const{origin_x:t=0,origin_y:n=0,width:o=e.width,height:s=e.height}=i,{trimmedStartTime:r,trimmedEndTime:a,duration:l,thumbnail:d}=e,c=r||0,u=a||l,h=d>=c&&d<=u?d:c;return(0,j.v)(e,h,{x:t,y:n,width:o,height:s})}return(0,j.v)(e,e.thumbnail,null)}function Ee(e,t,i,n=2){return async(o,s)=>{const r=s(),{pinbuilder:a}=r,{pinDrafts:l}=a,{interestTags:d}=l[t],u=d.map((e=>e.id));if(u.length>0){const o={pinId:i,interestIds:u,zenSource:n};try{await c.Z.create("InterestTaggingResource",o).callCreate(),e({event_type:8521,aux_data:{pin_id:i,story_pin_creation_id:t}})}catch(h){const{api_error_code:n,message:o,message_detail:s}=h||{};throw e({event_type:8522,aux_data:{error_message:s||o,pin_id:i,status_code:n,story_pin_creation_id:t}}),new Error("Cannot add tags to the Pin.")}}}}function Ce(e,t){return(i,n)=>{const o=n(),{pinDrafts:s}=o.pinbuilder;i($(e,new Date)),!t&&I.qm.includes(s[e].status)||i(R(e,"edited"))}}function Se(e,t,i,n,o,s,a,l,d,c){const{advertiser:u,pinbuilder:h}=t,{pinDrafts:p,pinItems:_}=h,{altText:g,pinIsAdsOnly:m,pinItemIds:f,pinItemIndex:x,selectedItem:b,type:y}=p[e],v=d&&d("ads_only_pin_creation",{dangerouslySkipActivation:!0}).anyEnabled;if(v&&!m&&!b)throw new Error(a.bt("Impossibile creare un Pin senza una bacheca.", "Cannot create a Pin without a board.", "pinBuilder.error.noBoard", undefined, true));if(!y)throw new Error("PinBuilder Exception: Undefined PinDraft type");const P=o&&u&&(u.owner_user_id!==o||u.client_business_id)?u.id:null,w={field_set_key:"create_success",skip_pin_create_log:!0,...g?{alt_text:g}:Object.freeze({}),...b&&b.sectionId?{section:b.sectionId}:Object.freeze({}),...b&&b.boardId?{board_id:b.boardId}:Object.freeze({}),...P?{advertiser_id:P}:Object.freeze({}),...n?{orbac_subject_id:n}:Object.freeze({}),...v&&m?{is_removable:!0,create_default_board:!0}:Object.freeze({})};return new Promise(((t,n)=>{if("carousel"===y)(0,C.Ch)(f.map((e=>_[e])),e,l).then((e=>{t({...w,...e.metadata,carousel_data_json:{carousel_slots:e.slots}})})).catch((e=>{n(e)}));else if("single"===y){const o=f[x],{description:d,link:u,media:h,canvasJson:g,title:m,userMentionTags:b}=_[o];if(!h)throw new Error(a.bt("Impossibile creare un Pin senza un'immagine o un video.", "Cannot create a Pin without an image or video.", "pinBuilder.error.noMedia", undefined, true));const y=m.substring(0,I.Ke),v=d.substring(0,I.JO);if("localImage"===h.type)(0,C.xc)(h.src,e,l,c).then((({signature:e})=>{e?t({...w,image_signature:e,description:v,link:u,title:y,method:"uploaded",upload_metric:{source:(0,r.Z)(s)},user_mention_tags:b}):n()})).catch((()=>{const t=a.bt("Il caricamento non  andato a buon fine per qualche ragione. Riprova.", "Hmm, your upload failed for some reason. Please try again.", "pinBuilder.mediaUpload.error", undefined, true);i(Y(e,t)),n(new Error(a.bt("Impossibile creare il Pin perch l'immagine non pu essere caricata.", "Cannot create Pin because the image could not be uploaded.", "pinBuilder.error.noImageUploaded", undefined, true)))}));else if("webImage"===h.type){const{createMethod:i}=p[e];t({...w,description:v,link:u,title:y,image_url:h.src,method:i||"scraped",scrape_metric:{source:"www_url_scrape"},user_mention_tags:b})}else{if("localVideo"!==h.type)throw new Error(a.bt("Impossibile creare il Pin perch questo tipo di contenuto multimediale non  stato riconosciuto.", "Cannot create Pin because the media type is not recognized.", "pinBuilder.error.noMediaRecognized", undefined, true));Ae(h,g).then((t=>(0,C.xc)(t,e,l,c))).then((({signature:e})=>{if(!e)throw new Error;t({...w,image_signature:e,description:v,link:u,title:y,media_upload_id:h.uploadId,user_mention_tags:b})})).catch((()=>{const t=a.bt("Mmm, il caricamento non  andato a buon fine per qualche ragione. Riprova.", "Hmm, your upload failed for some reason. Please try again.", "Error message uploading a video file and process fails", undefined, true);i(Y(e,t)),n(new Error(a.bt("Impossibile creare il Pin perch il video non pu essere caricato.", "Cannot create Pin because the video could not be uploaded.", "pinBuilder.error.noVideoUploaded", undefined, true)))}))}}}))}function je(e,t,i,n,o,s,r){return new Promise(((i,n)=>{const{pinbuilder:{pinDrafts:a,pinItems:l,storyPinItems:d,storyPinItemBlocks:c}}=t,{pinItemIds:u,type:h}=a[e],p=u[0];let _;if("story"===h){var g;_=null===(g=d[p].blockIds.map((e=>c[e])).filter((e=>{var t;return["localImage","localVideo"].includes(null===(t=e.media)||void 0===t?void 0:t.type)}))[0])||void 0===g?void 0:g.media}else _=l[p].media;if(!_)throw new Error("Invalid media");if("localImage"===_.type)(0,C.wL)(_.src,e,o,s,r).then((e=>{i({image_signature:e})})).catch((()=>{n(new Error("Cannot schedule the Pin."))}));else{if("localVideo"!==_.type)throw new Error("Cannot upload this media type.");{const t=_.uploadId;Ae(_,null).then((t=>(0,C.wL)(t,e,o,s,r))).then((e=>i({image_signature:e,media_upload_id:t}))).catch((()=>{n(new Error("Cannot schedule the Pin"))}))}}}))}function Te(e,t,i,n,o){return(s,r)=>{const a=r();if(t&&(t.message||t.message_detail)){const r=t.message_detail||t.message,{pinItemIds:l,pinItemIndex:d}=a.pinbuilder.pinDrafts[e],c=l[d],u=[];switch(t.api_error_code){case 9:switch((t.data||{}).source_field){case"description":u.push({...D("DESCRIPTION_INVALID",i,c,o),message:r});break;case"title":u.push({...D("TITLE_INVALID",i,c,o),message:r});break;default:u.push({...D("URL_INVALID",i,c,o),message:r})}break;case 2378:u.push({...D("CAROUSEL_DIFFERENT_RATIOS",i,e,o),dispatchId:e,message:r});break;default:s(B(e,r,t.api_error_code))}u.length>0&&s((0,P.d)(u,n))}}}function De(e,t,i,n,o,r,a){return(l,d)=>{const{pinbuilder:{pinDrafts:c}}=d();l(function(e,t,i){return(n,o)=>{const s=o(),{pinbuilder:{pinDrafts:r,pinDraftIds:a,pinItems:l,storyPinItems:d}}=s,{pinItemIds:c,type:p,interestTags:_,urlCreationSource:g}=r[e],m=c[0],f="story"===p,{title:x,description:b,media:y}=f?d[m]:l[m],v=f?[]:l[m].userMentionTags,P=f?d[m].linkBlock&&d[m].linkBlock.srcUrl:l[m].link,w=y&&"localVideo"===y.type?"video":"image",I="single"===p?w:p,A=!!x,E=!!b,C=!!P,{canvasJsons:S,signals:j}=c.reduce(((e,t)=>{const i=f?d[t]:l[t],{canvasJson:n,signals:o}=i,s=Object.keys(o).map((e=>({signal:e,value:o[e]})));return{canvasJsons:[...e.canvasJsons,n],signals:[...e.signals,...s]}}),{canvasJsons:[],signals:[]}),T={signals:j,is_multi_pin_create:a.length>1,num_images:!!S&&Math.max(...S.map((e=>e&&e.layout?e.layout.sections.length:1)))||1,text:S.reduce(((e,t)=>(t&&t.text&&e.push({font_family:t.text.fontFamily,position:t.text.position,font_size:t.text.fontSize,margin:t.text.margin,bg_color:t.text.backgroundColor,bg_opacity:t.text.backgroundOpacity,text_color:t.text.textColor}),e)),[]),logo:S.reduce(((e,t)=>(t&&t.logo&&e.push({position:t.logo.position,margin:t.logo.margin,size:t.logo.size,bg_color:t.logo.backgroundColor,bg_opacity:t.logo.backgroundOpacity}),e)),[])};y&&"localVideo"===y.type&&u.Z.enabled("videoTagging")&&(T.interest_tags=_.length);const D={pin_draft_id:e,has_description:E,has_link:C,has_title:A,is_video:"video"===I,media_upload_id:y&&"localVideo"===y.type?y.uploadId:void 0,pin_builder_data:JSON.stringify(T),pin_format:I,num_user_mention_tags:v.length,signals:JSON.stringify(j),..."image"===I||"carousel"===I||"video"===I&&u.Z.enabled("videoEditing")?{has_logo:S.some((e=>!!e&&!!e.logo)),has_text:S.some((e=>!!e&&!!e.text)),is_cropped:S.some((e=>{if(!e||!e.layout)return!1;const t=e.layout.sections.map((e=>e.media));return t.length>1||1===t.length&&!!t[0]&&(0!==t[0].angle||t[0].flipX||t[0].flipY||t[0].viewbox&&(1!==t[0].viewbox.width||1!==t[0].viewbox.height))})),is_trimmed:y&&"localVideo"===y.type?!!y.trimmedStartTime&&!!y.trimmedEndTime&&!!y.duration&&(y.trimmedStartTime>0||y.duration-y.trimmedEndTime>.01):void 0}:Object.freeze({}),pin_builder_scenario:u.Z.scenario(),...g?{url_creation_source:g}:Object.freeze({})};if((0,h.Z)(i,{event_type:1,object_id_str:t,aux_data:{...D}}),y&&"localVideo"===y.type)if(y.customCoverImg)(0,h.Z)(i,{event_type:7896,object_id_str:t});else{const e=(100*y.thumbnail/y.duration).toFixed(2);(0,h.Z)(i,{event_type:7517,object_id_str:t,aux_data:{percentage_scrubbed:e}})}}}(e,t.id,i));const{pinItemIds:p,pinItemIndex:_,selectedItem:m}=c[e],f=p[_],b=t.board&&t.board.id||m&&m.boardId;return l((0,A.f5)(f,t.id,n&&n.advertiser_id,o,i,a)).then((()=>{l(K(e,t.id)),l((0,g.Br)({boardId:b,sectionId:t.section?t.section.id:null,increment:1})),l((0,x.vX)({feedId:t.section?t.section.id:b,feedType:t.section?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:[t.id],itemType:"pin"})),l((0,T.JS)({userId:r,increment:1}))}))}}function ke(e,t,i){return(n,o)=>{const r=o(),{pinDrafts:a}=r.pinbuilder,{selectedItem:l}=a[e],{board:d}=t,c=d&&d.id||l&&l.boardId;n(K(e,t.id)),n((0,g.Br)({boardId:c,sectionId:t.section?t.section.id:null,increment:1})),n((0,x.vX)({feedId:t.section?t.section.id:c,feedType:t.section?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:[t.id],itemType:"pin"})),n((0,x.vX)({feedId:i,feedType:s.Z.STORY_PINS_FEED,itemIds:[t.id],itemType:"pin",prepend:!0})),n((0,T.JS)({userId:i,increment:1}))}}function ze(e){return(t,i)=>{const n=i(),{pinbuilder:{pinDraftIdUploadStatusMap:o}}=n;return!(!o||!o[e]||"uploading"!==o[e].status)}}function Oe(e,t,i,n){return async o=>{let s=!0;try{await o((0,P.Z)({pinDraftId:e,validationKey:"save",i18n:t,ideaPinRenamingEnabled:n,logContextEvent:i}))}catch(r){s=!1}return{pinDraftId:e,isValid:s}}}function Re(e){const t=(i=0)=>c.Z.create("StoryPinResource",e).callCreate().catch((e=>i<I.g1?new Promise((e=>setTimeout(e,I.VP))).then((()=>t(i+1))):Promise.reject(e)));return new Promise(((e,i)=>{t().then((t=>e(t))).catch((e=>i(e)))}))}function Le({contextLogInfo:e,country:t,i18n:i,ideaPinRenamingEnabled:n,isPartner:o,logContextEvent:s,orbacSubjectId:r,pinDraftId:a,storyPinPublishStopwatch:l,userId:d}){return(c,u)=>{const h=u(),{pinDrafts:p,storyPinItemBlocks:_,storyPinItems:g}=h.pinbuilder,x=p[a],{pinItemIds:b}=x,v=b.reduce(((e,t)=>[...e,...g[t].blockIds.map((e=>_[e]))]),[]),I=v.filter((e=>{var t;return["localImage","webImage"].includes(null===(t=e.media)||void 0===t?void 0:t.type)})).length,A=v.filter((e=>{var t;return["localVideo","webVideo"].includes(null===(t=e.media)||void 0===t?void 0:t.type)})).length;return null==l||l.addBinaryAnnotation("image.count",I,"I16"),null==l||l.addBinaryAnnotation("video.count",A,"I16"),null==l||l.addBinaryAnnotation("page.count",p[a].pinItemIds.length,"I16"),c(R(a,"publishing")),s({event_type:8787,event_data:{storyPinData:{isExpressive:!0,numImages:I,numVideos:A,numPages:p[a].pinItemIds.length}},aux_data:{...e?(0,m.V3)(e):{},story_pin_upload_id:a}}),p[a].uploadStartTime||c(Pe(a,new Date)),c((0,P.Z)({pinDraftId:a,validationKey:"save",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:s})).then((()=>(c(B(a,null)),c(function(e,t,i,n,o,s){return(r,a)=>{const l=a(),{pinDraftIdUploadStatusMap:d,storyPinItemBlocks:c,storyPinItems:u}=l.pinbuilder;if(d[e]){const a=Object.keys(d[e].items).filter((t=>"queueEdit"===d[e].items[t].status));if(a.length>0)return a.forEach((a=>{const l=u[a].blockIds.find((e=>{var t;return"localVideo"===(null===(t=c[e].media)||void 0===t?void 0:t.type)}));l&&c[l].media&&c[l].media.signature&&r((0,S.wY)({country:i,i18n:n,ideaPinRenamingEnabled:s,logContextEvent:o,pinDraftId:e,pinItemId:a,userId:t}))})),!0}return!1}}(a,d,t,i,s,n))||c(ze(a))?(c((0,y.g)(a,"queueCreate")),null):c((0,w.Wh)(a,i,s)).then((()=>c((0,w.Eu)(a,s)))).then((()=>c((0,P.Z)({pinDraftId:a,validationKey:"publishStoryPin",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:s})))).then((()=>{const e=u();return Se(a,e,c,r,d,o,i,s)})).then((e=>Promise.all([Re(e),e]))).then((([t,i])=>{const n=u(),{pinDrafts:o}=n.pinbuilder,{data:l}=t.resource_response,h=o[a].uploadStartTime,p=h?new Date-h:-1;c((0,f.Sr)("StoryPinResource",i,t)),c(Q(a,l)),c(ke(a,l,d)),o[a].interestTags.length&&c(Ee(s,a,l.id,3)),c(function({contextLogInfo:e,imageSig:t,numImages:i,numPages:n,numVideos:o,pinDraftId:s,pinId:r,storyPinDataId:a,uploadTime:l},d){return()=>{d({event_type:7590,event_data:{storyPinData:{numImages:i,numPages:n,numVideos:o,isExpressive:!0,storyPinDataIdStr:a}},object_id_str:r,aux_data:{...e?(0,m.V3)(e):{},image_signature:t,pin_id:r,story_pin_upload_id:s,upload_time:l}})}}({contextLogInfo:e,numImages:I,numVideos:A,pinDraftId:a,imageSig:l.imageSignature,numPages:o[a].pinItemIds.length,pinId:l.id,storyPinDataId:l.story_pin_data_id,uploadTime:p},s)),x.storyPinDraftId?c((0,w.XJ)(x.storyPinDraftId,d,r)).finally((()=>c(R(a,"succeeded")))):c(R(a,"succeeded"))}))))).catch((t=>{const o=u(),{pinDrafts:r}=o.pinbuilder,l=r[a].uploadStartTime,d=l?new Date-l:-1,{api_error_code:h,message:p,message_detail:_}=t||{};c(Te(a,t,i,s,n)),s({event_type:7726,event_data:{storyPinData:{isExpressive:!0,numImages:I,numVideos:A,numPages:r[a].pinItemIds.length}},aux_data:{...e?(0,m.V3)(e):{},status_code:h,story_pin_create_failure_message:_||p,story_pin_upload_id:a,upload_time:d}}),c(R(a,"attempted")),c(Pe(a,null))}))}}function Me({pinDraftId:e,storyPinPublishStopwatch:t,userId:i,orbacSubjectId:n,country:o,isPartner:s,i18n:r,ideaPinRenamingEnabled:a,logContextEvent:l,contextLogInfo:h,checkExperiment:p,siteType:g}){return(m,x)=>{const{pinbuilder:{pinDrafts:v}}=x(),{scheduledDate:w,scheduledTime:A,type:E}=v[e];m(w&&A?function({pinDraftId:e,userId:t,i18n:i,logContextEvent:n,orbacSubjectId:o,siteType:s,ideaPinRenamingEnabled:r}){return(a,l)=>{const h=l(),{pinbuilder:{pinDrafts:p,pinItems:_}}=h;a(R(e,"publishing"));const{altText:g,pinItemIds:m,pinItemIndex:f,scheduledDate:x,scheduledTime:v,selectedItem:w}=p[e],A=m[f],{description:E,link:C,media:S,title:j}=_[A];return a((0,P.Z)({pinDraftId:e,validationKey:"save",i18n:i,ideaPinRenamingEnabled:r,logContextEvent:n})).then((()=>{if(a(ze(e)))return u.Z.enabled("multi_pin")||u.Z.enabled("multi_pin_pinner")?(a((0,y.g)(e,"queueCreate")),a(R(e,"uploading"))):a((0,d.Z)(e)),null;if(!x||!v)throw new Error("Cannot schedule a Pin without a scheduled date or time.");const i=new Date(x.getFullYear(),x.getMonth(),x.getDate(),v.getHours(),v.getMinutes(),v.getSeconds()).getTime()/1e3;return Promise.all([je(e,h,0,0,n,o,s),i]).then((([e,t])=>{if(!w)throw new Error("Cannot schedule a Pin without a board.");const i=j.substring(0,I.Ke),n=E.substring(0,I.JO),{image_signature:s,media_upload_id:r}=e,a={board:w.boardId,description:n,image_signature:s,link:C,media_upload_id:r,scheduled_timestamp:t,title:i,...g?{alt_text:g}:Object.freeze({}),...w.sectionId?{section:w.sectionId}:{},...o?{orbac_subject_id:o}:{}};return c.Z.create("ScheduledPinResource",a).callCreate()})).then((i=>{if(!S)throw new Error("Cannot schedule a Pin without an image.");const{data:n}=i.resource_response,s={...n,localMedia:S.src};a(J(e,s)),a((0,b.Tn)(n)),a((0,T.h6)({userId:o||t,increment:1})),a(R(e,"succeeded"))}))})).catch((()=>{throw a(R(e,"attempted")),new Error("Cannot schedule the Pin.")}))}}({pinDraftId:e,userId:i,i18n:r,ideaPinRenamingEnabled:a,logContextEvent:l,orbacSubjectId:n,siteType:g}):"story"===E?Le({contextLogInfo:h,country:o,i18n:r,ideaPinRenamingEnabled:a,isPartner:s,logContextEvent:l,orbacSubjectId:n,pinDraftId:e,storyPinPublishStopwatch:t,userId:n||i}):function({checkExperiment:e,country:t,i18n:i,ideaPinRenamingEnabled:n,isPartner:o,logContextEvent:s,orbacSubjectId:r,pinDraftId:a,siteType:l,userId:h}){return(p,g)=>{const m=g(),{pinbuilder:x}=m,{pinDrafts:b}=x,{status:v}=b[a];return"uploading"!==v&&p(R(a,"publishing")),p((0,P.Z)({pinDraftId:a,validationKey:"save",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:s})).then((()=>(p(L(a,"publishing")),p(ze(a))?(p((0,y.g)(a,"queueCreate")),u.Z.enabled("multi_pin")||u.Z.enabled("multi_pin_pinner")?p(R(a,"uploading")):p((0,d.Z)(a)),null):Se(a,m,p,r,h,o,i,s,e,l).then((e=>Promise.all([c.Z.create("PinResource",e).callCreate(),e]))).then((([e,i])=>{const{data:n}=e.resource_response;p((0,f.Sr)("PinResource",i,e)),u.Z.enabled("videoTagging")&&p(Ee(s,a,n.id)),p(De(a,n,s,i,t,h,r)).then((()=>{p(R(a,"succeeded")),p(L(a,"succeeded")),p((0,_.F)(n.id))}))})).catch((e=>{p(Te(a,e,i,s,n)),p(R(a,"attempted")),p(L(a,"serverError"))}))))).catch((()=>{p(R(a,"created")),p(L(a,"clientError"))}))}}({checkExperiment:p,country:o,i18n:r,ideaPinRenamingEnabled:a,isPartner:s,logContextEvent:l,orbacSubjectId:n,pinDraftId:e,siteType:g,userId:i}))}}function Be({pinDraftId:e,i18n:t,logContextEvent:i,siteType:n,ideaPinRenamingEnabled:o}){return(s,r)=>{const a=r(),{pinbuilder:l}=a,{pinDrafts:d,pinItems:c,storyPinItems:u}=l,{pinItemIds:h,pinItemIndex:p,type:_}=d[e];if("single"===_||"story"===_){const r=h[p],{media:a}="story"===_?u[r]:c[r];if(a&&!a.signature){const{src:l}=a,d=3===n?"ads-builder-pinimage":"pinimage";(0,C.GV)(l,d).then((({signature:n})=>{s((0,A.Sz)(r,{signature:n})),s((0,P.Z)({pinDraftId:e,validationKey:"signal",i18n:t,ideaPinRenamingEnabled:o,logContextEvent:i,options:{fieldToCheck:"image_signature"}})).catch((()=>{}))}))}}}}function Ne({pinDraftId:e,selectedId:t,cachedItems:i,editedMedia:n,canvasJson:o,userId:s,country:r,i18n:a,logContextEvent:l,siteType:d,ideaPinRenamingEnabled:c}){return(u,h)=>{const p=h(),{pinItemIds:_,type:g}=p.pinbuilder.pinDrafts[e];_.forEach((e=>{const{canvasJson:s,media:r}=i[e]||{},a=t===e?n:r,l=t===e?o:s,d="story"===g?E.WZ:A.k8;l&&a&&u(d(e,a,l))}));const{media:m}=i[t];"single"===g&&m&&"localVideo"===m.type?u((0,S.qX)({pinDraftId:e,userId:s,country:r,i18n:a,ideaPinRenamingEnabled:c,logContextEvent:l})):u(Be({pinDraftId:e,i18n:a,logContextEvent:l,siteType:d,ideaPinRenamingEnabled:c}))}}function Fe({pinDraftId:e,userId:t,country:i,isPartner:n,i18n:s,logContextEvent:r,orbacSubjectId:a,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:c}){return(u,h)=>{const{pinbuilder:{pinDrafts:p}}=h(),{pinItemIds:_,pinItemIndex:g,websiteLink:m,websiteMedia:f,selectedItem:x,createMethod:b}=p[e],y="webImage"===f[0].type&&f[0].sourceURL?f[0].sourceURL:m,P=_[g];u((0,A.mO)(P,f[0])),u((0,A.PF)(P,y)),u(Me({pinDraftId:e,userId:t,orbacSubjectId:a,country:i,isPartner:n,i18n:s,logContextEvent:r,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:c})),f.slice(1).forEach((e=>{const h=(0,v.Z)(),p=(0,v.Z)();u((0,o.Z)(h,p,{media:e,link:y})),u(N(h,x)),b&&u(O(h,b)),u(Me({pinDraftId:h,userId:t,orbacSubjectId:a,country:i,isPartner:n,i18n:s,logContextEvent:r,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:c}))}))}}function Ze(e){return(t,i)=>{const n=i(),{pinbuilder:{pinDrafts:o}}=n;for(const[s,r]of Object.entries(o))if(r.pinId===e)return void t((0,d.Z)(s))}}},502890:(e,t,i)=>{i.d(t,{C_:()=>b,OD:()=>f,PF:()=>g,Sz:()=>_,b0:()=>C,f5:()=>w,hL:()=>E,jP:()=>u,k8:()=>y,kS:()=>h,kf:()=>I,lZ:()=>m,mO:()=>p,nh:()=>v,oe:()=>A,yV:()=>P});var n=i(622296),o=i(954931),s=i(214494),r=i(562501),a=i(957025),l=i(277348),d=i(172045),c=i(623320);function u(e,t,i){return{type:"PIN_ITEM_SET_DESCRIPTION_ERROR",payload:{pinItemId:e,descriptionError:t,signals:i}}}function h(e,t,i){return{type:"PIN_ITEM_SET_TITLE_ERROR",payload:{pinItemId:e,titleError:t,signals:i}}}function p(e,t){return{type:"PIN_ITEM_SET_MEDIA",payload:{pinItemId:e,media:t}}}function _(e,t){return{type:"PIN_ITEM_UPDATE_MEDIA",payload:{pinItemId:e,media:t}}}function g(e,t){return{type:"PIN_ITEM_SET_LINK",payload:{pinItemId:e,link:t}}}function m(e,t,i){return{type:"PIN_ITEM_SET_LINK_ERROR",payload:{pinItemId:e,linkError:t,signals:i}}}function f(e,t){return{type:"PIN_ITEM_SET_TAG_ERROR",payload:{pinItemId:e,tagError:t}}}function x(e,t){return(i,n)=>{const{pinbuilder:{pinTags:o}}=n(),{status:s}=o[t];i("created"===s?function(e,t){return{type:"PIN_ITEM_REMOVE_PIN_TAG",payload:{pinItemId:e,pinTagId:t}}}(e,t):(0,l.Cf)(t,"deleted"))}}function b(e,t){return{type:"PIN_ITEM_SET_SELECTED_PIN_TAG_ID",payload:{pinItemId:e,selectedPinTagId:t}}}function y(e,t,i){return{type:"PIN_ITEM_SET_EDITED_IMAGE",payload:{pinItemId:e,editedMedia:t,canvasJson:i}}}function v(e,t){return{type:"PIN_ITEM_UPDATE_DATA",payload:{pinItemId:e,pinItem:t}}}function P(e){const t=(0,a.A$)();return(i,n)=>{const o=n(),{selectedPinTagId:s}=o.pinbuilder.pinItems[e];i(b(e,null)),s&&0===t(o,{pinTagId:s}).length&&i(x(e,s))}}function w(e,t,i,n,r,a){return(l,d)=>{const{pinbuilder:u}=d(),{pinItems:h,pinTags:p,taggedObjects:_}=u;if(!h[e])return Promise.resolve();const{pinTagIds:g}=h[e],m=g.reduce(((e,t)=>{const{taggedObjectIds:i}=p[t];return i.forEach((t=>e.push(_[t]))),e}),[]);return m.length>0?(0,c.Fv)(a).then((e=>{const l=function(e,t,i){return e.map((e=>{const{id:n,link:s,media:r,type:a}=e;return(0,o.Z)(s)&&/\/pin\/[\w-]+\/?$/.test(s)||"pin"===a?{id:n}:(0,c.iX)({link:s,board_id:t,image_url:r?r.url:"",method:"scraped",scrape_metric:{source:"www_url_scrape"},...i?{orbac_subject_id:i}:Object.freeze({})})}))}(m,e.id,a);return Promise.all(l).then((e=>{const o=e.map((e=>e.id)),l=g.map((e=>{const{taggedObjectIds:t,x:i,y:s}=p[e],r=o.splice(0,t.length);return{country:n,height:0,tagged_objects:r,width:0,x_coord:100*i,y_coord:100*s}}));s.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:l,advertiserId:i,...a?{orbacSubjectId:a}:Object.freeze({})}).callUpdate({}).catch((e=>{((e,t)=>{t({event_type:9070,view_type:212,component:13308,element:10973,aux_data:{api_error_code:e.api_error_code,api_error_message:e.message}})})(e,r)}))}))})):Promise.resolve()}}function I(e,t){return{type:"PIN_ITEM_SET_IS_TAGGABLE",payload:{pinItemId:e,isTaggable:t}}}function A(e,t){return i=>{i((0,n.Z)(e,t,{id:t,x:0,y:0})),i(b(e,t))}}function E(e,t,i){return o=>{const s=(0,d.Z)();o((0,n.Z)(e,s,{id:s,x:t,y:i})),o(b(e,s))}}function C(e){const t=(0,r.vd)(),i=(0,a.A$)();return(n,o)=>{const s=o();n(f(e,null));t(s,{pinItemId:e}).forEach((t=>{0===i(s,{pinTagId:t}).length&&n(x(e,t))}))}}},277348:(e,t,i)=>{i.d(t,{Cf:()=>a,Dn:()=>d,Go:()=>l,mz:()=>r,uM:()=>s});var n=i(347619),o=i(647117);function s(e,t,i){return{type:"PIN_TAG_SET_COORDINATES",payload:{pinTagId:e,x:t,y:i}}}function r(e,t,i){return{type:"PIN_TAG_SET_LINK",payload:{pinTagId:e,link:t,error:i}}}function a(e,t){return{type:"PIN_TAG_SET_STATUS",payload:{pinTagId:e,status:t}}}function l(e,t){return(i,n)=>{const{pinbuilder:{taggedObjects:s}}=n(),{status:r}=s[t];i("created"===r?function(e,t){return{type:"PIN_TAG_REMOVE_TAGGED_OBJECT",payload:{pinTagId:e,taggedObjectId:t}}}(e,t):(0,o.k)(t,"deleted"))}}function d(e,t,i){return(o,s)=>{o((0,n.Z)(e,t,{...i,id:t,link:s().pinbuilder.pinTags[e].link})),o(r(e,""))}}},98432:(e,t,i)=>{i.d(t,{Z:()=>P});var n=i(174807),o=i(265696),s=i(998285),r=i(388628),a=i(573545),l=i(172071),d=i(665866),c=i(123463),u=i(314123),h=i(843030),p=i(224496),_=i(554410),g=i(923490),m=i(502890),f=i(172045),x=i(299295),b=i(305782),y=i(472278),v=i(296342);function P({pinDraftId:e,files:t,isPartner:i,userId:P,country:w,i18n:I,logContextEvent:A,orbacSubjectId:E,checkExperiment:C,ideaPinRenamingEnabled:S,isMaxVideo:j}){return(T,D)=>{const k=D(),{pinItemIds:z,pinItemIndex:O,pinItemShareable:R,status:L,type:M}=k.pinbuilder.pinDrafts[e],B=z.length,N="story"===M,F=L;T((0,b.p3)(e,"processing")),T((0,b._B)(e,null));const Z=(t=!1)=>new Promise((i=>{T(t&&N?(0,b.WT)(e,!0):(0,b.p3)(e,F)),i()})),U=t.map((e=>(0,c.Z)({i18n:I,file:e,options:{allowVideo:d.Z.enabled("video"),forStoryPin:N},ideaPinRenamingEnabled:S})));return Promise.all(U).then((t=>{let c=!1;const D=[],L=[],F=z[0],{pinItems:U,storyPinItemBlocks:V,storyPinItems:H}=k.pinbuilder,{description:G,media:W,title:$}=N?H[F]:U[F],q=N&&H[F].blockIds||[],Y=z.length<=1&&(!W&&!N||N&&!q.length),X=z[O],K=H[X];let J=!1;K&&(J=N?!!K.blockIds.find((e=>!!V[e].media)):!!K.media);const Q=!N||N&&!J||Y;if(function(e,t){return"story"===t?e:"carousel"!==t&&e.length>0&&"localVideo"===e[0].type?e.slice(0,1):e.filter((e=>"localVideo"!==e.type))}(t,M).forEach((e=>{"localImage"===e.type?(L.push(e),l.Z.increment("pin_builder.media_upload.image_selected",1,{source:(0,a.Z)(i)})):"localVideo"===e.type?(L.push(e),l.Z.increment("pin_builder.media_upload.video_selected",1,{source:(0,a.Z)(i)})):D.push(e)})),N&&D.length&&function(e){e.forEach((e=>{switch(e.id){case"STORY_PIN_VIDEO_OVER_MAX_DURATION":l.Z.increment("story_pin.upload.video.over_max_duration",1,{app_type:"web"});break;case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":l.Z.increment("story_pin.upload.video.over_max_file_size",1,{app_type:"web"});break;case"VIDEO_UNRECOGNIZED_ENCODING":l.Z.increment("story_pin.upload.video.invalid_format",1,{app_type:"web"})}}))}(D),!L.length)return D.length>0&&(D.length>1?T((0,b._B)(e,I.bt("Impossibile caricare i tuoi file. Assicurati che i file scelti soddisfino i nostri requisiti", "Uh oh, your files could not be uploaded. Please make sure the files chosen fit within our requirements", "pinbuilder.processFiles.invalidFiles", undefined, true))):T((0,b._B)(e,D[D.length-1].message))),Z();D.length>0&&T((0,b._B)(e,I.bt("Impossibile caricare uno o pi dei tuoi file", "Uh oh, one or more of your files could not be uploaded", "pinbuilder.processFiles.invalidFiles", undefined, true)));const ee="carousel"===M||"single"===M&&L.length>1,te=W||L[0],ie=N?x.yX:x.dS,ne=(t,i,o,r,a)=>{const l=r?Object.assign(t,r.getCanvasOutput({width:a})):t;N&&"localImage"===l.type&&delete l.fileSrc;const d=r?r.toJSON():null,x=N?void 0:U[F].link,b={media:l,canvasJson:d};let E=z[O];if(N)if(0===i&&Q){const{media:t}=H[E];c=!!t&&1===L.length,t&&"localVideo"===t.type&&T((0,u.$Z)(e,E)),T((0,y.JQ)({canvasAspectRatio:p.ap,pinDraftId:e,pinItemId:E,pinItem:b})),N&&0===O&&(T((0,h.Uo)(e,E,(0,f.Z)(),v.j7)),T((0,y.d5)(e,E,7)))}else E=(0,f.Z)(),T((0,s.Z)({canvasAspectRatio:p.ap,options:{saveIndex:Y},pinDraftId:e,pinItem:b,pinItemId:E})),N&&T((0,y.d5)(e,E,7));else{const t={...R?{description:G,link:x,title:$}:{},...b};if(0===i){const{media:i}=U[E];c=!!i&&1===L.length,i&&"localVideo"===i.type&&T((0,u.$Z)(e,E)),T((0,m.nh)(E,t))}else E=(0,f.Z)(),T((0,n.Z)(e,E,t))}"localVideo"===l.type?T((0,g.dG)({pinDraftId:e,pinItemId:E,userId:P,country:w,i18n:I,logContextEvent:A,orbacSubjectId:o,checkExperiment:C,ideaPinRenamingEnabled:S,isMaxVideo:j})):"localImage"===l.type&&N&&T((0,_.Uz)(e,E,A))},oe=t=>L.slice(0,Q?ie-B+1:ie-B).reduce(((e,i,n)=>e.then((()=>"localImage"===i.type&&t?(t.resize(i.width,i.height),t.setImage(i.src).then((()=>{let e=te.width;if(t)if(N){const t=i.width/i.height;if(t<1)e=Math.min(v.er,i.width);else{e=Math.min(v.er,i.height)*t}}else{var o,s;const e=Y&&L.length>1?(0,r.Z)(null!==(o=te.width)&&void 0!==o?o:1,null!==(s=te.height)&&void 0!==s?s:1):{w:te.width,h:te.height};t.setAspectRatio(e)}return ne(i,n,E,t,e)}))):ne(i,n,E)))),Promise.resolve()).then((()=>{!D.length&&ee&&!c&&B+L.length<=x.dS&&T((0,n.Z)(e,(0,f.Z)(),null,{saveIndex:!0})),T((0,b._B)(e,D.length?D[D.length-1].message:null)),N||ee||!d.Z.enabled("imageSignals")||T((0,b.th)({pinDraftId:e,i18n:I,logContextEvent:A,ideaPinRenamingEnabled:S}))}));return ee||N?(0,o.Z)().then((e=>{const t=new e(document.createElement("div"));return oe(t).then((()=>Z(!0)))})):oe().then((()=>Z(!0)))}))}}},264938:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(838548),o=i(474394);function s(e,t,i,s,r,a,l,d){return(c,u)=>{const{pinbuilder:h}=u(),{selectedPinDraftIds:p}=h;p.forEach((u=>{c((0,o.deselectPinBuilderPinDraft)(u)),c((0,n.Z)({pinDraftId:u,storyPinPublishStopwatch:void 0,userId:e,orbacSubjectId:a,country:t,isPartner:i,i18n:s,logContextEvent:r,contextLogInfo:void 0,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:!1}))}))}}},798477:(e,t,i)=>{function n(e){return{type:"PIN_BUILDER_REMOVE_PIN_DRAFT_ID",payload:{pinDraftId:e}}}i.d(t,{Z:()=>n})},838548:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(954931),o=i(668627),s=i(798477),r=i(214494),a=i(414327),l=i(200915),d=i(623320);function c(e,t,i){return e.map((e=>{const{id:o,link:s,media:r,type:a}=e;return!!(0,n.Z)(s)&&/\/pin\/[\w-]+\/?$/.test(s)||"pin"===a?{id:o}:(0,d.iX)({link:s,board_id:t,image_url:r?r.url:"",method:"scraped",scrape_metric:{source:"www_url_scrape"},...i?{orbac_subject_id:i}:Object.freeze({})})}))}function u(e,t,i,n,u){return(h,p)=>{const _=p(),{pinItems:g,pinTags:m,taggedObjects:f}=_.pinbuilder,{pinTagIds:x}=g[e],b=x.map((e=>{const{status:o}=m[e];if("deleted"===o){const{taggedObjectIds:i}=m[e],n=i.filter((e=>"deleted"===f[e].status));return function(e,t,i,n,o){return r.Z.create("VisualLinkPinTagResource",{pinTagId:e,id:t,orbacSubjectId:o,taggedObjectIds:i}).callDelete()}(e,t,n,0,u)}return"created"===o?function(e,t,i,n,o,s){const{pinbuilder:a}=i,{pinTags:l,taggedObjects:u}=a,{taggedObjectIds:h,x:p,y:_}=l[e];return(0,d.Fv)(s).then((e=>{const i=c(h.map((e=>u[e])),e.id,s);return Promise.all(i).then((e=>r.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:[{country:n,height:0,tagged_objects:e.map((e=>e.id)),width:0,x_coord:100*p,y_coord:100*_}],...s?{orbacSubjectId:s}:Object.freeze({})}).callUpdate().catch((e=>{((e,t)=>{t({event_type:9070,view_type:212,component:13308,element:10973,aux_data:{api_error_code:e.api_error_code,api_error_message:e.message}})})(e,o)}))))}))}(e,t,_,i,n,u):"edited"===o?function(e,t,i,n){const{pinTags:o,taggedObjects:s}=i.pinbuilder,{pinTagKey:a,taggedObjectIds:l,x:u,y:h}=o[e];return(0,d.Fv)(n).then((i=>{const o=c(l.filter((e=>"created"===s[e].status)).map((e=>s[e])),i.id,n);return Promise.all(o).then((i=>{const o=r.Z.create("VisualLinkTaggedObjectsBatchResource",{pinTagKey:a,taggedObjectIds:i.map((e=>e.id)),taggedObjectSource:"pinterest-client",...n?{orbac_subject_id:n}:Object.freeze({})}).callUpdate(),d=r.Z.create("VisualLinkTaggedObjectsResource",{id:t,pinTagId:e,taggedObjectIds:l.filter((e=>"deleted"===s[e].status))}).callDelete();return Promise.all([o,d]).then((()=>r.Z.create("VisualLinkPinTagResource",{pinTagId:e,id:t,pinTag:{dimensions:{x:100*u,y:100*h}},...n?{orbacSubjectId:n}:Object.freeze({})}).callCreate()))}))}))}(e,t,_,u):null}));Promise.all(b).then((()=>{h((0,a.jB)("PinResource",(0,o.Z)(t))),h((0,a.jB)("VisualLinkTopTaggedObjectsResource",(0,l.topTaggedObjectsResourceOptions)(t,!0))),h((0,s.Z)(t))}))}}var h=i(665866),p=i(305782),_=i(458253),g=i(474394),m=i(923490);function f({pinDraftId:e,storyPinPublishStopwatch:t,userId:i,orbacSubjectId:n,country:o,isPartner:s,i18n:r,logContextEvent:a,contextLogInfo:l,checkExperiment:d,siteType:c,ideaPinRenamingEnabled:f}){return(x,b)=>{const{pinbuilder:{pinDrafts:y,pinDraftIds:v,pinItems:P,storyPinItems:w}}=b(),{mode:I,pinItemIds:A,pinItemIndex:E,type:C}=y[e],S=A[E],{media:j}="story"===C?w[S]:P[S];if("create"===I){if(j&&["localVideo","webVideo"].includes(j.type)&&h.Z.enabled("disabledVideoPinCreation"))return void x((0,g.setShowDisabledPinCreationBanner)(!0));if(j&&["assetImage","localImage","webImage"].includes(j.type)&&h.Z.enabled("disabledPinCreation"))return void x((0,g.setShowDisabledPinCreationBanner)(!0));if(j&&"localVideo"===j.type&&0===v.length)return x((0,m.dG)({pinDraftId:e,pinItemId:S,userId:i,country:o,i18n:r,logContextEvent:a,checkExperiment:d,ideaPinRenamingEnabled:f})),void x((0,_.g)(e,"queueCreate"));x((0,p.iX)({checkExperiment:d,contextLogInfo:l,country:o,i18n:r,ideaPinRenamingEnabled:f,isPartner:s,logContextEvent:a,orbacSubjectId:n,pinDraftId:e,siteType:c,storyPinPublishStopwatch:t,userId:i}))}else"edit"===I&&x(function(e,t,i,n){return(o,s)=>{const{pinbuilder:{pinDrafts:r}}=s(),{pinItemIds:a,pinItemIndex:l}=r[e];o(u(a[l],e,t,i,n))}}(e,o,a,n))}}},458253:(e,t,i)=>{function n(e,t){return{type:"PIN_BUILDER_SET_PIN_DRAFT_UPLOAD_STATUS",payload:{pinDraftId:e,status:t}}}i.d(t,{g:()=>n})},647117:(e,t,i)=>{function n(e,t){return{type:"TAGGED_OBJECT_SET_STATUS",payload:{taggedObjectId:e,status:t}}}i.d(t,{k:()=>n})},827628:(e,t,i)=>{i.d(t,{Z:()=>c,d:()=>d});var n=i(395164),o=i(346360),s=i(305782),r=i(502890),a=i(472278),l=i(451105);function d(e,t,i){return(o,d)=>{e.forEach((e=>{const c=e.dispatchId||"";switch((0,n.T)({name:"React PinBuilder Exception",message:Array.isArray(e.message)?e.message.join(""):e.message,message_detail:JSON.stringify({dispatchId:e.dispatchId,pinDraftId:i})}),(0,l.GB)(e.id,e.message,t),e.id){case"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT":o((0,s.KN)(c,e.message));break;case"BOARD_MISSING":o((0,s.xb)(c,e.message));break;case"DATE_TOO_FAR_IN_FUTURE":case"DATE_TOO_FAR_IN_FUTURE_EXTENDED":case"DATE_IN_PAST":case"DATE_MISSING":o((0,s.Yr)(c,e.message));break;case"CAROUSEL_DIFFERENT_RATIOS":o((0,s.lT)(c,e.message));break;case"CAROUSEL_INVALID_FORMAT":case"MEDIA_MISSING":o((0,s._B)(c,e.message));break;case"TIME_MISSING":o((0,s.Ve)(c,e.message));break;case"TITLE_INVALID":o((0,r.kS)(c,e.message));break;case"DESCRIPTION_INVALID":o((0,r.jP)(c,e.message));break;case"IMAGE_IS_BLURRY":case"IMAGE_IS_SCREENSHOT":case"LINK_LOADS_SLOWLY":case"LINK_IS_AGGREGATOR":case"IMAGE_UNDER_MIN_DIMENSIONS":case"VIDEO_UNDER_MIN_DIMENSIONS":case"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO":o((0,r.nh)(c,{signals:{[e.id]:!0}}));break;case"TAG_INVALID":case"URL_INVALID":case"URL_IS_REDIRECT":case"URL_MISSING":case"URL_UNREACHABLE":case"URL_CONTAINS_PORN_DOMAIN":{const{pinbuilder:t}=d(),{pinDrafts:i,pinDraftIds:n}=t,s="URL_UNREACHABLE"===e.id||"URL_CONTAINS_PORN_DOMAIN"===e.id?{[e.id]:!0}:void 0;n&&"story"===i[n[0]].type?(o((0,a.qG)(c,e.message)),o((0,a.pq)(c,{isFetching:!1}))):o((0,r.lZ)(c,e.message,s));break}case"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO":case"STORY_PIN_COVER_PAGE_TITLE_MISSING":case"STORY_PIN_TITLE_MISSING":case"STORY_PIN_NOT_ENOUGH_PAGES":case"STORY_PIN_VIDEO_ON_COVER":o((0,s.lT)(c,e.message))}}))}}const c=function({pinDraftId:e,validationKey:t,i18n:i,logContextEvent:s,options:r,ideaPinRenamingEnabled:a}){return(l,c)=>l(function({pinDraftId:e,validationKey:t,i18n:i,ideaPinRenamingEnabled:s,options:r}){return a=>{try{switch(t){case"save":return a((0,o.x)(e,i,s));case"edit":return a((0,o.J6)(e,i,s));case"publishStoryPin":return a((0,o.f5)(e,i,s));case"link":return Promise.all(a((0,o.Oc)(e,i,s))).then((e=>e.filter(Boolean).flat()));case"signal":const t=r?r.fieldToCheck:null;return a((0,o.DY)(e,i,t,s)).then((e=>e.filter(Boolean)));default:return Promise.resolve([])}}catch(l){return(0,n.T)({name:"React PinBuilder Validation Exception",message:l.message,message_detail:JSON.stringify({pinDraftId:e,validationKey:t,options:r}),...l.lineNumber&&{line:l.lineNumber},...l.stack&&{stack:l.stack}}),Promise.resolve([])}}}({pinDraftId:e,validationKey:t,i18n:i,ideaPinRenamingEnabled:a,options:r})).then((t=>{if(t.length>0&&(l(d(t,s,e)),t.some((e=>e.blocking))))throw new Error;return Promise.resolve()}))}},923490:(e,t,i)=>{i.d(t,{dG:()=>b,qX:()=>y,wY:()=>x});var n=i(801815),o=i(172071),s=i(665866),r=i(840839),a=i(471155),l=i(299295),d=i(623320),c=i(458253),u=i(502890),h=i(843030),p=i(472278),_=i(724565),g=i(474394),m=i(305782),f=i(314123);function x({country:e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n,pinDraftId:o,pinItemId:s,userId:r}){return(a,l)=>{const c=l(),{pinbuilder:{storyPinItemBlocks:u,storyPinItems:p}}=c;if(p[s]&&p[s].blockIds.length){const c=p[s].blockIds.find((e=>"story_pin_video_block"===u[e].type)),x=c?u[c].media:null;if(c&&x&&"localVideo"===x.type&&x.signature&&void 0!==x.trimmedEndTime&&void 0!==x.trimmedStartTime&&(0!==x.trimmedStartTime||x.trimmedEndTime!==x.duration)){const{signature:u,trimmedEndTime:p,trimmedStartTime:b}=x;a((0,g.setPinBuilderPinItemUploadStatus)(o,s,"uploadingEdit")),a((0,h.PF)(o,c,{signature:null})),(0,d.Yv)(u,"video-story-pin",{time_start:(0,_.TA)(b),time_end:(0,_.TA)(p)},{onStartEdits:e=>a((0,h.PF)(o,c,{uploadId:e}))}).then((d=>{const u=l(),{pinbuilder:p}=u,{pinDraftIdUploadStatusMap:_}=p;a((0,h.PF)(o,c,{signature:d.signature})),_[o]&&a((0,g.setPinBuilderPinItemUploadStatus)(o,s,"completed"));const x=Object.keys(_[o].items).filter((e=>_[o].items[e].status.startsWith("uploading")||_[o].items[e].status.startsWith("queue")));(0===x.length||1===x.length&&x[0]===s)&&"queueCreate"===_[o].status&&(a((0,m.iX)({pinDraftId:o,userId:r,country:e,isPartner:!1,i18n:t,logContextEvent:n,ideaPinRenamingEnabled:i})),a((0,f.y2)(o)))})).catch((()=>{a((0,m._B)(o,t.bt("Caricamento della modifica video non riuscito", "Video edit upload failed", "pinbuilder.upload.video.edit.error", undefined, true))),a((0,m.p3)(o,"attempted")),a((0,h.PF)(o,c,{signature:u})),a((0,g.setPinBuilderPinItemUploadStatus)(o,s,"queueEdit"))}))}}}}function b({pinDraftId:e,pinItemId:t,userId:i,country:n,i18n:d,logContextEvent:_,orbacSubjectId:b,checkExperiment:y,ideaPinRenamingEnabled:v,isMaxVideo:P}){return(w,I)=>{const A=I(),{pinbuilder:E}=A,{pinDrafts:C,pinDraftIds:S,pinItems:j,storyPinItemBlocks:T,storyPinItems:D}=E,{pinItemIds:k,status:z,type:O}=C[e],R="story"===O,{media:L}=R?D[t]:j[t],M=R?k.findIndex((e=>e===t)):void 0,B=R&&D[t]&&D[t].blockIds.length?D[t].blockIds.find((e=>"story_pin_video_block"===T[e].type)):null,N=B?T[B].media:L;if(!N||"localVideo"!==N.type)throw new Error("Unable to upload video - media is invalid.");w((0,m._B)(e,null)),"succeeded"===z&&w((0,m.p3)(e,"uploading")),w((0,c.g)(e,"uploading")),w((0,g.addPinBuilderPinDraftItemUpload)(e,t,{status:"uploading",xhr:null}));let F,Z=e=>w((0,p.Bl)(t,{uploadProgress:Math.round(e.loaded/e.total*100)}));R&&B&&(Z=t=>w((0,h.PF)(e,B,{uploadProgress:Math.round(t.loaded/t.total*100)}))),F=R?"video-story-pin":s.Z.enabled("adsVideoPipeline")&&"ad_creation"===s.Z.scenario()?"ads-video":"video",P&&["ads-video","video"].includes(F)&&(F="premiere-ads-video");const U=(b,P=0)=>{(0,a.Z)(N.fileSrc,F,R||!s.Z.enabled("videoEditing"),{onCancelUpload:e=>function(e,t,i,n){(0,r.Z)(e,{event_type:7684,aux_data:{file_size_mb:i.fileSrc.size/Math.pow(1024,2),media_upload_id:t,story_pin_page_id:n,video_duration:i.duration}})}(_,e,N,M),onFailureUpload:({message:e,failureReason:t,uploadId:i})=>function(e,t,i,n,s,a){(0,r.Z)(e,{event_type:8786,aux_data:{error_message:i,file_size_mb:s.fileSrc.size/Math.pow(1024,2),media_upload_failure_reason:n||"general",media_upload_id:t,story_pin_page_id:a,video_duration:s.duration}}),o.Z.increment("video_pin_creation.uploading.failure",1,{failure_reason:i})}(_,i,e,t,N,M),onFinishProcessing:({processingTime:e,signature:t,uploadId:i})=>function(e,t,i,n,o,s){(0,r.Z)(e,{event_type:7520,aux_data:{file_size_mb:o.fileSrc.size/Math.pow(1024,2),media_upload_id:t,processing_time:i,story_pin_page_id:s,video_duration:o.duration,video_signature:n}}),(0,r.Z)(e,{event_type:7521,aux_data:{file_size_mb:o.fileSrc.size/Math.pow(1024,2),media_upload_id:t,story_pin_page_id:s,video_duration:o.duration,video_signature:n}})}(_,i,e,t,N,M),onFinishUpload:({amzId2:e,amzRequestId:t,statusCode:i,uploadId:n,uploadTime:s})=>function({amzId2:e,amzRequestId:t,statusCode:i,storyPageNumber:n,uploadId:s,uploadTime:a,video:l},d){(0,r.Z)(d,{event_type:7519,aux_data:{aws_tracking_ids:JSON.stringify([t,e]),file_size_mb:l.fileSrc.size/Math.pow(1024,2),media_upload_id:s,status_code:i,story_pin_page_id:n,upload_time:a,video_duration:l.duration}}),o.Z.increment("video_pin_creation.uploading.success",1,{app_type:"web"})}({amzId2:e,amzRequestId:t,statusCode:i,storyPageNumber:M,uploadId:n,uploadTime:s,video:N},_),onProgress:e=>R?Z(e):w((0,u.Sz)(t,{uploadProgress:Math.round(e.loaded/e.total*100)})),onStartProcessing:({signature:e,uploadId:t})=>function(e,t,i,n,o){(0,r.Z)(e,{event_type:8809,aux_data:{file_size_mb:n.fileSrc.size/Math.pow(1024,2),media_upload_id:t,story_pin_page_id:o,video_duration:n.duration,video_signature:i}})}(_,t,e,N,M),onStartUpload:({uploadId:i})=>w(function(e,t,i,n,o,s,a){return(l,d)=>{const c=d(),{pinbuilder:_}=c,{storyPinItemBlocks:g,storyPinItems:m}=_;if(s)if(m[t]&&m[t].blockIds.length){const n=m[t].blockIds.find((e=>"story_pin_video_block"===g[e].type));n&&l((0,h.PF)(e,n,{uploadId:i}))}else l((0,p.Bl)(t,{uploadId:i}));else l((0,u.Sz)(t,{uploadId:i}));(0,r.Z)(o,{event_type:7518,aux_data:{file_size_mb:n.fileSrc.size/Math.pow(1024,2),media_upload_id:i,story_pin_page_id:a,video_duration:n.duration}})}}(e,t,i,N,_,R,M)),setXhr:i=>w((0,g.setPinBuilderPinItemUploadXhr)(e,t,i))}).then((o=>{const r=I(),{pinbuilder:a}=r,{pinDraftIdUploadStatusMap:l}=a;if(l[e]&&w((0,g.setPinBuilderPinItemUploadXhr)(e,t,null)),R)if(B){if(w((0,h.PF)(e,B,{signature:o.signature})),l[e]&&l[e].items[t]&&"queueEdit"===l[e].items[t].status)return void("queueCreate"===l[e].status&&w(x({country:n,i18n:d,ideaPinRenamingEnabled:v,logContextEvent:_,pinDraftId:e,pinItemId:t,userId:i})))}else w((0,p.Bl)(t,{signature:o.signature}));else w((0,u.Sz)(t,{signature:o.signature}));l[e]&&w((0,g.setPinBuilderPinItemUploadStatus)(e,t,"completed"));const P=Object.keys(l[e].items).filter((t=>l[e].items[t].status.startsWith("uploading")||l[e].items[t].status.startsWith("queue")));"queueCreate"===l[e].status&&(0===P.length||1===P.length&&P[0]===t)&&(w((0,m.iX)({pinDraftId:e,userId:i,orbacSubjectId:b,country:n,isPartner:!1,i18n:d,logContextEvent:_,checkExperiment:y,ideaPinRenamingEnabled:v})),w((0,c.g)(e,"completed")));(0===P.length||1===P.length&&!!l[e].items[t])&&(s.Z.enabled("multi_pin")||s.Z.enabled("multi_pin_pinner")||s.Z.enabled("offsite_pin_creation_multi_select")||R||"queueCreate"!==l[e].status)&&w((0,f.y2)(e))})).catch((i=>{const n=I(),{pinbuilder:o}=n,{pinDraftIdUploadStatusMap:s}=o;if(!i||i.isError)if(R&&P<l.g1)U(b,P+1);else{const i=S.length>1?d.bt("Caricamento non riuscito", "Upload failed", "pinbuilder.upload.video.upload.error", undefined, true):d.bt("Caricamento non riuscito. Riprovare?", "Upload failed. Try again?", "pinbuilder.upload.video.upload.error", undefined, true);w((0,m._B)(e,i)),w((0,m.p3)(e,"attempted")),w((0,f.su)(e,t)),1===Object.keys(s[e].items).length&&w((0,f.y2)(e))}}))};U(b)}}function y({pinDraftId:e,userId:t,country:i,i18n:o,logContextEvent:s,ideaPinRenamingEnabled:r}){return(a,l)=>{const c=l(),{pinbuilder:h}=c,{pinDrafts:p,pinItems:_,pinDraftIds:g}=h,{pinItemIds:x,pinItemIndex:b,type:y}=p[e];if("single"===y){const c=x[b],{media:h,canvasJson:p}=_[c],y=h&&h.signature?h.signature:null;if(h&&y){const _=p?(0,n.Z)(h,p):null;_&&(0,d.Yv)(y,"video",_,{onStartEdits:e=>a((0,u.Sz)(c,{uploadId:e}))}).then((()=>{const n=l(),{pinbuilder:d}=n,{pinDraftIdUploadStatusMap:c}=d;"queueCreate"===c[e].status&&a((0,m.iX)({pinDraftId:e,userId:t,country:i,isPartner:!1,i18n:o,logContextEvent:s,ideaPinRenamingEnabled:r})),a((0,f.y2)(e))})).catch((()=>{const t=g.length>1?o.bt("Caricamento non riuscito", "Upload failed", "pinbuilder.upload.video.edit.error", undefined, true):o.bt("Caricamento non riuscito. Riprovare?", "Upload failed. Try again?", "pinbuilder.upload.video.edit.error", undefined, true);a((0,m._B)(e,t)),a((0,m.p3)(e,"attempted")),a((0,f.y2)(e))}))}}}}},31100:(e,t,i)=>{i.d(t,{Jc:()=>l,TX:()=>r,Tn:()=>s,hg:()=>a});var n=i(90326),o=i(214494);function s(e){return{type:"SCHEDULED_PIN_CREATE_COMPLETE",payload:{scheduledPin:e}}}function r(e,t,i){return s=>(s(function(e){return{type:"SCHEDULED_PIN_DELETE_COMPLETE",payload:{scheduledPinId:e}}}(e)),s((0,n.h6)({userId:t,increment:-1})),o.Z.create("ScheduledPinResource",{scheduled_pin_id:e,...i?{orbac_subject_id:i}:{}}).callDelete())}function a(e,t,i){return s=>(s(function(e){return{type:"SCHEDULED_PIN_PUBLISH_COMPLETE",payload:{scheduledPinId:e}}}(e)),s((0,n.h6)({userId:t,increment:-1})),o.Z.create("ScheduledPinResource",{method:"publish",scheduled_pin_id:e,...i?{orbac_subject_id:i}:{}}).callCreate())}function l(e){return t=>{const{boardId:i,description:n,ideaPinDetails:s,ideaPinDetailsTemplateType:r,link:a,sectionId:l,scheduledPinId:d,scheduledTimestamp:c,userMentionTags:u,title:h}=e,p=o.Z.create("ScheduledPinResource",{board:i,description:n,idea_pin_details:s,idea_pin_details_template_type:r,link:a,section:l,scheduled_pin_id:d,scheduled_timestamp:c,user_mention_tags:u,title:h}).callUpdate();return t({type:"SCHEDULED_PIN_UPDATE_COMPLETE",payload:e}),p}}},748254:(e,t,i)=>{function n(e,t,i,n){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:i,options:n}}}i.d(t,{Z:()=>n})},690374:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(172071),o=i(214494);var s=i(689070),r=i(665866),a=i(349700),l=i(172045);const d=[200,201,204];async function c(e,t,i,n,o,s,r){const l=o.upload_id||"",c=o.upload_url||"",u=o.upload_parameters||{};null==s||s.addSubspan({name:`${t}_page_publish-${l}`,startTime:performance.now(),bypassIsTimingCheck:!0});const{onFailure:h,onFinishUpload:p,onStartUpload:_,onUploadProgress:g}=n;_&&_(l);const m=new Date,f=new XMLHttpRequest;"image"===t?f.open("POST",c.replace("pinterest-media-upload.s3.amazonaws","u.pinimg"),!0):f.open("POST",c,!0),f.onload=()=>{if(d.includes(f.status)){if(p){const e=(new Date-m)/1e3,t=f.getResponseHeader("x-amz-request-id"),i=f.getResponseHeader("x-amz-id-2");p(l,{amzId2:i,amzRequestId:t,uploadTimeSec:e,statusCode:f.status})}}else{const e="image"===t?1:8,i=(0,a.nk)(r.bt("Impossibile caricare {{ mediaType }} con il codice stato XHR: {{ xhrStatus }}", "Failed to upload the {{ mediaType }} with XHR status code: {{ xhrStatus }}", "uploadMedia.xhrOnLoad.failure", undefined, true),{mediaType:t,xhrStatus:f.status}).join();h({uploadId:l,errorMsg:i,mediaUploadFailureReason:e,retry:!0})}},f.onerror=()=>{const e="image"===t?1:8,i=(0,a.nk)(r.bt("Impossibile caricare {{ mediaType }}", "Failed to upload the {{ mediaType }}", "uploadMedia.xhrOnError.failure", undefined, true),{mediaType:t}).join();h({uploadId:l,errorMsg:i,mediaUploadFailureReason:e,retry:!0})},g&&(f.upload.onprogress=e=>{g(Math.round(e.loaded/e.total*100))});const x=new FormData;return Object.keys(u).forEach((e=>{e&&u[e]&&x.append(e,u[e])})),x.append("file",e),f.send(x),{uploadId:l,xhr:f}}var u=i(623320);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=["webImage","webVideo"];class _{constructor(e){h(this,"upload",(()=>{})),h(this,"onFailure",(({errorMsg:e,mediaUploadFailureReason:t,retry:i,uploadId:n})=>{i&&this.numAttempts<this.maxUploadAttempts?this.upload():(this.status="failed",this.callbackHandlers.onFailure({errorMsg:e,mediaUploadFailureReason:t,uploadId:n,storyPinPublishStopwatch:this.storyPinPublishStopwatch}))})),h(this,"onFinishProcessing",((e,t)=>{this.signature=t.signature,this.callbackHandlers.onFinishProcessing&&this.callbackHandlers.onFinishProcessing(e,t,this.storyPinPublishStopwatch)})),h(this,"onFinishUpload",((e,t)=>{this.status="uploaded",this.callbackHandlers.onFinishUpload&&this.callbackHandlers.onFinishUpload(e,t,this.storyPinPublishStopwatch)})),h(this,"onStartProcessing",((e,t)=>{this.signature=t.signature,this.callbackHandlers.onStartProcessing&&this.callbackHandlers.onStartProcessing(e,t,this.storyPinPublishStopwatch)})),h(this,"cancel",(()=>{this.xhr&&(this.xhr.abort(),this.callbackHandlers.onCancel&&this.callbackHandlers.onCancel(this.uploadId||"",this.storyPinPublishStopwatch))})),this.i18n=e.i18n,this.maxUploadAttempts=e.maxUploadAttempts||1,this.media=e.media,this.numAttempts=0,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.vipRegistration=e.vipRegistration,this.vipType=e.vipType,this.callbackHandlers=e.callbackHandlers}}class g extends _{constructor(e){super(e),h(this,"getClassName",(()=>"ImageUpload")),h(this,"onProcessingFailed",(e=>{if(this.uploadId){const t=(0,a.nk)(this.i18n.bt("Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "MediaUpload.ImageUpload.onProcessingFailed", undefined, false),{failureCode:e,uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:t,mediaUploadFailureReason:3,mediaStatusFailureReason:e})}})),h(this,"onProcessingTimeout",(()=>{if(this.uploadId){const e=(0,a.nk)(this.i18n.bt("Timed out on processing image with uploadId {{ uploadId }}", "Timed out on processing image with uploadId {{ uploadId }}", "MediaUpload.ImageUpload.onProcessingTimeout", undefined, false),{uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:e,mediaUploadFailureReason:4})}})),h(this,"upload",(()=>{"localImage"===this.media.type&&(this.numAttempts+=1,c((0,u.Mi)(this.media.src),"image",this.vipType,{onFailure:e=>this.onFailure(e),onFinishUpload:this.onFinishUpload,onStartUpload:this.callbackHandlers.onStartUpload,onUploadProgress:this.callbackHandlers.onUploadProgress},this.vipRegistration,this.storyPinPublishStopwatch,this.i18n).then((e=>{this.uploadId=e.uploadId,this.xhr=e.xhr,this.status="uploading"})))})),this.signature=p.includes(e.media.type)?e.media.signature:null,this.status=p.includes(e.media.type)?"uploaded":"pending"}}class m extends _{constructor(e){super(e),h(this,"getClassName",(()=>"VideoUpload")),h(this,"onProcessingFailed",(e=>{if(this.uploadId){const t=(0,a.nk)(this.i18n.bt("Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "MediaUpload.VideoUpload.onProcessingFailed", undefined, false),{uploadId:this.uploadId,failureCode:e}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:t,mediaUploadFailureReason:10,mediaStatusFailureReason:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch})}})),h(this,"onProcessingTimeout",(()=>{if(this.uploadId){const e=(0,a.nk)(this.i18n.bt("Timed out on processing video with uploadId {{ uploadId }}", "Timed out on processing video with uploadId {{ uploadId }}", "MediaUpload.VideoUpload.onProcessingTimeout", undefined, false),{uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:e,mediaUploadFailureReason:11,storyPinPublishStopwatch:this.storyPinPublishStopwatch})}})),h(this,"upload",(()=>{"localVideo"===this.media.type&&(this.numAttempts+=1,c(this.media.fileSrc,"video",this.vipType,{onFailure:e=>this.onFailure(e),onFinishUpload:this.onFinishUpload,onStartUpload:this.callbackHandlers.onStartUpload,onUploadProgress:this.callbackHandlers.onUploadProgress},this.vipRegistration,this.storyPinPublishStopwatch,this.i18n).then((e=>{this.uploadId=e.uploadId,this.xhr=e.xhr,this.status="uploading"})))})),this.signature=p.includes(e.media.type)?e.media.signature:null,this.status=p.includes(e.media.type)?"uploaded":"pending"}}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const x=1e3,b=3e3,y=1e3;class v{constructor(e){var t=this;f(this,"getMediaRegistrationsFromVIP",(async function({durationMs:e,mediaType:i,count:o=20}){var r;t.vipRegistrationPool[i].fetchingData=!0,t.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Getting media registration urls for ${i}s`);const d=[];for(;o>0;)d.push({id:(0,l.Z)(),media_type:"image"===i?"image-story-pin":"video-story-pin",...e&&t.multipageDeprecationBackendSignalsEnabled?{upload_aux_data:{clips:[{durationMs:e,isFromImage:"image"===i,startTimestampMs:-1}]}}:{}}),o-=1;const c=t.vipRegistrationPool[i].requestCount;return t.vipRegistrationPool[i].requestCount+=1,null===(r=t.storyPinPublishStopwatch)||void 0===r||r.subspanStart({name:`${i}_registration_${c}`,bypassIsTimingCheck:!0}),(0,s.Z)({url:"/v3/media/uploads/register/batch/",method:"POST",data:{media_info_list:JSON.stringify(d)},callOptions:{showError:3===t.vipRegistrationPool[i].retries}}).then((e=>{var n,o;const s="object"==typeof(null===(n=e.resource_response)||void 0===n?void 0:n.data)?Object.values(e.resource_response.data):[];t.vipRegistrationPool[i].data=s,t.vipRegistrationPool[i].retries=0,t.vipRegistrationPool[i].fetchedLast=performance.now(),t.vipRegistrationPool[i].fetchingData=!1,null===(o=t.storyPinPublishStopwatch)||void 0===o||o.subspanStop({name:`${i}_registration_${c}`,bypassIsTimingCheck:!0})}),(o=>{var s;n.Z.increment(`storypin.publish.registration.${i}.failure`,1,{reason:o.message,retryCount:t.vipRegistrationPool[i].retries}),t.vipRegistrationPool[i].retries<3?(t.inDebugMode&&console.log(`${i} registration failed. ${3-t.vipRegistrationPool[i].retries} retries remaining`,o),t.vipRegistrationPool[i].retries+=1,t.getMediaRegistrationsFromVIP({durationMs:e,mediaType:i})):(t.inDebugMode&&console.log(`${i} registration failed.`,o),t.onFailure((0,a.nk)(t.i18n.bt("Failed to register {{ mediaType }} upload with message: {{ error }}", "Failed to register {{ mediaType }} upload with message: {{ error }}", "MediaUploadManager.getMediaRegistrationsFromVIP.failure", undefined, false),{error:o,mediaType:i}).join(""),"image"===i?13:7)),null===(s=t.storyPinPublishStopwatch)||void 0===s||s.subspanStop({name:`${i}_registration_${c}`,bypassIsTimingCheck:!0})}))})),f(this,"initVIPRegistrationPools",(()=>{this.getMediaRegistrationsFromVIP({mediaType:"image"}),this.getMediaRegistrationsFromVIP({mediaType:"video"})})),f(this,"checkAllUploadsProcessingOrCompleted",(()=>{let e=0;const t=Object.keys(this.mediaUploadsMap);for(const i of t){const t=this.mediaUploadsMap[i];this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - Status of media upload ID",i,t.mediaUpload.getClassName(),t.status),("completed"===t.status||"processing"===t.status&&"VideoUpload"===t.mediaUpload.getClassName())&&(e+=1)}return this.inDebugMode&&(console.log("[MEDIA UPLOAD MANAGER] - Checking if all upload processes completed"),console.log(`Completed ${e} out of ${Object.keys(this.mediaUploadsMap).length}`)),e===Object.keys(this.mediaUploadsMap).length})),f(this,"checkUploadsFailed",(()=>!!Object.keys(this.mediaUploadsMap).find((e=>"failed"===this.mediaUploadsMap[e].status&&this.mediaUploadsMap[e].processingRetryCount>2)))),f(this,"updateUploadStatus",((e,t)=>this.mediaUploadsMap[e].status=t)),f(this,"updateVIPStatusMap",(e=>{const t=new Date,i=({mediaId:e,mediaUpload:i,signature:n,uploadId:o})=>{const s=(t-this.vipStatusMap[o].timeSet)/x;i.onFinishProcessing(o,{processingTimeSec:s,signature:n}),this.updateUploadStatus(e,"completed")};for(const n of Object.keys(e)){const{failureCode:o,signature:s,status:a}=e[n];if(n in this.vipStatusMap){const e=this.vipStatusMap[n].mediaId,l=this.mediaUploadsMap[e];if(o&&this.mediaUploadsMap[e].processingRetryCount>2){l.mediaUpload.onProcessingFailed(o),this.updateUploadStatus(e,"failed");break}if(this.vipStatusMap[n].status!==a||"failed"===a)if(this.vipStatusMap[n]={...this.vipStatusMap[n],status:a,timeSet:t},"processing"===a){l.mediaUpload.onStartProcessing(n,{signature:s});r.Z.enabled("ideaPinPublishBeforeMediaCompletedCloseupPwt")&&r.Z.enabled("ideaPinPublishPwtPublishBeforeMediaCompleted")?(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - Skipping media completion"),i({mediaId:e,mediaUpload:l.mediaUpload,signature:s,uploadId:n})):this.updateUploadStatus(e,"processing")}else"succeeded"===a?(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - Waited for media completion"),i({mediaId:e,mediaUpload:l.mediaUpload,signature:s,uploadId:n})):"failed"===a&&(this.mediaUploadsMap[e].processingRetryCount+=1,this.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Media upload ${n} failed, but will keep checking ${3-this.mediaUploadsMap[e].processingRetryCount} times if a retry succeeds.`));else this.statusTimeoutMap[a]&&(t-this.vipStatusMap[n].timeSet)/x>=this.statusTimeoutMap[a].timeoutSec&&(l.mediaUpload.onProcessingTimeout(),this.statusTimeoutMap[a].onTimeout(n,e,this.mediaUploadsMap[e].mediaUpload.getClassName()))}}})),f(this,"refreshImageRegistration",(async function(e){t.vipRegistrationPool.image={fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1},await t.getMediaRegistrationsFromVIP({mediaType:"image",count:e})})),f(this,"getMediaRegistration",(async function({durationMs:e,mediaType:i}){if(!e&&t.vipRegistrationPool[i]){t.vipRegistrationPool[i].fetchingData&&await new Promise((e=>{let n=0;const o=setInterval((()=>{n+=1,t.vipRegistrationPool[i].fetchingData&&100!==n||(clearInterval(o),e())}),100)}));const n=performance.now()-t.vipRegistrationPool[i].fetchedLast>=18e5;(0===t.vipRegistrationPool[i].data.length||n)&&await t.getMediaRegistrationsFromVIP({mediaType:i,durationMs:e})}else await t.getMediaRegistrationsFromVIP({mediaType:i,durationMs:e});return Promise.resolve(t.vipRegistrationPool[i].data.pop())})),f(this,"hasAnyVideoUploads",(()=>{for(const e of Object.keys(this.mediaUploadsMap))if("VideoUpload"===this.mediaUploadsMap[e].mediaUpload.getClassName())return!0;return!1})),f(this,"getVipMapStatusesToString",(()=>{let e="{";for(const i of Object.keys(this.vipStatusMap)){var t;e+=`[${i}]:${null!==(t=this.vipStatusMap[i].status)&&void 0!==t?t:"null"} `}return e+"}"})),f(this,"handleFailure",((e,t)=>{this.failed||(this.onFailure(e,t),this.failed=!0)})),f(this,"handleCheckUploadsCompleted",(()=>{const e=this.checkAllUploadsProcessingOrCompleted();return e&&this.onCompleted&&!this.completed&&(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - All uploads have completed & we are triggering the onCompleted callback"),this.completed=!0,this.onCompleted()),e})),f(this,"onFinishUpload",((e,t)=>{this.vipStatusMap[e]={mediaId:t,status:null,timeSet:new Date},this.updateUploadStatus(t,"uploaded"),this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Finished uploading media ID",t),this.statusCheckInProgress||(this.statusCheckInProgress=!0,setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&r.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?y:b))})),f(this,"onUploadFailed",((e,t,i)=>{this.updateUploadStatus(e,"failed"),this.handleFailure(t,i),this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Failed uploading media ID",e)})),f(this,"removeMediaUpload",(e=>{this.mediaUploadsMap[e]&&(this.mediaUploadsMap[e].mediaUpload.cancel(),delete this.mediaUploadsMap[e])})),f(this,"addMediaUpload",((e,t,i,n)=>{const o="localImage"===e.type||"webImage"===e.type?"image":"video",s=Math.round((e.duration||0)*x);this.getMediaRegistration({mediaType:o,durationMs:s}).then((i=>{const o={...n,onFailure:({uploadId:e,errorMsg:i,mediaUploadFailureReason:o})=>{this.onUploadFailed(t,i,o),n.onFailure({uploadId:e,errorMsg:i,mediaUploadFailureReason:o})},onFinishUpload:(e,i)=>{this.onFinishUpload(e,t),n.onFinishUpload&&n.onFinishUpload(e,i)}},s="localImage"===e.type||"webImage"===e.type?new g({callbackHandlers:o,i18n:this.i18n,maxUploadAttempts:this.maxMediaUploadAttempts,media:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch,vipRegistration:i,vipType:"image-story-pin"}):new m({callbackHandlers:o,i18n:this.i18n,maxUploadAttempts:this.maxMediaUploadAttempts,media:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch,vipRegistration:i,vipType:"video-story-pin"});if(this.mediaUploadsMap[t]){this.mediaUploadsMap[t].mediaUpload.cancel();const{uploadId:e}=this.mediaUploadsMap[t].mediaUpload;e&&e in this.vipStatusMap&&delete this.vipStatusMap[e]}this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Added media ID to upload",t),this.mediaUploadsMap[t]={mediaUpload:s,status:"pending",processingRetryCount:0},s.upload(),this.updateUploadStatus(t,"uploading")}))})),f(this,"reset",(()=>{this.failed=!1,this.statusCheckFailureCount=0,this.completed=!1})),f(this,"cancelAll",(()=>{for(const e of Object.keys(this.mediaUploadsMap))"uploading"===this.mediaUploadsMap[e].status&&this.mediaUploadsMap[e].mediaUpload.cancel()})),f(this,"checkStatus",(()=>{if(this.checkUploadsFailed())return this.statusCheckInProgress=!1,void(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] There is a failure in check status",this.getVipMapStatusesToString()));this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Checking status",this.getVipMapStatusesToString()),this.statusCheckInProgress=!0;const e=Object.keys(this.vipStatusMap);e.length>0?async function(e,t){try{const i=await o.Z.create("VIPResource",{upload_ids:e}).callGet(),{data:s}=i.resource_response;return e.reduce(((e,i)=>(s[i]?e[i]={failureCode:s[i].failure_code,signature:s[i].signature,status:s[i].status}:n.Z.increment("storypin.publish.vip_status_check.missing_upload_id",1,{retryCount:t}),e)),{})}catch(i){throw i}}(e,this.statusCheckFailureCount).then((e=>{this.updateVIPStatusMap(e),this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Check status response received",this.getVipMapStatusesToString());const t=this.handleCheckUploadsCompleted(),i=Object.keys(this.vipStatusMap);for(const r of i){const e=this.vipStatusMap[r].mediaId;if(this.mediaUploadsMap[e]){if("completed"===this.mediaUploadsMap[e].status){const t=this.mediaUploadsMap[e].mediaUpload.signature;var o,s;if(this.mediaUploadsMap[e].mediaUpload.vipType.includes("video")&&t)null===(o=this.storyPinPublishStopwatch)||void 0===o||o.updateSubspanName({currentName:`video_page_upload-${r}`,newName:`video_page_upload-${t}`,bypassIsTimingCheck:!0}),null===(s=this.storyPinPublishStopwatch)||void 0===s||s.updateSubspanName({currentName:`video_page_publish-${r}`,newName:`video_page_publish-${t}`,bypassIsTimingCheck:!0});delete this.vipStatusMap[r]}}else n.Z.increment("storypin.publish.media_uploads_map.missing_upload_id",1,{retryCount:this.statusCheckFailureCount,mediaId:e,vipId:r,mediaType:this.mediaUploadsMap[e].mediaUpload.getClassName()})}t?this.statusCheckInProgress=!1:setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&r.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?y:b)})).catch((e=>{this.statusCheckFailureCount+=1,this.statusCheckFailureCount>4?(this.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Failing upload because status check failed ${this.statusCheckFailureCount} times`),this.handleFailure((0,a.nk)(this.i18n.bt("Could not check VIP status with error: {{ errorName }} {{ errorMessage }}", "Could not check VIP status with error: {{ errorName }} {{ errorMessage }}", "MediaUploadManager.checkStatus.error", undefined, false),{errorName:null==e?void 0:e.name,errorMessage:null==e?void 0:e.message}).join(""),14),this.statusCheckInProgress=!1):(this.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Continuing upload because status check only failed ${this.statusCheckFailureCount} times`),setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&r.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?y:b))})):this.handleCheckUploadsCompleted()||setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&r.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?y:b)})),this.onCancel=e.onCancel,this.onCompleted=e.onCompleted||null,this.onFailure=e.onFailure,this.statusTimeoutMap=e.statusTimeoutMap,this.maxMediaUploadAttempts=e.maxMediaUploadAttempts,this.inDebugMode=e.inDebugMode,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.i18n=e.i18n,this.multipageDeprecationBackendSignalsEnabled=e.multipageDeprecationBackendSignalsEnabled,this.statusCheckInProgress=!1,this.completed=!1,this.failed=!1,this.vipRegistrationPool={image:{fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1},video:{fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1}},this.statusCheckFailureCount=0,this.mediaUploadsMap={},this.vipStatusMap={}}}var P=i(296342);function w({i18n:e,isEmployee:t,pinDraftId:i,storyPinPublishStopwatch:o,multipageDeprecationBackendSignalsEnabled:s}){return r=>{const a=new v({i18n:e,inDebugMode:t,maxMediaUploadAttempts:P.dD,multipageDeprecationBackendSignalsEnabled:s,onCancel:()=>{},onFailure:()=>{},statusTimeoutMap:{registered:{onTimeout:(e,t,i)=>{n.Z.increment("storypin.publish.media_uploads_map.timeout.registered",1,{retryCount:this.statusCheckFailureCount,mediaId:t,uploadId:e,mediaType:i})},timeoutSec:240},processing:{onTimeout:(e,t,i)=>{n.Z.increment("storypin.publish.media_uploads_map.timeout.processing",1,{retryCount:this.statusCheckFailureCount,mediaId:t,uploadId:e,mediaType:i})},timeoutSec:180}},storyPinPublishStopwatch:o});a.initVIPRegistrationPools(),r(function(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_UPLOAD_MANAGER",payload:{pinDraftId:e,uploadManager:t}}}(i,a))}}},998285:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(748254),o=i(252570),s=i(843030),r=i(296342),a=i(52925),l=i(172045),d=i(472278);function c({canvasAspectRatio:e,options:t,pinDraftId:i,pinItem:c,pinItemId:u}){return h=>{if(h((0,n.Z)(i,u,{...c,backgroundColor:r.Lh,media:null},t)),null!=c&&c.media){const{media:t}=c;"localImage"===t.type?h((0,s.Uo)(i,u,(0,l.Z)(),{media:t,edits:(0,o.Z)({canvasAspectRatio:e,media:t}),type:"story_pin_image_block"},0)):"localVideo"===t.type&&h((0,s.Uo)(i,u,(0,l.Z)(),{media:t,edits:(0,o.Z)({canvasAspectRatio:e,media:t}),type:"story_pin_video_block"},0));("localImage"===t.type?(0,a.MW)(t):Promise.resolve([])).then((e=>{h((0,d.iY)(u,e)),e.length>0&&h((0,d.vi)(i,u,e[0]))}))}}}},789167:(e,t,i)=>{function n(e,t){return{type:"STORY_PIN_ITEM_SET_COVER_IMAGE_SIGNATURE",payload:{pinItemId:e,coverImgSignature:t}}}i.d(t,{Z:()=>n})},554410:(e,t,i)=>{i.d(t,{XJ:()=>y,Eu:()=>x,Wh:()=>f,Uz:()=>b});var n=i(689070),o=i(172071),s=i(798477),r=i(789167);var a=i(122668),l=i(956800),d=i(843030),c=i(730078),u=i(840839),h=i(147693),p=i(69183),_=i(170583),g=i(623320);function m(e,t,i,n){return new Promise(((o,s)=>{if(e.startsWith("data")){const r=(0,g.Mi)(e);(0,g.GV)(r,"image-story-pin",{onFailureUpload:({fileSizeBytes:e,uploadId:o})=>function({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:n},o){(0,u.Z)(o,{event_type:8785,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:n,story_pin_page_id:i,story_pin_upload_id:t}})}({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:o},n),onFinishProcessing:({fileSizeBytes:e,processingTime:o,signature:s,uploadId:r,uploadTime:a})=>function({fileSizeBytes:e,imageSig:t,pinDraftId:i,storyPageNumber:n,uploadId:o,uploadTimeSec:s},r){(0,u.Z)(r,{event_type:8781,aux_data:{file_size_mb:e/Math.pow(1024,2),image_signature:t,media_upload_id:o,story_pin_page_id:n,story_pin_upload_id:i,upload_time:s}})}({fileSizeBytes:e,imageSig:s,pinDraftId:t,storyPageNumber:i,uploadId:r,uploadTimeSec:a+o},n),onStartUpload:({fileSizeBytes:e,uploadId:o})=>function({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:n},o){(0,u.Z)(o,{event_type:8780,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:n,story_pin_page_id:i,story_pin_upload_id:t}})}({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:o},n)}).then((({signature:e,uploadId:t})=>o({uploadId:t,signature:e||""}))).catch((e=>{s(e)}))}else s(new Error("Image must be of b64 format"))}))}function f(e,t,i){return(t,n)=>{const o=n(),{pinDrafts:s,storyPinItemBlocks:r}=o.pinbuilder,l=(n,s)=>{var l;const u=(0,a.X4)(o,{pinItemId:n},"story_pin_image_block"),h=u?r[u]:null;if(u&&h&&"localImage"===(null===(l=h.media)||void 0===l?void 0:l.type)&&h.media.signatureEdited){return function(e,t,i,n,o){return(0,c.Z)({image:e,edits:t,target:_.D.EXPRESSIVE_RENDER}).then((e=>m(e.src,i,n,o)))}(h.media,h.edits,e,s,i).then((({signature:i,uploadId:n})=>t((0,d.PF)(e,u,{uploadId:n,signatureEdited:i}))))}return Promise.resolve()};return new Promise(((t,i)=>Promise.all(s[e].pinItemIds.map(((e,t)=>l(e,t)))).then((()=>t())).catch((e=>i(e)))))}}function x(e,t){return(i,n)=>{const{fonts:o,pinDrafts:s,storyPinItemBlocks:a,storyPinItems:l}=n().pinbuilder;return(()=>{const n=s[e].pinItemIds.length>0?s[e].pinItemIds[0]:null,d=n&&l[n];if(n&&d&&!d.coverImgSignature){const{backgroundColor:s,blockIds:l}=d,u=l.map((e=>a[e]));return u.find((e=>{var t;return["localImage","localVideo"].includes(null===(t=e.media)||void 0===t?void 0:t.type)}))?function(e,t,i,n,o){const s=e.find((e=>!!e.media&&["localImage","localVideo"].includes(e.media.type))),{edits:r,media:a}=s||{};if(!s||!a)return Promise.resolve({signature:"",uploadId:""});const l=(0,h.Zn)(e,i);return new Promise((e=>{"localVideo"===a.type?(0,p.v)(a,a.thumbnail||0).then((t=>{e({height:a.height,id:`${a.id}-${a.thumbnail}`,name:`${a.name}-coverImg`,size:(0,g.Mi)(t).size,src:t,type:"localImage",width:a.width})})):"localImage"===a.type&&e(a)})).then((e=>(0,c.Z)({backgroundColor:t,edits:r,image:e,preservePageDimension:!0,target:_.D.IMAGE_SIGNATURE,textBlocksWithFont:l}))).then((e=>m(e.src,n,0,o)))}(u,s,o,e,t).then((({signature:e})=>i((0,r.Z)(n,e)))):Promise.resolve()}return Promise.resolve()})()}}function b(e,t,i){return(n,o)=>{var s;const{pinDrafts:r,storyPinItemBlocks:a,storyPinItems:l}=o().pinbuilder,c=r[e].pinItemIds.findIndex((e=>e===t)),u=l[t].blockIds.find((e=>{var t;return"localImage"===(null===(t=a[e].media)||void 0===t?void 0:t.type)}));if(u&&"localImage"===(null===(s=a[u].media)||void 0===s?void 0:s.type)){m(a[u].media.src,e,c,i).then((({signature:t,uploadId:i})=>n((0,d.PF)(e,u,{signature:t,uploadId:i}))))}}}function y(e,t,i){return(r,a)=>{const{pinDrafts:d}=a().pinbuilder;return new Promise(((a,c)=>{(0,n.Z)({url:`/v3/storypins/drafts/${e}/`,method:"DELETE",data:{...i?{orbac_subject_id:i}:Object.freeze({})}}).then((()=>{r((0,l.EX)({feedType:"storyPinData",feedId:t,itemIds:[e],itemType:"storypindata"})),r(function(e){return{type:"STORY_PIN_DATA_DELETE",payload:{storyPinDataId:e}}}(e));const i=Object.keys(d).find((t=>d[t].storyPinDraftId===e));i&&r((0,s.Z)(i)),a()})).catch((()=>{o.Z.increment("story_pin.drafts.delete.failure",1,{app_type:"web"}),c(new Error("Unable to delete the draft"))}))}))}}},472278:(e,t,i)=>{i.d(t,{Bl:()=>p,Dt:()=>c,JQ:()=>w,WZ:()=>m,d5:()=>v,dP:()=>x,eU:()=>b,h4:()=>u,hC:()=>h,iY:()=>P,j8:()=>d,kh:()=>l,pq:()=>_,qG:()=>g,vi:()=>y});var n=i(252570),o=i(843030),s=i(296342),r=i(52925),a=i(172045);function l(e,t){return{type:"STORY_PIN_ITEM_SET_DESCRIPTION",payload:{pinItemId:e,description:t}}}function d(e,t){return{type:"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR",payload:{pinItemId:e,descriptionError:t}}}function c(e,t){return{type:"STORY_PIN_ITEM_SET_TITLE",payload:{pinItemId:e,title:t}}}function u(e,t){return{type:"STORY_PIN_ITEM_SET_TITLE_ERROR",payload:{pinItemId:e,titleError:t}}}function h(e,t){return{type:"STORY_PIN_ITEM_SET_MEDIA",payload:{pinItemId:e,media:t}}}function p(e,t){return{type:"STORY_PIN_ITEM_UPDATE_MEDIA",payload:{pinItemId:e,media:t}}}function _(e,t){return{type:"STORY_PIN_ITEM_UPDATE_LINK_BLOCK",payload:{pinItemId:e,linkBlock:t}}}function g(e,t){return{type:"STORY_PIN_ITEM_SET_LINK_ERROR",payload:{pinItemId:e,linkError:t}}}function m(e,t,i){return{type:"STORY_PIN_ITEM_SET_EDITED_IMAGE",payload:{pinItemId:e,editedMedia:t,canvasJson:i}}}function f(e,t,i){return{type:"STORY_PIN_ITEM_UPDATE_DATA",payload:{pinDraftId:e,pinItemId:t,pinItem:i}}}function x(e,t){return{type:"STORY_PIN_ITEM_SET_BLOCK_IDS",payload:{pinItemId:e,blockIds:t}}}function b(e,t){return{type:"STORY_PIN_ITEM_SET_SELECTED_BLOCK_ID",payload:{pinItemId:e,blockId:t}}}function y(e,t,i){return{type:"STORY_PIN_ITEM_SET_BACKGROUND_COLOR",payload:{pinDraftId:e,pinItemId:t,backgroundColor:i}}}function v(e,t,i){return{type:"STORY_PIN_ITEM_SET_LAYOUT",payload:{pinDraftId:e,pinItemId:t,layout:i}}}function P(e,t){return{type:"STORY_PIN_ITEM_SET_DOMINANT_COLORS",payload:{pinItemId:e,dominantColors:t}}}function w({canvasAspectRatio:e,pinDraftId:t,pinItem:i,pinItemId:l}){return d=>{if(i.media){const{media:c}=i;"localImage"===c.type?d((0,o.Uo)(t,l,(0,a.Z)(),{media:c,edits:(0,n.Z)({canvasAspectRatio:e,media:c}),type:"story_pin_image_block"},0)):"localVideo"===c.type&&d((0,o.Uo)(t,l,(0,a.Z)(),{media:c,edits:(0,n.Z)({canvasAspectRatio:e,media:c}),type:"story_pin_video_block"},0));("localImage"===c.type?(0,r.MW)(c):Promise.resolve([])).then((e=>d(f(t,l,{...i,backgroundColor:e.length>0?e[0]:s.Lh,dominantColors:e,media:null}))))}else d(f(t,l,i))}}},843030:(e,t,i)=>{function n(e,t,i,n,o){return{type:"STORY_PIN_ITEM_ADD_BLOCK",payload:{pinDraftId:e,pinItemId:t,blockId:i,storyPinItemBlock:n,index:o}}}function o(e,t,i){return{type:"STORY_PIN_ITEM_BLOCK_UPDATE_EDITS",payload:{pinDraftId:e,blockId:t,edits:i}}}function s(e,t,i){return{type:"STORY_PIN_ITEM_BLOCK_UPDATE_MEDIA",payload:{pinDraftId:e,blockId:t,media:i}}}function r(e,t){return{type:"STORY_PIN_ITEM_BLOCK_SET_PLAYING",payload:{blockId:e,playing:t}}}function a(e,t,i){return{type:"STORY_PIN_ITEM_REMOVE_BLOCK",payload:{pinDraftId:e,pinItemId:t,blockId:i}}}function l(e,t,i){return{type:"STORY_PIN_ITEM_REORDER_BLOCKS",payload:{pinDraftId:e,pinItemId:t,blockIds:i}}}function d(e,t,i){return{type:"STORY_PIN_ITEM_UPDATE_BLOCK",payload:{pinDraftId:e,blockId:t,storyPinItemBlock:i}}}i.d(t,{Ny:()=>a,PF:()=>s,Uo:()=>n,_E:()=>o,_Z:()=>d,gs:()=>r,mI:()=>l})},461773:(e,t,i)=>{i.d(t,{KF:()=>c,ZN:()=>a,fv:()=>d,kE:()=>h,yA:()=>l});var n=i(689070),o=i(214494),s=i(90326);function r(e,t){return o.Z.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function a(e,t=null){return i=>{r(e,t).callCreate().catch((()=>i((0,s.P_)(e,!1)))),i((0,s.P_)(e,!0))}}function l(e,t=null){return async i=>{i((0,s.P_)(e,!0)),await r(e,t).callCreate().catch((t=>{throw i((0,s.P_)(e,!1)),t}))}}function d(e,t=null){return i=>{r(e,t).callDelete().catch((()=>i((0,s.P_)(e,!0)))),i((0,s.P_)(e,!1))}}function c(e,t=null){return async i=>{i((0,s.P_)(e,!1)),await r(e,t).callDelete().catch((t=>{throw i((0,s.P_)(e,!0)),t}))}}const u=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),h=e=>t=>{e.length>0&&((0,n.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e.join(",")}}).catch((()=>t(u(e,!1)))),t(u(e,!0)))}},205992:(e,t,i)=>{i.d(t,{Cp:()=>p,GT:()=>l,V6:()=>r,W2:()=>c,W6:()=>_,_L:()=>h,fm:()=>a,hT:()=>d});var n=i(56528),o=i(214494),s=i(248327);function r(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}const a=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),l=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}});function d(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}const c=(e,t,i)=>n=>{n({type:"USER_SETTING_CHANGE",payload:{id:e,field:t,value:i}})},u=e=>{const t=e.split(" ");return{first_name:t[0],last_name:t[1]}},h=({field:e,value:t,passcode:i,onSettingSavedHn:n,showErrorHn:r,surfaceTag:a,userId:l})=>(d,h)=>{const p=h().users[l],_={user_id:l,surface_tag:a};if("full_name"===e)if(p.is_partner)_.business_name=t;else{const e=u(t);_.first_name=e.first_name,_.last_name=e.last_name||""}else _[e]=t;i&&(_.passcode=i),o.Z.create("UserSettingsResource",_).callUpdate().then((()=>{if("profile_image_url"===e)d((0,s.b)("UserResource",{options:_}));else if("full_name"===e)if(p.is_partner)d(c(l,"first_name",t));else{const e=u(t);d(c(l,"first_name",e.first_name)),d(c(l,"last_name",e.last_name))}!p.is_partner||"account_type"!==e&&"contact_name"!==e?d(c(l,e,t)):d(((e,t,i)=>n=>{n({type:"USER_PARTNER_SETTING_CHANGE",payload:{id:e,field:t,value:i}})})(l,e,t)),n()}),r)},p=(e,t,i,o,s,r)=>()=>{(0,n.Z)({new:t,new_confirm:i,old:e,passcode:o}).then(s,r)},_=(e,t,i,n,s,r)=>a=>{a(c(e,`${t}.${i}`,n));let l={},d="EmailSettingsResource";void 0!==s?(l={section:t,option:i,value:n,od:s.od,user_id:s.user_id},d="UnsubEmailSettingsResource"):l={section:t,option:i,value:n},o.Z.create(d,l).callUpdate().then(r).catch((()=>a(c(e,`${t}.${i}`,!n))))}},90326:(e,t,i)=>{i.d(t,{Ge:()=>d,JS:()=>r,OF:()=>f,P_:()=>a,Q_:()=>h,b8:()=>p,eR:()=>m,h2:()=>c,h6:()=>u});var n=i(689070),o=i(735422),s=i(214494);function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}const a=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),l=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:i,blockContext:n})=>o=>(o(l(e,!0)),s.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:t,block_source:i,block_context:n}).callCreate().catch((()=>o(l(e,!1))))),c=e=>t=>(t(l(e,!1)),s.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch((()=>t(l(e,!0)))));function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}const h=(e,t)=>()=>s.Z.create("UserStateResource",{state:e,value:t}).callCreate(),p=(e,t,i)=>(s,r)=>{(0,n.Z)({url:"/v3/users/me/",method:"POST"}).then((()=>{i({event_type:48,object_id_str:r().session.userId}),e(),(0,o.Dm)()}),t)};const _=async(e,t,i)=>{var n;const o=await s.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(null!==(n=o.resource_response)&&void 0!==n&&n.data[e]){const n=o.resource_response.data[e],{status:s,signature:r}=n;if("processing"===s||"registered"===s)setTimeout((async()=>{_(e,t,i)}),5e3);else if("succeeded"===s){const e=((e,t="150x150")=>e&&`https://i.pinimg.com/${t}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"")(r);t(e)}else i()}else i()},g=e=>new Promise(((t,i)=>{var n,o,r,a,l;n=e,o="pinimage",r=()=>{},a=e=>{t(e)},l=e=>{i(e)},(new FormData).append("img",n),s.Z.create("VIPResource",{type:o}).callCreate().then((e=>{var t;if(null!==(t=e.resource_response)&&void 0!==t&&t.data){const{upload_id:t,upload_url:i,upload_parameters:o}=e.resource_response.data,s=new XMLHttpRequest;s.open("POST",i,!0),s.onload=()=>{var e;(e=s.status)>=200&&e<400?(r(100),_(t,a,l)):l()},s.upload.onprogress=e=>{const t=Math.round(100*e.loaded/e.total);r(t)};const d=new FormData;for(const e in o)d.append(e,o[e]);d.append("file",n),s.send(d)}}),(()=>{l()}))})),m=e=>new Promise(((t,i)=>{"string"==typeof e?e.startsWith("data")&&g(function(e,t=512){const i=e.split(";"),n=i[0].split(":")[1],o=i[1].split(",")[1],s=atob(o),r=[];for(let a=0;a<s.length;a+=t){const e=s.slice(a,a+t),i=new Array(e.length);for(let t=0;t<e.length;t+=1)i[t]=e.charCodeAt(t);const n=new Uint8Array(i);r.push(n)}return new Blob(r,{type:n})}(e)).then((e=>t(e))):i("Invalid Image")})),f=e=>()=>(0,n.Z)({url:"/v3/register/exists/",data:{email:e}})},492583:(e,t,i)=>{i.d(t,{Z:()=>n});const n={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",CALL_TO_CREATE_RESPONSES_FEED:"callToCreateResponsesFeed",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"}},20064:(e,t,i)=>{i.d(t,{E:()=>s,Z:()=>r});var n=i(682492),o=i.n(n);const s={description:"",descriptionError:null,editorInstanceId:"",isTaggable:!0,link:"",linkError:null,media:null,pinTagIds:[],selectedPinTagId:null,tagError:null,title:"",titleError:null,canvasJson:null,signals:{},userMentionTags:[]},r=(e=s,t)=>{switch(t.type){case"PIN_DRAFT_ADD_PIN_ITEM":case"PIN_ITEM_UPDATE_DATA":{const i=t.payload.pinItem;return{...e,...i,signals:{...e.signals,...null==i?void 0:i.signals}}}case"PIN_ITEM_ADD_PIN_TAG":{const{pinTagId:i}=t.payload;return{...e,pinTagIds:[...e.pinTagIds,i]}}case"PIN_ITEM_REMOVE_PIN_TAG":{const{pinTagId:i}=t.payload;return{...e,pinTagIds:e.pinTagIds.filter((e=>e!==i))}}case"PIN_ITEM_SET_DESCRIPTION":{const{description:i}=t.payload;return{...e,description:i}}case"PIN_ITEM_SET_DESCRIPTION_ERROR":{const{descriptionError:i,signals:n}=t.payload;return{...e,descriptionError:i,signals:{...e.signals,...n}}}case"PIN_ITEM_SET_IS_TAGGABLE":{const{isTaggable:i}=t.payload;return{...e,isTaggable:i}}case"PIN_ITEM_SET_LINK":{const{link:i}=t.payload;return{...e,link:i}}case"PIN_ITEM_SET_LINK_ERROR":{const{linkError:i,signals:n}=t.payload;return{...e,linkError:i,signals:{...e.signals,...n}}}case"PIN_ITEM_SET_MEDIA":{const{media:i}=t.payload,n=!(!i||e.link)||e.isTaggable;return{...e,media:i,isTaggable:(!i||"localVideo"!==i.type)&&n,pinTagIds:[],selectedPinTagId:null,canvasJson:null}}case"PIN_ITEM_UPDATE_MEDIA":{const{media:i}=t.payload;return{...e,media:e.media?o()({},e.media,i):null}}case"PIN_ITEM_SET_SELECTED_PIN_TAG_ID":{const{selectedPinTagId:i}=t.payload;return{...e,selectedPinTagId:i}}case"PIN_ITEM_SET_TAG_ERROR":{const{tagError:i}=t.payload;return{...e,tagError:i}}case"PIN_ITEM_SET_TITLE":{const{title:i}=t.payload;return{...e,title:i}}case"PIN_ITEM_SET_TITLE_ERROR":{const{titleError:i,signals:n}=t.payload;return{...e,titleError:i,signals:{...e.signals,...n}}}case"PIN_ITEM_SET_EDITED_IMAGE":{const{editedMedia:i,canvasJson:n}=t.payload;return{...e,media:i,canvasJson:n}}default:return e}}},106331:(e,t,i)=>{i.d(t,{FQ:()=>f,JT:()=>u,ND:()=>p,Ob:()=>v,Qj:()=>b,VK:()=>g,d_:()=>m,gF:()=>h,gI:()=>P,gl:()=>c,jP:()=>y,nJ:()=>d,p:()=>x,vd:()=>_,xA:()=>l});var n=i(442279),o=i(490072),s=i(47615),r=i(562501);function a(e){return e.values().next().value}const l=e=>e.pinbuilder.selectedPinDraftIds,d=e=>e.pinbuilder.createdPinIds,c=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).reduce(((e,i)=>t.includes(i.pinId)&&"carousel"===i.type?[...e,i.pinId||""]:e),[])},u=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i,pinDraftIds:n}}=e;return Object.keys(i).reduce(((e,o)=>{const s=i[o],r=s&&s.pinId;return n.includes(o)&&r&&t.includes(r)&&!0!==s.isAdIneligible&&!0!==s.isShowcase&&!0!==s.isQuizAd?[...e,r]:e}),[])},h=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).filter((e=>e&&e.pinId&&e.isShowcase&&t.includes(e.pinId))).map((e=>e.pinId||""))},p=e=>{const{pinbuilder:{pinDrafts:t}}=e;return Object.values(t).filter((e=>e&&e.isShowcase&&!e.pinId&&"created"!==e.status)).map((e=>e.status))},_=e=>e.pinbuilder.pinDraftIds,g=(0,n.P1)([_,o.OW],((e,t)=>e.filter((e=>"story"!==t[e].type)))),m=(0,n.P1)([_,o.OW],((e,t)=>e.filter((e=>"succeeded"!==t[e].status)))),f=(0,n.P1)([_,o.OW],((e,t)=>e.filter((e=>"succeeded"!==t[e].status&&"story"!==t[e].type)))),x=(0,n.P1)([l,o.OW,r.ng],((e,t,i)=>{const{descriptions:n,links:o,publishOptions:s,scheduledDates:r,scheduledTimes:l,selectedItems:d,titles:c}=e.reduce(((e,n)=>{const{pinItemIds:o,publishOption:s,scheduledDate:r,scheduledTime:a,selectedItem:l}=t[n];return e.publishOptions.add(s),e.scheduledDates.add(r?r.toDateString():null),e.scheduledTimes.add(a?a.toTimeString():null),e.selectedItems.add(l?JSON.stringify(l,Object.keys(l).sort()):null),o.forEach((t=>{const{description:n,link:o,title:s}=i[t];e.descriptions.add(n),e.titles.add(s),e.links.add(o)})),e}),{descriptions:new Set,links:new Set,publishOptions:new Set,scheduledDates:new Set,scheduledTimes:new Set,selectedItems:new Set,titles:new Set}),u=a(r),h=a(l),p=a(d),_=u&&new Date(u),g=h&&new Date(`${(new Date).toDateString()} ${h}`),m=p&&JSON.parse(p);return{initialDescription:1===n.size?a(n):void 0,initialLink:1===o.size?a(o):void 0,initialPublishOption:1===s.size?a(s):void 0,initialScheduledDate:1===r.size?_:void 0,initialScheduledTime:1===l.size?g:void 0,initialSelectedItem:1===d.size?m:void 0,initialTitle:1===c.size?a(c):void 0}})),b=(e,t,i)=>{const{pinTags:n,pinDrafts:o,pinItems:a}=e.pinbuilder,{type:l}=o[t],{media:d}=a[i];if("carousel"===l)return"CAROUSEL";if(n&&Object.keys(n).length>0){if((0,r.jk)()(e,{pinItemId:i}).length>0)return"COLLECTIONS"}return"localVideo"===(null==d?void 0:d.type)?"VIDEO":(0,s.Sl)(d)?"STATIC":null},y=(e,t)=>{const i={};for(const o of e){var n;const{publishingStatus:e}=t[o];i[e]=(null!==(n=i[e])&&void 0!==n?n:0)+1}return i},v=({pinbuilder:e})=>e.isBatchEditMode,P=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).reduce(((e,i)=>{const n=i&&i.pinId;return n&&t.includes(n)&&i.isQuizAd?[...e,n]:e}),[])}},490072:(e,t,i)=>{i.d(t,{DJ:()=>x,Dt:()=>b,Fh:()=>I,IF:()=>d,NW:()=>a,OK:()=>r,OW:()=>s,Sg:()=>f,V$:()=>m,W3:()=>y,Xe:()=>l,fw:()=>v,kD:()=>h,mR:()=>P,mf:()=>u,nL:()=>w,pc:()=>g,pq:()=>c,q7:()=>p,uO:()=>_,wN:()=>A,xA:()=>E});var n=i(442279),o=i(122668);const s=e=>e.pinbuilder.pinDrafts,r=(e,t)=>e.pinbuilder.pinDrafts[t],a=e=>{const{pinDrafts:t}=e.pinbuilder,i={};return Object.keys(t).forEach((e=>{"story"!==t[e].type&&(i[e]=t[e])})),i},l=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].view,d=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIndex,c=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIds,u=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].isCommentsAllowed,h=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].isShoppingRecAllowed,p=(e,t)=>{const{pinDrafts:i,storyPinItems:n}=e.pinbuilder,{pinItemIds:o}=i[t.pinDraftId];return o.map((e=>n[e]))},_=(e,t)=>{const{pinDrafts:i,storyPinItemBlocks:n,storyPinItems:o}=e.pinbuilder;return i[t.pinDraftId].pinItemIds.map((e=>o[e].blockIds.map((e=>n[e])))).flat()},g=(e,t)=>{var i,n;const{pinDrafts:s}=e.pinbuilder,{pinItemIds:r,storyPinMetadata:a}=s[t.pinDraftId],l=(0,o.YE)(e,{pinItemId:r[0]}),d=Object.keys(l);return null!==(i=null==a||null===(n=a.title)||void 0===n?void 0:n.trim())&&void 0!==i?i:l&&d.length>0?l[d[d.length-1]].text.trim():""},m=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return null!==(i=null==o?void 0:o.description)&&void 0!==i?i:""},f=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return null!==(i=null==o?void 0:o.userMentionTags)&&void 0!==i?i:[]},x=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return(null==o||null===(i=o.link)||void 0===i?void 0:i.trim())||""},b={PENDING:0,VALID:1,INVALID:2},y=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return null!==(i=null==o?void 0:o.linkStatus)&&void 0!==i?i:b.VALID},v=(e,t)=>{const{pinDrafts:i}=e.pinbuilder,{storyPinMetadata:n}=i[t.pinDraftId];return null==n?void 0:n.linkError},P=(e,t,i)=>_(e,t).filter((e=>i.includes(e.type))),w=()=>(0,n.P1)([c,d],((e,t)=>e[t])),I=(e,t)=>{const i=e.pinDrafts[t.pinDraftId],n=i.pinItemIds,o=!!(i.apiError||i.boardError||i.mediaError),s=n.reduce(((t,i)=>{const n=e.pinItems[i]||e.storyPinItems[i];return!!(t||n.descriptionError||n.linkError||n.tagError||n.titleError)}),!1);return o||s},A=(e,t)=>{const{pinItemIds:i,selectedItem:n=null}=e.pinDrafts[t.pinDraftId],o=!!n,s=i.reduce(((t,i)=>{const n=e.pinItems[i]||e.storyPinItems[i];return!!(t||n.description||n.link||n.media||n.title)}),!1);return o||s},E=({pinbuilder:e})=>e.selectedPinDraftIds},562501:(e,t,i)=>{i.d(t,{Bg:()=>c,CQ:()=>p,M:()=>l,jk:()=>_,ng:()=>r,vd:()=>h,wc:()=>a});var n=i(351870),o=i(442279),s=i(957025);const r=e=>e.pinbuilder.pinItems,a=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].isTaggable,l=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].selectedPinTagId,d=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].pinTagIds,c=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].media,u=(0,o.P1)([d,s.Oo],((e,t)=>e.reduce(((e,i)=>{const{status:n,taggedObjectIds:o}=t[i];return"deleted"!==n&&o.forEach((t=>e.push(t))),e}),[]))),h=()=>(0,o.P1)([d,s.Oo],((e,t)=>e.filter((e=>"deleted"!==t[e].status)))),p=()=>(0,o.P1)([u,n.Z],((e,t)=>e.map((e=>t[e])).filter((e=>"deleted"!==e.status)))),_=()=>(0,o.P1)([u,n.Z],((e,t)=>e.filter((e=>"deleted"!==t[e].status))))},957025:(e,t,i)=>{i.d(t,{A$:()=>a,Oo:()=>s});var n=i(351870),o=i(442279);const s=e=>e.pinbuilder.pinTags,r=(e,t)=>e.pinbuilder.pinTags[t.pinTagId].taggedObjectIds,a=()=>(0,o.P1)([r,n.Z],((e,t)=>e.filter((e=>"deleted"!==t[e].status))))},122668:(e,t,i)=>{i.d(t,{AC:()=>d,CI:()=>s,NR:()=>l,X4:()=>h,YE:()=>c,bS:()=>a,mX:()=>r,wH:()=>o,wv:()=>n,yp:()=>u});const n=["story_pin_heading_block","story_pin_paragraph_block"],o=(e,t)=>e.pinbuilder.storyPinItems[t];function s({storyPinItemBlocks:e,storyPinItemBlockIds:t}){return t.find((t=>!!e[t].media))}const r=(e,t)=>{const i=e.pinbuilder.storyPinItems[t.pinItemId];return i?s({storyPinItemBlocks:e.pinbuilder.storyPinItemBlocks,storyPinItemBlockIds:i.blockIds}):null};function a({storyPinItemBlockIds:e,storyPinItemBlocks:t}){return e.find((e=>n.includes(t[e].type)))}const l=(e,t)=>e.pinbuilder.storyPinItems[t.pinItemId].selectedBlockId;function d({pinItemId:e,storyPinItemBlocks:t,storyPinItems:i}){const o=i[e],s={};return o&&o.blockIds.filter((e=>n.includes(t[e].type))).forEach((e=>{s[e]=t[e]})),s}const c=(e,t)=>{const{pinItemId:i}=t,{storyPinItemBlocks:n,storyPinItems:o}=e.pinbuilder;return d({storyPinItems:o,pinItemId:i,storyPinItemBlocks:n})},u=(e,t)=>{const i=e.pinbuilder.storyPinItems[t.pinItemId];return i?i.blockIds.map((t=>e.pinbuilder.storyPinItemBlocks[t])):[]},h=(e,t,i)=>e.pinbuilder.storyPinItems[t.pinItemId].blockIds.find((t=>e.pinbuilder.storyPinItemBlocks[t].type===i))},351870:(e,t,i)=>{function n(e){return e.pinbuilder.taggedObjects}i.d(t,{Z:()=>n})},960278:(e,t,i)=>{i.d(t,{I:()=>l,Z:()=>a});var n=i(845772),o=i(784590),s=i(773285);const r=({boardId:e,ownerUsername:t,ownerName:i,ownerImgSrc:r})=>{const{anyEnabled:a}=(0,s.F)().checkExperiment("web_m10n_business_access_orbac_ga"),l=(0,n.Z)(),{data:d,isLoaded:c}=(0,o.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...a&&l?{orbac_subject_id:l}:{}}}),u=[{name:i,src:r,href:`/${t}/`,isDim:!1}];return c&&d&&d.length>0&&d.forEach((e=>{u.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})})),u},a=r;function l({children:e,...t}){return e(r(t))}},902840:(e,t,i)=>{i.d(t,{Z:()=>U});var n=i(667294),o=i(319915),s=i(947599),r=i(499128),a=i(898781),l=i(343341),d=i(883119),c=i(785893);const u=(0,n.lazy)((()=>i.e(4603).then(i.t.bind(i,774855,23))));function h({linkURL:e,onDidFocus:t,onDidClickCopyButton:i}){const n=(0,a.ZP)(),{showOneToast:h}=(0,l.F9)(),p=n.bt("Copia link", "Copy link", "[button] copy a URL link shown, to paste in another place", undefined, true);return(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingX:4,children:[(0,c.jsx)(d.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(d.nv,{id:"copylinkurl",onChange:()=>{},onFocus:t,size:"lg",type:"url",value:e})}),(0,c.jsx)(o.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,c.jsx)(s.Z,{fallback:(0,c.jsx)(d.zx,{text:p,disabled:!0}),children:(0,c.jsx)(u,{text:e,onCopy:(e,t)=>{t&&h((({hideToast:e})=>(0,c.jsx)(r.ZP,{onHide:e,text:n.bt("Link copiato negli appunti.", "Link copied to clipboard!", "toast message to confirm if users copied the url successfully", undefined, true)}))),i()},children:(0,c.jsx)(d.zx,{text:p,size:"lg"})})})})]})}var p=i(720247),_=i(845772),g=i(750869),m=i(407043),f=i(773285),x=i(743473);const b=(e,t)=>({invite_category:4,invite_channel:12,object_type:g.d.BOARD,object_id:e,...t?{orbac_subject_id:t}:{}}),y=e=>({component:13305,element:10921,object_id_str:e,view_type:5,view_parameter:3059});function v({boardId:e,relayEnvironment:t}){const{logContextEvent:i}=(0,m.v)(),[o,s]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),{anyEnabled:l}=(0,f.F)().checkExperiment("web_m10n_business_access_orbac_ga"),d=(0,_.Z)();(0,n.useEffect)((()=>{if(!r){const i=b(e,l?d:""),{cancel:n,promise:o}=(0,p.Z)(x.Z.createShareInviteData({...i,path:"",invite_category:i.invite_category},t));return o.then((e=>a(e))),()=>{n()}}}),[]);const u=r?r.invite_url:"...",g=()=>{null===r||o||(s(!0),x.Z.logShareInvite(b(e),r))};return(0,c.jsx)(h,{linkURL:u,onDidClickCopyButton:()=>{i({event_type:101,...y(e)}),g()},onDidFocus:g})}var P=i(774763),w=i(860426),I=i(829407),A=i(784590),E=i(349700);function C({boardId:e}){const{logContextEvent:t}=(0,m.v)(),i=(0,a.ZP)(),o=(0,l.F9)(),{checkExperiment:s}=(0,f.F)(),{anyEnabled:u}=s("web_m10n_business_access_orbac_ga"),h=(0,_.Z)(),p=(0,n.useRef)(!1),{refresh:g}=(0,A.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...u&&h?{orbac_subject_id:h}:{}},noCache:!0}),{refresh:x}=(0,A.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval",...u&&h?{orbac_subject_id:h}:{}},noCache:!0}),{data:b,isLoaded:y}=(0,A.Z)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board",...h?{orbac_subject_id:h}:{}},noCache:!0});(0,n.useEffect)((()=>{if(y){const e=b&&b.length>0?7511:7512;t({event_type:e,component:13305,element:10592,view_type:5,view_parameter:3059})}}),[y]),(0,I.Z)((()=>(t({event_type:7120,object_id_str:e,view_type:5,view_parameter:3059}),t({event_type:10520,object_id_str:e,view_type:5,component:13305,element:10592}),()=>{p.current||t({event_type:10521,object_id_str:e,view_type:5,component:13305,element:13478})})));const v=(e,t=!1)=>{o.showOneToast((({hideToast:i})=>(0,c.jsx)(r.ZP,{duration:3e3,onHide:i,text:e,type:t?"error":void 0})))};return y?(0,c.jsx)(w.ZP,{boardId:e,onInvitesDidUpdate:()=>{g(),x(),p.current=!0},onInviteDidComplete:(e,t,n)=>{t?v(i.bt("1 invito inviato!", "1 invite sent!", "BoardCollabInviteFormContainer.showInviteSuccessToast.text", undefined, true)):((e,t)=>{const n=i.bt("Impossibile invitare {{userIdentifier}} a collaborare", "Failed to invite {{userIdentifier}} to collaborate", "Toast for failing to send invitation of collaborating a board", undefined, true);v(t&&t.message?t.message:(0,E.nk)(n,{userIdentifier:e}).join(""),!0)})(e,n)},shareSuggestions:b||[]}):(0,c.jsx)(d.xu,{display:"flex",justifyContent:"center",paddingY:12,width:"100%",children:(0,c.jsx)(d.$j,{accessibilityLabel:i.bt("Caricamento contatti in corso", "Loading contacts", "BoardCollab.BoardCollabInviteFormContainer", undefined, true),show:!0})})}const S="INVITE_SETTING",j="REQUEST_TO_JOIN_SETTING";function T({boldHeading:e,setting:t,viewerIsOwner:i}){const o=(0,a.ZP)(),s={0:{name:o.bt("Fare tutto, o quasi!", "Do (almost) everything", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:o.bt("Aggiungere, spostare o eliminare Pin e sezioni delle bacheche, commentare e reagire", "Add, move or delete Pins and sections, comment and react", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true)},1:{name:o.bt("Salvare e commentare", "Save and comment", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:i?o.bt("Salvare Pin, organizzarli, commentare e reagire", "Save Pins, organize them, comment and react", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true):o.bt("Salvare Pin, organizzarli, commentare e aggiungere reazioni. Per ulteriori autorizzazioni, contatta il proprietario della bacheca!", "Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!", "save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab", undefined, true)},[S]:{name:o.bt("Invitare altre persone", "Invite other people", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:o.bt("I collaboratori possono invitare altri utenti in questa bacheca", "Collaborators can invite others to this board", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true)},[j]:{name:o.bt("Richieste della bacheca", "Board requests", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:o.bt("Le persone possono chiedere di iscriversi a questa bacheca", "People can request to join this board", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true)}};return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xv,{color:"default",size:e?"300":"200",weight:e?"bold":"normal",children:s[t].name}),(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(d.xv,{color:"subtle",size:"300",children:s[t].description})})]})}var D=i(741),k=i(121151),z=i(19121),O=i(150963),R=i(616550),L=i(167912),M=i(780280);function B({board:e,currentPermissionLevel:t,fromBoardEditModal:i,navigateToPermissions:o,onDismiss:s}){var r,l;const u=(0,a.ZP)(),h="number"==typeof e.collaborator_count&&e.collaborator_count>0,[p,g]=(0,n.useState)(!h),m=(0,M.B)(),x=(0,z.Z)(),b=(0,R.useHistory)(),y=(0,_.Z)(),w=x.isAuth&&((null===(r=e.owner)||void 0===r?void 0:r.id)===x.id||(null===(l=e.owner)||void 0===l?void 0:l.id)===y),I=w||e.collaborator_invites_enabled,A=p&&!h||!p,{checkExperiment:E}=(0,f.F)(),S=E("graphql_migration_board_sgrowth").anyEnabled,j=(0,L.useRelayEnvironment)();return(0,c.jsx)(O.k,{boardName:e.name,pendingOwnershipTransfer:e.pending_ownership_transfer,viewerIsOwner:w,children:(0,c.jsx)(k.ZP,{_dangerouslyDisableScrollBoundaryContainer:!0,accessibilityModalLabel:p?u.bt("Invita collaboratori", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true):u.bt("Collaboratori", "Collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),footer:I&&!p?(0,c.jsx)(d.iP,{onTap:()=>g(!0),rounding:8,children:(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.hU,{accessibilityLabel:u.bt("Invita collaboratori", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"add",bgColor:"red",iconColor:"white",size:"md"}),(0,c.jsx)(d.xu,{paddingX:3,children:(0,c.jsx)(d.xv,{size:"300",weight:"bold",children:u.bt("Invita collaboratori", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})})]})}):null,heading:(0,c.jsxs)(d.xu,{marginStart:5,padding:8,children:[i&&(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!m.isRTL,right:m.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:u.bt("Indietro", "Back", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"arrow-back",iconColor:"darkGray",onClick:s,size:"md"})}),(0,c.jsx)(d.X6,{align:"center",size:"500",children:p?u.bt("Invita collaboratori", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true):u.bt("Collaboratori", "Collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})]}),onDismiss:s,children:(0,c.jsxs)(d.xu,{marginBottom:5,children:[A&&(0,c.jsxs)(d.xu,{paddingX:6,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:w?u.bt("I collaboratori possono...", "Collaborators can...", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true):u.bt("Puoi...", "You can...", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})}),(0,c.jsxs)(d.xu,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4,children:[(0,c.jsx)(d.xu,{width:"60%",children:(0,c.jsx)(T,{boldHeading:!0,viewerIsOwner:w,setting:t})}),w&&(0,c.jsx)(d.hU,{accessibilityLabel:u.bt("Modifica le autorizzazioni alla bacheca", "Edit board permissions", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"arrow-forward",onClick:o,iconColor:"gray",size:"md"})]})]}),p?(0,c.jsxs)(d.xu,{paddingX:2,children:[(0,c.jsx)(v,{boardId:e.id,relayEnvironment:S?j:void 0}),(0,c.jsx)(C,{boardId:e.id})]}):(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xu,{paddingX:6,paddingY:5,children:(0,c.jsx)(d.xv,{size:"100",children:u.bt("Collaboratori", "Collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})}),(0,c.jsx)(D.Z,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=x.isAuth?`/${x.username}`:"/";b.replace(e)},renderInvite:(e,t,i)=>{if(!e.invited_user)return null;const n={invite:e,invitedUser:e.invited_user,onBoardLeave:t,onInviteDidUpdate:i,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(P.Z,{...n})}})]})]})})})}var N=i(702664),F=i(576028);function Z({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:t,id:i},currentPermissionLevel:o,navigateToCollaborators:s,onDismiss:r}){const{logContextEvent:l}=(0,m.v)(),u=(0,a.ZP)(),[h,p]=(0,n.useState)(o),[_,g]=(0,n.useState)(e),[f,x]=(0,n.useState)(t),[b,y]=(0,n.useState)(!1),v=(0,N.useDispatch)();return(0,c.jsx)(k.ZP,{accessibilityModalLabel:u.bt("Autorizzazioni bacheca", "Board permissions", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),heading:(0,c.jsxs)(d.xu,{paddingY:8,display:"flex",justifyContent:"start",alignItems:"center",children:[(0,c.jsx)(d.xu,{paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:u.bt("Indietro", "Back", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"arrow-back",iconColor:"darkGray",onClick:s,size:"md"})}),(0,c.jsx)(d.kC,{justifyContent:"center",flex:"grow",alignItems:"center",children:(0,c.jsx)(d.X6,{align:"center",size:"500",children:u.bt("I collaboratori possono...", "Collaborators can...", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})}),(0,c.jsx)(d.xu,{paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:u.bt("Chiudi", "Close", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:r,size:"md"})})]}),footer:(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,c.jsx)(d.zx,{color:"red",disabled:b||h===o&&_===e&&f===t,onClick:()=>{y(!0);const n={},s={view_type:5,view_parameter:3472};_!==e&&(n.collaborator_invites_enabled=_,l({event_type:_?106:107,element:11896,...s})),h!==o&&(n.collaborator_permissions_setting=h,l({event_type:8841,...s})),f!==t&&(n.collaborator_requests_enabled=f),v((0,F.V)(i,n)).then((()=>r()))},size:"lg",text:u.bt("Fine", "Done", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true)})}),onDismiss:r,children:(0,c.jsxs)(d.xu,{paddingX:12,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:u.bt("Autorizzazioni", "Permissions", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true)})}),(0,c.jsxs)(d.FX,{id:"permissions_modal_invite_options",legend:u.bt("Autorizzazioni", "Permissions", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true),legendDisplay:"hidden",children:[(0,c.jsxs)(d.kC,{alignItems:"center",children:[(0,c.jsx)(d.FX.RadioButton,{checked:0===h,id:"ALL",onChange:()=>p(0),value:0}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(T,{setting:0})})]}),(0,c.jsxs)(d.xu,{display:"flex",paddingY:6,"data-test-id":"invite-radio-container",children:[(0,c.jsx)(d.FX.RadioButton,{checked:1===h,id:"SAVE_ONLY",onChange:()=>p(1),value:1}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(T,{setting:1})})]})]}),(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:u.bt("Inviti", "Invitations", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true)})}),(0,c.jsxs)(d.xu,{display:"flex",marginBottom:6,"data-test-id":"invite-checkbox-container",children:[(0,c.jsx)(d.XZ,{checked:_,id:"inviteSetting",onChange:({checked:e})=>g(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(T,{setting:S})})]}),(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.XZ,{checked:f,id:"inviteSetting",onChange:({checked:e})=>x(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(T,{setting:j})})]})]})})}function U({board:e,fromBoardEditModal:t,onDismiss:i}){const[o,s]=(0,n.useState)("collaboratorsView"),{collaborator_permissions_setting:r}=e;return"collaboratorsView"===o?(0,c.jsx)(B,{board:e,currentPermissionLevel:r,fromBoardEditModal:t,navigateToPermissions:()=>s("permissionsView"),onDismiss:i}):(0,c.jsx)(Z,{board:e,currentPermissionLevel:r,navigateToCollaborators:()=>s("collaboratorsView"),onDismiss:i})}},217641:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(883119),s=i(785893);function r(e){const{accessibilityLabel:t,focused:i,id:r,onBlur:a,onChange:l,onFocus:d,placeholder:c,value:u,size:h="lg"}=e,p=(0,n.useRef)(null);return(0,n.useEffect)((()=>{if(i){const e=p.current;window.requestAnimationFrame((()=>{const t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()}))}}),[i]),(0,s.jsx)(o.xu,{ref:p,children:(0,s.jsx)(o.Um,{accessibilityLabel:t,id:r,onBlur:a,onChange:l,onFocus:d,placeholder:c,size:h,value:u})})}},553751:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(702664),s=i(755742),r=i(274495),a=i(717615),l=i(19121),d=i(678638),c=i(231947),u=i(898781),h=i(883119),p=i(785893);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(e){super(e),_(this,"onCreateSection",(()=>{const{board:e,dispatch:t,completeCreateSectionAction:i,pinImport:n,viewer:o,orbacActingAs:s}=this.props,r=(0,c.lJ)(o,s);return this.setState({isSaving:!0}),t((0,d.vB)({boardId:e.id,name:this.state.inputName.trim(),pinImport:n},this.props.i18n,r)).then((e=>{this.setState({isSaving:!1}),i(e)})).catch((e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})}))})),_(this,"handleKeyDown",(({event:e})=>{const{createError:t,inputName:i}=this.state;[s.Z.ENTER,s.Z.NUMPAD_ENTER].includes(e.which)&&!t&&i.trim()&&this.onCreateSection()})),_(this,"handleChangeName",(({value:e})=>{this.setState({createError:null,inputName:e})})),_(this,"handleInputRef",(e=>{this.setState({inputRef:e})})),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:i,inputRef:n}=this.state;!n||t.inputRef&&!i||n.focus()}render(){const{showTitle:e,positionRelative:t}=this.props,{createError:i,inputName:n,isSaving:o}=this.state,s=!!n.trim()&&!i;return(0,p.jsxs)(h.xu,{display:"flex",direction:"column",color:"default",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&(0,p.jsx)(h.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,p.jsx)(h.X6,{size:"400",children:this.props.i18n.bt("Aggiungi sezione", "Add section", "Title in the add section modal", undefined, true)})}),(0,p.jsxs)(h.xu,{padding:4,children:[(0,p.jsx)(h.xu,{marginBottom:2,children:(0,p.jsx)(h.__,{htmlFor:"sectionEditName",children:(0,p.jsx)(h.xv,{size:"200",color:i?"error":"subtle",children:this.props.i18n.bt("Nome", "Name", "Board section name", undefined, true)})})}),(0,p.jsx)(h.xu,{children:(0,p.jsx)(h.xu,{ref:this.handleInputRef,children:(0,p.jsx)(h.nv,{errorMessage:i||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n.bt("Come \"Illuminazione\"", "Like \"Lighting\"", "Placeholder for board section name", undefined, true),size:"lg",type:"text",value:n})})})]}),(0,p.jsx)(h.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow"}),(0,p.jsx)(h.xu,{padding:4,children:(0,p.jsx)(h.kC,{alignItems:"stretch",justifyContent:"end",children:(0,p.jsx)(r.Z,{disabled:!s||o,onClick:this.onCreateSection,submitting:o,text:this.props.i18n.bt("Aggiungi", "Add", "add a new section", undefined, true)})})})]})}}const m=function(e){const t=(0,o.useDispatch)(),i=(0,u.ZP)(),n=(0,l.Z)(),s=(0,a.Z)();return(0,p.jsx)(g,{...e,dispatch:t,i18n:i,viewer:n,orbacActingAs:s})}},818747:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(89254),o=i(883119),s=i(785893);function r({url:e,description:t,color:i}){return i=i||"#8fa7bf",(0,s.jsx)(o.xu,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:i}},children:(0,s.jsxs)(o.xu,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&(0,s.jsx)(o.xu,{marginBottom:2,children:(0,s.jsx)(o.xv,{color:"inverse",size:"100",children:(0,n.Z)(e).hostname||e})}),(0,s.jsx)(o.xu,{maxHeight:144,children:(0,s.jsx)(o.xv,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}},850760:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(312918),s=i(142103),r=i(883119),a=i(407043),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.PureComponent{constructor(...e){super(...e),d(this,"state",{}),d(this,"handleUserFollow",((e,t)=>{this.setState({isFollowing:t}),t?this.props.logContextEvent({event_type:45,object_id_str:e,view_type:3,view_parameter:73}):this.props.logContextEvent({event_type:46,object_id_str:e,view_type:3,view_parameter:73})}))}static getDerivedStateFromProps(e,t){return void 0===t.isFollowing&&e.user?{isFollowing:e.user.followed_by_me}:Object.freeze({})}render(){const{user:e}=this.props,{id:t,full_name:i,image_medium_url:n,username:a}=e,d=a?`/${a}/`:"";return t&&i?(0,l.jsxs)(r.xu,{display:"flex",alignItems:"center",marginStart:-1,marginEnd:-1,children:[(0,l.jsx)(r.xu,{flex:"grow",paddingX:1,children:(0,l.jsx)(o.default,{fullName:i,imageUrl:n,profileUrl:d,openNewTab:!0})}),(0,l.jsx)(r.xu,{flex:"none",paddingX:1,children:(0,l.jsx)(s.Z,{fullName:i,suppressToasts:!0,id:t,imageUrl:n||"",isOwnProfile:!1,onUserFollow:e=>this.handleUserFollow(t,e),profileUrl:d,size:"md"})})]}):null}}const u=function(e){const{logContextEvent:t}=(0,a.v)();return(0,l.jsx)(c,{...e,logContextEvent:t})}},475970:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var n=i(667294),o=i(898781),s=i(883119),r=i(785893);function a({size:e,iconColor:t,backgroundColor:i,disabled:n,onClick:a}){const l=(0,o.ZP)(),d=48===e?"lg":"xl";return(0,r.jsx)(s.hU,{accessibilityLabel:l.bt("Copia link", "Copy Link", "shareMenu.icon.accessibilityLabel.copy", undefined, true),bgColor:i,icon:"link",iconColor:t||i&&!["white","lightGray","transparent"].includes(i)?t:"gray",size:d,disabled:n,onClick:a})}var l=i(172071),d=i(375436),c=i(67428),u=i(499128),h=i(53987),p=i(867060),_=i(407043),g=i(773285),m=i(616550),f=i(343341),x=i(743473),b=i(827896);function y({backgroundColor:e,iconColor:t,iconSize:i,iconWrapperWidth:y,isCloseupActionBar:v,marginEnd:P,onClick:w,sharedObject:I,spaceBelowIcon:A,viewType:E,viewParameter:C,relayEnvironment:S}){const j=(0,o.ZP)(),{logContextEvent:T}=(0,_.v)(),{checkExperiment:D}=(0,g.F)(),k=D("web_share_menu_logging").anyEnabled,z=(0,f.F9)(),[O,R]=(0,n.useState)(""),[L,M]=(0,n.useState)(!1),[B,N]=(0,n.useState)(!1),F=(0,m.useLocation)(),Z=(0,b.Z)(),U=j.bt("Link copiato.", "Link copied!", "shareSheet.socialBar.copyLinkButton.LinkCopied", undefined, true),V=e=>{v?navigator.clipboard.writeText(e).then((()=>{var e;e=j.bt("Link copiato negli appunti da condividere", "Copied link to your clipboard to share", "web.unauth.pinbar.copylink", undefined, true),z.showToast((({hideToast:t})=>(0,r.jsx)(s.xu,{top:!0,children:(0,r.jsx)(u.ZP,{duration:3e3,onHide:t,text:e})})))})):navigator.clipboard.writeText(e).then((()=>{N(!0),setTimeout((()=>{N(!1)}),3e3)}))},H=async()=>{if(O)return void V(O);M(!0);const e=(e=>{let t;if("pin"===I.type&&I.id){const e={shouldTrackForPrevLocation:!0};t=Z(I.id,e)}return{invite_category:3,invite_channel:e,object_type:I.type,object_id:I.id,name:I.name,description:I.description||"",path:I.url,picture:I.imageUrl,client_tracking_params:t}})(12);x.Z.createShareInviteData(e,S).then((t=>{const{invite_url:i}=t;M(!1),i&&(R(i),x.Z.logShareInvite(e,t,S),V(i))}))},G=()=>{if(H(),k){const e=p.yF[I.type];e||l.Z.increment("social.web.copyLinkButton.sharedObject.type",void 0,{type:I.type}),v&&T({event_type:101,component:14147,element:13103,object_id_str:I.id,view_type:E,view_parameter:C,aux_data:e?{invite_object:e}:void 0}),w&&w()}};return(0,h.am)(F)&&v&&D("web_copy_link_btn_replace").anyEnabled?(0,r.jsx)(s.xu,{marginStart:1,children:(0,r.jsx)(s.zx,{accessibilityLabel:j.bt("Copia link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true),text:j.bt("Copia link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true),onClick:()=>G(),size:"lg",color:"gray",fullWidth:!0})}):(0,r.jsxs)(c.Z,{isCloseupActionBar:!0,width:y||i,marginEnd:P||!1,children:[(0,r.jsx)(s.xu,{alignItems:v?"center":"stretch",display:v?"flex":"block",marginBottom:A,width:v?"100%":"auto",children:(0,r.jsx)(s.kC,{alignItems:"center",direction:"column",justifyContent:"center",width:i,children:(0,r.jsx)(a,{backgroundColor:e,iconColor:t,size:i,onClick:G,disabled:L})})}),!v&&(0,r.jsx)(d.Z,{text:B?U:j.bt("Copia link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true)})]})}},750869:(e,t,i)=>{i.d(t,{d:()=>n});const n={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article"}},827021:(e,t,i)=>{i.r(t),i.d(t,{default:()=>he});var n=i(667294),o=i(172071),s=i(116303),r=i(898781),a=i(977558),l=i(349700),d=i(407043),c=i(773285),u=i(385740);const h=48,p="error";var _=i(883119),g=i(785893);function m({idx:e,item:t,onSendMessage:i,onViewConversation:o,sentHistory:m,objectAttachment:f,component:x}){var b;const y=(0,r.ZP)(),{logContextEvent:v}=(0,d.v)(),[P,w]=(0,n.useState)(!1),{viewType:I,viewParameter:A}=(0,u.SU)(),E=t.id||"string"==typeof t.email&&t.email||"",C=m[E]===p,S=Object.prototype.hasOwnProperty.call(m,E)&&!C,j=null!==(b=m[E])&&void 0!==b?b:"";(0,n.useEffect)((()=>{C&&w(!1)}),[C]);let T="";const{full_name:D,email:k}=t;"string"!=typeof D||D.match(/^\s*$/)?"string"!=typeof k||k.match(/^\s*$/)||(T=k):T=D;let z,O,R="";S?R=y.bt("Vedi chat", "View chat", "shareSheet.ContactItem.viewChat", undefined, true):P&&(R=y.bt("Inviato", "Sent", "shareSheet.ContactItem.sent", undefined, true)),"pinner"===f.type||"user"===f.type?(z=13530,O=13532):"board"===f.type?(z=13527,O=13529):(z=13524,O=13526);const{checkExperiment:L}=(0,c.F)(),M=L("web_share_show_more_contacts").anyEnabled;return(0,g.jsx)(_.xu,{"data-test-id":"sharesheet-contact-item",width:74,marginBottom:5,children:(0,g.jsx)(_.iP,{onTap:S?()=>{v({view_type:I,view_parameter:A,event_type:10399,component:x,element:O}),o(j)}:()=>{v({event_type:101,component:13029,element:1039,aux_data:{result_index:e+1,rs:t.debug_reason.reason}}),v({view_type:I,view_parameter:A,event_type:10399,component:x,element:z,aux_data:{result_index:e+1,rs:t.debug_reason.reason}}),w(!0),i(t)},children:(0,g.jsxs)(_.kC,{direction:"column",alignItems:"center",children:[(0,g.jsxs)(_.xu,{alignItems:"center","data-test-id":P?"sharesheet-viewchat-link":"sharesheet-contact-item-button",display:"flex",height:h,justifyContent:"center",marginBottom:2,width:h,children:[P&&(0,g.jsx)(_.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"sharesheet-contact-item-sent-icon",display:"flex",height:h,justifyContent:"center",position:"absolute",rounding:"circle",width:h,zIndex:new _.Ry(a.fe),children:(0,g.jsx)(_.JO,{accessibilityLabel:(0,l.Wc)(y.bt("Inviato a {{recipientName}}", "Sent to {{recipientName}}", "shareSheet.ContactItem.sentIcon.accessibilityLabel", undefined, true),{recipientName:T}),icon:"check",color:"light",size:24})}),(0,g.jsx)(s.Z,{size:"fit",src:t.image_large_url,name:T})]}),(0,g.jsxs)(_.xu,{"data-test-id":"sharesheet-contact-item-label",width:M?"100%":h,paddingX:M?1:void 0,children:[(0,g.jsx)(_.xv,{lineClamp:1,size:"100",align:"center",children:T}),(0,g.jsx)(_.xv,{color:"subtle",size:"100",align:"center",children:R})]})]})})})}var f=i(784590),x=i(313951),b=i(17676);function y(e){var t;const{logContextEvent:i}=(0,d.v)(),o=(0,r.ZP)(),{onHide:s,onSendMessage:a,onShowImportContacts:l,objectAttachment:p,sentHistory:y}=e,{isLoaded:v}=(0,f.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default",hide_group_conversations:!0},noCache:!0}),{checkExperiment:P}=(0,c.F)(),w=P("web_share_show_more_contacts").anyEnabled?9:4,{shareSuggestions:I}=(0,b.E)(),A=(null===(t=I[""])||void 0===t?void 0:t.slice(0,w))||[],E=A.length>0,{viewType:C,viewParameter:S}=(0,u.SU)();(0,n.useEffect)((()=>{if(v){i({event_type:E?7511:7512,component:56,view_type:70,view_parameter:256})}}),[E,i,v]);const{dropdownOpen:j,conversationOpen:T,newMessageOpen:D}=(0,x.Z5)(),k=e=>{T(e),j(),s()},z=A.map(((t,i)=>{const n=`${t.id||t.email||i}`,o={item:t,idx:i,onSendMessage:a,onViewConversation:k,sentHistory:y,objectAttachment:p},s=e.component;return(0,g.jsx)(m,{...o,component:s},n)})),O=!E&&!v;return(0,g.jsxs)(_.kC,{direction:"column",children:[(0,g.jsx)(_.kC,{alignItems:"center",height:49,justifyContent:"center",children:(0,g.jsx)(_.xv,{align:"center",size:"200",weight:"bold",children:o.bt("Invia su Pinterest", "Send on Pinterest", "ContactsSuggestions.Header.text", undefined, true)})}),(0,g.jsx)(_.kC,{flex:"none",minHeight:81,justifyContent:O?"center":void 0,children:O?(0,g.jsx)(_.xu,{paddingY:2,children:(0,g.jsx)(_.$j,{accessibilityLabel:o.bt("Caricamento messaggi conversazione in corso", "Loading Conversation Messages", "SendObject.contactList.spinner", undefined, true),show:!0})}):(0,g.jsxs)(_.kC,{wrap:!0,children:[(0,g.jsxs)(_.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:74,children:[(0,g.jsx)(_.xu,{height:h,marginBottom:2,width:h,children:(0,g.jsx)(_.hU,{accessibilityLabel:o.bt("Cerca utenti", "Search for users", "ContactsSuggestsions.SearchIcon.accessibilityLabel", undefined, true),bgColor:"lightGray",icon:"search",iconColor:"darkGray",onClick:()=>{e.onSearchClick&&e.onSearchClick();const t=e.component;let n;n="pinner"===p.type||"user"===p.type?13531:"board"===p.type?13528:13525,i({view_type:C,view_parameter:S,event_type:10399,component:t,element:n}),D(p),j(),s()},size:"lg"})}),(0,g.jsx)(_.xv,{lineClamp:1,size:"100",children:o.bt("Cerca", "Search", "ContactsSuggestions.SearchOption.text", undefined, true)})]}),E?z:(0,g.jsxs)(_.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:74,children:[(0,g.jsx)(_.xu,{height:h,marginBottom:2,width:h,children:(0,g.jsx)(_.hU,{accessibilityLabel:o.bt("Cerca utenti", "Search for users", "ContactsSuggestsions.SearchIcon.accessibilityLabel", undefined, true),bgColor:"lightGray",icon:"people",iconColor:"darkGray",onClick:l,size:"lg"})}),(0,g.jsx)(_.xv,{lineClamp:1,size:"100",children:o.bt("Importa", "Import", "ContactsSuggestions.ImportOption.text", undefined, true)})]})]})})]})}function v(e){switch(e){case"AuthHomefeed":return 13;case"BaseBoardPinGrid":return 5;case"BoardMoreIdeasTabContent":return 23;case"ConversationView":return 19;case"FollowingFeedGrid":return 21;case"ProfilePromotablePinCard":return 1;case"RelatedPinGrid":case"RelatedProductsFeed":return 14;case"RelatedProductsExploreTab":return 4;case"ShoppingPackageItem":case"ShoppingSquareGridProductDetailPage":case"ShoppingGridShippedMetadata":case"ProductPinsFeed":return 27;case"StoryPinFeedGrid":return 28;case"TodayArticleFeed":return 20;case"UserProfilePinGrid":default:return e}}var P=i(936776),w=i(750869);function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A extends n.Component{constructor(...e){super(...e),I(this,"state",{textValue:this.props.initialTextValue||"",emailValue:""}),I(this,"handleSendEmail",((e,t)=>{if(e){const i={type:"email_share_suggestion",id:"",email:e,debug_reason:{reason:"",readable_reason:""}};this.props.onSendMessage(i,t)}})),I(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})})),I(this,"handleEmailValueChange",(({value:e})=>{this.setState({emailValue:e})}))}renderCloseButton(){const{i18n:e,onCancelDraft:t}=this.props;return(0,g.jsx)(_.hU,{accessibilityLabel:e.bt("Annulla condivisione con utente", "Cancel share to user", "accessibility label for close button", undefined, true),icon:"arrow-back",onClick:t,size:"sm",iconColor:"gray"})}render(){const{width:e}=this.props;return(0,g.jsxs)(_.xu,{display:"flex",direction:"column",column:12,paddingX:4,paddingY:2,width:e,color:"default",children:[(0,g.jsxs)(_.xu,{display:"flex",alignItems:"center",paddingY:4,children:[this.renderCloseButton(),(0,g.jsx)(_.xu,{flex:"grow",marginEnd:8,children:(0,g.jsx)(_.xv,{align:"center",weight:"bold",children:this.props.i18n.bt("Invia a", "Send to", "shareSheet.SendToEmail.label", undefined, true)})})]}),(0,g.jsxs)(_.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,g.jsx)(_.xu,{paddingY:1,marginBottom:4,children:(0,g.jsx)(_.Kx,{id:"email",onChange:this.handleEmailValueChange,placeholder:this.props.i18n.bt("Inserisci indirizzo email", "Enter email address", "Email address to send to", undefined, true),value:this.state.emailValue||"",rows:1})}),(0,g.jsx)(_.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n.bt("Crea un messaggio", "Add a message", "shareSheet.SendToEmail.textareaPlaceholder", undefined, true),value:this.state.textValue||""}),(0,g.jsx)(_.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,g.jsx)(_.zx,{size:"lg",color:"red",onClick:()=>this.handleSendEmail(this.state.emailValue||"",this.state.textValue||""),type:"submit",text:this.props.i18n.bt("Invia", "Send", "shareSheet.SendToEmail.sendButton", undefined, true),disabled:!(0,P.Z)(this.state.emailValue)})})]})]})}}function E(e){const t=(0,r.ZP)();return(0,g.jsx)(A,{...e,i18n:t})}var C=i(567831),S=i(475970),j=i(31149),T=i(107193),D=i(659522),k=i(331744),z=i(757146);function O({size:e=48}){return(0,g.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,g.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,g.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,g.jsx)("path",{d:"M39 19.5c0 1.381-1.119 2.5-2.5 2.5S34 20.881 34 19.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5ZM18.5 28c0-.69-.56-1.25-1.25-1.25S16 27.31 16 28s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25ZM26.75 38.75c0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25S28.69 40 28 40s-1.25-.56-1.25-1.25Z",fill:"#E60023"}),(0,g.jsx)("path",{d:"M29.25 17.25c0 .69-.56 1.25-1.25 1.25s-1.25-.56-1.25-1.25S27.31 16 28 16s1.25.56 1.25 1.25ZM17 36.5c0-1.381 1.119-2.5 2.5-2.5s2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5-2.5-1.119-2.5-2.5ZM38.75 26.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25S40 28.69 40 28s-.56-1.25-1.25-1.25Z",fill:"#FFD63F"}),(0,g.jsx)("path",{d:"M19.5 22c1.381 0 2.5-1.119 2.5-2.5S20.881 17 19.5 17 17 18.119 17 19.5s1.119 2.5 2.5 2.5ZM36.5 34c-1.381 0-2.5 1.119-2.5 2.5s1.119 2.5 2.5 2.5 2.5-1.119 2.5-2.5-1.119-2.5-2.5-2.5Z",fill:"#46CC88"}),(0,g.jsx)("path",{d:"M28 21c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7Z",fill:"#3869FF"})]})}var R=i(375436),L=i(67428),M=i(19121);function B({iconSize:e,iconWrapperWidth:t,marginBottom:i,marginEnd:n,onCreatePincodeClick:o,sharedObject:s}){const a=(0,r.ZP)(),l=(0,M.Z)();return o&&[w.d.BOARD,w.d.PINNER,w.d.USER].includes(s.type)&&l.isAuth&&(s.id===l.id||l.isEmployee)?(0,g.jsxs)(L.Z,{width:t,marginEnd:n,children:[(0,g.jsx)(_.xu,{marginBottom:i,children:(0,g.jsx)(_.iP,{fullWidth:!1,onTap:o,children:(0,g.jsx)(O,{size:e})})}),(0,g.jsx)(R.Z,{text:a.bt("Pincode", "Pincode", "Share via pincode", undefined, true)})]},"pincode"):null}var N=i(464240),F=i(22641),Z=i(167912),U=i(780280),V=i(743473),H=i(827896),G=i(867060),W=i(343341);function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const q={backgroundColor:"#ffffff",border:"none",padding:0},Y=new Set(["JP","TW","TH"]),X=(e,t)=>{(0,T.default)((t=>{t&&(t.getUserID()?e():t.login((()=>{e()})))}),t)};class K extends n.Component{constructor(...e){super(...e),$(this,"state",{whatsappInviteData:null,inviteData:null,whatsappURL:"",whatsAppLogged:!1,copyLinkLogged:!1}),$(this,"logShareInviteLink",(()=>{const{copyLinkLogged:e,inviteData:t}=this.state,i=this.getShareOptions(12);e||(V.Z.logShareInvite(i,t,this.props.relayEnvironment),this.setState({copyLinkLogged:!0}))}))}componentDidMount(){this.getWhatsAppURL()}getShareOptions(e){let t;const{sharedObject:i,getClientTrackingParams:n}=this.props;if("pin"===i.type&&i.id){const e={shouldTrackForPrevLocation:!0};t=n(i.id,e)}return{invite_category:3,invite_channel:e,object_type:i.type,object_id:i.id,name:i.name,description:i.description||"",path:i.url,picture:i.imageUrl,client_tracking_params:t}}getWhatsAppURL(){const e=this.getShareOptions(10);V.Z.createShareInviteData(e,this.props.relayEnvironment).then((e=>{const t=`${e.title}\n${e.invite_url}`;if(t){const i=encodeURIComponent(t);this.setState({whatsappInviteData:e,whatsappURL:"https://web.whatsapp.com/send?text="+i})}else this.setState({whatsappURL:"https://web.whatsapp.com/send?text="+(0,C.Z)(this.props.sharedObject.url)})}))}checkWritePermissions(){return!!this.props.viewer.isWriteBanned}handleSocialShareClick(e,t){if(this.checkWritePermissions())return;const{onCreatePincodeClick:i,onExternalSend:n,logContextEvent:s,viewType:r,viewParameter:a,inShareMenuLoggingExp:l,sharedObject:d,component:c}=this.props;let u=l?G.cc[t]:46;"facebook"===e||5===t?(this.openFacebookDialog(),l||(u=257)):"twitter"===e||9===t?(this.openTwitterDialog(),l||(u=256)):"messenger"===e||6===t?(this.openFbMessengerDialog(),l||(u=950)):"whatsapp"===e||10===t?(this.openWhatsAppDialog(),l||(u=951)):"pincode"===e||16===t?i&&i():"copylink"===e||12===t?(this.openShareUrlLink(),l||(u=100)):"email"===e||1===t?(this.openEmailDialog(),l||(u=258)):"line"!==e&&8!==t||(this.openLineDialog(),l||(u=952)),n&&n();const h=G.yF[d.type];h||o.Z.increment("social.web.legoShareSocialBar.sharedObject.type",void 0,{type:d.type}),s({event_type:101,component:l?14121:153,element:u,object_id_str:l?d.id:void 0,view_type:l?r:void 0,view_parameter:l?a:void 0,aux_data:l?{invite_object:h}:void 0});const p={board:G.LO,pinner:G.Pu,user:G.Pu,pin:G.dB,did_it:G.dB,today_article:G.dB};s({event_type:10399,component:c,object_id_str:d.id||void 0,view_type:r,view_parameter:a,aux_data:{invite_object:h},element:p[d.type][t]})}openEmailDialog(){this.props.onEmailIconClick()}openFacebookDialog(){const{unauthId:e,viewer:t}=this.props;X((()=>{V.Z.shareFacebookInvite({options:this.getShareOptions(5),unauthId:e,viewer:t},this.props.relayEnvironment)}),t)}openFbMessengerDialog(){const{unauthId:e,viewer:t}=this.props;X((()=>{V.Z.shareFbMessengerInvite({options:this.getShareOptions(6),unauthId:e,viewer:t},this.props.relayEnvironment)}),t)}openWhatsAppDialog(){const e=this.getShareOptions(10);this.state.whatsAppLogged||(V.Z.logShareInvite(e,this.state.whatsappInviteData,this.props.relayEnvironment),this.setState({whatsAppLogged:!0}))}openShareUrlLink(){this.logShareInviteLink()}openTwitterDialog(){V.Z.shareTwitterInvite(this.getShareOptions(9),this.props.relayEnvironment)}openLineDialog(){V.Z.shareLineInvite(this.getShareOptions(8),this.props.relayEnvironment)}renderEmail(){return(0,g.jsxs)(L.Z,{width:74,marginEnd:!1,children:[(0,g.jsx)(_.xu,{display:"inlineBlock",marginBottom:2,children:(0,g.jsx)("button",{"aria-label":this.props.i18n.bt("Condividi via email", "Share on Email", "sharesheet.shareSocialBar.ShareEmail", undefined, true),onClick:()=>this.handleSocialShareClick("email",1),style:q,children:(0,g.jsx)(j.Z,{size:48})})}),(0,g.jsx)(R.Z,{text:this.props.i18n.bt("Email", "Email", "Share via email", undefined, true)})]},"email")}renderShareOptions(){const{i18n:e,onCreatePincodeClick:t,sharedObject:i,showLineShare:o,showMessengerShare:s,showEmailOption:r,viewType:a,viewParameter:l}=this.props,d=h,c=74;return(0,g.jsx)(n.Fragment,{children:(0,g.jsxs)(_.kC,{justifyContent:"start",wrap:!0,children:[o&&(0,g.jsxs)(L.Z,{width:c,marginEnd:!1,children:[(0,g.jsx)(_.xu,{marginBottom:2,children:(0,g.jsx)("button",{"aria-label":e.bt("Condividi su LINE", "Share on LINE", "sharesheet.shareSocialBar.ShareLine", undefined, true),onClick:()=>this.handleSocialShareClick("line",8),style:q,children:(0,g.jsx)(k.Z,{size:d})})}),(0,g.jsx)(R.Z,{text:e.bt("LINE", "LINE", "sharesheet.shareSocialBar.ShareLineLabel", undefined, true)})]}),(0,g.jsxs)(L.Z,{width:c,marginEnd:!1,children:[(0,g.jsx)(_.xu,{marginBottom:2,children:(0,g.jsx)("button",{"aria-label":e.bt("Condividi su WhatsApp", "Share on WhatsApp", "sharesheet.shareSocialBar.ShareWhatsapp", undefined, true),onClick:()=>this.handleSocialShareClick("whatsapp",10),style:q,tabIndex:"-1",children:(0,g.jsx)(_.iP,{rounding:"circle",role:"link",href:this.state.whatsappURL,target:"blank",children:(0,g.jsx)(F.Z,{size:d})})})}),(0,g.jsx)(R.Z,{text:e.bt("WhatsApp", "WhatsApp", "sharesheet.shareSocialBar.ShareWhatsappLabel", undefined, true)})]}),s&&(0,g.jsxs)(L.Z,{width:c,marginEnd:!1,children:[(0,g.jsx)(_.xu,{marginBottom:2,children:(0,g.jsx)("button",{"aria-label":e.bt("Condividi su Messenger", "Share on Messenger", "sharesheet.shareSocialBar.ShareMessenger", undefined, true),onClick:()=>this.handleSocialShareClick("messenger",6),style:q,children:(0,g.jsx)(z.Z,{size:d})})}),(0,g.jsx)(R.Z,{text:e.bt("Messenger", "Messenger", "sharesheet.shareSocialBar.ShareMessengerLabel", undefined, true)})]}),(0,g.jsxs)(L.Z,{width:c,marginEnd:!1,children:[(0,g.jsx)(_.xu,{marginBottom:2,children:(0,g.jsx)("button",{"aria-label":e.bt("Condividi su Facebook", "Share on Facebook", "sharesheet.shareSocialBar.ShareFacebook", undefined, true),onClick:()=>this.handleSocialShareClick("facebook",5),style:q,children:(0,g.jsx)(D.Z,{size:d})})}),(0,g.jsx)(R.Z,{text:e.bt("Facebook", "Facebook", "sharesheet.shareSocialBar.ShareFacebookLabel", undefined, true)})]}),(0,g.jsxs)(L.Z,{width:c,marginEnd:!1,children:[(0,g.jsx)(_.xu,{marginBottom:2,children:(0,g.jsx)("button",{"aria-label":e.bt("Condividi su Twitter", "Share on Twitter", "sharesheet.shareSocialBar.ShareTwitter", undefined, true),onClick:()=>this.handleSocialShareClick("twitter",9),style:q,"data-test-id":"twitter-share-icon",children:(0,g.jsx)(N.Z,{size:d})})}),(0,g.jsx)(R.Z,{text:e.bt("Twitter", "Twitter", "sharesheet.shareSocialBar.ShareTwitterLabel", undefined, true)})]}),(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(B,{iconSize:d,iconWrapperWidth:c,marginBottom:2,marginEnd:!1,onCreatePincodeClick:t,sharedObject:i}),(0,g.jsx)(S.default,{sharedObject:i,backgroundColor:"lightGray",iconColor:"darkGray",iconSize:d,iconWrapperWidth:c,onClick:()=>this.handleSocialShareClick("copylink",12),isCloseupActionBar:!1,spaceBelowIcon:2,viewType:a,viewParameter:l,relayEnvironment:this.props.relayEnvironment},"copylink"),r&&this.renderEmail()]})]})})}render(){const{paddingX:e}=this.props;return(0,g.jsxs)(_.xu,{paddingX:e,children:[(0,g.jsx)(_.kC,{alignContent:"center",alignItems:"center",height:49,justifyContent:"center",children:(0,g.jsx)(_.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Condividi", "Share", "Sharesheet.ShareSocialBar", undefined, true)})}),(0,g.jsx)(_.kC,{alignContent:"start",alignItems:"stretch",justifyContent:"start",minHeight:81,children:this.renderShareOptions()})]})}}function J(e){const{logContextEvent:t}=(0,d.v)(),{checkExperiment:i}=(0,c.F)(),n=(0,r.ZP)(),o=(0,M.Z)(),s=o.isAuth&&Y.has(o.country),a=i("web_messenger_share_channel").anyEnabled,l=(0,U.B)(),u=i("web_share_menu_logging").anyEnabled,h=i("graphql_migration_sharesheet_sgrowth_web").anyEnabled,p=(0,Z.useRelayEnvironment)();return(0,g.jsx)(K,{...e,toastManagerContext:(0,W.F9)(),viewer:(0,M.Z)(),showLineShare:s,showMessengerShare:a,i18n:n,logContextEvent:t,unauthId:l.unauthId,inShareMenuLoggingExp:u,shareSheetExpEnabled:h,relayEnvironment:h?p:void 0,getClientTrackingParams:(0,H.Z)()})}var Q=i(214494),ee=i(499128),te=i(717615),ie=i(231947),ne=i(697247);const oe=(e,t)=>e.reduce(((e,i)=>({...e,[i]:t})),{});function se(e){const{logContextEvent:t}=(0,d.v)(),i=(0,r.ZP)(),[s,a]=(0,n.useState)(!1),[l,u]=(0,n.useState)(null),[h,m]=(0,n.useState)({}),[f]=(0,n.useState)(((e,t)=>"today_article"===e?t.bt("Dai un'occhiata a questo articolo su Pinterest!", "Check out this article on Pinterest!", "sendObject.initialTextValue.todayArticle", undefined, true):"")(e.sendType,i)),{showOneToast:b}=(0,W.F9)(),{surface:P}=(0,ne.$)(),w=(0,M.Z)(),I=(0,te.Z)(),{conversationCreate:A}=(0,x.Z5)(),C=(0,x.NG)(),S=(0,n.useRef)();(0,n.useEffect)((()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.focus()}),[]);const j=(i,n)=>{a(!1),e.onMessageSent(),((i,n)=>{const{sharedObject:s}=e,r=s.id;o.Z.increment("web.sharesheet.internal.send",1,{status:"success"}),t({event_type:180,element:276,object_id_str:r,aux_data:{conversation_id:i,pin_id:n}})})(i,n)},T=(e,t)=>{o.Z.increment("web.sharesheet.internal.send",1,{status:"fail"}),m({...h,...oe(e,p)});const i=t.message_detail||t.message;i&&b((({hideToast:e})=>(0,g.jsx)(ee.ZP,{type:"error",duration:5e3,onHide:e,text:i})))},D=async(t,i,n)=>{const{sharedObject:o,sendType:s}=e,r=o.id,a={emails:i,user_ids:t,text:n,source:v(P)};a[s]=r;const l=Q.Z.create("ConversationsResource",a),d=t.length>0?t:i;try{const e=await l.callCreate(),t=e&&e.resource_response.data;A(t),j(t.id,"pin"===s?r:null),m({...h,...oe(d,t.id)})}catch(c){T(d,c)}},k=(i,n)=>{"conversation_share_suggestion"===i.type?((t,i)=>{const{sharedObject:n,sendType:o}=e;let s;switch(o){case"pin":s="pinId";break;case"board":s="boardId";break;case"did_it":s="didItId";break;case"user":case"pinner":s="userId"}const r=s?C(t,{text:i,[s]:n.id,source:v(P)},void 0,w):void 0;r&&r.then((()=>{j(t,"pin"===o?n.id:null),m({...h,[t]:t})})).catch((e=>{T([t],e)}))})(i.id,n):"user_share_suggestion"===i.type&&i.username?D([i.id],[],n):D([],[i.email],n),t({event_type:101,component:56,element:276})},{onCreatePincodeClick:z,onShowImport:O,sendType:R,sharedObject:L,onHide:B,onExternalSend:N,viewType:F,viewParameter:Z,onSearchClick:U,component:V}=e,H="user"===e.sendType&&(0,ie.q6)(w,e.sharedObject.id,I),G=("board"===e.sendType||"pin"===e.sendType)&&void 0!==e.sharedObject.ownerId&&(0,ie.q6)(w,e.sharedObject.ownerId,I),$=H||G,q=w.should_show_messaging&&!$,{checkExperiment:Y}=(0,c.F)(),X=q&&Y("web_share_show_more_contacts").anyEnabled,K=(0,g.jsx)(_.xu,{paddingY:1,paddingX:3,children:(0,g.jsx)(_.iz,{})}),se=(0,g.jsxs)(n.Fragment,{children:[X&&K,(0,g.jsx)(J,{onCreatePincodeClick:z,onEmailIconClick:()=>{a(!0),u("email")},onExternalSend:N,onHide:B,sharedObject:L,showEmailOption:q,viewType:F,viewParameter:Z,component:V}),!X&&q&&K]});return s&&"email"===l?(0,g.jsx)(E,{initialTextValue:f,objectId:L.id,objectType:R,onCancelDraft:()=>{a(!1),u(null)},onHide:B,onSendMessage:k,width:394}):(0,g.jsxs)(_.xu,{color:"default",paddingX:3,paddingY:1,width:394,tabIndex:0,ref:S,children:[!X&&se,q&&(0,g.jsx)(y,{objectAttachment:{type:R,id:L.id},onHide:B,onSendMessage:k,onSearchClick:U,onShowImportContacts:O,sentHistory:h,component:V}),X&&se]})}var re=i(177471);const ae=["facebook","google"];function le(e,t){return"facebook"===e?t.bt("Facebook", "Facebook", " - ", undefined, true):"google"===e?t.bt("Google", "Google", " - ", undefined, true):t.bt("Altro", "Other", " - ", undefined, true)}function de(e,t,i){return"facebook"===e?i.bt("Amici che sono su Pinterest", "Friends who are on Pinterest", " - ", undefined, true):"google"===e&&t&&-1!==t.indexOf("@gmail")?t:null}function ce({onBack:e}){const t=(0,r.ZP)(),i=(0,M.Z)(),n=i.isAuth?i.email:null,o=ae.filter((e=>!i.isAuth||!1===i.socialNetwork[e].connected)),s=(0,re.k)();return(0,g.jsx)(_.xu,{paddingX:1,paddingY:2,children:(0,g.jsxs)(_.kC,{gap:{row:0,column:2},direction:"column",children:[(0,g.jsxs)(_.kC,{gap:{row:2,column:0},alignItems:"center",children:[(0,g.jsx)(_.hU,{accessibilityLabel:t.bt("Indietro", "Back", " - ", undefined, true),icon:"arrow-back",iconColor:"darkGray",onClick:e,size:"md"}),(0,g.jsx)(_.xv,{size:"300",weight:"bold",children:t.bt("Carica contatti da...", "Upload contacts from...", " - ", undefined, true)})]}),(0,g.jsx)(_.kC,{direction:"column",gap:{row:0,column:4},children:o.map((e=>(0,g.jsx)(_.xu,{paddingX:2,children:(0,g.jsxs)(_.iP,{onTap:()=>(e=>{s.handleConnect(e,!0,Object.freeze({}),t)})(e),children:[(0,g.jsx)(_.xv,{size:"200",children:le(e,t)}),(0,g.jsx)(_.xv,{size:"200",children:de(e,n,t)})]})},e)))})]})})}var ue=i(749049);function he({element:e,onCreatePincodeClick:t,onExternalSend:i,onHide:s,sendType:r,sharedObject:l,viewType:h,viewParameter:p,component:m}){const{logContextEvent:f}=(0,d.v)(),[x,b]=(0,n.useState)(!1),{checkExperiment:y}=(0,c.F)(),v=y("web_share_menu_logging").anyEnabled,P=(0,n.useRef)(!1),{viewParameter:w}=(0,u.SU)();(0,n.useEffect)((()=>{const t=G.yF[r];return t||o.Z.increment("social.web.sendObjectWrapper.sendType",void 0,{type:r}),f({event_type:7120,component:v?14121:void 0,object_id_str:l.id,element:v?e:void 0,view_type:h,view_parameter:p,aux_data:v?{invite_object:t}:void 0}),f({event_type:10400,component:m,object_id_str:l.id,element:(0,ue.O)(t),view_type:h,view_parameter:p||w,aux_data:{invite_object:t}}),()=>{v||f({event_type:7121,object_id_str:l.id,view_type:h,view_parameter:p}),P.current||f({event_type:10403,component:m,object_id_str:l.id,element:13478,view_type:h,view_parameter:w,aux_data:{invite_object:t}});const e=P.current?7493:7492;f({event_type:e,component:v?14121:void 0,object_id_str:v?l.id:void 0,element:v?13097:void 0,view_type:h,view_parameter:p,aux_data:v?{invite_object:t}:void 0})}}),[]);const I=()=>{b(!0)},A=()=>{b(!1)},E=()=>{P.current=!0},C=()=>{P.current=!0},S=()=>{P.current=!0,i&&i()};return x?(0,g.jsx)(ce,{onBack:A}):(0,g.jsx)(_.xu,{overflow:"hidden",rounding:4,zIndex:new _.Ry(a.fe-1),color:"default",children:(0,g.jsx)(se,{onCreatePincodeClick:t,onHide:s,onShowImport:I,onMessageSent:C,onExternalSend:S,onSearchClick:E,sendType:r,sharedObject:l,viewType:h,viewParameter:p,component:m})})}},375436:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(207112),o=i(883119),s=i(785893);const r=({text:e})=>(0,s.jsx)(o.xv,{align:"center",size:"100",children:(0,s.jsx)(n.Z,{maxWidthPx:128,maxHeightPx:50,children:e})})},67428:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);const s=({width:e,marginEnd:t,children:i,isCloseupActionBar:s})=>(0,o.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",marginEnd:t?2:0,width:e,marginBottom:s?0:5,children:i})},749049:(e,t,i)=>{i.d(t,{O:()=>n});const n=e=>{switch(e){case 2:return 331;case 3:return 12631;default:return 72}}},980968:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(667294),o=i(898781),s=i(883119),r=i(785893);function a({user:e}){const t=(0,o.ZP)(),{full_name:i="",username:n,image_large_url:a}=e,l=i.length<=15?i:`${i.substring(0,15)}...`;return(0,r.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,r.jsx)(s.xu,{paddingX:1,children:(0,r.jsx)(s.HE,{role:"link",href:`/${encodeURIComponent(n)}/`,accessibilityLabel:t.bt("Avatar dell'utente", "User`s Avatar", "User`s Avatar", undefined, true),collaborators:[{name:i,src:null!=a?a:void 0}],size:"xs"})}),(0,r.jsx)(s.xu,{paddingX:1,children:(0,r.jsx)(s.xv,{size:"200",weight:"bold",children:(0,r.jsx)(s.rU,{href:`/${encodeURIComponent(n)}/`,rounding:2,tapStyle:"compress",children:(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{color:"#005062"}},children:l})})})})]})}const l=()=>{const e=(0,o.ZP)();return(0,r.jsx)(s.xu,{marginTop:1,children:(0,r.jsx)(s.iP,{role:"link",href:"/",tapStyle:"none",children:(0,r.jsx)("svg",{"aria-label":e.bt("Pinterest", "Pinterest", "InviteLandingPageV2.headerLogo.pinterestLogo", undefined, true),viewBox:"0 0 168 40",height:20,width:83,children:(0,r.jsxs)("g",{fill:"#005062",fillRule:"nonzero",children:[(0,r.jsxs)("g",{transform:"translate(47.213 6.557)",children:[(0,r.jsx)("path",{d:"M18.689 7.721h5.295v16.64h-5.295zM25.098 7.721h5.099V10h.098c1.23-1.787 2.82-2.754 5.131-2.754 3.64 0 5.787 2.606 5.787 6.311v10.82h-5.295v-9.754c0-1.754-.885-2.95-2.607-2.95-1.754 0-2.918 1.458-2.918 3.507v9.197h-5.295V7.721z"}),(0,r.jsx)("circle",{cx:"21.344",cy:"3.279",r:"3.18"}),(0,r.jsx)("path",{d:"M78.459 7.475c-.148-.016-.328-.016-.525-.016-2.016 0-3.377.885-4.557 2.852h-.098v-2.59h-5.066v16.64h5.295v-7.476c0-3.459 1.918-5.065 4.951-4.787V7.475zM104.459 13.869c-2.115-.394-4-.558-4-1.721 0-1.033 1-1.525 2.311-1.525 1.46 0 2.476.459 2.673 1.95h4.868c-.262-3.278-2.786-5.327-7.508-5.327-3.934 0-7.18 1.82-7.18 5.328 0 3.901 3.082 4.672 5.984 5.164 2.213.393 4.23.557 4.23 2.049 0 1.065-1 1.656-2.607 1.656-1.59 0-2.656-.673-2.984-2.05h-5.05c.378 3.427 3.378 5.492 8.066 5.492 4.361 0 7.574-1.885 7.574-5.524-.016-4.263-3.459-5-6.377-5.492zM86.967 21.05c-2.18 0-3.41-1.394-3.737-3.64h11.95c.033-3.377-.934-6.279-2.918-8.099-1.426-1.295-3.311-2.081-5.688-2.081-5.066 0-8.541 3.803-8.541 8.77 0 5.033 3.377 8.836 8.869 8.836 2.114 0 3.803-.557 5.196-1.525 1.46-1 2.443-2.442 2.787-3.934h-5.164c-.442 1.05-1.344 1.672-2.754 1.672zM86.672 11c1.721 0 2.951 1.262 3.148 3.246h-6.558c.361-1.967 1.41-3.246 3.41-3.246zM120.148 20.443c-.246.016-.574.016-.886.016-1.13 0-1.852-.328-1.852-1.623v-7.803h2.738V7.72h-2.738V2.46h-5.164v5.262h-1.623v3.312h1.623v8.934c0 3.574 2.213 4.59 5.295 4.59 1.18 0 2.066-.082 2.607-.196v-3.918zM50.672 20.443c-.213 0-.459.016-.688.016-1.132 0-1.853-.328-1.853-1.623v-7.803h2.541V7.72h-2.54V2.46h-5.165v5.262h-1.721v3.312h1.721v8.934c0 3.574 2.213 4.59 5.295 4.59 1.05 0 1.87-.065 2.41-.164v-3.95z"}),(0,r.jsx)("path",{d:"M50.41 16.016c0-4.967 3.475-8.77 8.54-8.77 2.378 0 4.263.787 5.69 2.082 1.983 1.82 2.95 4.705 2.917 8.098h-11.95c.327 2.246 1.557 3.64 3.737 3.64 1.394 0 2.312-.623 2.754-1.656h5.164c-.36 1.492-1.328 2.918-2.787 3.934-1.393.967-3.082 1.525-5.196 1.525-5.492-.017-8.87-3.82-8.87-8.853zm11.803-1.754c-.197-1.983-1.426-3.246-3.147-3.246-2.017 0-3.05 1.263-3.41 3.246h6.557zM.066 1.131h9.196c2.82 0 4.902.787 6.345 2.148C17.098 4.672 17.95 6.656 17.95 9c0 4.459-3.082 7.607-7.869 7.607H5.426v7.77H.066V1.131zM9.492 12.05c2.082 0 3.246-1.23 3.246-3.082 0-1.852-1.197-2.983-3.246-2.983H5.426v6.082h4.066v-.017z"})]}),(0,r.jsx)("path",{d:"M19.934 0C8.918 0 .016 8.918.016 19.918c0 8.443 5.246 15.656 12.656 18.557-.18-1.573-.328-4 .066-5.72.36-1.558 2.328-9.903 2.328-9.903s-.59-1.196-.59-2.95c0-2.77 1.606-4.836 3.606-4.836 1.705 0 2.525 1.278 2.525 2.803 0 1.705-1.082 4.262-1.656 6.64-.476 1.983 1 3.606 2.95 3.606 3.542 0 6.263-3.738 6.263-9.115 0-4.77-3.426-8.098-8.328-8.098-5.672 0-9 4.246-9 8.639 0 1.705.656 3.541 1.475 4.541.164.197.18.377.132.574-.148.623-.492 1.983-.558 2.262-.082.36-.295.443-.672.262-2.459-1.18-4-4.82-4-7.737 0-6.28 4.557-12.05 13.164-12.05 6.902 0 12.279 4.918 12.279 11.509 0 6.868-4.328 12.393-10.328 12.393-2.017 0-3.918-1.05-4.558-2.295l-1.245 4.738c-.443 1.737-1.656 3.901-2.476 5.23 1.869.573 3.836.884 5.902.884 11 0 19.918-8.918 19.918-19.918C39.852 8.918 30.934 0 19.934 0z"})]})})})})};function d({user:e}){return(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,r.jsx)(l,{}),e&&(0,r.jsx)(a,{user:e})]})}var c=i(329900),u=i(112690),h=i(698330);const p={container:{backgroundColor:"#FFE4C1"},header:{fontWeight:"normal"}};function _({titleText:e,bodyText:t,buttonText:i,deeplink:o}){const a=(0,u.Z)(),l=(0,h.Tt)();(0,n.useEffect)((()=>{a({event_type:13,view_type:3594})}),[a]);return(0,r.jsx)(s.mh,{children:(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:p.container},position:"fixed",top:!0,bottom:!0,left:!0,right:!0,height:"100%",overflow:"auto","data-test-id":"v2-story-pin-invite-landing-page",role:"dialog","aria-label":e,children:(0,r.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:"100%",children:[(0,r.jsx)(s.xu,{paddingX:5,paddingY:9,children:(0,r.jsx)(d,{user:l})}),(0,r.jsxs)(s.kC,{alignItems:"center",direction:"column",children:[(0,r.jsx)(s.xu,{marginBottom:8,maxWidth:240,children:(0,r.jsx)(s.X6,{size:"500",accessibilityLevel:1,align:"center",color:"default",children:(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:p.header},children:e})})}),(0,r.jsx)(s.xu,{maxWidth:310,marginBottom:12,children:(0,r.jsx)(s.xv,{align:"center",color:"default",children:t})}),(0,r.jsx)(c.Z,{children:e=>(0,r.jsx)(s.xu,{marginBottom:12,children:(0,r.jsx)(s.zx,{size:"lg",color:"red",text:i,onClick:()=>{a({event_type:102,view_type:3594,element:12406}),e(o,"app-upsell-story")}})})})]})]})})})}},854907:(e,t,i)=>{function n(e){const t=[];let i="";for(const n of e)if(i){const e=!!n.match(/\s/),o=!!i.match(/\s/);if(e===o)i+=n;else if(!o&&i.includes("-")){let e=0;for(let n=0;n<i.length;n+=1)"-"===i[n]&&(t.push(i.substring(e,n+1)),e=n+1);t.push(i.substring(e)),i=n}else t.push(i),i=n}else i=n;return i.length&&t.push(i),t}function o({font:e,fontSize:t,textList:i,width:o}){var s,r;if("undefined"==typeof document||!document.body||o<=0||t<=0)return[];const a=document.body,l=document.createElement("div");a.appendChild(l);const d=null!=(null===(s=e.fontOverrides)||void 0===s?void 0:s.letterSpacing)?`${e.fontOverrides.letterSpacing}px`:void 0,c=(null===(r=e.fontOverrides)||void 0===r?void 0:r.lineHeight)||1.1,u={letterSpacing:d,lineHeight:String(c),fontFamily:e.fontFamily,fontSize:`${t}px`,visibility:"hidden"};Object.assign(l.style,u);const h=document.createElement("div");h.style.display="inline",l.appendChild(h);const p=document.createTextNode("");h.appendChild(p);const _=[];let g="";const m=e=>{const t=e.trim();return p.textContent=t,{text:t,width:h.offsetWidth}},f=e=>{const t=!!e.match(/\s/),i=0===g.length;if(p.textContent=`${g}${e}`,h.offsetWidth>o)if(t)_.push(m(g)),g="";else if(i)for(const n of e)f(n);else _.push(m(g)),g="",f(e);else g+=e};for(const x of null!=i?i:[]){0===x.length&&_.push(m(g));n(x).forEach((e=>f(e))),g.length&&(_.push(m(g)),g="")}return h.remove(),l.remove(),_}function s({boxHeight:e,boxWidth:t,font:i,startFontSize:n,text:s}){var r,a;if("undefined"==typeof document||!document.body)return{fontSize:n,lines:[]};const l=document.body,d=document.createElement("div");l.appendChild(d);const c=null==s?void 0:s.split(/\r?\n/g);let u=n;const h=null!=(null===(r=i.fontOverrides)||void 0===r?void 0:r.letterSpacing)?`${i.fontOverrides.letterSpacing}px`:void 0,p=(null===(a=i.fontOverrides)||void 0===a?void 0:a.lineHeight)||1.1,_={letterSpacing:h,lineHeight:String(p),fontFamily:i.fontFamily,fontSize:`${u}px`,position:"absolute",visibility:"hidden",width:`${t}px`};Object.assign(d.style,_);const g=document.createElement("div");for(g.style.display="inline",d.appendChild(g),(null!=c?c:[]).forEach(((e,t)=>{const i=document.createElement("span");i.style.wordBreak="break-word",g.appendChild(i),i.appendChild(document.createTextNode(e)),t!==(null!=s?s:"").length-1&&i.appendChild(document.createElement("br"))}));(g.offsetHeight>e||g.offsetWidth>t)&&u>0;)u-=1,d.style.fontSize=`${u}px`;return g.remove(),d.remove(),{fontSize:u,lines:u>0?o({font:i,fontSize:u,textList:c,width:t}):[]}}i.d(t,{K:()=>s,Y:()=>n})},962047:(e,t,i)=>{i.d(t,{CP:()=>o,Iz:()=>l,K3:()=>r,Lr:()=>_,NF:()=>h,R4:()=>d,RJ:()=>g,RO:()=>c,S8:()=>a,XG:()=>p,Z0:()=>u,iS:()=>n,uK:()=>s});const n=320,o=10,s=100,r=250,a=100,l=5,d=3,c=2,u=1,h="#E60023",p=20,_=6,g={upload:228,design:226,details:437,target:432}},919974:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(898781),o=i(883119),s=i(785893);const r=function(){const e=(0,n.ZP)();return(0,s.jsx)(o.xu,{paddingX:10,width:"100%",children:(0,s.jsx)(o.xu,{color:"errorWeak",display:"flex",direction:"column",smDirection:"row",padding:7,position:"relative",rounding:4,children:(0,s.jsxs)(o.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,s.jsx)(o.xu,{flex:"none",children:(0,s.jsx)(o.JO,{accessibilityLabel:e.bt("Icona dello stato del flusso di lavoro", "Workflow status problem icon", "disablePinCreationBanner.icon.accessibilityLabel", undefined, true),color:"error",icon:"workflow-status-problem",size:32})}),(0,s.jsxs)(o.xu,{marginBottom:"auto",marginTop:"auto",paddingX:4,display:"flex",direction:"column",flex:"grow",children:[(0,s.jsx)(o.X6,{size:"400",children:e.bt("Ops!", "Oops...", "disablePinCreationBanner.icon.title", undefined, true)}),(0,s.jsx)(o.xu,{marginTop:2,children:(0,s.jsx)(o.xv,{children:e.bt("Al momento il nostro server  soggetto a brevi interruzioni di operativit. Riprova ad aggiornare la pagina e a pubblicare pi tardi.", "Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "disablePinCreationBanner.icon.message", undefined, true)})})]})]})})})}},52925:(e,t,i)=>{i.d(t,{MW:()=>c,Nq:()=>h,St:()=>d,V3:()=>m,Zy:()=>p,dz:()=>u,eE:()=>g,uq:()=>f,x5:()=>_});var n=i(16243),o=i.n(n),s=i(170168),r=i(296342),a=i(854907),l=i(962047);function d(e){return["#111111","#370052","#00205C","#01564C","#363F03","#573700","#5E031A","#97026D","#8000BD","#0045CC"][e]}function c(e,t=5){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.body&&window.document.body?new Promise((i=>{const{height:n,src:s,width:r}=e,a=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t},l=document.createElement("canvas");l.width=r,l.height=n;const d=document.createElement("img");d.onload=()=>{const e=l.getContext("2d");e.drawImage(d,0,0);const s=e.getImageData(0,0,r,n).data,c=[],u=r*n;for(let t=0;t<u;t+=10){const e=4*t;c.push([s[e],s[e+1],s[e+2]])}const h=o()(c,t).palette();l.remove(),d.remove(),i(h.map((e=>{return t=e[0],i=e[1],n=e[2],"#"+a(t)+a(i)+a(n);var t,i,n})))},d.src=s})):Promise.reject([])}function u({blockStyle:e,canvasAspectRatio:t,media:i}){if(!e)return{left:0,scale:1,top:0,transform:{rotate:0,scaleX:1,scaleY:1}};const n=r.q8/t,{height:o=100,width:s=100,x_coord:a=0,y_coord:l=0}=e;let d;return d=i.width>i.height?r.q8/i.width*(s/100):n/i.height*(o/100),{left:a?a/100*r.q8:0,scale:d,top:l?l/100*n:0,transform:{rotate:0,scaleX:1,scaleY:1}}}function h(e,t,i){const n=e.split(/\r?\n/g),o=[];let s="";const r=e=>{const t=e.trim();return{text:t,width:i.measureText(t).width}},l=e=>{const n=!!e.match(/\s/),a=0===s.length;if(i.measureText(`${s}${e}`).width>t)if(n)o.push(r(s)),s="";else if(a)for(const t of e)l(t);else o.push(r(s)),s="",l(e);else s+=e};for(const d of n){0===d.length&&o.push(r(s));(0,a.Y)(d).forEach((e=>l(e))),s.length&&(o.push(r(s)),s="")}return o}function p(e,t,i,n,o,s,r){e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+n-s,i),e.quadraticCurveTo(t+n,i,t+n,i+s),e.lineTo(t+n,i+o-s),e.quadraticCurveTo(t+n,i+o,t+n-s,i+o),e.lineTo(t+s,i+o),e.quadraticCurveTo(t,i+o,t,i+o-s),e.lineTo(t,i+s),e.quadraticCurveTo(t,i,t+s,i),e.closePath(),e.fillStyle=r,e.fill()}function _(e){return e.includes("ads-latest")||0===e.indexOf(s.vI)}function g(e,t){return e.isAuth&&e.isEmployee&&"true"===new URLSearchParams(t).get("debug")}function m(e){const{entryType:t,isDraft:i}=e;return{entry_type:t,is_draft:i}}function f(e,t){const i=e.length>l.S8,n=!e||e.length>l.S8;return t?i:n}},252570:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(296342);const o={rotate:0,scaleX:1,scaleY:1};function s({canvasAspectRatio:e,media:t}){const i=t.width/t.height,s=n.q8/e,r=e=>(s-t.height*e)/2,a=({left:e,scale:t})=>({left:e||0,scale:t,top:r(t),transform:o});if(i<e){return a({scale:n.q8/t.width})}{const e=s/t.height,i=t.width*e;return a({left:(n.q8-i)/2,scale:e})}}},296342:(e,t,i)=>{i.d(t,{Ei:()=>d,Lh:()=>p,U:()=>u,Zy:()=>a,dD:()=>s,eE:()=>l,er:()=>h,j7:()=>_,n5:()=>r,q8:()=>c,xH:()=>o});var n=i(224496);const o=1048576,s=3,r=20,a=3,l=75,d=10,c=375,u=c/n.ap,h=1200,p="#FFFFFF",_={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"}},730078:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(623320),o=i(296342),s=i(224496),r=i(170583),a=i(52925);function l({backgroundColor:e,canvasAspectRatio:t,edits:i,image:l,preservePageDimension:d,textBlocksWithFont:c,target:u}){return new Promise((h=>{const p=(0,r.Z)({canvasAspectRatio:null!=t?t:s.ap,edits:i,preservePageDimension:!!d,srcHeight:l.height,srcWidth:l.width,target:u}),_=document.createElement("canvas"),g=_.getContext("2d"),m=-1===i.transform.scaleX,f=-1===i.transform.scaleY;_.height=p.fullCanvasHeight,_.width=p.fullCanvasWidth,c&&e&&(g.beginPath(),g.rect(0,0,p.fullCanvasWidth,p.fullCanvasHeight),g.fillStyle=e,g.fill()),g.save();const x=document.createElement("img");x.onload=()=>{g.scale(i.transform.scaleX,i.transform.scaleY),g.drawImage(x,p.image.x,p.image.y,p.image.width,p.image.height,m?-1*(p.canvas.x+p.image.width):p.canvas.x,f?-1*(p.canvas.y+p.image.height):p.canvas.y,p.canvas.width,p.canvas.height),g.restore(),c&&c.forEach((e=>{var t;if(!e.style||!e.blockStyle||!e.font)return;const{font:i,text:n,blockStyle:{width:s=100,x_coord:r=0,y_coord:l=0},style:{alignment:d=0,font_size:c,hex_color:u,highlight_color:h=null}}=e,_=null!=c?c:24,m=null!=u?u:"#FFFFFF";g.font=`${_}px ${null!==(t=i.fontFamily)&&void 0!==t?t:""}`;const f=(0,a.Nq)(n,o.q8*(s/100),g);if(f.length){var x,b;const e=p.fullCanvasWidth/o.q8;g.font=`${_*e}px ${null!==(x=i.fontFamily)&&void 0!==x?x:""}`,g.textAlign=0===d?"left":"center",g.textBaseline="top";const t=0===d?r/100*o.q8*e:r/100*o.q8*e+s/100*o.q8*e/2,n=_*e*Math.max((null===(b=i.fontOverrides)||void 0===b?void 0:b.lineHeight)||1.1);let c=l/100*p.fullCanvasHeight+(n-_*e);if(h){let i=c;f.forEach((o=>{const s=_*e,r=0===d?t:t-o.width/2*e,l=.05*s,c=.2*s;o.text&&o.text.length>0&&(0,a.Zy)(g,r-c,i-l,o.width*e+2*c,s+2*l,5,h),i+=n}))}g.fillStyle=m,"#ffffff"===m.toLowerCase()&&(g.shadowColor="rgba(0, 0, 0, 0.2)",g.shadowOffsetY=1,g.shadowBlur=4),f.forEach((e=>{g.fillText(e.text,t,c),c+=n}))}}));const e=_.toDataURL();h({height:_.height,id:l.id,name:l.name,size:(0,n.Mi)(e).size,src:e,type:"localImage",width:_.width})},x.src=l.src}))}},170583:(e,t,i)=>{i.d(t,{D:()=>o,Z:()=>s});var n=i(296342);const o=Object.freeze({CLOSEUP:"closeup",EXPRESSIVE_RENDER:"expressive-render",IMAGE_SIGNATURE:"image-signature",THUMBNAIL:"thumbnail"});function s({canvasAspectRatio:e,edits:t,preservePageDimension:i,srcHeight:s,srcWidth:r,target:a}){const l=a===o.THUMBNAIL,d=n.q8/e,{left:c,scale:u,top:h}=t,p=c<0?Math.min(r*u+c,n.q8):Math.min(n.q8-c,r*u),_=h<0?Math.min(s*u+h,d):Math.min(d-h,s*u),g=p/(r*u),m=_/(s*u),{fullCanvasHeight:f,fullCanvasWidth:x}=l?{fullCanvasHeight:d,fullCanvasWidth:n.q8}:function({imageDisplayHeightPercent:e,imageDisplayWidthPercent:t,preservePageDimension:i,scale:o,srcHeight:s,srcWidth:r}){const a=i?Math.max(n.q8/o,n.q8):t*r;return{fullCanvasHeight:i?Math.max(n.U/o,n.U):e*s,fullCanvasWidth:a}}({imageDisplayHeightPercent:m,imageDisplayWidthPercent:g,preservePageDimension:i,scale:u,srcHeight:s,srcWidth:r}),b=p/n.q8,y=i?b*x:g*r,v=i?_/d*f:m*s,{canvasScale:P,fullCanvasHeight:w,fullCanvasWidth:I}=l?{canvasScale:1,fullCanvasHeight:n.q8/e,fullCanvasWidth:n.q8}:function({fullCanvasWidth:e,fullCanvasHeight:t}){let i=1;return(e<n.eE||t<n.eE)&&(e*i<n.eE&&(i=n.eE/e),t*i<n.eE&&(i=n.eE/t)),{canvasScale:i,fullCanvasHeight:t*i,fullCanvasWidth:e*i}}({fullCanvasWidth:x,fullCanvasHeight:f}),A=e=>(l?e:e/u)*P;return{fullCanvasHeight:w*P,fullCanvasWidth:I*P,canvas:{height:v*P,width:y*P,x:c<0||!i?0:A(c),y:h<0||!i?0:A(h)},image:{height:m*s,width:g*r,x:c<0?Math.abs(c)/u:0,y:h<0?Math.abs(h)/u:0}}}},147693:(e,t,i)=>{i.d(t,{uJ:()=>a,ng:()=>d,Zn:()=>c});var n=i(665866),o=i(296342),s=i(224496);function r({canvasAspectRatio:e,isDraft:t,storyPinBlocks:i}){const n=[],r=i=>{var n,r;const a=(null===(n=i.media)||void 0===n?void 0:n.height)||0,l=(null===(r=i.media)||void 0===r?void 0:r.width)||0;return function({canvasAspectRatio:e,edits:t,srcHeight:i,srcWidth:n,displayHeight:r,keepSrcDimensions:a}){const l=t.left<0&&!a?0:t.left,d=t.top<0&&!a?0:t.top;let c,u;a?(c=n*t.scale,u=i*t.scale):(c=t.left<0?Math.min(n*t.scale+t.left,o.q8):Math.min(o.q8-t.left,n*t.scale),u=t.top<0?Math.min(i*t.scale+t.top,r):Math.min(r-t.top,i*t.scale));const h=o.q8/(e||s.ap);return{height:u/h*100,width:c/o.q8*100,x_coord:l/o.q8*100,y_coord:d/h*100}}({canvasAspectRatio:e,edits:i.edits,srcHeight:a,srcWidth:l,displayHeight:o.q8/(e||s.ap),keepSrcDimensions:t})};return i.forEach((e=>{var i,o,s,a,l;switch(e.type){case"story_pin_image_block":const u=t?null===(i=e.media)||void 0===i?void 0:i.signature:(null===(o=e.media)||void 0===o?void 0:o.signatureEdited)||(null===(s=e.media)||void 0===s?void 0:s.signature);var d;if(u)n.push({block_style:r(e),image_signature:u,tracking_id:"localImage"===(null===(d=e.media)||void 0===d?void 0:d.type)?e.media.uploadId:void 0,type:2});break;case"story_pin_video_block":const h=(null===(a=e.media)||void 0===a?void 0:a.signatureEdited)||(null===(l=e.media)||void 0===l?void 0:l.signature);var c;if(h)n.push({block_style:r(e),tracking_id:"localVideo"===(null===(c=e.media)||void 0===c?void 0:c.type)?e.media.uploadId:void 0,video_signature:h,type:3});break;case"story_pin_paragraph_block":(t||e.text)&&n.push({block_style:e.blockStyle,style:{...e.style,vertical_alignment:0},text:e.text,type:0});break;case"story_pin_heading_block":(t||e.text)&&n.push({block_style:e.blockStyle,style:{...e.style,vertical_alignment:0},text:e.text,type:1})}})),n}function a({canvasAspectRatio:e,storyPinItem:t,storyPinItemBlocks:i}){const{layout:n}=t;return null!=n?{blocks:r({canvasAspectRatio:e,isDraft:!0,storyPinBlocks:i}),layout:n,style:{background_color:t.backgroundColor}}:null}function l(e){return n.Z.enabled("multipageDeprecationBackendSignals")?e.filter((e=>["story_pin_image_block","story_pin_video_block"].includes(e.type))).map((e=>{var t,i;const n=(null===(t=e.media)||void 0===t?void 0:t.height)||0,o=(null===(i=e.media)||void 0===i?void 0:i.width)||0;return function({clipType:e,srcHeight:t,srcWidth:i}){return{clip_type:e,end_time_ms:-1,is_converted_from_image:!1,source_media_height:Math.round(t),source_media_width:Math.round(i),start_time_ms:-1}}({clipType:"story_pin_image_block"===e.type?0:1,srcHeight:n,srcWidth:o})})):null}function d({canvasAspectRatio:e,index:t,storyPinItem:i,storyPinItemBlocks:n}){const{layout:o}=i;if(n&&n.length&&null!=o){const s=r({canvasAspectRatio:e,isDraft:!1,storyPinBlocks:n}),a=l(n);return{blocks:s,...null!=a&&a.length?{clips:a}:{},layout:0===t?0:o,style:{background_color:i.backgroundColor}}}return null}function c(e,t){return e.filter((e=>"story_pin_paragraph_block"===e.type)).map((e=>({...e,font:t.find((t=>{var i;return t.id===String(null===(i=e.style)||void 0===i?void 0:i.font_id)}))||t[0]})))}},201155:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(883119),o=i(785893);function s({ideaPinImages:e}){const t={1:28,2:40,3:48},i=e.map(((e,t)=>{var i,s,r;return(0,o.jsx)(n.xu,{height:48,width:28,color:"default",borderStyle:"sm",overflow:"hidden",rounding:2,dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:t}},children:(0,o.jsx)(n.Ee,{alt:"",src:null!==(i=null==e?void 0:e.url)&&void 0!==i?i:"",color:"#696969",fit:"cover",naturalHeight:null!==(s=null==e?void 0:e.height)&&void 0!==s?s:1,naturalWidth:null!==(r=null==e?void 0:e.width)&&void 0!==r?r:1})},t)}));return(0,o.jsx)(n.kC,{justifyContent:"center",children:(0,o.jsx)(n.kC,{justifyContent:"start",width:t[e.length],children:i})})}var r=i(499128),a=i(898781),l=i(784590),d=i(50286);function c({handleHide:e,text:t,userId:i,href:c,imageUrl:u}){const h=(0,a.ZP)(),p=(0,d.HG)(),_=(0,l.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:i}}),g=Array.isArray(t)?t.join(" "):t;if(0===(_.data||[]).length)return(0,o.jsx)(r.ZP,{duration:5e3,onHide:e,text:g,href:c,thumbnail:u?{image:(0,o.jsx)(n.Ee,{alt:h.bt("Immagine di chi hai seguito", "Image of who you followed", "userFollowingToast.thumbnail.userImage", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:u})}:void 0});const m=(_.data||[]).slice(0,3).map((e=>{var t;return null===(t=e.images)||void 0===t?void 0:t[p?"236x":"170x"]})),f=(0,o.jsx)(s,{ideaPinImages:m});return(0,o.jsx)(r.ZP,{href:c,duration:5e3,onHide:e,_dangerouslySetThumbnail:f,text:g})}},109892:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(702664),o=i(214494),s=i(332611),r=i(886858),a=i(248327),l=i(414327),d=i(782677);function c(){const e=(0,n.useDispatch)(),t=(0,n.useSelector)((e=>e.resources));return async function({boardCreateOptions:i,deprecatedSchemaForNormalization:n}){var c,u;const h=await o.Z.create("BoardResource",i).callCreate(),p=null===(c=h.resource_response)||void 0===c?void 0:c.data,_=n?(0,d.Fv)(p,n):void 0;e((0,l.XM)("BoardResource",i,h,_)),e((0,s.fO)({event_type:20})),null!==(u=p.owner)&&void 0!==u&&u.id&&e((0,a.b)("UserResource",{options:{user_id:p.owner.id,field_set_key:"save_behavior"}}));const g=t.BoardsResource||{},m=t.BoardsFeedResource||{};return Object.keys(g).forEach((t=>{var i;(0,r.k)(t).username===(null===(i=p.owner)||void 0===i?void 0:i.username)&&e((0,l.jB)("BoardsResource",t))})),Object.keys(m).forEach((t=>{var i;(0,r.k)(t).username===(null===(i=p.owner)||void 0===i?void 0:i.username)&&e((0,l.jB)("BoardsFeedResource",t))})),p}}},152028:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(81226),o=i(898781),s=i(883119),r=i(785893);function a({duration:e}){const t=(0,o.ZP)();return(0,r.jsxs)(s.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,r.jsx)(s.JO,{accessibilityLabel:t.bt("Icona videocamera", "Video camera icon", "Video camera indicator icon for a Pin", undefined, true),color:"light",icon:"video-camera"}),(0,r.jsx)(s.xu,{marginStart:1,children:(0,r.jsx)(s.xv,{color:"inverse",size:"100",lineClamp:1,children:(0,n.Z)(e)})})]})}},216834:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(310147).Z},76510:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(310147).Z},705064:(e,t,i)=>{i.d(t,{wH:()=>o,MM:()=>s,uo:()=>r});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("HandlerId");function r(){return function(e){const[t,i]=e.split(/\/(.*)+/);return{filepath:i,site:t}}(s()).site}},373897:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports},163405:(e,t,i)=>{var n=i(373897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},474704:(e,t,i)=>{var n=i(386116);e.exports=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,s=function(){};return{s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw r}}}},e.exports.__esModule=!0,e.exports.default=e.exports},238416:e=>{e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},564836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},379498:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},742281:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},242122:(e,t,i)=>{var n=i(238416);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}e.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},600861:(e,t,i)=>{var n=i(163405),o=i(379498),s=i(386116),r=i(742281);e.exports=function(e){return n(e)||o(e)||s(e)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},386116:(e,t,i)=>{var n=i(373897);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},497326:(e,t,i)=>{function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,{Z:()=>n})},487462:(e,t,i)=>{function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}i.d(t,{Z:()=>n})},875068:(e,t,i)=>{function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}i.d(t,{Z:()=>o})},172875:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}i.d(t,{Z:()=>s})},263366:(e,t,i)=>{function n(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}i.d(t,{Z:()=>n})}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,67631,35074,16550,26067,31551,6284,35303,42298,73878,87072,50040,54176,27405,99961,76030,31583,23468,39342,57009,10966,81164],(()=>(t(61746),t(367677))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/idea-pin-builder.it-3558ec36a93f8072.mjs.map